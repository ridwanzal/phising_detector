!function(e){"use strict";e.Requireify={_registry:{},_debug:{messages:[]},_lastRegistered:"",_bind:function(e,i,s){return function(r){return e.call(i,r,s)}},_normalize:function(e,i){var s=e.split("/"),r=i.split("/"),t=r.slice(0,-1),n=0,o=[];for(n=0;n<s.length;n++)"."===s[n]?o=t:".."===s[n]?(t.pop(),o=t):o.push(s[n]);return o=o.join("/"),".js"!==o.slice(-3)&&".jsx"!==o.slice(-4)&&".dust"!==o.slice(-5)&&(o+=".js"),o},register:function(e,i){var s,r=this._registry,t=this._debug.messages;if("function"==typeof i){if(r[e])return s="[nf-requireify] Module "+e+" already loaded, skipping!",console&&console.log&&console.log(s),void t.push({msg:s});r[e]={invoke:i}}this._lastRegistered=e},require:function(i,s){var r,t=this._registry,n=this._debug,o=i;return(i.indexOf("./")>-1||i.indexOf("../")>-1)&&(o=this._normalize(i,s)),t[o]?(t[o].exports||(r={exports:{}},t[o].invoke.apply(e,[this._bind(this.require,this,o),this.requireAsync,r,r.exports]),t[o].exports=r.exports),t[o].exports):(n.messages.push({msg:"[nf-requireify] MODULE NOT FOUND!",module:o,requiredBy:s,loader:"nf-requireify"}),{stub:!0})},requireAsync:function(){},kickoff:function(e){var i;if(e){if("string"==typeof e)this.require(e);else if(e instanceof Array)for(i=0;i<e.length;i++)this.require(e[i])}else""!==this._lastRegistered&&this.require(this._lastRegistered)}}}(window);
Requireify.register("nf-rx",function(t,e,n,r){!function(t){if("object"==typeof r&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.nfRx=t()}}(function(){return function e(n,r,o){function i(u,c){if(!r[u]){if(!n[u]){var a="function"==typeof t&&t;if(!c&&a)return a(u,!0);if(s)return s(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[u]={exports:{}};n[u][0].call(l.exports,function(t){var e=n[u][1][t];return i(e?e:t)},l,l.exports,e,n,r,o)}return r[u].exports}for(var s="function"==typeof t&&t,u=0;u<o.length;u++)i(o[u]);return i}({1:[function(t,e,n){"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)e.push(n);return e}),Array.prototype.filter||(Array.prototype.filter=function(t){var e,n,r,o=[];for(e=0,n=this.length;n>e;e++)r=this[e],t(r)&&o.push(r);return o}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var e,n,r;for(e=0,n=this.length;n>e;e++)r=this[e],t(r)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e,n;for(e=0,n=this.length;n>e;e++)if(t===this[e])return e;return-1}),function(t,e){var n,r=function(){},o=function(){return(new Date).getTime()},i=function(t,e){return t===e},s=function(t){return t},u=function(t){return t.toString()},c=Object.prototype.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)"prototype"!==r&&c.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.base=e.prototype,t},f=function(t,e){for(var n in e)"prototype"!==n&&c.call(e,n)&&(t[n]=e[n])},l=Array.prototype.slice,h="Argument out of range",p="Object has been disposed";n=t.Rx={Internals:{}},n.VERSION="2.0.20327";var b=function(t,e){return function(){return t[e].apply(t,arguments)}},d=function(t,e){return xt(function(n){return new N(e.getDisposable(),t.subscribe(n))})},v=function(t,e,n){return xt(function(r){var o=new R,i=new R,s=n(r,o,i);return o.disposable(t.materialize().select(function(t){return{switchValue:function(e){return e(t)}}}).subscribe(s)),i.disposable(e.materialize().select(function(t){return{switchValue:function(e,n){return n(t)}}}).subscribe(s)),new N(o,i)})},m=function(t){for(var e=new Object(this),n=0,r=e.length>>>0;r>n;n++)if(!t.call(arguments[1],e[n],n,e))return!1;return!0},y=function(t){for(var e,n=[],r=new Object(this),o=0,i=r.length>>>0;i>o;o++)e=r[o],t.call(arguments[1],e,o,r)&&n.push(e);return n},w=function(t){for(var e=[],n=new Object(this),r=0,o=n.length>>>0;o>r;r++)e.push(t.call(arguments[1],n[r],r,n));return e},E=function(t,e){return 1===t.length&&t[e]instanceof Array?t[e]:l.call(t)},x=n.Internals.List=function(){function t(t){this.comparer=t||i,this.length=0,this.items=[]}return t.fromArray=function(e,n){var r=new t(n);return r.items=e.slice(),r.length=e.length,r},t.prototype.add=function(t){this.items[this.length++]=t},t.prototype.removeAt=function(t){if(0>t||t>=this.length)throw new Error(h);this.items.splice(t,1),this.length--},t.prototype.indexOf=function(t){for(var e=0,n=this.items.length;n>e;e++)if(this.comparer(t,this.items[e]))return e;return-1},t.prototype.remove=function(t){var e=this.indexOf(t);return-1===e?!1:(this.removeAt(e),!0)},t.prototype.clear=function(){this.items=[],this.length=0},t.prototype.item=function(t,n){if(0>t||t>=count)throw new Error(h);return n===e?this.items[t]:void(this.items[t]=n)},t.prototype.toArray=function(){return this.items.slice(0)},t.prototype.contains=function(t){for(var e=0,n=this.items.length;n>e;e++)if(this.comparer(t,this.items[e]))return!0;return!1},t}(),g=function(t,e,n,r,o){for(var i=o;i>0;)n[i+r-1]=t[i+e-1],i--},C=function(){function t(t,e){this.id=t,this.value=e}return t.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e},t}(),O=function(){function t(t){this.items=new Array(t),this.length=0}return t.prototype.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},t.prototype.percolate=function(t){var e,n;t>=this.length||0>t||(e=t-1>>1,0>e||e===t||this.isHigherPriority(t,e)&&(n=this.items[t],this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)))},t.prototype.heapify=function(t){var n,r,o,i;t===e&&(t=0),t>=this.length||0>t||(r=2*t+1,o=2*t+2,n=t,r<this.length&&this.isHigherPriority(r,n)&&(n=r),o<this.length&&this.isHigherPriority(o,n)&&(n=o),n!==t&&(i=this.items[t],this.items[t]=this.items[n],this.items[n]=i,this.heapify(n)))},t.prototype.peek=function(){return this.items[0].value},t.prototype.removeAt=function(t){var e;this.items[t]=this.items[--this.length],delete this.items[this.length],this.heapify(),this.length<this.items.length>>2&&(e=this.items,this.items=new Array(this.items.length>>1),g(e,0,this.items,0,this.length))},t.prototype.dequeue=function(){var t=this.peek();return this.removeAt(0),t},t.prototype.enqueue=function(e){var n,r;this.length>=this.items.length&&(r=this.items,this.items=new Array(2*this.items.length),g(r,0,this.items,0,r.length)),n=this.length++,this.items[n]=new C(t.count++,e),this.percolate(n)},t.prototype.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},t.count=0,t}(),N=n.CompositeDisposable=function(){function t(){var t=E(arguments,0);this.disposables=x.fromArray(t),this.isDisposed=!1,this.length=this.disposables.length}return t.prototype.add=function(t){this.isDisposed?t.dispose():(this.disposables.add(t),this.length++)},t.prototype.remove=function(t){var e=!1;return this.isDisposed||(e=this.disposables.remove(t),this.length--),e&&t.dispose(),e},t.prototype.dispose=function(){var t;if(this.isDisposed||(this.isDisposed=!0,t=this.disposables.toArray(),this.disposables.clear(),this.length=0),t)for(var e=0,n=t.length;n>e;e++)t[e].dispose()},t.prototype.clear=function(){var t=this.disposables.toArray();this.disposables.clear(),this.length=0;for(var e=0,n=t.length;n>e;e++)t[e].dispose()},t.prototype.contains=function(t){return this.disposables.contains(t)},t.prototype.toArray=function(){return this.disposables.toArray()},t}(),A=n.Disposable=function(){function t(t){this.isDisposed=!1,this.action=t}return t.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},t}(),D=A.create=function(t){return new A(t)},S=A.empty=new A(function(){}),R=n.SingleAssignmentDisposable=function(){function t(){this.isDisposed=!1,this.current=null}return t.prototype.disposable=function(t){return t?this.setDisposable(t):this.getDisposable()},t.prototype.getDisposable=function(){return this.current},t.prototype.setDisposable=function(t){if(null!==this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;e||(this.current=t),e&&null!==t&&t.dispose()},t.prototype.dispose=function(){var t=null;this.isDisposed||(this.isDisposed=!0,t=this.current,this.current=null),null!==t&&t.dispose()},t}(),W=n.SerialDisposable=function(){function t(){this.isDisposed=!1,this.current=null}return t.prototype.getDisposable=function(){return this.current},t.prototype.setDisposable=function(t){var e=this.isDisposed,n=null;e||(n=this.current,this.current=t),null!==n&&n.dispose(),e&&null!==t&&t.dispose()},t.prototype.disposable=function(t){return t?void this.setDisposable(t):this.getDisposable()},t.prototype.dispose=function(){var t=null;this.isDisposed||(this.isDisposed=!0,t=this.current,this.current=null),null!==t&&t.dispose()},t}(),_=n.RefCountDisposable=function(){function t(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?S:new e(this)};var e=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t}();return t}(),q=function(){function t(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}return t.prototype.dispose=function(){var t=this;this.scheduler.schedule(function(){t.isDisposed||(t.isDisposed=!0,t.disposable.dispose())})},t}(),k=function(){function t(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||function(t,e){return t-e},this.disposable=new R}return t.prototype.invoke=function(){return this.disposable.disposable(this.invokeCore())},t.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},t.prototype.isCancelled=function(){return this.disposable.isDisposed},t.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)},t}(),j=n.Scheduler=function(){function t(t,e,n,r){this.now=t,this._schedule=e,this._scheduleRelative=n,this._scheduleAbsolute=r}var e=function(t,e){var n=e.first,r=e.second,o=new N,i=function(e){r(e,function(e){var n=!1,r=!1,s=t.scheduleWithState(e,function(t,e){return n?o.remove(s):r=!0,i(e),S});r||(o.add(s),n=!0)})};return i(n),o},n=function(t,e){var n=e.first,r=e.second,o=new N,i=function(e){r(e,function(e,n){var r,s,u;s=!1,u=!1,r=t.scheduleWithRelativeAndState(e,n,function(t,e){return s?o.remove(r):u=!0,i(e),S}),u||(o.add(r),s=!0)})};return i(n),o},r=function(t,e){var n=e.first,r=e.second,o=new N,i=function(e){r(e,function(e,n){var r=!1,s=!1,u=t.scheduleWithAbsoluteAndState(e,n,function(t,e){return r?o.remove(u):s=!0,i(e),S});s||(o.add(u),r=!0)})};return i(n),o},i=function(t,e){return e(),S};return t.prototype.schedule=function(t){return this._schedule(t,i)},t.prototype.scheduleWithState=function(t,e){return this._schedule(t,e)},t.prototype.scheduleWithRelative=function(t,e){return this._scheduleRelative(e,t,i)},t.prototype.scheduleWithRelativeAndState=function(t,e,n){return this._scheduleRelative(t,e,n)},t.prototype.scheduleWithAbsolute=function(t,e){return this._scheduleAbsolute(e,t,i)},t.prototype.scheduleWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute(t,e,n)},t.prototype.scheduleRecursive=function(t){return this.scheduleRecursiveWithState(t,function(t,e){t(function(){e(t)})})},t.prototype.scheduleRecursiveWithState=function(t,n){return this.scheduleWithState({first:t,second:n},function(t,n){return e(t,n)})},t.prototype.scheduleRecursiveWithRelative=function(t,e){return this.scheduleRecursiveWithRelativeAndState(e,t,function(t,e){t(function(n){e(t,n)})})},t.prototype.scheduleRecursiveWithRelativeAndState=function(t,e,r){return this._scheduleRelative({first:t,second:r},e,function(t,e){return n(t,e)})},t.prototype.scheduleRecursiveWithAbsolute=function(t,e){return this.scheduleRecursiveWithAbsoluteAndState(e,t,function(t,e){t(function(n){e(t,n)})})},t.prototype.scheduleRecursiveWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute({first:t,second:n},e,function(t,e){return r(t,e)})},t.now=o,t.normalize=function(t){return 0>t&&(t=0),t},t}(),T=function(){function t(){var e=this;t.base.constructor.call(this,o,function(t,n){return n(e,t)},function(t,n,r){for(;j.normalize(n)>0;);return r(e,t)},function(t,n,r){return e.scheduleWithRelativeAndState(t,n-e.now(),r)})}return a(t,j),t}(),V=j.Immediate=new T,L=function(){function t(){F.queue=new O(4)}return t.prototype.dispose=function(){F.queue=null},t.prototype.run=function(){for(var t,e=F.queue;e.length>0;)if(t=e.dequeue(),!t.isCancelled()){for(;t.dueTime-j.now()>0;);t.isCancelled()||t.invoke()}},t}(),F=function(){function t(){var e=this;t.base.constructor.call(this,o,function(t,n){return e.scheduleWithRelativeAndState(t,0,n)},function(n,r,o){var i,s=e.now()+j.normalize(r),u=t.queue,c=new k(e,n,o,s);if(null===u){i=new L;try{t.queue.enqueue(c),i.run()}finally{i.dispose()}}else u.enqueue(c);return c.disposable},function(t,n,r){return e.scheduleWithRelativeAndState(t,n-e.now(),r)})}return a(t,j),t.prototype.scheduleRequired=function(){return null===t.queue},t.prototype.ensureTrampoline=function(t){return this.scheduleRequired()?this.schedule(t):t()},t.queue=null,t}(),z=j.CurrentThread=new F;n.VirtualTimeScheduler=function(){function t(e,n){var r=this;this.clock=e,this.comparer=n,this.isEnabled=!1,t.base.constructor.call(this,function(){return r.toDateTimeOffset(r.clock)},function(t,e){return r.scheduleAbsolute(t,r.clock,e)},function(t,e,n){return r.scheduleRelative(t,r.toRelative(e),n)},function(t,e,n){return r.scheduleRelative(t,r.toRelative(e-r.now()),n)}),this.queue=new O(1024)}return a(t,j),t.prototype.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},t.prototype.start=function(){var t;if(!this.isEnabled){this.isEnabled=!0;do t=this.getNext(),null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1;while(this.isEnabled)}},t.prototype.stop=function(){return this.isEnabled=!1},t.prototype.advanceTo=function(t){var e;if(this.comparer(this.clock,t)>=0)throw new Error(h);if(!this.isEnabled){this.isEnabled=!0;do e=this.getNext(),null!==e&&this.comparer(e.dueTime,t)<=0?(this.comparer(e.dueTime,this.clock)>0&&(this.clock=e.dueTime),e.invoke()):this.isEnabled=!1;while(this.isEnabled);return this.clock=t}},t.prototype.advanceBy=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new Error(h);return this.advanceTo(e)},t.prototype.getNext=function(){for(var t;this.queue.length>0;){if(t=this.queue.peek(),!t.isCancelled())return t;this.queue.dequeue()}return null},t.prototype.scheduleAbsolute=function(t,e,n){var r=this,o=function(t,e){return r.queue.remove(i),n(t,e)},i=new k(r,t,o,e,r.comparer);return r.queue.enqueue(i),i.disposable},t}();var I=function(){function e(n){var r=this;e.base.constructor.call(this,o,function(e,o){var i=new R,s=t.setTimeout(function(){i.setDisposable(o(r,e))},n||0);return new N(i,D(function(){t.clearTimeout(s)}))},function(e,n,o){var i=new R,s=j.normalize(n),u=t.setTimeout(function(){i.setDisposable(o(r,e))},s);return new N(i,D(function(){t.clearTimeout(u)}))},function(t,e,n){return r.scheduleWithRelativeAndState(t,e-r.now(),n)})}return a(e,j),e}(),M=j.Timeout=new I;n.TimeoutScheduler=I;var U=n.Notification=function(){function t(){}return t.prototype.accept=function(t,e,n){return arguments.length>1||"function"==typeof t?this._accept(t,e,n):this._acceptObservable(t)},t.prototype.toObservable=function(t){var e=this;return t=t||j.Immediate,xt(function(n){return t.schedule(function(){e._acceptObservable(n),"N"===e.kind&&n.onCompleted()})})},t.prototype.hasValue=!1,t.prototype.equals=function(t){var n=t===e||null===t?"":t.toString();return this.toString()===n},t}();U.createOnNext=function(t){var e=new U;return e.value=t,e.hasValue=!0,e.kind="N",e._accept=function(t){return t(this.value)},e._acceptObservable=function(t){return t.onNext(this.value)},e.toString=function(){return"OnNext("+this.value+")"},e},U.createOnError=function(t){var e=new U;return e.exception=t,e.kind="E",e._accept=function(t,e){return e(this.exception)},e._acceptObservable=function(t){return t.onError(this.exception)},e.toString=function(){return"OnError("+this.exception+")"},e},U.createOnCompleted=function(){var t=new U;return t.kind="C",t._accept=function(t,e,n){return n()},t._acceptObservable=function(t){return t.onCompleted()},t.toString=function(){return"OnCompleted()"},t};var B=n.Internals.Enumerator=function(t,e,n){this.moveNext=t,this.getCurrent=e,this.dispose=n},P=B.create=function(t,e,n){var o=!1;return n||(n=r),new B(function(){if(o)return!1;var e=t();return e||(o=!0,n()),e},function(){return e()},function(){o||(n(),o=!0)})},H=n.Internals.Enumerable=function(t){this.getEnumerator=t},X=H.prototype;X.concat=function(){var t=this;return xt(function(e){var n,r=t.getEnumerator(),o=!1,i=new W;return n=V.scheduleRecursive(function(t){var n,s,u,c=!1;if(!o){try{c=r.moveNext(),c?n=r.getCurrent():r.dispose()}catch(a){u=a,r.dispose()}if(u)return void e.onError(u);if(!c)return void e.onCompleted();s=new R,i.disposable(s),s.disposable(n.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},function(){t()}))}}),new N(i,n,D(function(){o=!0,r.dispose()}))})},X.catchException=function(){var t=this;return xt(function(e){var n,r,o,i=t.getEnumerator(),s=!1;return r=new W,n=V.scheduleRecursive(function(t){var n,u,c,a;if(a=!1,!s){try{a=i.moveNext(),a&&(n=i.getCurrent())}catch(f){c=f}if(c)return void e.onError(c);if(!a)return void(o?e.onError(o):e.onCompleted());u=new R,r.disposable(u),u.disposable(n.subscribe(function(t){e.onNext(t)},function(e){o=e,t()},function(){e.onCompleted()}))}}),new N(r,n,D(function(){s=!0}))})};var J=H.repeat=function(t,n){return n===e&&(n=-1),new H(function(){var e,r=n;return P(function(){return 0===r?!1:(r>0&&r--,e=t,!0)},function(){return e})})},G=H.forEach=function(t,e){return e||(e=s),new H(function(){var n,r=-1;return P(function(){return++r<t.length?(n=e(t[r],r),!0):!1},function(){return n})})},K=n.Observer=function(){},Q=n.Internals.AbstractObserver=function(){function t(){this.isStopped=!1}return a(t,K),t.prototype.onNext=function(t){this.isStopped||this.next(t)},t.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t}(),Y=function(){function t(e,n,r){t.base.constructor.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return a(t,Q),t.prototype.next=function(t){this._onNext(t)},t.prototype.error=function(t){this._onError(t)},t.prototype.completed=function(){this._onCompleted()},t}(),Z=n.Internals.BinaryObserver=function(){function t(t,e){"function"==typeof t&&"function"==typeof e?(this.leftObserver=et(t),this.rightObserver=et(e)):(this.leftObserver=t,this.rightObserver=e)}return a(t,K),t.prototype.onNext=function(t){var e=this;return t.switchValue(function(t){return t.accept(e.leftObserver)},function(t){return t.accept(e.rightObserver)})},t.prototype.onError=function(){},t.prototype.onCompleted=function(){},t}(),$=function(){function t(t,e){this.scheduler=t,this.observer=e,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new W}return a(t,Q),t.prototype.ensureActive=function(){var t=!1,e=this;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.disposable(this.scheduler.scheduleRecursive(function(t){var n;if(!(e.queue.length>0))return void(e.isAcquired=!1);n=e.queue.shift();try{n()}catch(r){throw e.queue=[],e.hasFaulted=!0,r}t()}))},t.prototype.next=function(t){var e=this;this.queue.push(function(){e.observer.onNext(t)})},t.prototype.error=function(t){var e=this;this.queue.push(function(){e.observer.onError(t)})},t.prototype.completed=function(){var t=this;this.queue.push(function(){t.observer.onCompleted()})},t.prototype.dispose=function(){t.base.dispose.call(this),this.disposable.dispose()},t}(),tt=K.create=function(t,e,n){return t||(t=r),e||(e=function(t){throw t}),n||(n=r),new Y(t,e,n)},et=(K.fromNotifier=function(t){return new Y(function(e){return t(U.createOnNext(e))},function(e){return t(U.createOnError(e))},function(){return t(U.createOnCompleted())})},function(t){return new Y(function(e){t(U.createOnNext(e))},function(e){t(U.createOnError(e))},function(){t(U.createOnCompleted())})});K.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},K.prototype.asObserver=function(){var t=this;return new Y(function(e){return t.onNext(e)},function(e){return t.onError(e)},function(){return t.onCompleted()})};var nt=n.Observable=function(){function t(){}return t.prototype.subscribe=function(t,e,n){var r;return r=0===arguments.length||arguments.length>1||"function"==typeof t?tt(t,e,n):t,this._subscribe(r)},t}(),rt=nt.prototype,ot=function(){function t(e){t.base.constructor.call(this),this._subscribe=function(t){var n=new it(t);return z.scheduleRequired()?z.schedule(function(){n.disposable(e(n))}):n.disposable(e(n)),n}}return a(t,nt),t.prototype._subscribe=function(t){return this._subscribe(t)},t}(),it=function(){function t(e){t.base.constructor.call(this),this.observer=e,this.m=new R}return a(t,Q),t.prototype.disposable=function(t){return this.m.disposable(t)},t.prototype.next=function(t){this.observer.onNext(t)},t.prototype.error=function(t){this.observer.onError(t),this.m.dispose()},t.prototype.completed=function(){this.observer.onCompleted(),this.m.dispose()},t.prototype.dispose=function(){t.base.dispose.call(this),this.m.dispose()},t}(),st=function(){function t(e,n,r){t.base.constructor.call(this),this.key=e,this.underlyingObservable=r?xt(function(t){return new N(r.getDisposable(),n.subscribe(t))}):n}return a(t,nt),t.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},t}(),ut=n.ConnectableObservable=function(){function t(t,e){var n={subject:e,source:t.asObservable(),hasSubscription:!1,subscription:null};this.connect=function(){return n.hasSubscription||(n.hasSubscription=!0,n.subscription=new N(n.source.subscribe(n.subject),D(function(){n.hasSubscription=!1}))),n.subscription},this._subscribe=function(t){return n.subject.subscribe(t)}}return a(t,nt),t.prototype.connect=function(){return this.connect()},t.prototype.refCount=function(){var t=null,e=0,n=this;return xt(function(r){var o,i;return e++,o=1===e,i=n.subscribe(r),o&&(t=n.connect()),D(function(){i.dispose(),e--,0===e&&t.dispose()})})},t.prototype._subscribe=function(t){return this._subscribe(t)},t}(),ct=function(){function t(t,e){this.subject=t,this.observer=e}return t.prototype.dispose=function(){this.subject.isDisposed||null===this.observer||(this.subject.observers.remove(this.observer),this.observer=null)},t}(),at=n.Subject=function(){function t(){t.base.constructor.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=new x}a(t,nt),f(t,K);var e=function(){if(this.isDisposed)throw new Error(p)};return t.prototype.onCompleted=function(){var t;if(e.call(this),this.isStopped||(t=this.observers.toArray(),this.observers=new x,this.isStopped=!0),t)for(var n=0,r=t.length;r>n;n++)t[n].onCompleted()},t.prototype.onError=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new x,this.isStopped=!0,this.exception=t),n)for(var r=0,o=n.length;o>r;r++)n[r].onError(t)},t.prototype.onNext=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray()),n)for(var r=0,o=n.length;o>r;r++)n[r].onNext(t)},t.prototype._subscribe=function(t){return e.call(this),this.isStopped?this.exception?(t.onError(this.exception),S):(t.onCompleted(),S):(this.observers.add(t),new ct(this,t))},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null},t.create=function(t,e){return new pt(t,e)},t}(),ft=n.AsyncSubject=function(){function t(){t.base.constructor.call(this),this.isDisposed=!1,this.isStopped=!1,this.value=null,this.hasValue=!1,this.observers=new x,this.exception=null}a(t,nt),f(t,K);var e=function(){if(this.isDisposed)throw new Error(p)};return t.prototype.onCompleted=function(){var t,n,r,o,i,s=!1;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new x,this.isStopped=!0,r=this.value,s=this.hasValue),n)if(s)for(o=0,i=n.length;i>o;o++)t=n[o],t.onNext(r),t.onCompleted();else for(o=0,i=n.length;i>o;o++)n[o].onCompleted()},t.prototype.onError=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new x,this.isStopped=!0,this.exception=t),n)for(var r=0,o=n.length;o>r;r++)n[r].onError(t)},t.prototype.onNext=function(t){e.call(this),this.isStopped||(this.value=t,this.hasValue=!0)},t.prototype._subscribe=function(t){var n,r,o;return e.call(this),this.isStopped?(n=this.exception,r=this.hasValue,o=this.value,n?t.onError(n):r?(t.onNext(o),t.onCompleted()):t.onCompleted(),S):(this.observers.add(t),new ct(this,t))},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null},t}(),lt=n.BehaviorSubject=function(){function t(e){t.base.constructor.call(this),this.value=e,this.observers=new x,this.isDisposed=!1,this.isStopped=!1,this.exception=null}a(t,nt),f(t,K);var e=function(){if(this.isDisposed)throw new Error(p)};return t.prototype.onCompleted=function(){var t;if(e.call(this),this.isStopped||(t=this.observers.toArray(),this.observers=new x,this.isStopped=!0),t)for(var n=0,r=t.length;r>n;n++)t[n].onCompleted()},t.prototype.onError=function(t){var n;if(e.call(this),this.isStopped||(n=this.observers.toArray(),this.observers=new x,this.isStopped=!0,this.exception=t),n)for(var r=0,o=n.length;o>r;r++)n[r].onError(t)},t.prototype.onNext=function(t){var n;if(e.call(this),this.isStopped||(this.value=t,n=this.observers.toArray()),n)for(var r=0,o=n.length;o>r;r++)n[r].onNext(t)},t.prototype._subscribe=function(t){var n;return e.call(this),this.isStopped?(n=this.exception,n?t.onError(n):t.onCompleted(),S):(this.observers.add(t),t.onNext(this.value),new ct(this,t))},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null},t}(),ht=n.ReplaySubject=function(){function t(t,n,r){this.bufferSize=t===e?Number.MAX_VALUE:t,this.window=n===e?Number.MAX_VALUE:n,this.scheduler=r||z,this.q=[],this.observers=new x,this.isStopped=!1,this.isDisposed=!1}a(t,nt),f(t,nt);var n=function(){if(this.isDisposed)throw new Error(p)};t.prototype._trim=function(t){var e=this.isStopped?1:0,n=e+this.bufferSize;for(n<this.bufferSize&&(n=this.bufferSize);this.q.length>n;)this.q.shift();for(;this.q.length>e&&t-this.q[0].timestamp>this.window;)this.q.shift()},t.prototype._enqueue=function(t){var e=this.scheduler.now(),n={value:t,timestamp:e};this.q.push(n),this._trim(e)},t.prototype.onNext=function(t){var e,r,o,i;if(n.call(this),!this.isStopped)for(e=this.observers.toArray(),this._enqueue(U.createOnNext(t)),o=0,i=e.length;i>o;o++)r=e[o],r.onNext(t);if(e)for(o=0,i=e.length;i>o;o++)r=e[o],r.ensureActive()},t.prototype.onError=function(t){var e,r,o;if(n.call(this),!this.isStopped){for(this.isStopped=!0,this._enqueue(U.createOnError(t)),e=this.observers.toArray(),r=0,o=e.length;o>r;r++)e[r].onError(t);this.observers=new x}if(e)for(r=0,o=e.length;o>r;r++)e[r].ensureActive()},t.prototype.onCompleted=function(){var t,e,r;if(n.call(this),!this.isStopped){for(this.isStopped=!0,this._enqueue(U.createOnCompleted()),t=this.observers.toArray(),e=0,r=t.length;r>e;e++)t[e].onCompleted();this.observers=new x}if(t)for(e=0,r=t.length;r>e;e++)t[e].ensureActive()},t.prototype._subscribe=function(t){var e=new $(this.scheduler,t),o=new r(this,e);n.call(this),this._trim(this.scheduler.now()),this.observers.add(e);for(var i=0,s=this.q.length;s>i;i++)this.q[i].value.accept(e);return e.ensureActive(),o},t.prototype.dispose=function(){this.isDisposed=!0,this.observers=null};var r=function(){function t(t,e){this.subject=t,this.observer=e}return t.prototype.dispose=function(){this.observer.dispose(),this.subject.isDisposed||this.subject.observers.remove(this.observer)},t}();return t}(),pt=function(){function t(t,e){this.observer=t,this.observable=e}return a(t,nt),f(t,K),t.prototype.onCompleted=function(){return this.observer.onCompleted()},t.prototype.onError=function(t){return this.observer.onError(t)},t.prototype.onNext=function(t){return this.observer.onNext(t)},t.prototype._subscribe=function(t){return this.observable.subscribe(t)},t}();nt.start=function(t,e,n,r){return n||(n=[]),bt(t,r).apply(e,n)};var bt=nt.toAsync=function(t,e){return e||(e=M),function(){var n=new ft,r=function(){var e;try{e=t.apply(this,arguments)}catch(r){return void n.onError(r)}n.onNext(e),n.onCompleted()},o=l.call(arguments),i=this;return e.schedule(function(){r.apply(i,o)}),n}};rt.multicast=function(t,e){var n=this;return"function"==typeof t?xt(function(r){var o=n.multicast(t());return new N(e(o).subscribe(r),o.connect())}):new ut(n,t)},rt.publish=function(t){return t?this.multicast(function(){return new at},t):this.multicast(new at)},rt.publishLast=function(t){return t?this.multicast(function(){return new ft},t):this.multicast(new ft)},rt.replay=function(t,e,n,r){return t&&null!==t?this.multicast(function(){return new ht(e,n,r)},t):this.multicast(new ht(e,n,r))},rt.publishValue=function(t,e){return"function"==typeof t?this.multicast(function(){return new lt(e)},t):this.multicast(new lt(t))};var dt=nt.never=function(){return xt(function(){return S})},vt=nt.empty=function(t){return t||(t=V),xt(function(e){return t.schedule(function(){e.onCompleted()})})},mt=nt.returnValue=function(t,e){return e||(e=V),xt(function(n){return e.schedule(function(){n.onNext(t),n.onCompleted()})})},yt=nt.throwException=function(t,e){return e||(e=V),xt(function(n){return e.schedule(function(){n.onError(t)})})};nt.generate=function(t,e,n,r,o){return o||(o=z),xt(function(i){var s=!0,u=t;return o.scheduleRecursive(function(t){var o,c;try{s?s=!1:u=n(u),o=e(u),o&&(c=r(u))}catch(a){return void i.onError(a)}o?(i.onNext(c),t()):i.onCompleted()})})};var wt=nt.defer=function(t){return xt(function(e){var n;try{n=t()}catch(r){return yt(r).subscribe(e)}return n.subscribe(e)})};nt.using=function(t,e){return xt(function(n){var r,o,i=S;try{r=t(),null!==r&&(i=r),o=e(r)}catch(s){return new N(yt(s).subscribe(n),i)}return new N(o.subscribe(n),i)})};var Et=nt.fromArray=function(t,e){return e||(e=z),xt(function(n){var r=0;return e.scheduleRecursive(function(e){r<t.length?(n.onNext(t[r++]),e()):n.onCompleted()})})},xt=nt.createWithDisposable=function(t){return new ot(t)};nt.create=function(t){return xt(function(e){return D(t(e))})},nt.range=function(t,e,n){return n||(n=z),xt(function(r){return n.scheduleRecursiveWithState(0,function(n,o){e>n?(r.onNext(t+n),o(n+1)):r.onCompleted()})})},rt.repeat=function(t){return J(this,t).concat()},rt.retry=function(t){return J(this,t).catchException()},nt.repeat=function(t,n,r){return r||(r=z),n===e&&(n=-1),mt(t,r).repeat(n)},rt.select=function(t){var e=this;return xt(function(n){var r=0;return e.subscribe(function(e){var o;try{o=t(e,r++)}catch(i){return void n.onError(i)}n.onNext(o)},b(n,"onError"),b(n,"onCompleted"))})},rt.where=function(t){var e=this;return xt(function(n){var r=0;return e.subscribe(function(e){var o;try{o=t(e,r++)}catch(i){return void n.onError(i)}o&&n.onNext(e)},b(n,"onError"),b(n,"onCompleted"))})},rt.groupByUntil=function(t,n,r,o){var i=this;return n||(n=s),o||(o=u),xt(function(s){var u={},c=new N,a=new _(c);return c.add(i.subscribe(function(i){var f,l,h,p,b,d,v,m,y,w,E;try{v=t(i),m=o(v)}catch(x){for(E in u)u[E].onError(x);return void s.onError(x)}b=!1;try{w=u[m],w||(w=new at,u[m]=w,b=!0)}catch(x){for(E in u)u[E].onError(x);return void s.onError(x)}if(b){d=new st(v,w,a),l=new st(v,w);try{f=r(l)}catch(x){for(E in u)u[E].onError(x);return void s.onError(x)}s.onNext(d),y=new R,c.add(y),p=function(){u[m]!==e&&(delete u[m],w.onCompleted()),c.remove(y)},y.disposable(f.take(1).subscribe(function(){},function(t){for(E in u)u[E].onError(t);s.onError(t)},function(){p()}))}try{h=n(i)}catch(x){for(E in u)u[E].onError(x);return void s.onError(x)}w.onNext(h)},function(t){for(var e in u)u[e].onError(t);s.onError(t)},function(){for(var t in u)u[t].onCompleted();s.onCompleted()})),a})},rt.groupBy=function(t,e,n){return this.groupByUntil(t,e,function(){return dt()},n)},rt.take=function(t,e){if(0>t)throw new Error(h);if(0===t)return vt(e);var n=this;return xt(function(e){var r=t;return n.subscribe(function(t){r>0&&(r--,e.onNext(t),0===r&&e.onCompleted())},b(e,"onError"),b(e,"onCompleted"))})},rt.skip=function(t){if(0>t)throw new Error(h);var e=this;return xt(function(n){var r=t;return e.subscribe(function(t){0>=r?n.onNext(t):r--},b(n,"onError"),b(n,"onCompleted"))})},rt.takeWhile=function(t){var e=this;return xt(function(n){var r=0,o=!0;
return e.subscribe(function(e){if(o){try{o=t(e,r++)}catch(i){return void n.onError(i)}o?n.onNext(e):n.onCompleted()}},b(n,"onError"),b(n,"onCompleted"))})},rt.skipWhile=function(t){var e=this;return xt(function(n){var r=0,o=!1;return e.subscribe(function(e){if(!o)try{o=!t(e,r++)}catch(i){return void n.onError(i)}o&&n.onNext(e)},b(n,"onError"),b(n,"onCompleted"))})},rt.selectMany=function(t,e){return e?this.selectMany(function(n){return t(n).select(function(t){return e(n,t)})}):"function"==typeof t?gt.call(this,t):gt.call(this,function(){return t})};var gt=function(t){return this.select(t).mergeObservable()},Ct="Sequence contains no elements.";rt.finalValue=function(){var t=this;return xt(function(e){var n,r=!1;return t.subscribe(function(t){r=!0,n=t},function(t){e.onError(t)},function(){r?(e.onNext(n),e.onCompleted()):e.onError(new Error(Ct))})})},rt.toArray=function(){var t=function(t,e){return t.push(e),t};return this.scan([],t).startWith([]).finalValue()},rt.materialize=function(){var t=this;return xt(function(e){return t.subscribe(function(t){e.onNext(U.createOnNext(t))},function(t){e.onNext(U.createOnError(t)),e.onCompleted()},function(){e.onNext(U.createOnCompleted()),e.onCompleted()})})},rt.dematerialize=function(){var t=this;return xt(function(e){return t.subscribe(function(t){return t.accept(e)},b(e,"onError"),b(e,"onCompleted"))})},rt.asObservable=function(){var t=this;return xt(function(e){return t.subscribe(e)})},rt.windowWithCount=function(t,n){var r=this;if(0>=t)throw new Error(h);if(n===e&&(n=t),0>=n)throw new Error(h);return xt(function(e){var o=new R,i=new _(o),s=0,u=[],c=function(){var t=new at;u.push(t),e.onNext(d(t,i))};return c(),o.disposable(r.subscribe(function(e){var r,o,i;for(o=0;o<u.length;o++)u[o].onNext(e);r=s-t+1,r>=0&&r%n===0&&(i=u.shift(),i.onCompleted()),s++,s%n===0&&c()},function(t){for(;u.length>0;)u.shift().onError(t);e.onError(t)},function(){for(;u.length>0;)u.shift().onCompleted();e.onCompleted()})),i})},rt.bufferWithCount=function(t,n){return n===e&&(n=t),this.windowWithCount(t,n).selectMany(function(t){return t.toArray()}).where(function(t){return t.length>0})},rt.startWith=function(){var t,e,n=0;return arguments.length>0&&null!==arguments[0]&&void 0!==arguments[0].now?(e=arguments[0],n=1):e=V,t=l.call(arguments,n),G([Et(t,e),this]).concat()},rt.scan=function(){var t,e,n=!1;2===arguments.length?(t=arguments[0],e=arguments[1],n=!0):e=arguments[0];var r=this;return wt(function(){var o,i=!1;return r.select(function(r){return i?o=e(o,r):(o=n?e(t,r):r,i=!0),o})})},rt.distinctUntilChanged=function(t,e){var n=this;return t||(t=s),e||(e=i),xt(function(r){var o,i=!1;return n.subscribe(function(n){var s,u=!1;try{s=t(n)}catch(c){return void r.onError(c)}if(i)try{u=e(o,s)}catch(c){return void r.onError(c)}i&&u||(i=!0,o=s,r.onNext(n))},b(r,"onError"),b(r,"onCompleted"))})},rt.finallyAction=function(t){var e=this;return xt(function(n){var r=e.subscribe(n);return D(function(){try{r.dispose()}finally{t()}})})},rt.doAction=function(t,e,n){var r,o=this;return"function"==typeof t?r=t:(r=function(e){t.onNext(e)},e=function(e){t.onError(e)},n=function(){t.onCompleted()}),xt(function(t){return o.subscribe(function(e){try{r(e)}catch(n){t.onError(n)}t.onNext(e)},function(n){if(e){try{e(n)}catch(r){t.onError(r)}t.onError(n)}else t.onError(n)},function(){if(n){try{n()}catch(e){t.onError(e)}t.onCompleted()}else t.onCompleted()})})},rt.skipLast=function(t){var e=this;return xt(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&n.onNext(r.shift())},b(n,"onError"),b(n,"onCompleted"))})},rt.takeLast=function(t){var e=this;return xt(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},b(n,"onError"),function(){for(;r.length>0;)n.onNext(r.shift());n.onCompleted()})})},rt.ignoreElements=function(){var t=this;return xt(function(e){return t.subscribe(r,b(e,"onError"),b(e,"onCompleted"))})},rt.elementAt=function(t){if(0>t)throw new Error(h);var e=this;return xt(function(n){var r=t;return e.subscribe(function(t){0===r&&(n.onNext(t),n.onCompleted()),r--},b(n,"onError"),function(){n.onError(new Error(h))})})},rt.elementAtOrDefault=function(t,n){var r=this;if(0>t)throw new Error(h);return n===e&&(n=null),xt(function(e){var o=t;return r.subscribe(function(t){0===o&&(e.onNext(t),e.onCompleted()),o--},b(e,"onError"),function(){e.onNext(n),e.onCompleted()})})},rt.defaultIfEmpty=function(t){var n=this;return t===e&&(t=null),xt(function(e){var r=!1;return n.subscribe(function(t){r=!0,e.onNext(t)},b(e,"onError"),function(){r||e.onNext(t),e.onCompleted()})})},rt.distinct=function(t,e){var n=this;return t||(t=s),e||(e=u),xt(function(r){var o={};return n.subscribe(function(n){var i,s,u,c=!1;try{i=t(n),s=e(i)}catch(a){return void r.onError(a)}for(u in o)if(s===u){c=!0;break}c||(o[s]=null,r.onNext(n))},b(r,"onError"),b(r,"onCompleted"))})},rt.mergeObservable=function(){var t=this;return xt(function(e){var n=new N,r=!1,o=new R;return n.add(o),o.disposable(t.subscribe(function(t){var o=new R;n.add(o),o.disposable(t.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},function(){n.remove(o),r&&1===n.length&&e.onCompleted()}))},function(t){e.onError(t)},function(){r=!0,1===n.length&&e.onCompleted()})),n})},rt.merge=function(t){if("number"!=typeof t)return nt.merge(this,t);var e=this;return xt(function(n){var r=0,o=new N,i=!1,s=[],u=function(t){var e=new R;o.add(e),e.disposable(t.subscribe(function(t){n.onNext(t)},function(t){n.onError(t)},function(){var t;o.remove(e),s.length>0?(t=s.shift(),u(t)):(r--,i&&0===r&&n.onCompleted())}))};return o.add(e.subscribe(function(e){t>r?(r++,u(e)):s.push(e)},b(n,"onError"),function(){i=!0,0===r&&n.onCompleted()})),o})},rt.switchLatest=function(){var t=this;return xt(function(e){var n=!1,r=new W,o=!1,i=0,s=t.subscribe(function(t){var s=new R,u=++i;return n=!0,r.disposable(s),s.disposable(t.subscribe(function(t){i===u&&e.onNext(t)},function(t){i===u&&e.onError(t)},function(){i===u&&(n=!1,o&&e.onCompleted())}))},b(e,"onError"),function(){o=!0,n||e.onCompleted()});return new N(s,r)})},nt.merge=function(){var t,e;return arguments[0]?arguments[0].now?(t=arguments[0],e=l.call(arguments,1)):(t=V,e=l.call(arguments,0)):(t=V,e=l.call(arguments,1)),e[0]instanceof Array&&(e=e[0]),Et(e,t).mergeObservable()};var Ot=function(t,e,n){var r=l.call(n,0);return r.unshift(t),e.apply(t,r)};rt.concat=function(){return Ot(this,Nt,arguments)},rt.concatObservable=function(){return this.merge(1)};var Nt=nt.concat=function(){var t=E(arguments,0);return G(t).concat()};rt.catchException=function(t){return"function"==typeof t?At(this,t):Dt([this,t])};var At=function(t,e){return xt(function(n){var r=new R,o=new W;return r.disposable(t.subscribe(b(n,"onNext"),function(t){var r,i;try{i=e(t)}catch(s){return void n.onError(s)}r=new R,o.disposable(r),r.disposable(i.subscribe(n))},b(n,"onCompleted"))),o})},Dt=nt.catchException=function(){var t=E(arguments,0);return G(t).catchException()};rt.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return St([this,t])};var St=nt.onErrorResumeNext=function(){var t=E(arguments,0);return xt(function(e){var n=0,r=new W,o=V.scheduleRecursive(function(o){var i,s;n<t.length?(i=t[n++],s=new R,r.disposable(s),s.disposable(i.subscribe(b(e,"onNext"),function(){o()},function(){o()}))):e.onCompleted()});return new N(r,o)})};rt.combineLatest=function(){var t=this,e=l.call(arguments),n=e.pop();return e.unshift(this),xt(function(r){for(var o=e.length,i=new Array(o),u=!1,c=new Array(o),a=new Array(o),f=function(e){var o;if(i[e]=!0,u||(u=m.call(i,s))){try{o=n.apply(t,a)}catch(f){return void r.onError(f)}r.onNext(o)}else m.call(y.call(c,function(t,n){return n!==e}),s)&&r.onCompleted()},l=function(t){c[t]=!0,m.call(c,s)&&r.onCompleted()},h=new Array(o),p=0;o>p;p++)!function(t){h[t]=new R,h[t].setDisposable(e[t].subscribe(function(e){a[t]=e,f(t)},b(r,"onError"),function(){l(t)}))}(p);return new N(h)})},rt.zip=function(){var t=this,e=l.call(arguments),n=e.pop();return e.unshift(t),xt(function(r){for(var o=e.length,i=new Array(o),u=new Array(o),c=function(e){var o,c;if(m.call(i,function(t){return t&&t.length>0})){try{c=w.call(i,function(t){return t.shift()}),o=n.apply(t,c)}catch(a){return void r.onError(a)}r.onNext(o)}else m.call(y.call(u,function(t,n){return n!==e}),s)&&r.onCompleted()},a=function(t){u[t]=!0,m.call(u,s)&&r.onCompleted()},f=new Array(o),l=0;o>l;l++)!function(t){f[t]=new R,f[t].setDisposable(e[t].subscribe(function(e){i[t]||(i[t]=[]),i[t].push(e),c(t)},b(r,"onError"),function(){a(t)}))}(l);var h=new N(f);return h.add(D(function(){for(var t=0;o>t;t++)i[t]=null})),h})},rt.takeUntil=function(t){var e=this;return v(t,e,function(t,e){var n=!1,r=!1;return new Z(function(e){r||n||("C"===e.kind?n=!0:"E"===e.kind?(n=!0,r=!0,t.onError(e.exception)):(r=!0,t.onCompleted()))},function(n){r||(n.accept(t),r="N"!==n.kind,r&&e.dispose())})})},rt.skipUntil=function(t){return v(this,t,function(t,e,n){var r=!1,o=!1;return new Z(function(e){"E"==e.kind?t.onError(e.exception):r&&e.accept(t)},function(e){o||("N"===e.kind?r=!0:"E"===e.kind&&t.onError(e.exception),o=!0,n.dispose())})})},nt.amb=function(){var t,e,n=dt(),r=E(arguments,0),o=function(t,e){return t.amb(e)};for(t=0,e=r.length;e>t;t++)n=o(n,r[t]);return n},rt.amb=function(t){return v(this,t,function(t,e,n){var r="N";return new Z(function(e){"N"===r&&(r="L",n.dispose()),"L"===r&&e.accept(t)},function(n){"N"===r&&(r="R",e.dispose()),"R"===r&&n.accept(t)})})};var Rt=function(t){function e(){e.base.constructor.apply(this,arguments)}return a(e,t),e.prototype.next=function(t){e.base.next.call(this,t),this.ensureActive()},e.prototype.error=function(t){e.base.error.call(this,t),this.ensureActive()},e.prototype.completed=function(){e.base.completed.call(this),this.ensureActive()},e}($);rt.observeOn=function(t){var e=this;return xt(function(n){return e.subscribe(new Rt(t,n))})},rt.subscribeOn=function(t){var e=this;return xt(function(n){var r=new R,o=new W;return o.setDisposable(r),r.setDisposable(t.schedule(function(){o.setDisposable(new q(t,e.subscribe(n)))})),o})}}("undefined"!=typeof window?window:this),function(t,e){var n;n="undefined"!=typeof t.module&&"undefined"!=typeof t.module.exports?t.require("./rx.min.js"):t.Rx;var r=n.Observable,o=r.prototype,i=r.createWithDisposable,s=n.CompositeDisposable,u=function(t,e){return t===e},c=function(t){return t},a=function(t,e){return t>e?1:t===e?0:-1},f=function(t,e,n){return i(function(r){var o=!1,i=null,s=[];return t.subscribe(function(t){var u,c;try{c=e(t)}catch(a){return void r.onError(a)}if(u=0,o)try{u=n(c,i)}catch(f){return void r.onError(f)}else o=!0,i=c;u>0&&(i=c,s=[]),u>=0&&s.push(t)},function(t){r.onError(t)},function(){r.onNext(s),r.onCompleted()})})};o.aggregate=function(t,e){return this.scan(t,e).startWith(t).finalValue()},o.aggregate1=function(t){return this.scan1(t).finalValue()},o.any=function(t){var n=this;return t!==e?n.where(t).any():i(function(t){return n.subscribe(function(){t.onNext(!0),t.onCompleted()},function(e){t.onError(e)},function(){t.onNext(!1),t.onCompleted()})})},o.all=function(t){return this.where(function(e){return!t(e)}).any().select(function(t){return!t})},o.contains=function(t,e){return e||(e=u),this.where(function(n){return e(n,t)}).any()},o.count=function(){return this.aggregate(0,function(t){return t+1})},o.sum=function(){return this.aggregate(0,function(t,e){return t+e})},o.minBy=function(t,e){return e||(e=a),f(this,t,function(t,n){return-1*e(t,n)})};var l=function(t){if(0==t.length)throw Error("Sequence contains no elements.");return t[0]};o.min=function(t){return this.minBy(c,t).select(function(t){return l(t)})},o.maxBy=function(t,e){return e||(e=a),f(this,t,e)},o.max=function(t){return this.maxBy(c,t).select(function(t){return l(t)})},o.average=function(){return this.scan({sum:0,count:0},function(t,e){return{sum:t.sum+e,count:t.count+1}}).finalValue().select(function(t){return t.sum/t.count})},o.sequenceEqual=function(t,e){var n=this;return e||(e=u),i(function(r){var o=!1,i=!1,u=[],c=[],a=n.subscribe(function(t){var n,o;if(0<c.length){o=c.shift();try{n=e(o,t)}catch(s){return void r.onError(s)}n||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){o=!0,0===u.length&&(0<c.length?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))}),f=t.subscribe(function(t){var n,i;if(0<u.length){i=u.shift();try{n=e(i,t)}catch(s){return void r.onError(s)}n||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):c.push(t)},function(t){r.onError(t)},function(){i=!0,0===c.length&&(0<u.length?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new s(a,f)})}}("undefined"!=typeof window?window:this),function(t,e){var n;n="undefined"!=typeof t.module&&"undefined"!=typeof t.module.exports?t.require("./rx.min.js"):t.Rx;var r=n.Observable,o=r.prototype,i=r.createWithDisposable,s=r.defer,u=(r.fromArray,r.throwException),c=n.Scheduler.Timeout,a=n.SingleAssignmentDisposable,f=n.SerialDisposable,l=n.CompositeDisposable,h=n.RefCountDisposable,p=n.Subject,b=n.Internals.BinaryObserver,d=function(t,e){return i(function(n){return new l(e.getDisposable(),t.subscribe(n))})},v=function(t,e,n){return i(function(r){var o=new a,i=new a,s=n(r,o,i);return o.disposable(t.materialize().select(function(t){return{switchValue:function(e){return e(t)}}}).subscribe(s)),i.disposable(e.materialize().select(function(t){return{switchValue:function(e,n){return n(t)}}}).subscribe(s)),new l(o,i)})},m=function(t){return 0>t?0:t},y=function(t,e){return i(function(n){return e.scheduleWithAbsolute(t,function(){n.onNext(0),n.onCompleted()})})},w=function(t,e,n){var r=m(e);return i(function(e){var o=0,i=t;return n.scheduleRecursiveWithAbsolute(i,function(t){var s;r>0&&(s=n.now(),i+=r,s>=i&&(i=s+r)),e.onNext(o++),t(i)})})},E=function(t,e){var n=m(t);return i(function(t){return e.scheduleWithRelative(n,function(){t.onNext(0),t.onCompleted()})})},x=function(t,e,n){return s(function(){return w(n.now()+t,e,n)})},g=r.interval=function(t,e){return e||(e=c),x(t,t,e)};r.timer=function(t,n,r){var o;return r||(r=c),n!==e&&"number"==typeof n?o=n:n!==e&&"object"==typeof n&&(r=n),t instanceof Date&&o===e?y(t.getTime(),r):t instanceof Date&&o!==e?(o=n,w(t.getTime(),o,r)):o===e?E(t,r):x(t,o,r)};var C=function(t,e,n){return i(function(r){var o,i=!1,s=new f,u=null,c=[],h=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,f;"E"===t.value.kind?(c=[],c.push(t),u=t.value.exception,f=!h):(c.push({value:t.value,timestamp:t.timestamp+e}),f=!i,i=!0),f&&(null!==u?r.onError(u):(o=new a,s.disposable(o),o.disposable(n.scheduleRecursiveWithRelative(e,function(t){var e,o,s,a;if(null===u){h=!0;do s=null,c.length>0&&c[0].timestamp-n.now()<=0&&(s=c.shift().value),null!==s&&s.accept(r);while(null!==s);a=!1,o=0,c.length>0?(a=!0,o=Math.max(0,c[0].timestamp-n.now())):i=!1,e=u,h=!1,null!==e?r.onError(e):a&&t(o)}}))))}),new l(o,s)})},O=function(t,e,n){return s(function(){var t=e-n.now();return C(t,n)})};o.delay=function(t,e){return e||(e=c),t instanceof Date?O(this,t.getTime(),e):C(this,t,e)},o.throttle=function(t,e){e||(e=c);var n=this;return i(function(r){var o,i=new f,s=!1,u=0,c=null;return o=n.subscribe(function(n){var o,f;s=!0,c=n,u++,o=u,f=new a,i.disposable(f),f.disposable(e.scheduleWithRelative(t,function(){s&&u===o&&r.onNext(c),s=!1}))},function(t){i.dispose(),r.onError(t),s=!1,u++},function(){i.dispose(),s&&r.onNext(c),r.onCompleted(),s=!1,u++}),new l(o,i)})},o.windowWithTime=function(t,n,r){var o,s=this;return n===e&&(o=t),r===e&&(r=c),"number"==typeof n?o=n:"object"==typeof n&&(o=t,r=n),i(function(e){var n,i,u,c=o,b=t,v=[],m=new f,y=0;return i=new l(m),u=new h(i),n=function(){var t,i,s,f,l;s=new a,m.disposable(s),i=!1,t=!1,b===c?(i=!0,t=!0):c>b?i=!0:t=!0,f=i?b:c,l=f-y,y=f,i&&(b+=o),t&&(c+=o),s.disposable(r.scheduleWithRelative(l,function(){var r;t&&(r=new p,v.push(r),e.onNext(d(r,u))),i&&(r=v.shift(),r.onCompleted()),n()}))},v.push(new p),e.onNext(d(v[0],u)),n(),i.add(s.subscribe(function(t){var e,n;for(e=0;e<v.length;e++)n=v[e],n.onNext(t)},function(t){var n,r;for(n=0;n<v.length;n++)r=v[n],r.onError(t);e.onError(t)},function(){var t,n;for(t=0;t<v.length;t++)n=v[t],n.onCompleted();e.onCompleted()})),u})},o.windowWithTimeOrCount=function(t,e,n){var r=this;return n||(n=c),i(function(o){var i,s,u,c,b=0,v=new f,m=0;return s=new l(v),u=new h(s),i=function(e){var r=new a;v.disposable(r),r.disposable(n.scheduleWithRelative(t,function(){var t;e===m&&(b=0,t=++m,c.onCompleted(),c=new p,o.onNext(d(c,u)),i(t))}))},c=new p,o.onNext(d(c,u)),i(0),s.add(r.subscribe(function(t){var n=0,r=!1;c.onNext(t),b++,b===e&&(r=!0,b=0,n=++m,c.onCompleted(),c=new p,o.onNext(d(c,u))),r&&i(n)},function(t){c.onError(t),o.onError(t)},function(){c.onCompleted(),o.onCompleted()})),u})},o.bufferWithTime=function(t,n,r){var o;return n===e&&(o=t),r||(r=c),"number"==typeof n?o=n:"object"==typeof n&&(o=t,r=n),this.windowWithTime(t,o,r).selectMany(function(t){return t.toArray()})},o.bufferWithTimeOrCount=function(t,e,n){return n||(n=c),this.windowWithTimeOrCount(t,e,n).selectMany(function(t){return t.toArray()})},o.timeInterval=function(t){var e=this;return t||(t=c),s(function(){var n=t.now();return e.select(function(e){var r=t.now(),o=r-n;return n=r,{value:e,interval:o}})})},o.timestamp=function(t){return t||(t=c),this.select(function(e){return{value:e,timestamp:t.now()}})};var N=function(t,n){return v(t,n,function(t){var n,r=!1;return new b(function(e){"N"===e.kind&&(n=e),"E"===e.kind&&e.accept(t),"C"===e.kind&&(r=!0)},function(){var o=n;n=e,o!==e&&o.accept(t),r&&t.onCompleted()})})};o.sample=function(t,e){return e||(e=c),"number"==typeof t?N(this,g(t,e)):N(this,t)},o.timeout=function(t,n,r){var o,s=this;return n===e&&(n=u(new Error("Timeout"))),r||(r=c),o=t instanceof Date?function(t,e){r.scheduleWithAbsolute(t,e)}:function(t,e){r.scheduleWithRelative(t,e)},i(function(e){var r,i=0,u=new a,c=new f,h=!1,p=new f;return c.disposable(u),r=function(){var r=i;p.disposable(o(t,function(){var t;h=i===r,t=h,t&&c.disposable(n.subscribe(e))}))},r(),u.disposable(s.subscribe(function(t){var n=!h;n&&(i++,e.onNext(t),r())},function(t){var n=!h;n&&(i++,e.onError(t))},function(){var t=!h;t&&(i++,e.onCompleted())})),new l(c,p)})},r.generateWithAbsoluteTime=function(t,e,n,r,o,s){return s||(s=c),i(function(i){var u,c,a=!0,f=!1,l=t;return s.scheduleRecursiveWithAbsolute(s.now(),function(t){f&&i.onNext(u);try{a?a=!1:l=n(l),f=e(l),f&&(u=r(l),c=o(l))}catch(s){return void i.onError(s)}f?t(c):i.onCompleted()})})},r.generateWithRelativeTime=function(t,e,n,r,o,s){return s||(s=c),i(function(i){var u,c,a=!0,f=!1,l=t;return s.scheduleRecursiveWithRelative(0,function(t){f&&i.onNext(u);try{a?a=!1:l=n(l),f=e(l),f&&(u=r(l),c=o(l))}catch(s){return void i.onError(s)}f?t(c):i.onCompleted()})})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.forEach=e.Observable.subscribe,e.Observable.map=e.Observable.select,e.Observable.filter=e.Observable.where,e.Observable.flatMap=e.Observable.selectMany;var n=e.Observer.create(function(t){var e,n,r;this.hasItem=!0,e||(e=this.unsubscribe,n=this.obsOrFunc,r=this.outerSubscription,void 0!==r?(r.dispose(),this.outerSubscription=void 0):this.unsubscribe=!0,n instanceof Function?this.subscription=n(t).subscribe(this.observer):this.subscription=n.subscribe(this.observer))},function(t){this.unsubscribe||this.observer.onError(t)},function(){this.unsubscribe||this.hasItem||this.observer.onCompleted()}),r=e.Disposable.create(function(){var t=this.observableSubscription,e=this.observer,n=e.subscription;void 0!==t?(t.dispose(),this.observableSubscription=void 0):void 0!==n&&(n.dispose(),this.observerSubscription=void 0)}),o=Object.create(new e.Observable,{_subscribe:{value:function(t){var e,o=Object.create(n,{obsOrFunc:{value:this.obsOrFunc},observer:{value:t}}),i=this.source.subscribe(o);return o.outerSubscription=i,e=Object.create(r,{observableSubscription:{value:i},observer:{value:o}}),o.unsubscribe&&i.dispose(),e}}});e.Observable.prototype.then=function(t){return Object.create(o,{source:{value:this},obsOrFunc:{value:t}})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=new e.Observable;n.subscribe=function(t,n,r){return"function"==typeof t?(t(this.value),r&&r()):(t.onNext(this.value),t.onCompleted()),e.Disposable.empty},e.Observable.fastReturnValue=function(t){return Object.create(n,{value:{value:t}})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=e.Observer.create(function(t){var e,n,r=this.projection(t),o=this.observer;for(n=0,e=r.length;e>n;n++)o.onNext(r[n])},function(t){this.observer.onError(t)},function(){this.observer.onCompleted()});e.Observable.prototype.selectManyArrays=function(t){var r=this;return e.Observable.fastCreateWithDisposable(function(e){return r.subscribe(Object.create(n,{observer:{value:e},projection:{value:t}}))})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.prototype.subscribeIgnoreErrors=function(t,e,n){return"function"!=typeof t?(void 0===t.onError&&(t.onError=function(){}),this.subscribe(t)):(void 0===e&&(e=function(){}),this.subscribe(t,e,n))},e.Observable.prototype.windowWithTime=function(t){var n=this;return e.Observable.createWithDisposable(function(e){var r,o=[],i=function(){e.onNext(o.slice()),o.length=0};return n.subscribe(function(e){o.push(e),null===r&&(r=setTimeout(i,t))},function(t){null!==r&&clearTimeout(r),o.length>0&&e.onNext(o),e.onError(t)},function(){null!==r&&clearTimeout(r),o.length>0&&e.onNext(o),e.onCompleted()})})},e.Observable.prototype.chain=function(t){return t.reduce(function(t,e){return t.selectMany(e)},this)},e.EventDisposable=function(t,e){this.observers=t,this.observer=e},e.EventDisposable.prototype=new e.Disposable,e.EventDisposable.prototype.dispose=function(){for(var t=this.observers,e=this.observer,n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}},e.Event=function(){this.observers=[]},e.Event.prototype=new e.Observable,e.Event.prototype.subscribe=function(t){var n=this.observers;return t="function"==typeof t?{onNext:t}:t,this.observers[n.length]=t,new e.EventDisposable(n,t)},e.Event.prototype.onNext=function(t){for(var e,n=this.observers,r=0;r<n.length;)e=n[r],e.onNext(t),e===n[r]&&r++},e.Observable.forkJoin=function(){var t=function(t,e){return 1===t.length&&t[e]instanceof Array?t[e]:Array.prototype.slice.call(t)};return function(){var n=t(arguments,0);return e.Observable.createWithDisposable(function(t){var r=n.length;if(0===r)return void t.onCompleted();for(var o=new e.CompositeDisposable,i=!1,s=new Array(r),u=new Array(r),c=new Array(r),a=0;r>a;a++)!function(e){var a=n[e];o.add(a.subscribe(function(t){i||(s[e]=!0,c[e]=t)},function(e){i=!0,t.onError(e),o.dispose()},function(){if(!i){if(!s[e])return void t.onCompleted();u[e]=!0;for(var n=0;r>n;n++)if(!u[n])return;i=!0,t.onNext(c),t.onCompleted()}}))}(a);return o})}}(),e.Observable.combineLatest=function(){var t=function(t,e){this.value=t,this.next=e};return t.prototype.toArray=function(){for(var t=this,e=[];t;)e.push(t.value),t=t.next;return e},function(n,r){var o,i=n.length-1;if(n.length>1){for(o=n[i].select(function(e){return new t(e)}),i=n.length-2;i>=0;i--)o=o.combineLatest(n[i],function(e,n){return new t(n,e)});return o.select(function(t){return r.apply(null,t.toArray())})}return 1==n.length?n[0].select(r):e.Observable.empty()}}(),e.Observable.zip=function(){var t=function(t,e){this.value=t,this.next=e};return t.prototype.toArray=function(){for(var t=this,e=[];t;)e.push(t.value),t=t.next;return e},function(n,r){var o,i=n.length-1;if(n.length>1){for(o=n[i].select(function(e){return new t(e)}),i=n.length-2;i>=0;i--)o=o.zip(n[i],function(e,n){return new t(n,e)});return o.select(function(t){return r.apply(null,t.toArray())})}return 1==n.length?n[0].select(r):e.Observable.empty()}}(),e.Observable.prototype.withPrevious=function(t){var n=this,r=arguments;return e.Observable.createWithDisposable(function(e){return 1===r.length&&e.onNext({current:t,previous:void 0}),n.subscribe(function(n){e.onNext({current:n,previous:t}),t=n},function(t){e.onError(t)},function(){e.onCompleted()})})},e.Observable.prototype.toMap=function(t,n){var r=this;return e.Observable.createWithDisposable(function(e){var o={};return r.subscribe(function(e){var r=t(e);n&&(e=n(e)),o[r]=e},function(t){e.onError(t)},function(){e.onNext(o),e.onCompleted()})})},e.Observable.fastCreateWithDisposable=function(t){var n=new e.Observable;return n._subscribe=t,n},e.Observable.prototype.time=function(n){var r=this;return e.Observable.fastCreateWithDisposable(function(e){var o=!1,i=t.util.log;return i.time(n),i.time(n+"-untilFirstOnNext"),r.subscribe(function(t){o||(i.timeEnd(n+"-untilFirstOnNext"),i.time(n+"-fromFirstOnNextUntilCompletedOrError"),o=!0),e.onNext(t)},function(t){i.timeEnd(n+"-untilFirstOnNext"),i.timeEnd(n+"-fromFirstOnNextUntilCompletedOrError"),i.timeEnd(n),e.onError(t)},function(){i.timeEnd(n+"-untilFirstOnNext"),i.timeEnd(n+"-fromFirstOnNextUntilCompletedOrError"),i.timeEnd(n),e.onCompleted()})})},e.Observable.prototype.buffer=function(t){var n=this;return e.Observable.createWithDisposable(function(e){var r,o,i,s=[];return n.subscribe(function(n){s.push(n),void 0===i&&(i=setTimeout(function(){i=void 0,e.onNext(s),s=[],r?e.onError(r):o&&e.onCompleted()},t))},function(t){void 0===i?e.onError(t):r=t},function(){void 0===i?e.onCompleted():o=!0})})},e.Observable.prototype.last=function(){var t=this;return e.Observable.fastCreateWithDisposable(function(e){var n,r=!1;return t.subscribe(function(t){n=t,r=!0},function(t){r&&e.onNext(n),e.onError(t)},function(){r&&e.onNext(n),e.onCompleted()})})},e.Observable.fromArrayFast=function(t){return e.Observable.fastCreateWithDisposable(function(e){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n]);e.onCompleted()})},e.Observable.prototype.toArrayFast=function(){var t=this;return e.Observable.fastCreateWithDisposable(function(e){var n=[];return t.subscribe(function(t){n.push(t)},function(t){e.onError(t)},function(){e.onNext(n),e.onCompleted()})})},e.Observable.prototype.finalValueFast=function(){var t=this;return e.Observable.fastCreateWithDisposable(function(e){var n,r=!1;return t.subscribe(function(t){r=!0,n=t},function(t){e.onError(t)},function(){r&&e.onNext(n),e.onCompleted()})})},e.Observable.prototype.reduce=function(t){var e,n;return 2===arguments.length&&(n=!0,e=arguments[1]),n?this.scan(e,t).startWith(e).finalValue():this.scan(t).finalValue()},e.Observable.prototype.or=function(t){return this.selectMany(function(n){return n?e.Observable.returnValue(n):t})},e.Observable.or=function(){var t=Array.prototype.slice.call(arguments),e=t[0],n=1;for(n;n<t.length;n+=1)e=e.or(t[n]);return e}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=function(t){return this._hasValue&&t.onNext(this._value),e.Subject.prototype._subscribe.call(this,t)};e.ReplayLastSubject=function(t){e.Subject.call(this),this._value=t,this._hasValue=arguments.length>0,this._subscribe=n},e.ReplayLastSubject.prototype=Object.create(e.Subject.prototype),e.ReplayLastSubject.prototype.constructor=e.ReplayLastSubject,e.ReplayLastSubject.prototype.onNext=function(t){this._hasValue&&t===this._value||(this._value=t,this._hasValue=!0,e.Subject.prototype.onNext.call(this,t))},e.Observable.prototype.replayLast=function(){var t=new e.ReplayLastSubject;return this.subscribe(t),t}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.prototype.retryWhile=function(t,n){var r=this;return e.Observable.create(function(e){var o,i=0,s=function(){o=r.subscribe(function(t){e.onNext(t)},function(r){n>i&&t(r)?(i++,s()):e.onError(r)},function(){e.onCompleted()})};return s(),function(){o.dispose()}})}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx;e.Observable.prototype.takeUntilSettled=function(t){var n=this;if("number"!=typeof t)throw new Error("Rx.Observable#takeUntilSettled() expects a number");return e.Observable.createWithDisposable(function(e){function r(t){clearTimeout(i),t?e.onError(t):e.onCompleted()}function o(n){clearTimeout(i),e.onNext(n),i=setTimeout(r,t)}var i;return n.subscribe(o,r,r)})}}("undefined"!=typeof window?window:this),function(t){function e(t,e,r){return n.Observable.createWithDisposable(function(n){return t.subscribe(function(t){n.onNext(t),n.onCompleted()},n.onError.bind(n),function(){e?(n.onNext(r),n.onCompleted()):n.onError(new Error("Sequence contains no elements."))})})}var n=t.Rx,r=n.Observable.prototype;r.first=function(t,n){return t?this.where(t,n).first():e(this,!1)},r.firstOrDefault=function(t,n){return t?this.where(t).firstOrDefault(null,n):e(this,!0,n)}}("undefined"!=typeof window?window:this),function(t){var e=t.Rx,n=e.Observable;e.computed=function(t,r){var o,i=[],s=[],u=t.read;for(var c in t.params)o=t.params[c],i.push(c),s.push(o.subscribe?o:new e.BehaviorSubject(o));var a=n.combineLatest(s,function(){var t,e,n=arguments,r={};for(e=0,t=i.length;t>e;e+=1)r[i[e]]=n[e];return r});return n.create(function(t){var e=a.select(r?u.bind(r):u).distinctUntilChanged().subscribe(t);return function(){e.dispose()}})}}("undefined"!=typeof window?window:this)},{}],2:[function(t,e,n){"use strict";var r,o=t("../dist/nf-rx.js");r="undefined"!=typeof window?window.Rx:o.Rx,e.exports=r},{"../dist/nf-rx.js":1}]},{},[2])(2)})});

Requireify.register("nf-cons-log",function(e,t,n,i){!function(e){if("object"==typeof i&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.nfConsLog=e()}}(function(){return function t(n,i,s){function o(a,u){if(!i[a]){if(!n[a]){var d="function"==typeof e&&e;if(!u&&d)return d(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=i[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return o(t?t:e)},f,f.exports,t,n,i,s)}return i[a].exports}for(var r="function"==typeof e&&e,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(e,t,n){!function(e){"use strict";e.util="undefined"==typeof e.util?{}:e.util,e.util.isObjectOrArray=function(e){return e&&"object"==typeof e}}("undefined"!=typeof window?window:this),function(e){"use strict";var t=e.netflix||{};t.pureMixin=function(e,n){var i,s,o,r,a=Object.keys(n),u=t.pureMixin;for(r=a.length-1;r>=0;r--)i=a[r],s=n[i],o=e[i],void 0!==o&&void 0!==s&&null!==o&&null!==s&&"object"==typeof o&&"object"==typeof s&&(n[i]=u(o,s)),n[i]={value:n[i]};return Object.create(e,n)},t.deepMixin=function(e,n){var i,s,o;if(void 0===e||null===e)return n;if("string"==typeof e&&"undefined"!=typeof n)return e;for(i in n)s=e[i],o=n[i],void 0!==s&&null!==s?e[i]=t.deepMixin(s,o):"object"==typeof s&&void 0!==o&&null!==o&&"object"==typeof o?t.deepMixin(s,o):e[i]=o;return e}}("undefined"!=typeof window?window:this),function(t){"use strict";var n=e("nf-rx");t.netflix=t.netflix||{},t.netflix.notification=t.netflix.notification||{},t.netflix.notification.notifications=new n.Subject}("undefined"!=typeof window?window:this),function(e){"use strict";var t=e.netflix,n={appSession:{send:"both"},userSession:{send:"both"},sharedContext:{send:"both"},uiModalViewChanged:{eventProperties:{value:"modalView"},send:"start"},uiModelessView:{send:"both",overlapping:"true"},uiDataRequest:{send:"end"}};t.notification=t.notification||{},t.notification.specification=t.notification.specification||{},t.notification.specification.uiQOE=t.notification.specification.uiQOE||{};for(var i in n)n.hasOwnProperty(i)&&!t.notification.specification.uiQOE[i]&&(t.notification.specification.uiQOE[i]=n[i])}("undefined"!=typeof window?window:this),function(t){"use strict";var n=e("nf-rx"),i={enumerable:!1},s=function(){},o=t.util.isObjectOrArray,r=t.netflix;r.notification.ClientNotifications=function(e){e=e||{};var t=e.requestSender||s,i=e.timeStampGenerator||function(){return 0},o=e.guidGenerator||s,r=e.log||s,a=e.maxBufferSize,u=e.maxFlushDelay,d=e.specification,c=e.sessionState,f=e.retryFailedRequests,l=e.metadata||{},h=e.sequencePrefix||"",v=isNaN(e.timeStampOffset)?0:e.timeStampOffset,p=e.isValidEvent||function(){return!0};this.setTimeStampOffset(v),this.log=r,this.metadata=l,this.specification=d,this._isValidEvent=p,this._retryFailedRequests=Boolean(f),this.sessionState=c||{sessions:{},sessionsList:[]},this.events=this._createEvents(),this.sequence=1,this._sequencePrefix=h,this._timestampOffset=0,this._timeStampGenerator=i,this.maxFlushDelay=u,this.maxBufferSize=a,this._queuedRequests=[],this._queue=[],this.nextGuid=o,this.eventsWithActiveSessions=this._createEventsWithActiveSessions(),this._flushes=new n.Subject,this.outgoingRequests=this._createRequests(),this.unsentRequests=new n.Subject,this.enabled=void 0,this._enabledChanges=new n.Subject,this._isEventEnabledByEventNameByCategory={},this._eventsQueuedBeforeEnabled=[],this._requestSender=t,this.requests=this._createRequestsObservable()},r.notification.ClientNotifications.prototype={setTimeStampOffset:function(e){this._timestampOffset=e},getTimeStampOffset:function(){return this._timestampOffset},timeStamp:function(){return this._timeStampGenerator()+this._timestampOffset},setSequencePrefix:function(e){this._sequencePrefix=e},getSequencePrefix:function(){return this._sequencePrefix},clearSequencePrefix:function(){this._sequencePrefix=""},getRequestSendDelayMs:function(e){var t=e.retryCount||0;return 100*(t&&Math.pow(2,t))},removeQueuedRequest:function(e){var t=this._queuedRequests,n=t.indexOf(e);n>-1&&t.splice(n,1)},suspend:function(){var e,t=this,n={metadata:this.metadata,maxBufferSize:this.maxBufferSize,maxFlushDelay:this.maxFlushDelay,eventsQueuedBeforeEnabled:this._eventsQueuedBeforeEnabled,sequence:void 0,sequencePrefix:this._sequencePrefix,enabled:this.enabled,sessionState:this.sessionState,queuedRequests:this._queuedRequests.slice(0)};return this.maxBufferSize=Number.MAX_VALUE,this.sessionState.sessionsList.concat(this._eventsQueuedBeforeEnabled).filter(function(e){var n=t._getEventSpecification(e);return n&&n.cancelOnSuspend}).forEach(function(e){t.notifyEnd(e,{data:{reason:"canceled"}})}),e=this.createRequestFromUnsentEvents(),e&&n.queuedRequests.push(e),n.queuedRequests.forEach(function(e){delete e.retryCount}),n.sequence=this.sequence,n},restore:function(e){this.maxBufferSize=e.maxBufferSize||this.maxBufferSize,this.maxFlushDelay=e.maxFlushDelay||this.maxFlushDelay,this._eventsQueuedBeforeEnabled=e.eventsQueuedBeforeEnabled||this._eventsQueuedBeforeEnabled,this.sequence=e.sequence||this.sequence,this._sequencePrefix=e.sequencePrefix||this._sequencePrefix,r.deepMixin(this.metadata,e.metadata||{}),this.sessionState=e.sessionState||this.sessionState,e.enabled===!1&&this.start(e.enabled),this.addToUnsentRequests(e.queuedRequests||[])},addToUnsentRequests:function(e){var t;if(Array.isArray(e))for(this.log("Adding "+e.length+" unsent requests."),t=0;t<e.length;++t)this.unsentRequests.onNext(e[t])},notify:function(e,t,n){return n=n||{},n.type="event",n.category=e,n.name=t,this.enabled!==!1&&this.events.onNext(n),n},start:function(e){var t,n=this._eventsQueuedBeforeEnabled,i=n.length;if(void 0!==e){if(this.enabled=e,e===!0)for(t=0;i>t;t++)this.events.onNext(n[t]);n.length=0,this._enabledChanges.onNext(e)}},getSession:function(e,t){var n,i,s,o,r=e+"."+t,a=this.sessionState;if(!a||!a.sessions)return void this.log("ClientNotifications#getSession called but we have no session state.");if(s=this.sessionState.sessions[r])return s;for(i=this._eventsQueuedBeforeEnabled,n=i.length,o=n-1;o>=0;--o)if(s=i[o],s.category===e&&s.sessionName===t)return s},_getEventKey:function(e){return e.category+"."+e.sessionName},notifyStart:function(e,t,n){var i,s,o,r;if(n=n||{},i=n.sessionId,n.type="sessionStarted",n.category=e,n.name=t+".started",n.sessionName=t,void 0!==i&&(s=this._getEventKey(n),o=this.sessionState.sessions[s],void 0!==o))if(Array.isArray(o)){if(r=this._arrayIndexWhere(o,function(e){return e.sessionId===i}),-1!==r)return o[r]}else if(o.sessionId===n.sessionId)return o;return this.enabled!==!1&&this.events.onNext(n),n},notifyEnd:function(e,t,n){var i,s=this,o=e,r=t,a=void 0!==o.category,u=a?this.getSession(e.category,e.name):this.getSession(e,t);if(a?(e=o.category,t=o.sessionName,r=r||{},r.sessionId=o.sessionId,n=r):n=n||{},u&&(Array.isArray(u)&&(r.sessionId?(i=s._arrayIndexWhere(u,function(e){return e.sessionId===r.sessionId}),-1!==i&&(u=u[i])):u=u[u.length-1]),u.childrenWhoseSessionsIClose))for(var d=u.childrenWhoseSessionsIClose.length-1;d>=0;d--)this.notifyEnd(u.childrenWhoseSessionsIClose[d]);return n.type="sessionEnded",n.category=e,n.name=t+".ended",n.sessionName=t,this.enabled!==!1&&this.events.onNext(n),n},areEventsQueued:function(){return this._queue.length>0},flush:function(){this._flushes.onNext()},_arrayIndexWhere:function(e,t){var n;for(n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1},_getEventSessionKey:function(e){var t=e.sessionKey;return void 0===t&&(t=[e.category,e.sessionName,e.sessionId],e.sessionKey=t),t},_isEventEnabled:function(e,t){var n,i,s;return n=this._isEventEnabledByEventNameByCategory[e.category]||{},this._isEventEnabledByEventNameByCategory[e.category]=n,"undefined"!=typeof n[e.sessionName]?n[e.sessionName]:(i=Number(t.disabledChance),i=isNaN(i)?0:i,s=Math.floor(100*Math.random())>=i,n[e.sessionName]=s,s||this.log("Disabling "+e.category+"."+e.sessionName+" (disabledChance: "+(t.disabledChance||0)+")"),s)},_getSuppressPercentage:function(e){var t=Number(e.suppressPercentage);return isNaN(t)?0:t},_getEventSpecification:function(e){var t,n=this.specification,s=e.specification;return s&&"object"==typeof s?s:(n&&"object"==typeof n?(t=n[e.category]||{},s=t[e.sessionName]||t[e.name],s&&"object"==typeof s||(s={},t&&"object"==typeof t&&(t[e.name]=s))):s={},s.suppressPercentage=this._getSuppressPercentage(s),e.specification=s,Object.defineProperty(e,"specification",i),s)},_addTimeAndIds:function(e){return void 0===e.time&&(e.time=this.timeStamp()),void 0===e.id&&(e.id=this.nextGuid()),"sessionStarted"===e.type&&void 0===e.sessionId&&(e.sessionId=this.nextGuid()),e},_sendQueuedRequest:function(e){var t=this;return this._requestSender(e).doAction(function(){t.removeQueuedRequest(e)},function(){t.removeQueuedRequest(e),t._retryFailedRequests&&(++e.retryCount,t.log("Request failed, retrying..."),t.outgoingRequests.onNext(e))}).catchException(function(){return n.Observable.returnValue(e)})},_sendRequestAfterDelay:function(e){this._queuedRequests.push(e),e.time=e.time||this.timeStamp(),e.retryCount=e.retryCount||0;var t=this.getRequestSendDelayMs(e);return t&&this.log("Delaying request with timestamp "+e.time+" by "+t+"ms..."),n.Observable.timer(t).take(1).selectMany(this._sendQueuedRequest.bind(this,e))},_waitUntilEnabled:function(e){return this.enabled?n.Observable.returnValue(e):this._enabledChanges.where(function(e){return e===!0}).select(function(){return e}).take(1)},_createRequestsObservable:function(){return n.Observable.merge(this.unsentRequests.selectMany(this._waitUntilEnabled.bind(this)),this.outgoingRequests.selectMany(this._waitUntilEnabled.bind(this))).selectMany(this._sendRequestAfterDelay.bind(this)).publish().connect()},_createEvents:function(){var e=this,t=new n.Subject,i=t.onNext;return t.onNext=function(n){e._addTimeAndIds(n),void 0===e.enabled?e._eventsQueuedBeforeEnabled.push(n):e.enabled===!0&&e._isValidEvent(n)&&i.call(t,n)},t},_writePromotedPropertyValueToPath:function(e,t,n){var i,s,o;for(i=0;i<t.length-1;i++)s=t[i],o=e[s],null!==o&&"object"==typeof o||(o={},e[s]=o),e=o;e[t[t.length-1]]=n},_writePromotedPropertiesFromSession:function(e,t,n){var i,s,r,a,u,d,c,f=t.data;if(void 0!==f)for(i in e){if(s=e[i],s===!0&&(s=i),o(s)&&!Array.isArray(s)){if(r=s,a=r[n.category],u=o(a)&&a[n.sessionName],d=o(a)&&void 0!==a["default"]?a["default"]:r["default"],d=void 0===d?!1:d,c=void 0===a||o(a)&&void 0===u,a===!1||u===!1||c&&d===!1)continue;(u===!0||a===!0||c&&d===!0)&&(s=i),s=c?d:void 0!==u?u:a}Array.isArray(s)?this._writePromotedPropertyValueToPath(n,s,f[i]):n[s]=f[i]}},_writePromotedProperties:function(e,t,n){var i,s,o,r;for(i=0;i<e.length;i++)s=e[i],o=this._getEventSpecification(s),o&&(r=o[t],void 0!==r&&this._writePromotedPropertiesFromSession(r,s,n))},_createEventsWithActiveSessions:function(){var e=this;return n.Observable.createWithDisposable(function(t){var n=function(s){var o,a,u,d,c,f,l,h,v,p,y,m,g,S,b,x=e.sessionState,q=x.sessions,w=x.sessionsList;if("event"!==s.type){if(l=e._getEventSpecification(s),f=e._getEventKey(s),o=q[f],a=Array.isArray(o)?o[o.length-1]:o,"sessionStarted"===s.type){if(void 0!==a){if(a.sessionId===s.sessionId)return a;if(!l||!l.overlapping)return e.log("Implicitly ending "+s.category+"."+s.sessionName),n(e._addTimeAndIds({type:"sessionEnded",category:s.category,name:s.sessionName+".ended",sessionName:s.sessionName,sessionId:o.sessionId,time:s.time})),n(s);Array.isArray(o)||(o=[o],q[f]=o),o.push(s),w.push(s)}else q[f]=s,w.push(s);l&&l.parentThatClosesMySessionWhenItCloses&&(S=q[l.parentThatClosesMySessionWhenItCloses],Array.isArray(S)&&(S=S[S.length-1]),S&&S.time<s.time&&(b={sessionId:s.sessionId,id:s.id,sessionStartTime:s.time,category:s.category,sessionName:s.sessionName},S.childrenWhoseSessionsIClose?S.childrenWhoseSessionsIClose.push(b):S.childrenWhoseSessionsIClose=[b])),!l||"start"!==l.send&&"both"!==l.send||((y=e.onNotifyStart)&&y(s),(y=l.onNotifyStart)&&y(s))}else if("sessionEnded"===s.type){if(void 0===o)return;if(void 0!==s.sessionId?Array.isArray(o)?(p=e._arrayIndexWhere(o,function(e){return e.sessionId===s.sessionId}),-1!==p&&(h=o[p],o.splice(p,1),0===o.length&&(q[f]=void 0))):o.sessionId===s.sessionId&&(h=o,q[f]=void 0):Array.isArray(o)?(h=o.pop(),0===o.length&&(q[f]=void 0)):(h=o,q[f]=void 0),l&&l.parentThatClosesMySessionWhenItCloses&&(S=q[l.parentThatClosesMySessionWhenItCloses],S&&(Array.isArray(S)&&(S=S[S.length-1]),S.childrenWhoseSessionsIClose&&(p=e._arrayIndexWhere(S.childrenWhoseSessionsIClose,function(e){return e.id===h.id}),-1!==p&&S.childrenWhoseSessionsIClose.splice(p,1)))),void 0===h)return;s.sessionId=h.sessionId,c=w.length,w[c-1].id===h.id?w.length=c-1:(p=e._arrayIndexWhere(w,function(e){return e.id===h.id}),-1!==p&&w.splice(p,1)),void 0===s.duration&&(s.duration=s.time-h.time),!l||"end"!==l.send&&"both"!==l.send||((g=e.onNotifyEnd)&&g(h,s),(g=l.onNotifyEnd)?g(h,s):"end"===l.send&&(void 0===s.data&&(s.data={}),s.data=r.deepMixin(s.data,h.data),s.dataContext=r.deepMixin(s.dataContext,h.dataContext)))}}else e.onNotify&&e.onNotify(s);if("event"===s.type||void 0!==l&&("both"===l.send||"sessionStarted"===s.type&&"start"===l.send||"sessionEnded"===s.type&&"end"===l.send&&void 0!==h)){for(v=[],m=0;m<w.length;m++)u=w[m],d=e._getEventSpecification(u),d&&void 0!==d.send&&v.push(e._getEventSessionKey(u));s.activeSessions=v,e._writePromotedProperties(w,"eventProperties",s),s.sessionState=x,Object.defineProperty(s,"sessionState",i),t.onNext(s)}};return e.events.subscribe(n,function(e){t.onError(e)},function(){t.onCompleted()})})},createRequestFromUnsentEvents:function(){return this.areEventsQueued()?this._createRequest(this._queue):void 0},clearDisabledEvents:function(){var e,t,n,i=this._isEventEnabledByEventNameByCategory;this.log("Clearing disabled state for all event types");for(t in i){e=i[t]||{};for(n in e)delete e[n]}},_canSendEvent:function(e){var t=this._getEventSpecification(e);return this._isEventEnabled(e,t)&&(0===t.suppressPercentage||Math.floor(100*Math.random())>=t.suppressPercentage)},_createRequest:function(e){var t,n=this,i={};return n._writePromotedProperties(this.sessionState.sessionsList,"requestProperties",i),i.events=e.filter(n._canSendEvent.bind(n)).map(function(e){return e.sequence=n._sequencePrefix+n.sequence,n.sequence++,e}),(t=n.onRequest)&&t(i),i},_createRequests:function(){var e=this;return n.Observable.create(function(t){var n,i,o,r=e._queue,a=function(){var e;r.length>0&&(n=clearTimeout(n),e=r.slice(0),r.length=0,t.onNext(e))},u=function(){void 0!==i&&i.dispose(),void 0!==o&&o.dispose(),n&&(n=clearTimeout(n))};return o=e._flushes.subscribe(function(){a()},function(e){void 0!==u&&u(),t.onError(e)},s),i=e.eventsWithActiveSessions.subscribe(function(t){1===r.length&&(n=setTimeout(a,e.maxFlushDelay)),r.push(t),e.maxBufferSize<=r.length&&a()},function(e){u(),t.onError(e)},function(){a(),u(),t.onCompleted()}),u}).select(function(t){return e._createRequest(t)})}}}("undefined"!=typeof window?window:this),function(e){"use strict";var t=function(t){var n;try{n="object"==typeof e.localStorage?"localstorage":"none"}catch(i){n="none"}var s=function(n){try{return e.localStorage.getItem(t+"."+n)}catch(i){return null}},o=function(n,i){try{return i=JSON.stringify(i),e.localStorage.setItem(t+"."+n,i),!0}catch(s){return!1}},r=function(){return n};return{type:r,get:s,set:o}};e.netflix=e.netflix||{},e.netflix.BrowserDb=function(e){return t(e)}}("undefined"!=typeof window?window:this),function(t){"use strict";t.netflix=t.netflix||{},t.netflix.notification=t.netflix.notification||{},t.netflix.notification.constants=t.netflix.notification.constants||{},t.netflix.session=function(){var n,i,s,o,r=1e3,a=60*r,u=60*a,d=(t.netflix.notification.constants&&t.netflix.notification.constants.sessionLength||30)*a,c=8*u,f=new t.netflix.BrowserDb("NFSessionData"),l=function(){return(new Date).getTime()},h=function(){return void 0===n||l()-n>d},v=function(){return void 0===n||l()-n>c},p=function(){n=l(),S()},y=function(){var e,n,i,s,o="cL=",r=t.document&&t.document.cookie.split(";");if(r)for(i=0;i<r.length;i++){for(s=r[i];" "===s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(o)){e=s.substring(o.length,s.length);break}}try{e&&(e=decodeURIComponent(e).split("|"),n={timeStamp:e[0],activeSessions:[["uiQOE","appSession",e[1]],["uiQOE","userSession",e[2]]],sequencePrefix:e[3],sequence:parseInt(e[4],10),token:m(e,5)})}catch(a){n=null}return n},m=function(e,t){try{return e[t]}catch(n){return""}},g=function(){"none"===f.type()&&(i=!0),n=f.get("nfSessionTs"),s=y();try{s&&s.timeStamp>n?n=s.timeStamp:s=void 0}catch(e){s=void 0}o=!0},S=function(){f.set("nfSessionTs",l())},b=function(){var n=window&&t.jQuery||e("jquery"),i=function(){t.netflix.session.newSession()||f.set("nfSessionTs",l())};t.netflix.session.disabled()||(n&&!n.stub?n(t).bind("beforeunload",i):t.addEventListener("beforeunload",i,!1))};return g(),{disabled:function(){return i},newSession:h,newApp:v,lastActivity:function(){return n},ready:function(){return o},cookieData:function(){return s},keepAlive:p,initTimers:b,database:f}}()}("undefined"!=typeof window?window:this),function(t){"use strict";var n=e("nf-rx"),i=t,s=i.netflix;i.netflix.clientNotifications=function(t,o,r){var a,u,d,c="userSession",f="appSession",l="sharedContext",h="uiQOE",v=s.notification.constants,p=v&&v.pageName||i.location&&i.location.pathname,y=v&&"jfk"===v.uiMode,m=v&&v.debugMode&&i.console,g=v&&v.maxFlushDelay||5e3,S=v&&v.maxBufferSize||20,b=v&&v.logPageOnStart!==!1,x=v?v.ownerToken:"",q=function(){var e=Math.floor(new Date/1e3).toString(),t=Math.floor(1e8*Math.random()).toString();return e+t},w=function(){return(new Date).getTime()},_=function(){return 6e4*(new Date).getTimezoneOffset()},E=function(e){return s.session.disabled()?!1:a.sessionState.sessions[h+"."+e]},N=function(){if(!i.netflix.session.disabled()){i.nflxappbridge&&(d=i.nflxappbridge);try{if(i.netflix.session.ready()){I(),b&&O();var e=a.suspend();R(e),a.restore(e)}else i.setTimeout(N,100)}catch(t){}}},I=function(){if(!s.session.disabled()){var e,u=r.cookieData(),c=r.database.get("nfNotifications"),f={requestSender:function(e){return n.Observable.create(function(t){return A(e,function(e,n){e?t.onError(e):t.onNext(n)}),function(){}}).select(function(){return e})},timeStampGenerator:w,guidGenerator:q,maxBufferSize:S,maxFlushDelay:g,specification:o,sessionState:null,retryFailedRequests:!0};a=new t(f),a.metadata.token=x;try{void 0!==u?e=k(u):null!==c&&(e=JSON.parse(c),e.enabled=void 0),void 0!==e&&C(e)&&(m&&console.log("restoring"+JSON.stringify(e)),a.restore(e))}catch(l){}a.onRequest=function(e){e.locale=v&&v.locale?v.locale:"",e.device={},a.metadata&&a.metadata.device&&(e.device=a.metadata.device),e.device.utcOffset=_(),v.version&&(e.version=v.version),e.browser={userAgent:i.navigator.userAgent,requestUrl:i.location.href,referrerUrl:i.document.referrer},d&&(v.appName="www-hosted"),e.appName=v.appName||"www",e.time=w()}}},C=function(e){var t=e.metadata.token;return"undefined"==typeof t||""===t?!0:t.toString()===x.toString()},O=function(){var e=v&&v.videoId,t=v&&v.trackId,n={category:h,modalView:p};e&&(n.dataContext=n.dataContext||{},n.dataContext.videoId=e),t&&(n.dataContext=n.dataContext||{},n.dataContext.trackId=t),B("uiModalViewChanged",n)},R=function(e){r.disabled()||r.database.set("nfNotifications",e)},P=function(){r.disabled()||(a.start(!0),a.flush())},A=function(t,n){var s=JSON?JSON.stringify(t):t,o=i&&i.jQuery||e("jquery"),r={name:"X-Netflix.ichnaea.request.type",value:"UiRequest"},a="application/json",u="POST",d="/ichnaea/log";if(m&&console.log("Sending data to server: "+s),o&&!o.stub)o.ajax({type:u,url:d,data:s,contentType:a,beforeSend:function(e){e.setRequestHeader(r.name,r.value)},success:function(){n(null,null)},error:n});else{var c=new i.XMLHttpRequest,f=function(){c.onload=null,c.onerror=null,c.ontimeout=null,c.onabort=null,c=null},l=function(){n(null,null),f()},h=function(){n(!0,c),f()};c.open(u,d),c.withCredentials=!0,c.setRequestHeader(r.name,r.value),c.setRequestHeader("Content-Type",a),c.onload=l,c.onerror=h,c.ontimeout=h,c.onabort=h,c.send(s)}},j=function(e){var t=r.lastActivity(),n=r.newApp(),s=r.newSession(),o=E(f),a=E(c),u=E(l);if(e!==c&&e!==f&&e!==l&&(n||void 0===o?(void 0!==a&&M(c,{category:h,data:{endReason:"timeout",lastUserActivityTime:t}}),void 0!==o&&M(f,{category:h,data:{endReason:"timeout",lastUserActivityTime:t}}),T(f),v["accept-language"]?T(c,{category:h,data:{trigger:"appStart",acceptLanguageHeader:v["accept-language"]}}):T(c,{category:h,data:{trigger:"appStart"}})):(s||void 0===a)&&(void 0!==a&&M(c,{category:h,data:{endReason:"timeout",lastUserActivityTime:t}}),T(c,{category:h,data:{trigger:"inputEvent",idleTime:w()-t}})),"www-hosted"===v.appName)){var d,p={},y=i.location.href;y.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,i){p[t]=i}),p&&p.uuid&&(d=p.uuid),void 0===u?d&&T(l,{category:h,data:{trigger:"signup",role:"receiver",uuid:d}}):d&&d!==u.data.uuid&&(M(l,{category:h,data:{role:"receiver",uuid:u.data.uuid}}),T(l,{category:h,data:{trigger:"signup",role:"receiver",uuid:d}}))}},T=function(e,t){return D("start",e,t)},M=function(e,t){return D("end",e,t)},B=function(e,t){return D("singleton",e,t)},D=function(e,t,n){if(s.session.disabled())return!1;var o,d=n||{};switch(d.modalView=d.modalView||p,y&&"undefined"==typeof d.kids&&(d.kids=y),o=d.category||h,"undefined"===a&&i.setTimeout(function(){D(e,t,n)},100),m&&console.log("notifying "+t+" : "+JSON.stringify(n)),j(t),r.keepAlive(),e){case"start":return"object"==typeof d.endOnUnload&&(u=u||{},d.endOnUnload.category=o,u[t]=d.endOnUnload,delete d.endOnUnload),a.notifyStart(o,t,d);case"end":return"Object"==typeof d.startEvent?a.notifyEnd(d.startEvent):a.notifyEnd(o,t,d);default:return a.notify(o,t,d)}},Q=function(){if(u)for(var e in u)u.hasOwnProperty(e)&&M(e,u[e])},W=function(){var e,t=E(f),n=E(c),s={};if(void 0!==t&&!r.newApp())try{s.appId=t.sessionId,void 0!==n&&(s.sessionId=n.sessionId),s.timeStamp=r.lastActivity(),s.sequencePrefix=a.getSequencePrefix(),e=encodeURIComponent(s.timeStamp+"|"+s.appId+"|"+s.sessionId+"|"+s.sequencePrefix+"|"+a.sequence+"|"+x),i.document.cookie="cL="+e+"; path=/; domain="+i.location.hostname}catch(o){}},k=function(e){var t,n,i,s,o=e.activeSessions,r={},a=[],u={},d=[];for(s=0;s<o.length;s++){try{n=o[s][2],t=o[s][1]}catch(c){break}d.push([h,t,n]),i={sessionId:n,type:"sessionStarted",category:h,name:t+".started",sessionName:t,id:n,activeSessions:d},u[h+"."+t]=i,a.push(i)}return m&&console.log("Restoring "+d),r.sessionState={sessions:u,sessionsList:a},e.esn&&(r.metadata=r.metadata||{},r.metadata.device={esn:e.esn}),"NaN"!==e.sequence&&(r.sequence=e.sequence),e.sequencePrefix&&(r.sequencePrefix=e.sequencePrefix),e.token&&(r.metadata=r.metadata||{},r.metadata.token=e.token),r},U=function(){var t=i&&i.jQuery||e("jquery"),n=function(){s.session.disabled()||(Q(),W(),R(a.suspend()))};s.session.initTimers(),P(),W(),t&&!t.stub?t(i).unload(n):i.addEventListener("unload",n)},F=function(){a.flush()};return N(),{start:U,notify:B,notifyStart:T,notifyEnd:M,getCurrentSession:E,flushBuffer:F,createClientNotifications:I}}(s.notification.ClientNotifications,s.notification.specification,s.session)}("undefined"!=typeof window?window:this),t.exports="undefined"!=typeof window?window:this},{jquery:"jquery","nf-rx":"nf-rx"}],2:[function(e,t,n){"use strict";function i(){}var s,o=e("../dist/clientNotifications.js");s="undefined"!=typeof window?window.netflix:o.netflix,t.exports={init:function(){try{s.clientNotifications.start()}catch(e){}},active:function(){return s.session&&s.notification&&s.clientNotifications},session:s.session,notification:s.notification,clientNotifications:s.clientNotifications||{notifyEnd:i,notifyStart:i,notify:i}}},{"../dist/clientNotifications.js":1}]},{},[2])(2)})});
!function(i){"use strict";i.Requireify.kickoff()}(window);