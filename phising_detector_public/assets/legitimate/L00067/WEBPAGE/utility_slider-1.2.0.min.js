/*
 utility_slider-1.2.0.js
 Copyright (c) 2015 Rakuten.Inc
 Date : 2015-04-22 11:16:18
*/
(function(){if(void 0!==window.jQuery){var e=jQuery,g=/MSIE\s[6-7]/.test(navigator.userAgent);if(!e.fn.velocity||g){var j=!0;e.fn.velocity=e.fn.animate}var h=function(b){this.$root=b;this.prevButtonSelector=this.$root.attr("data-prevButtonSelector")||this.defaults.selectors.prevButton;this.nextButtonSelector=this.$root.attr("data-nextButtonSelector")||this.defaults.selectors.nextButton;this.itemFrameSelector=this.$root.attr("data-itemFrameSelector")||this.defaults.selectors.itemFrame;this.itemBoxSelector=
this.$root.attr("data-itemBoxSelector")||this.defaults.selectors.itemBox;this.itemSelector=this.$root.attr("data-itemSelector")||this.defaults.selectors.item;this.indicatorFrameSelector=this.$root.attr("data-indicatorFrameSelector")||this.defaults.selectors.indicatorFrame;this.indicatorSelector=this.$root.attr("data-indicatorSelector")||this.defaults.selectors.indicator;this.rastaFrameSelector=this.$root.attr("data-rastaFrameSelector")||this.defaults.selectors.rastaFrame;this.slideActiveClassName=
this.$root.attr("data-slideActiveClassName")||this.defaults.slideActiveClassName;this.indicatorActiveClassName=this.$root.attr("data-indicatorActiveClassName")||this.defaults.indicatorActiveClassName;this.buttonInactiveClassName=this.$root.attr("data-buttonInactiveClassName")||this.defaults.buttonInactiveClassName;this.slideTime=+this.$root.attr("data-slideTime")||this.defaults.slideTime;this.slideEasing=this.$root.attr("data-slideEasing")||this.defaults.slideEasing;this.slideOpacity=+this.$root.attr("data-slideOpacity")||
this.defaults.slideOpacity;if(g||j)this.slideEasing="swing";this.autoSlide="true"===this.$root.attr("data-autoSlide");this.autoSlideTime=+this.$root.attr("data-autoSlideTime")||this.defaults.autoSlideTime;this.loopSlide="false"!==this.$root.attr("data-loopSlide");this.useRASTA="true"===this.$root.attr("data-useRASTA");this.eventName=this.$root.attr("data-eventName")||this.defaults.eventName;this.$indicators=this.$indicatorPrototype=this.$indicatorFrame=this.$items=this.$itemBox=this.$itemFrame=this.$nextButton=
this.$prevButton=void 0;this.autoSlideID=this.currentIndex=this.itemLength=this.itemWidth=0;this.getElements()};h.prototype={defaults:{selectors:{prevButton:".prevButton",nextButton:".nextButton",itemFrame:".itemFrame",itemBox:".itemBox",item:"",indicatorFrame:".indicatorFrame",indicator:".indicator",rastaFrame:".rad-table-body"},slideActiveClassName:"active",indicatorActiveClassName:"active",buttonInactiveClassName:"inactive",events:{SLIDE_CHANGING:"slidechanging",SLIDE_CHANGED:"slidechanged"},itemAlign:"center",
itemMargin:0,slideTime:500,slideEasing:"easeOutCirc",slideOpacity:0.5,autoSlide:!1,autoSlideTime:5E3,loopSlide:!0},getElements:function(){this.$prevButton=this.$root.find(this.prevButtonSelector);this.$nextButton=this.$root.find(this.nextButtonSelector);this.$itemFrame=this.$root.find(this.itemFrameSelector);this.$itemBox=this.$itemFrame.find(this.itemBoxSelector);this.useRASTA?this.bindRASTAEvent():this.initItems()},bindRASTAEvent:function(){var b=this;this.$rastaFrame=this.$root.find(this.rastaFrameSelector);
this.$root.bind(this.eventName,function(c,a){0===a?(b.$rastaFrame.find(b.itemSelector).appendTo(b.$itemBox),b.initItems()):b.$root.hide()})},initItems:function(){this.$prevButton.show();this.$nextButton.show();this.$items=this.$itemBox.children(this.itemSelector);this.itemLength=this.$items.length;this.itemWidth=this.$items.eq(0).outerWidth(!0);this.$indicatorFrame=this.$root.find(this.indicatorFrameSelector).show();this.$indicatorPrototype=this.$indicatorFrame.find(this.indicatorSelector).first();
""!==this.itemSelector&&this.$itemBox.children().not(this.itemSelector).remove();0<this.$indicatorFrame.length&&this.initIndicators();this.bindEvents()},initIndicators:function(){for(var b=this,c="",a=e("<div>").append(e(this.$indicatorPrototype)).html(),d=0,f=this.$items.length;d<f;d++)c+=a;this.$indicatorFrame.append(c);this.$indicators=this.$indicatorFrame.children();this.$indicators.eq(0).addClass(this.indicatorActiveClassName);this.$root.bind(this.defaults.events.SLIDE_CHANGED,function(a){b.changeIndicator(a.customData.index)});
this.$indicators.each(function(a,c){e(c).bind("click",function(){b.moveToIndex(b.currentIndex,a)})})},preBindEffect:function(){this.loopSlide?this.$itemBox.children().eq(0).css("opacity",this.slideOpacity).end().slice(2).css("opacity",this.slideOpacity):(this.$itemBox.children().slice(1).css("opacity",this.slideOpacity),this.$prevButton.addClass(this.buttonInactiveClassName))},bindEvents:function(){var b=this;this.preBindEffect();this.$prevButton.bind("click",function(){b.clickPrev()});this.$nextButton.bind("click",
function(){b.clickNext()});if(this.autoSlide)this.autoSlideID=setInterval(function(){b.clickNext()},this.autoSlideTime),this.$root.hover(function(){b.stopAutoSlide()},function(){b.startAutoSlide()});this.loopSlide||this.$root.bind(this.defaults.events.SLIDE_CHANGING,function(c){b.activateButtons(c.customData.index,c.customData.length)})},clickPrev:function(){this.moveToIndex(this.currentIndex,0===this.currentIndex?this.itemLength-1:this.currentIndex-1)},clickNext:function(){this.moveToIndex(this.currentIndex,
this.currentIndex===this.itemLength-1?0:this.currentIndex+1)},moveToIndex:function(b,c){var a=this;if(!(0<this.$itemBox.queue("fx").length)){var d=c-b;this.currentIndex=c;this.fireEvent(this.$root,this.defaults.events.SLIDE_CHANGING,{index:this.currentIndex,length:this.itemLength});if(this.loopSlide)1===d||d===0-this.itemLength+1?this.$itemBox.velocity({left:"-100%"},this.slideTime,this.slideEasing,function(){a.$itemBox.css("left","0%").children().eq(0).appendTo(a.$itemBox);a.fireEvent(a.$root,a.defaults.events.SLIDE_CHANGED,
{index:a.currentIndex,length:a.itemLength})}).children().eq(1).velocity({opacity:this.slideOpacity},this.slideTime,this.slideEasing).end().eq(2).velocity({opacity:1},this.slideTime,this.slideEasing):-1===d||d===this.itemLength-1?(this.$itemBox.children().eq(0).velocity({opacity:1},this.slideTime,this.slideEasing).end().eq(1).velocity({opacity:this.slideOpacity},this.slideTime,this.slideEasing).end().last().prependTo(this.$itemBox).end().end(),this.$itemBox.css("left","-100%").velocity({left:"0%"},
this.slideTime,this.slideEasing,function(){a.fireEvent(a.$root,a.defaults.events.SLIDE_CHANGED,{index:a.currentIndex,length:a.itemLength})})):0<d?(this.$itemBox.children().eq(1).velocity({opacity:this.slideOpacity},this.slideTime,this.slideEasing),this.$itemBox.css("left","100%").velocity({left:100*(0-d+1)+"%"},this.slideTime,this.slideEasing,function(){a.$itemBox.css("left","0%").append(a.$itemBox.children().slice(0,d-1)).children().eq(1).velocity({opacity:1},a.slideTime,a.slideEasing);a.fireEvent(a.$root,
a.defaults.events.SLIDE_CHANGED,{index:a.currentIndex,length:a.itemLength})}).children().eq(0).appendTo(this.$itemBox)):0>d&&this.$itemBox.css("left",100*d+"%").velocity({left:"0%"},this.slideTime,this.slideEasing,function(){a.$itemBox.children().eq(1).velocity({opacity:1},a.slideTime,a.slideEasing);a.fireEvent(a.$root,a.defaults.events.SLIDE_CHANGED,{index:a.currentIndex,length:a.itemLength})}).children().eq(1).velocity({opacity:this.slideOpacity},this.slideTime,this.slideEasing).end().slice(d).prependTo(this.$itemBox);
else{var f=c*(0-this.itemWidth);1===d?(this.$itemBox.children().eq(this.currentIndex-1).velocity({opacity:this.slideOpacity},this.slideTime,this.slideEasing),this.$itemBox.children().eq(this.currentIndex).velocity({opacity:1},this.slideTime,this.slideEasing)):-1===d?(this.$itemBox.children().eq(this.currentIndex+1).velocity({opacity:this.slideOpacity},this.slideTime,this.slideEasing),this.$itemBox.children().eq(this.currentIndex).velocity({opacity:1},this.slideTime,this.slideEasing)):this.$itemBox.children().eq(b).velocity({opacity:this.slideOpacity},
this.slideTime,this.slideEasing);this.$itemBox.velocity({left:f},this.slideTime,this.slideEasing,function(){1!==d&&-1!==d&&e(this).children().eq(c).velocity({opacity:1},a.slideTime,a.slideEasing);a.fireEvent(a.$root,a.defaults.events.SLIDE_CHANGED,{index:a.currentIndex,length:a.itemLength})})}}},changeIndicator:function(b){this.$indicators.removeClass(this.indicatorActiveClassName).eq(b).addClass(this.indicatorActiveClassName)},activateButtons:function(b,c){0===b?(this.$prevButton.addClass(this.buttonInactiveClassName),
this.$nextButton.removeClass(this.buttonInactiveClassName)):b===c-1?(this.$prevButton.removeClass(this.buttonInactiveClassName),this.$nextButton.addClass(this.buttonInactiveClassName)):(this.$prevButton.removeClass(this.buttonInactiveClassName),this.$nextButton.removeClass(this.buttonInactiveClassName))},startAutoSlide:function(){var b=this;this.autoSlideID=setInterval(function(){b.clickNext()},this.autoSlideTime)},stopAutoSlide:function(){clearInterval(this.autoSlideID)},fireEvent:function(b,c,a){c=
e.Event(c);c.customData=a||{};b.trigger(c)}};var i=e("#RJSUtilitySlider");0<i.length&&new h(i)}})();
