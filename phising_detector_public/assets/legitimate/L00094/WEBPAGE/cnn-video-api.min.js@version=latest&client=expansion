CNN.Features=CNN.Features||{},CNN.VideoConfig=CNN.VideoConfig||{},CNN.VideoConfig.liveStream=CNN.VideoConfig.liveStream||{},CNN.GeoCheck=function(e,n){"use strict";function o(e,n){d=!0,null!==e||"object"!=typeof n||"string"!=typeof n.country||2!==n.country.length?c.country=CNN.VideoConfig.liveStream.geoCheckCountry||"":(c=n,CNN.Utils.storeLocalValue("_geoChk",c.country,CNN.VideoConfig.liveStream.geoCheckCacheTime||2)),r.triggerGeoCheckReady()}function i(){var n,i;d===!0?r.triggerGeoCheckReady():s===!1&&(s=!0,i=CNN.Utils.getLocalValue("_geoChk"),"string"==typeof i&&i.length>0?(d=!0,c.country=i,r.triggerGeoCheckReady()):(n=CNN.VideoConfig.liveStream.geoCheckAPI,"string"==typeof CNN.VideoConfig.liveStream.geoCheckKey&&CNN.VideoConfig.liveStream.geoCheckKey.length>0&&(n+=(n.indexOf("?")<0?"?":"&")+"accessKey="+encodeURIComponent(CNN.VideoConfig.liveStream.geoCheckKey)),e.ajax(n,{async:!0,contentType:"application/json",dataType:"jsonp",error:o,jsonpCallback:"formatGeoData",method:"GET",success:function(e){o(null,e)},timeout:CNN.VideoConfig.liveStream.geoCheckTimeout||5e3})))}function t(){return d?""===CNN.VideoConfig.liveStream.geoCheckCountry||c.country.toUpperCase()===CNN.VideoConfig.liveStream.geoCheckCountry?!0:!1:!0}function a(){return!CNN.Features.enableLiveVideoGeoCheck||d?!0:!1}var r=e(n),d=!1,c={},s=!1;return CNN._geoCheckReadyEvent=!1,e.fn.extend({onGeoCheckReady:function(n){"function"==typeof n&&(CNN._geoCheckReadyEvent===!0?n(e):r.on("geoCheckReady",{handler:n},function(n){n=n||{},"object"==typeof n.data&&null!==n.data&&"function"==typeof n.data.handler&&n.data.handler(e)}))},triggerGeoCheckReady:function(){CNN._geoCheckReadyEvent=!0,r.trigger("geoCheckReady")}}),{init:i,inCountry:t,isReady:a}}(jQuery,document),CNN.VideoConfig=CNN.VideoConfig||{},CNN.VideoConfig.api=CNN.VideoConfig.api||{},CNN.VideoSourceUtils={getSourceElement:function(e){"use strict";var n,o;return o=jQuery("#"+e).parent(),n=jQuery(o).find(".metadata"),n.find(".metadata__source-name")},clearSource:function(e){"use strict";var n=this.getSourceElement(e);n&&n.html("&nbsp;")},updateSource:function(e,n){"use strict";var o=this.getSourceElement(e),i="Source: ",t=jQuery("<a></a>");n="string"==typeof n?JSON.parse(n):n,o&&(o.empty(),n&&(n.sourceUrl?(t.attr("href",n.sourceUrl),t.text(n.source),o.html(i).append(t)):o.html(i+n.source)))}},function(){"use strict";function e(){jQuery(document).onZonesAndDomReady(function(){var e=document.createElement("script"),o=document.getElementsByTagName("script")[0];e.src=function(){var e=n.scriptTag.env+n.scriptTag.src,o=[];return"undefined"!=typeof n.scriptTag.version&&""!==n.scriptTag.version&&o.push("version="+n.scriptTag.version),"undefined"!=typeof n.scriptTag.client&&""!==n.scriptTag.client&&o.push("client="+n.scriptTag.client),o.length>0&&(e=e+"?"+o.join("&")),e}(),e.id=i,o.parentNode.insertBefore(e,o)})}if("function"!=typeof window.CNN.VideoPlayer){var n={scriptTag:{env:CNN.VideoConfig.api.loaderBaseURL,src:"http://edition.i.cdn.cnn.com/.a1.261.0/js/cnn_video_api.js",version:CNN.VideoConfig.api.version||"latest",client:"expansion"}},o=[],i="cnnAPIJS";CNN.VideoPlayer=function(){null===document.getElementById(i)&&e()},CNN.VideoPlayer.addVideo=function(e,n){if("undefined"==typeof e)return void console.error("required options were not passed");if("undefined"==typeof e.video||"undefined"==typeof e.context||"undefined"==typeof e.network||"undefined"==typeof e.profile||"undefined"==typeof e.markupId)return void console.error("Not all required options were passed");if("iframeTest"===e.context&&("undefined"==typeof e.frameWidth||"undefined"==typeof e.frameHeight))return void console.error("frameWidth and frameHeight must be passed for iframe videos");"undefined"==typeof n&&(n={}),o.push({videoConfig:e,eventsCallback:n,overridesConfig:{}});try{CNN.AmazonVideoAds.Manager.getInstance().addAmazonCallback(n)}catch(i){}},CNN.VideoPlayer.initVideos=function(){window.cnnVideoManager.renderMultipleContainers(o),o=[]},CNN.VideoPlayer.addVideos=function(e){var n=0;if("undefined"==typeof e)return void console.error("An array was not passed");for(n=e.length-1;n>=0;n--)window.CNN.VideoPlayer.addVideo(e[n]);window.CNN.VideoPlayer.initVideos()},CNN.VideoPlayer.isMobileClient=function(){return"undefined"!=typeof window.orientation},CNN.VideoPlayer.isFlashInstalled=function(){var e=!1;if("ActiveXObject"in window)try{e="undefined"!=typeof new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(n){e=!1}else e="undefined"!=typeof navigator.mimeTypes["application/x-shockwave-flash"];return e},CNN.VideoPlayer.handleAdOnCVPVisibilityChange=function(e,n){n?window.cnnVideoManager.getPlayerByContainer(e).videoInstance.cvp.setAdKeyValue("inFocus","true"):window.cnnVideoManager.getPlayerByContainer(e).videoInstance.cvp.setAdKeyValue("inFocus","false")}}}(),jQuery(document).onZonesAndDomReady(function(){"use strict";CNN.VideoPlayer()}),window.CNNVideoAPILoadComplete=function(){"use strict";var e=CNN.companion&&CNN.companion.initCompanionLayout;e&&"function"==typeof CNN.companion.initCompanionLayout&&CNN.companion.initCompanionLayout(),CNN.VideoPlayer.apiInitialized=!0,CNN.VideoPlayer.initVideos()},CNN.VideoConfig=CNN.VideoConfig||{},CNN.VideoConfig.api=CNN.VideoConfig.api||{};var CNNVIDEOAPI=window.CNNVIDEOAPI||{};CNNVIDEOAPI.apiBaseUrl=CNN.VideoConfig.api.loaderBaseURL,CNNVIDEOAPI.apiMappingFile="/config/apimapping.json",CNNVIDEOAPI.bootstrapperFile="/js/CNNVideoBootstrapper.js",CNNVIDEOAPI.currentVersion=null,CNNVIDEOAPI.client="expansion",function(e){"use strict";function n(e,n){try{var o,i,t,a,r,d=document.getElementById("cnnAPIJS"),c=d.src.replace(/^[^\?]+\??/,""),s=c.split("&");for(r=0;r<s.length;r++)if(o=s[r],t=o.split("="),a=t[0],i=t[1],a.replace(" ","")===e)return i}catch(u){}return n}function o(){return n("version","latest")}function i(){CNNVIDEOAPI.client=n("client","default").toLowerCase(),a(CNNVIDEOAPI.apiBaseUrl+o()+CNNVIDEOAPI.bootstrapperFile,t)}function t(){r=e.CNNVIDEOAPI.Utils;var n,i=o(),t=CNNVIDEOAPI.apiBaseUrl+i+CNNVIDEOAPI.apiMappingFile;n=new CNNVIDEOAPI.Bootstrapper(t),n.initialize()}function a(e,n){var o=document.createElement("script");o.readyState?o.onreadystatechange=function(){("loaded"===o.readyState||"complete"===o.readyState)&&(o.onreadystatechange=null,n())}:o.onload=function(){n()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}var r;jQuery(document).onZonesAndDomReady(function(){i()})}(this);
//# sourceMappingURL=cnn-video-api.min.js.map