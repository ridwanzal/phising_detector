/* Built on 2016-02-17 17:17:53 */
(function(){var init_menu=function(name,toggler,togglers){var menu_toggler=document.getElementById("header-mobile-"+name+"-toggle");if(menu_toggler){var opened=false,menu=document.getElementById(toggler.id);toggler.toggle=function(toggle){if(typeof toggle!=="undefined"&&toggle===opened){return}if(opened){xv.dom.addClass(menu,"mobile-hide");xv.dom.removeClass(menu_toggler,toggler.icon_cls)}else{for(var t in togglers){if(t!==name&&togglers[t].toggle){togglers[t].toggle(false)}}xv.dom.removeClass(menu,"mobile-hide");xv.dom.addClass(menu_toggler,toggler.icon_cls);xv.dom.scrollToTop()}opened=!opened};menu_toggler.onclick=function(event){if(!event){event=this.originalEvent}if(event){if(typeof event.preventDefault==="function"){event.preventDefault()}else{event.returnValue=false}}toggler.toggle();return false}}};var mobile={menus_init:function(togglers){for(var t in togglers){init_menu(t,togglers[t],togglers)}}};if(!window.xv){window.xv={}}window.xv.mobile=mobile})();
(function(){var messenger={};var mobile_btn_parent=document.getElementById("mobile-messages-btn"),mobile_btn=xv.dom.getFirstChild(mobile_btn_parent),desktop_btn=document.getElementById("desktop-messages-btn"),node=document.getElementById("x-messages"),container=xv.dom.getFirstChild(node),children=xv.dom.getChildren(container),all_hash=[],cookie_expiration={},cookie_hide_default={},displayed=false;var has_unread=function(){if(all_hash.length===0){return false}for(var hash in cookie_expiration){if(!cookie_hide_default[hash]&&!xv.cookies.get("hide_xmsg_"+hash)){return true}}return false};var register_hash=function(hash,expires,hide_by_default){all_hash.push(hash);cookie_expiration[hash]=expires||15e3*24*3600;cookie_hide_default[hash]=hide_by_default===true;xv.dom.removeClass(mobile_btn_parent,"hidden");xv.dom.addClass(mobile_btn_parent,"mobile-show");xv.dom.removeClass(desktop_btn,"hidden");xv.dom.addClass(desktop_btn,"mobile-hide");if(has_unread()){toggle_message(true)}};var toggle_message=function(toggle){if(typeof toggle!=="boolean"){toggle=!displayed}if(toggle===displayed){return}if(toggle){node.style.display="block";xv.dom.addClass(mobile_btn,"opened");xv.dom.addClass(desktop_btn,"opened")}else{node.style.display="none";xv.dom.removeClass(mobile_btn,"opened");xv.dom.removeClass(desktop_btn,"opened");for(var hash in cookie_expiration){xv.cookies.setLocal("hide_xmsg_"+hash,"1",cookie_expiration[hash],"/")}}displayed=toggle};var hash=node.getAttribute("data-hash");if(hash){register_hash(hash,null,node.getAttribute("data-hide")==="true")}xv.dom.getFirstChild(children[1]).onclick=toggle_message;mobile_btn.onclick=toggle_message;desktop_btn.onclick=toggle_message;messenger.send=function(content,hash,expires,hide_by_default){var msg=content;if(typeof content==="string"){msg=document.createElement("div");xv.dom.addClass(msg,"x-message");msg.innerHTML=content}container.appendChild(msg);register_hash(hash,expires,hide_by_default)};if(!window.xv){window.xv={}}window.xv.messages=messenger})();
(function(){var togglers={};togglers["menu"]={id:"mobile-menu",icon_cls:"vertical"};togglers["filters"]={id:"mobile-filters-menu",icon_cls:"opened"};togglers["search"]={id:"xv-search-form",icon_cls:"close"};xv.mobile.menus_init(togglers)})();