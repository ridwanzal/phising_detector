USAA.ec.IARestructure.UNICCAOffersMainPage=function(U){var V=this;var N=YAHOO.util.Dom;var R=U.globalEvMngr;var P;var S={};var E="slider_single_container";var Q="delayRenderCarouselImage";var C="noRenderCarouselNavImage";var O="marquee-home-member-nav";var G="noRenderCarouselNavSpan";var J={width:285,autoPlayInterval:0,autoPlay:false};var L={id:"carouselContainer",width:970,autoPlayInterval:8000,autoPlay:true};V.staticData=U.staticData.banners;V.bannerData=[];V.bannerIds=[];var H=function(W,X){W.addListener("afterScroll",function(b,a){if(b.last!=1){var Y=b.last==b.first?a.id*3+(b.last)+4:(a.id*3)+(b.last-1)+4;if(!a.carousel[V.bannerIds[Y]]){var Z='[{"OffersInfo": {"offerIDs": ["'+V.bannerIds[Y]+'"],"pageName": "'+USAA.ec.IARestructure.pageName+'","DispAction": "OfferContact"}}]';P.realTimeHelper.postDispose(Z);a.carousel[V.bannerIds[Y]]=true}}},{id:X,carousel:W})};var T=function(X){if(X.last==3&&(X.last!=X.first)){if(S.WebLargeBannerZone2){var W='[{"OffersInfo": {"offerIDs": ["'+V.bannerIds[2]+'","'+V.bannerIds[3]+'"],"pageName": "'+USAA.ec.IARestructure.pageName+'","DispAction": "OfferContact"}}]';P.realTimeHelper.postDispose(W)}V.bannerCarousel.removeListener("afterScroll",T)}};var K=function(W,a){var d=new USAA.ec.widget.Carousel(W.id,{width:W.width,numVisible:1,carouselEl:"UL",animation:{speed:0.7,effect:YAHOO.util.Easing.easeOut},autoPlayInterval:W.autoPlayInterval,isCircular:true});var b=false;var c=N.getElementsByClassName("carousel")[0];var Y=c.getElementsByTagName("*");var f=N.getElementsByClassName("marquee-link");var e=function(g){if(d.isAutoPlayOn()){if(g.type==="focus"||g.type==="click"){b=true}d.stopAutoPlay()}};var Z=function(g){if(!d.isAutoPlayOn()&&!b){d.startAutoPlay()}};for(var X=1;X<Y.length;X++){if((Y[X].tagName).toUpperCase()=="LI"){Y[X].setAttribute("aria-hidden","true");Y[X].setAttribute("role","presentation");Y[X].style.visibility="hidden"}}N.batch(f,function(g){_yEvent.addListener(g,"focus",e);_yEvent.addListener(g,"click",e);_yEvent.addListener(g,"mouseover",e);_yEvent.addListener(g,"mouseout",Z)});d.render();d.show();if(W.autoPlay===true){d.startAutoPlay()}d.indexedVal=a;(W.id).search("slider_single")!=-1?H(d,a):null;W.id=="carouselContainer"?(d.addListener("afterScroll",T),V.bannerCarousel=d):null};var I=function(){var m,h,W,c,j,X,l,f=/(?:\("?'?)([a-zA-Z0-9\/\:\-\_\.\?\=\&\%\#]+)(?:"?'?\))/;for(var e in V.bannerData){m=N.getElementsByClassName(Q,"IMG",V.staticData.id[e])[0];h=N.getElementsByClassName(C,"IMG",V.staticData.id[e])[0];l=N.getElementsByClassName(G,"SPAN",V.staticData.id[e])[0];c=N.get(O+(parseInt(e)+1));if(m){W=(m.style.backgroundImage.match(f)[1]);m.src=W;m.style.backgroundImage=""}if(h){j=(h.style.backgroundImage.match(f)[1]);X=N.getElementsByClassName("text","SPAN",c)[0];var Y=N.getElementsByClassName("on","SPAN",c)[0];if(X){N.setStyle(X,"backgroundImage","url("+j+")");X.setAttribute("aria-hidden","true");X.setAttribute("role","presentation");X.innerHTML="";Y.setAttribute("aria-hidden","true");Y.setAttribute("role","presentation");Y.innerHTML="";h.removeAttribute("class");h.removeAttribute("style");h.setAttribute("width","244");h.setAttribute("height","50");h.setAttribute("id","failOverImageNormal"+(parseInt(e)+1));if(l!==undefined){h.setAttribute("alt",l.innerHTML)}else{h.setAttribute("alt"," ")}h.setAttribute("title","");h.style.display="block";h.style.textAlign="center";var d=document.createElement("img");d.setAttribute("src",h.getAttribute("src"));d.setAttribute("width","244");d.setAttribute("height","50");d.setAttribute("id","failOverImageActive"+(parseInt(e)+1));if(l!==undefined){d.setAttribute("alt",l.innerHTML+" (Currently Active)");l.parentNode.removeChild(l)}else{d.setAttribute("alt"," ")}d.setAttribute("title","");d.style.display="block";d.style.textAlign="center";var b=c.cloneNode(true);b.appendChild(d);b.setAttribute("id",b.getAttribute("id")+"-Clone");b.style.display="none";c.parentNode.appendChild(b);c.appendChild(h)}}}if(L.id&&N.getElementsByClassName("bannerContent","div",L.id)){var a=N.getElementsByClassName("bannerContent","div",L.id);for(var e=0;e<a.length;e++){N.hasClass(a[e],"hidden")?N.removeClass(a[e],"hidden"):null}}if(N.get(L.id)){K(L)}var k=N.getElementsByClassName(E,"div");var Z=J;for(var g=k.length,e=0;e<g;e+=1){Z.id=k[e].id;N.hasClass(k[e].parentNode,"hidden")?N.removeClass(k[e].parentNode,"hidden"):null;K(Z,e)}};var F=function(W){for(var X in V.bannerData){var Z=V.bannerData[X];var Y=document.createElement("DIV");Y.innerHTML=Z;N.get(V.staticData.id[X])?N.get(V.staticData.id[X]).appendChild(Y):null}I()};var D=function(Y,X){var W='[{"OffersInfo": {"offerIDs": [';for(i in V.bannerIds){V.bannerFlag[i]?W+='"'+V.bannerIds[i]+'",':null}W=W.substring(0,W.length-1);W+='],"pageName": "'+USAA.ec.IARestructure.pageName+'","DispAction": "OfferContact"}}]';P.realTimeHelper.postDispose(W)};var M=function(){for(var W in V.staticData.id){N.get(V.staticData.id[W]).innerHTML=""}};var A=function(X){var W=X.Obj.jsonData;S=W;var b=V.staticData.zone;V.bannerFlag=[];var a=0;for(var Y in V.staticData.zone){var c=V.staticData.zone[Y];if(W[c]){for(var Z in W[c].realTimeOffers.list){W[c].realTimeOffers.list[Z]?V.bannerData[a++]=W[c].realTimeOffers.list[Z].map.Markup:null;V.bannerIds[V.bannerIds.length]=W[c].realTimeOffers.list[Z].map.OfferId;if(c=="WebLargeBannerZone1"){V.bannerFlag[a-1]=true}else{if(c!="WebLargeBannerZone2"&&Z==0){V.bannerFlag[a-1]=true}}}}}M();F();P=X.Obj.rpcMang;D()};R.oEvents.DataReady.subscribe(A);var B=function(){for(var X in V.staticData.id){var W=document.createElement("div");W.innerHTML=N.get(V.staticData.id[X]).innerHTML;var Y=(W.getElementsByTagName("div"));Y=Y[0].innerHTML;V.bannerData[X]=Y}I()};R.oEvents.RenderStaticContent.subscribe(B);R.oEvents.AJAXcallFailed.subscribe(B)};USAA.ec.IARestructure.AppManager=function(B){var C=this;var E=function(J){C.Data={};for(i in J){C.Data[J[i].webZone]=J[i]}C.gEvManager.oEvents.DataReady.fire({eventType:"tDataReady",Obj:{staticData:USAA.ec.IARestructure.templatJson,jsonData:C.Data,rpcMang:C.jsonrpc}})};var D=function(){C.gEvManager.oEvents.AJAXcallFailed.fire({eventType:"tAJAXcallFailed",Obj:{staticData:USAA.ec.IARestructure.templatJson}})};var I=function(J){J?(E(J),C.gEvManager.oEvents.TabChanged.fire({eventType:"tTabChanged",Obj:{tabRef:C.TabView,index:0}})):D()};var F=function(){var K=document.location.href;var L=K.search(".com");var J=K.substring(0,L+4)+USAA.ec.IARestructure.RPCCallUrl;return J};var H=function(){C.jsonrpc=new JSONRpcClient(F(),["realTimeHelper.loadRealTimeWebOffers","realTimeHelper.postDispose"]);C.jsonrpc.realTimeHelper.loadRealTimeWebOffers(I,USAA.ec.IARestructure.AJAXcall)};this.gEvManagerConfig=[{name:"DataReady",type:"tDataReady"},{name:"TabChanged",type:"tTabChanged"},{name:"TabContentRendered",type:"tTabContentRendered"},{name:"RenderStaticContent",type:"tRenderStaticContent"},{name:"AJAXcallFailed",type:"tAJAXcallFailed"}];if(!C.gEvManager){C.gEvManager=new USAA.ec.pfm.EventManager(C.gEvManagerConfig);C.gEvManager.loadConfig(C.gEvManagerConfig)}var A=function(){var J,L,K=document.cookie.split(";");for(i=0;i<K.length;i++){J=K[i].substr(0,K[i].indexOf("="));L=K[i].substr(K[i].indexOf("=")+1);J=J.replace(/^\s+|\s+$/g,"");if(J=="usaa.com.uniqueId"){return unescape(L)}}};var G=function(){C.bannersManager=new USAA.ec.IARestructure.UNICCAOffersMainPage({staticData:USAA.ec.IARestructure.templatJson,globalEvMngr:C.gEvManager});var J=A();J&&USAA.ec.IARestructure.AJAXcall?H():C.gEvManager.oEvents.RenderStaticContent.fire({eventType:"tRenderStaticContent",Obj:{}})};G()};USAA.register("uniccaoffersMainPage");USAA.register("uniccaoffersMainPage-min");