function addEvent(e,t,n){e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&(attachedEvents.push([e,t,n]),e.attachEvent("on"+t,n)))}function removeEvent(e,t,n){e&&(e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n))}function doWhenReady(e){var t=function(){removeEvent(document,"DOMContentLoaded",t),removeEvent(window,"load",t),e()};"complete"===document.readyState?e():(addEvent(document,"DOMContentLoaded",t),addEvent(window,"load",t))}function getIso639(e){var t=e&&e.match(/^\w+/);if(t)return t="nb"===t[0]?"no":t[0]}function getDevicePixelRatio(){return void 0!==window.devicePixelRatio?window.devicePixelRatio:void 0!==window.msMatchMedia?window.msMatchMedia("(min-resolution: 192dpi)").matches?2:window.msMatchMedia("(min-resolution: 144dpi)").matches?1.5:1:1}window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)},n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},r=function(e){return n[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},o=/[\\"\u0000-\u001F\u2028\u2029]/g;return function i(n){if(null==n)return"null";if("number"==typeof n)return isFinite(n)?n.toString():"null";if("boolean"==typeof n)return n.toString();if("object"==typeof n){if("function"==typeof n.toJSON)return i(n.toJSON());if(t(n)){for(var a="[",c=0;c<n.length;c++)a+=(c?", ":"")+i(n[c]);return a+"]"}if("[object Object]"===e.call(n)){var u=[];for(var s in n)n.hasOwnProperty(s)&&u.push(i(s)+": "+i(n[s]));return"{"+u.join(", ")+"}"}}return'"'+n.toString().replace(o,r)+'"'}}()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);o>n;){if(n in r&&r[n]===e)return n;n++}return-1}),function(){window.document.querySelectorAll||(document.querySelectorAll=document.body.querySelectorAll=Object.querySelectorAll=function(e,t,n,r,o){var i=document,a=i.createStyleSheet();for(o=i.all,t=[],e=e.replace(/\[for\b/gi,"[htmlFor").split(","),n=e.length;n--;){for(a.addRule(e[n],"k:v"),r=o.length;r--;)o[r].currentStyle.k&&t.push(o[r]);a.removeRule(0)}return t})}(),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),o.prototype=new r,o}),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&!function(){var e=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return e.get.call(this)},set:function(t){return e.set.call(this,t)}})}(),window.Element&&!Element.prototype.matches&&(Element.prototype.matches=function e(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),window.attachedEvents=[],window.onunload=function(){var e,t;for(e=0;e<attachedEvents.length;e++)t=attachedEvents[e],t[0]&&t[0].detachEvent("on"+t[1],t[2]);attachedEvents=[]};var mw=mw||{};mw.html=function(){function e(e){switch(e){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}}return{escape:function(t){return t.replace(/['"<>&]/g,e)},element:function(e,t,n){var r,o,i="<"+e;for(o in t){if(r=t[o],r===!0)r=o;else if(r===!1)continue;i+=" "+o+'="'+this.escape(String(r))+'"'}if(void 0===n||null===n)return i+="/>";switch(i+=">",typeof n){case"string":i+=this.escape(n);break;case"number":case"boolean":i+=String(n);break;default:if(n instanceof this.Raw)i+=n.value;else{if(!(n instanceof this.Cdata))throw new Error("mw.html.element: Invalid type of contents");if(/<\/[a-zA-z]/.test(n.value))throw new Error("mw.html.element: Illegal end tag found in CDATA");i+=n.value}}return i+="</"+e+">"},Raw:function(e){this.value=e},Cdata:function(e){this.value=e}}}(),mw.storage={localStorage:window.localStorage,get:function(e){try{return mw.storage.localStorage.getItem(e)}catch(t){}return!1},set:function(e,t){try{return mw.storage.localStorage.setItem(e,t),!0}catch(n){}return!1},remove:function(e){try{return mw.storage.localStorage.removeItem(e),!0}catch(t){}return!1}},function(e){e.RegExp={escape:function(e){return e.replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1")}}}(mw),function(){"use strict";var e,t,n="http://bits.beta.wmflabs.org/event.gif",r=[];/www.wikipedia.org/.test(location.hostname)&&(n="//www.wikipedia.org/beacon/event"),t={extend:function(e,t){var n,r={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&(r[n]=e[n]);for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&t[n]&&(r[n]=t[n]);return r},noop:function(){}};for(var o=0;256>o;o++)r[o]=(o+256).toString(16).slice(1);e=window.eventLoggingLite={schema:{},maxUrlSize:2e3,byteToHex:r,checkUrlSize:function(t,n){var r;return n.length>e.maxUrlSize?r="Url exceeds maximum length":void 0},generateRandomSessionId:function(){var t,n,r,o=new Array(8),i=window.crypto||window.msCrypto;if(i&&i.getRandomValues)t=new Uint8Array(8),i.getRandomValues(t);else for(t=new Array(8),n=0;8>n;n++)0===(3&n)&&(r=4294967296*Math.random()),t[n]=r>>>((3&n)<<3)&255;for(n=0;8>n;n++)o[n]=e.byteToHex[t[n]];return o.join("")},validate:function(e,t){var n,r,o,i=[];if(!t||!t.properties)return i.push("Missing or empty schema"),i;for(n in e)t.properties.hasOwnProperty(n)||i.push("Undeclared property: "+n);for(n in t.properties)o=t.properties[n],e.hasOwnProperty(n)?(r=e[n],o["enum"]&&o.required&&-1===o["enum"].indexOf(r)&&i.push('Value "'+JSON.stringify(r)+'" for property "'+n+'" is not one of '+JSON.stringify(o["enum"]))):o.required&&i.push("Missing property:",n);return i},prepare:function(n,r){for(var o=t.extend(n.defaults,r),i=e.validate(o,n);i.length;)console.log(i[i.length-1]),i.pop();return{event:o,revision:n.revision||-1,schema:n.name,webHost:location.hostname,wiki:"metawiki"}},makeBeaconUrl:function(e){var t=encodeURIComponent(JSON.stringify(e));return n+"?"+t+";"},sendBeacon:/1|yes/.test(navigator.doNotTrack)||!n?t.noop:navigator.sendBeacon?function(e){try{navigator.sendBeacon(e)}catch(t){}}:function(e){document.createElement("img").src=e},logEvent:function(t,n){var r=e.prepare(t,n),o=e.makeBeaconUrl(r),i=e.checkUrlSize(t,o);i||e.sendBeacon(o)}}}(),window.wmTest=function(e,t){"use strict";function n(e,t){var n=parseInt(e.slice(0,13),16);return n%t===0}function r(e){var t="rejected";return n(e,u)&&(t="baseline"),t}function o(){function e(e){var n=getIso639(e);n&&t.indexOf(n)<0&&t.push(n)}var t=[];for(var n in navigator.languages)e(navigator.languages[n]);return e(navigator.language),e(navigator.userLanguage),e(navigator.browserLanguage),e(navigator.systemLanguage),t}var i,a,c=e.generateRandomSessionId(),u=2,s=9e5,l={GROUP:"portal_test_group",SESSION_ID:"portal_session_id",EXPIRES:"portal_test_group_expires"},p=!1;if(/www.wikipedia.org/.test(location.hostname)&&(u=200),p)i=location.hash.slice(1);else if(window.localStorage&&!/1|yes/.test(navigator.doNotTrack)){var d=t.storage.get(l.GROUP),f=t.storage.get(l.SESSION_ID),g=t.storage.get(l.EXPIRES),m=(new Date).getTime();g&&f&&d&&m<parseInt(g,10)?(c=f,i="null"===d?null:d):(i=r(c),t.storage.set(l.SESSION_ID,c),t.storage.set(l.GROUP,i)),t.storage.set(l.EXPIRES,m+s)}else i="rejected";return a=o(),{loggingDisabled:p,sessionId:c,userLangs:a,group:i,populationSize:u,getTestGroup:r}}(eventLoggingLite,mw);