/*
 PPF Banner 1.0.0
 Copyright (c) 2013 Rakuten.Inc
 Date : 2013-07-04 18:02:28
*/
(function(q,r){if(q.jQuery!==r){jQuery.noConflict();var b=jQuery;b.RJS_Helpers&&b().RJS_Slideshow&&(new function(){var a=this;b.extend(a,{slideshow:null,settings:{autoslidetime:[7E3,"Range","0,9999"],autoslideflag:["next","Str","^(next|prev)$"],autoslide:[1,"Int","^[0-1]$"],maxitem:[2,"Int","^[1-9]$"],pagespeed:[50,"Range","0,9999"],opacityspeed:[200,"Range","0,9999"],verticalmode:[0,"Int","^[1]$"],autoresize:[1,"Int","^[0-1]$"],pagenumber:[0,"Int","^[0-1]$"],indicator:[0,"Int","^[0-1]$"],indicatoralign:[0,
"Int","^[0-1]$"],singlemode:[0,"Int","^[0-1]$"],defaultcontentid:["flashcontent","Str","^[a-zA-Z0-9_-]{3,32}$"]},eobj:{config:b("#liquidBanner-config"),frame:b("#liquidBanner-frame"),prototypeItem:b("#liquidBanner-item"),itemsDisplay:b("#liquidBanner-body"),prevButton:b("#liquidBanner-prev"),nextButton:b("#liquidBanner-next"),backButton:b("#liquidBanner-back"),nowPage:b("#liquidBanner-nowPage"),maxPage:b("#liquidBanner-maxPage"),indicatorDisplay:b("#liquidBanner-indicatorArea"),prototypeIndicator:b("#prototypeIndicator")},
status:{error:!1,isTimeout:!1},props:{items:[],itemPrototype:{html:"",height:0,width:0,identifiers:{banner1:["",/\#BANNER1\#/g,""],banner2:["",/\#BANNER2\#/g,""]}},indicatorPrototype:{html:"",width:0,height:0}},initialize:function(){a.loadSettings();a.begin()},loadSettings:function(){a.settings=b.RJS_Helpers.readAttr(a.eobj.config,a.settings);a.settings.ajaxtimer*=1E3;a.eobj.config.remove();return!0},begin:function(){a.status.error=!a.getPrototype();a.getData()},getData:function(){var e,d,f=b("li",
"#liquidBanner-list");e=b("#liquidBanner-cBanner");if(1>f.length)return!1;if(1===a.settings.singlemode){var g=f.length;for(e=0;e<g;e++)a.props.items[e]=[],a.props.items[e].banner1=b(f[e]).html()}else{var g=Math.ceil(f.length/2),h=f[0]?b(f[0]).html():"";0<e.length&&1==f.length%2&&(h=e.html());for(d=e=0;e<g;e++)a.props.items[e]=[],a.props.items[e].banner1=f[d]?b(f[d++]).html():h,a.props.items[e].banner2=f[d]?b(f[d++]).html():h}a.startSlideshow();a.eobj.backButton.bind("click",function(b){b.preventDefault();
a.slideshow.changePage(1);return!1});return!0},getPrototype:function(){var b=a.eobj.prototypeItem,d=a.props.itemPrototype;if(0==b.length)return!1;d.width=b.outerWidth();d.height=b.outerHeight();d.html=b.html();if(""==d.html)return!1;b.remove();if(1==a.settings.indicator){b=a.eobj.prototypeIndicator;d=a.props.indicatorPrototype;if(0==b.length)return!1;d.width=b.outerWidth();d.height=b.outerHeight();d.html=b.html();if(""==d.html)return!1;b.remove()}return!0},startSlideshow:function(){b("#"+a.settings.defaultcontentid).hide();
a.eobj.frame.show();a.eobj.itemsDisplay.RJS_Slideshow(a,{settings:a.settings,itemPrototype:a.props.itemPrototype,indicatorPrototype:a.props.indicatorPrototype,eobj:a.eobj,items:a.props.items,events:{beforeFirstRender:a.beforeFirstRender,changePageNumber:1==a.settings.pagenumber?a.changePageNumber:!1}})},beforeFirstRender:function(a,d){d.eobj.itemsDisplay.show();var f=setInterval(function(){if(d.props.items[d.props.items.length-1].ele){for(var a in d.props.items)d.props.items[a].ele.find("li div").each(function(){b(this).hover(function(){b(this).css("top",
"-2px")},function(){b(this).css("top","0px")})});clearInterval(f)}},100)},changePageNumber:function(a,b,f){f.eobj.nowPage.text(a);f.eobj.maxPage.text(b);1==a?f.eobj.backButton.hide():f.eobj.backButton.show()}});b.extend(!0,a,{settings:{ajaxtimer:[6,"Range","0,99"],apiurl:["","Str","^http(s?)+(:\\/\\/[a-zA-Z0-9_\\-\\.]+)+([a-zA-Z0-9_&=\\?\\-\\.\\/]+)$"],targetid:["","Str","^[0-9]{1,10}$"]},begin:function(){b("li","#riTopBanner").hide();b("#riTopBanner").append(b("div#riTopBannerLoading").show());a.status.error=
!a.getPrototype();a.getApiData()},getApiData:function(){function e(b){clearTimeout(d);d=null;a.status.isTimeout=b}a.status.isTimeout=!1;var d=setTimeout(function(){a.status.isTimeout=!0;e(!0);a.getData();b("div#riTopBannerLoading").remove();b("li","#riTopBanner").show()},a.settings.ajaxtimer);b.ajax({url:a.settings.apiurl,cache:!1,dataType:"jsonp",scriptCharset:"euc-jp",timeout:a.settings.ajaxtimer,success:function(d){if(!a.status.isTimeout&&91==d.s){e(!1);var g=b("<li><a>#ITEMIMGELE#</a></li>"),
g=b(b("<div>").append(g.clone()).html().replace(/\#ITEMIMGELE\#/g,"<img />")),h;for(h in d.c)if(i=d.c[h].i,c=d.c[h].c,i==a.settings.targetid){var l="",k;for(k in c){var m=g.clone(),n=m.children().first(),p=n.children().first();n.attr({href:c[k].l});p.attr({src:c[k].b});p.attr({alt:c[k].a});l+=b("<div>").append(m.clone()).html()}b("li","#liquidBanner-list").remove();b("#liquidBanner-list ul").eq(0).append(l)}a.getData()}},error:function(d,g,h){e(!0);a.getData();b("div#riTopBannerLoading").remove();
b("li","#riTopBanner").show()}})}})}).initialize()}})(this);