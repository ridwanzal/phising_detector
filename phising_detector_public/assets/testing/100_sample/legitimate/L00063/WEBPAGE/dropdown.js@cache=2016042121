var dropdown=(function(){var instance=null,dropdowns=[],id=0,dontProcess=false;function Dropdown(options){var dontProcess=false,defaults={dropdownTrigger:"dropdownTrigger",dropdownWrapper:"dropdownWrapper",timeout:4000,hideDelay:true};this.options=MG_Utils.extendDefaults(defaults,arguments[0]);this.wrapper=this.options.wrapper;this.selector=this.options.selector;this.additionalElements=document.querySelectorAll(eval(this.options.additionalElements));this.triggers=this.wrapper.querySelectorAll("."+this.options.dropdownTrigger);this.dropdown=this.wrapper.querySelector("."+this.options.dropdownWrapper);this.hiddenValue=this.wrapper.querySelector('input[type="hidden"]');this.activateCloseDelay=hideDelayed.call(this);_init.call(this)}Dropdown.prototype={constructor:Dropdown,setItem:function(item){var list,textFilter=this.wrapper.querySelector(".dropdownTrigger .textFilter");if(!isNaN(item)&&(function(x){return(x|0)===x})(parseFloat(item))){list=this.dropdown.querySelectorAll("li");item=list[item]}if(!MG_Utils.isElement(item)){return false}MG_Utils.removeClassMultiple(this.dropdown.querySelectorAll("li"),"active");MG_Utils.addClass(item,"active");if(textFilter){MG_Utils.setText(textFilter,item.textContent||item.innerText)}if(this.hiddenValue&&this.hiddenValue.length){this.hiddenValue.value=item.getAttribute("data-value")}}};function _init(){if(!this.triggers||!this.dropdown){return false}if(MG_Utils.hasClass(this.wrapper,"js_dropdownBound")){return false}MG_Utils.addClass(this.wrapper,"js_dropdownBound");_initEvents.call(this);_checkHiddenValue.call(this);this.wrapper.setAttribute("data-dropdown-id",id++)}function _initEvents(){var context=this;[].forEach.call(this.triggers,function(el){MG_Utils.addEventHandler(el,"click",function(e){_triggersHandler.call(context,e)})});if(((typeof this.selector=="string"&&this.selector!=".channelsAZ")||(typeof this.selector=="object"&&!MG_Utils.hasClass(this.wrapper,"channelsAZ")))&&((typeof this.selector=="string"&&this.selector!=".alphabetFilter")||(typeof this.selector=="object"&&!MG_Utils.hasClass(this.wrapper,"alphabetFilter")))&&this.options.hideDelay){this.activateCloseDelay()}MG_Utils.addEventHandler(this.dropdown,"click",function(e){_dropdownHandler.call(context,e)})}function _triggersHandler(e){var div=null;if(dontProcess){dontProcess=false;return}e=e||window.event;var element=e.target||e.srcElement;if(!MG_Utils.hasClass(element,this.options.dropdownTrigger)){while((element=element.parentElement)&&!MG_Utils.hasClass(element,this.options.dropdownTrigger)){}}var dropDownVisible=false,withScroll=(this.dropdown.id=="withScroll")?1:0;if(this.triggers.length==1){dropDownVisible=(this.dropdown.style.display&&this.dropdown.style.display!=="none"?true:false)}else{if(this.triggers.length>1){dropDownVisible=(this.dropdown.style.display&&this.dropdown.style.display!=="none"?true:false)&&this.dropdown.getAttribute("data-type")==element.getAttribute("data-type")}}if(dropDownVisible){this.dropdown.style.display="none";if(withScroll){div=MG_Utils.nextDivSibling(this.dropdown);if(div&&typeof div.style!=="undefined"){div.style.display="none"}}}else{dropdowns.forEach(function(el){el.dropdown.style.display="none"});if(element.getAttribute("data-type")){this.dropdown.getAttribute("data-type")==element.getAttribute("data-type")}this.dropdown.style.display="block"}}function _dropdownHandler(e){e=e||window.event;var element=e.target||e.srcElement;if(element.tagName.toLowerCase()!=="li"){while((element=element.parentElement)&&element.tagName.toLowerCase()!=="li"){}}this.setItem(element)}function _checkHiddenValue(){if(this.hiddenValue&&this.hiddenValue.length&&this.hiddenValue.value!=""){if(!_selectActiveItem.call(this)){setTimeout(function(){_selectActiveItem.apply(context)},1000)}}}function _selectActiveItem(){var activeItem=this.dropdown.querySelector('li[data-value="'+this.hiddenValue_.value+'"]');if(!activeItem.length){return false}MG_Utils.triggerEvent(activeItem,"click");dontProcess=true}var hideDelayed=function(){var context=this;function activate(){var elements=[];for(var i=0;i<=context.triggers.length-1;i++){elements.push(context.triggers[i])}elements.push(context.dropdown);elements.forEach(function(el){MG_Utils.addEventHandler(el,"mouseenter",function(e){MG_Utils.setData(context.dropdown,"hideDelayedOver","1");clearHideTimer(context.dropdown)});MG_Utils.addEventHandler(el,"mouseleave",function(e){MG_Utils.setData(context.dropdown,"hideDelayedOver","0");clearHideTimer(context.dropdown);var id=setTimeout(function(){hide()},context.options.timeout);MG_Utils.setData(context.dropdown,"hideDelayedTimeoutId",id)})})}function hide(){if(MG_Utils.getData(context.dropdown,"hideDelayedOver")=="0"){var elements=[];for(var i=0;i<=context.additionalElements.length-1;i++){elements.push(context.additionalElements[i])}elements.push(context.dropdown);elements.forEach(function(el){el.style.display="none"});if(document.getElementById("withScroll")){var div=MG_Utils.nextDivSibling();if(div&&typeof div.style!=="undefined"){div.style.display="none"}}clearTimeout(parseInt(MG_Utils.getData(context.dropdown,"hideDelayedTimeoutId")));MG_Utils.setData(context.dropdown,"hideDelayedTimeoutId","")}}function clearHideTimer(){if(context.dropdown.getAttribute("data-hideDelayedTimeoutId")){clearTimeout(parseInt(MG_Utils.getData(context.dropdown,"hideDelayedTimeoutId")));MG_Utils.setData(context.dropdown,"hideDelayedTimeoutId","")}}return activate};MG_Utils.addEventHandler(document,"click",function(e){e=e||window.event;var element=e.target||e.srcElement;if(!MG_Utils.hasClass(element,"dropdownTrigger")){while((element=element.parentElement)&&!MG_Utils.hasClass(element,"dropdownTrigger")){}}dropdowns.forEach(function(el){if(element){if(element.parentNode.querySelector(".dropdownWrapper")===el.dropdown){return false}}el.dropdown.style.display="none"})});return{init:function(wrapper,options){var elements,options=options||{};if(wrapper instanceof Array){elements=wrapper}else{if(!MG_Utils.isElement(wrapper)){elements=document.querySelectorAll(wrapper)}else{elements=wrapper}}[].forEach.call(elements,function(el){options.wrapper=el;options.selector=wrapper;instance=new Dropdown(options);if(instance.triggers&&instance.dropdown){dropdowns.push(instance)}})},get:function(id){return dropdowns[id]}}})();