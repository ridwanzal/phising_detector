/**
 * Mail.ru RBAdman-HTML5
 * Release date: 2016-04-11
 * Version: 2.1.4
 */
AdmanHTML=function(){"use strict";function a(a){y.rb(16138744),w.slotId=a.slot,w.wrapper=a.wrapper,w.videoEl=a.videoEl,w.quality=parseInt(a.videoQuality||360,10),w.browser=a.browser,w.config=a.config||{},A=a.midrollPointsP||null,z=!A&&a.midrollPoints?a.midrollPoints:null,w.config.vpaidJsInterface||(w.config.vpaidJsInterface=x);var b="//ad.mail.ru/vp/"+w.slotId;if(a.params&&a.params.constructor&&a.params.constructor===Object){var c=[];"flash"in a.params||(a.params.flash=AdmanHTML.Utils.checkFlash()?1:0);for(var d in a.params)a.params.hasOwnProperty(d)&&c.push(d+"="+a.params[d]);c.length&&(b+="?"+c.join("&"))}if(w.slotId&&w.wrapper&&!w.browser.adBlock)q=new AdmanHTML.AdSlot(w,b,function(){w.cb("onReady",[{settings:q.settings}]);var a=q.getSection("midroll"),b=[],c=[];a&&a.forEach(function(a){if(!a.isEmpty()){var d=a.getAd();d.pointP?b.push(d.pointP):d.point?c.push(d.point):A&&A.length?(d.pointP=A.shift(),b.push(d.pointP)):z&&z.length?(d.point=z.shift(),c.push(d.point)):A||z||(d.pointP=50,b.push(d.pointP))}}),A=b.sort(AdmanHTML.Utils.numSorter),z=c.sort(AdmanHTML.Utils.numSorter)});else{y.logError("Adman init failed");var e=w.callbacks.onError;e&&e(),t=s=r=null}}function b(a){if(t&&(t.dispose(),t.log("sectionShown"),a&&t.log("closedByUser")),r&&!E[r]){E[r]="midroll"===r?!1:!0;var b=a?w.callbacks.onClosed:w.callbacks.onCompleted;b&&b(),t&&t.complete&&t.log("playbackCompleted")}t=s=r=null,f()}function c(){var a=q.getSettings(r).maxBannersShow||0,c=D[r]||0,d=!a||a>c;s&&s.length&&d?(t&&t.complete&&t.log("playbackCompleted"),t&&t.dispose(),t=s.shift(),D[r]=c+(t.isEmpty()?0:1),t.start()):b()}function d(a){s||(r=a||"preroll",s=q.getSection(r),"midroll"===a&&(s=h(s)),c(),t&&(t.log("sectionStarted"),console.log(r,t.getAd(),t.getSettings(),s)),e(r))}function e(a){u=q.getDebug(a),u&&u.start()}function f(){u&&u.dispose(),u=null}function g(a,b){function c(a,b){for(var c=0;c<a.length&&!(a[c]>b);c++);return a.slice(0,c)}var d=parseInt(a),e=Math.floor(100*a/b);v=b,B=A?c(A,e):[],C=z?c(z,d):[],(B.length||C.length)&&w.cb("adMidrollPoint",[a])}function h(a){function b(a,b){var c=a.getAd(),d=b.getAd(),e=c.point||c.pointP*v/100,f=d.point||d.pointP*v/100;return e-f}var c=[];return a&&a.forEach(function(a){var b=a.getAd();(b.pointP&&~B.indexOf(b.pointP)||b.point&&~C.indexOf(b.point))&&c.push(a)}),A=A&&A.slice(B.length),z=z&&z.slice(C.length),c.sort(b),c}function i(){w.cb("onSkipped"),t&&(t.log("closedByUser"),t.skip(c))}function j(){t&&(t.log("playbackPaused"),t.pause())}function k(){w.cb("onResumed"),t&&(t.log("playbackResumed"),t.resume())}function l(a){a=0>a?0:a>1?1:a,t&&(t.log(a?"volumeOn":"volumeOff"),t.setVolume(a))}function m(){t&&t.log("fullscreenOn")}function n(){t&&t.log("fullscreenOff")}function o(){b()}function p(a,b){w.callbacks[a]=b}var q,r,s,t,u,v,w={version:"2.1.4",debugMode:!0,callbacks:{},cb:function(a,d){switch(a){case"onCompleted":t&&(t.complete=!0),c();break;case"onError":t&&(t.error=!0),c();break;case"onClosed":b(!0);break;default:var e=w.callbacks[a];e&&e.apply(this,d)}}},x="//ad.mail.ru/static/admanhtml/2.1.4/vpaid-js-interface.swf",y=new AdmanHTML.Stats(w),z=[],A=[],B=[],C=[],D={};w.stats=y,y.rb(16138736);var E={};return{init:a,start:d,stop:o,pause:j,resume:k,setVolume:l,fullscreenOn:m,fullscreenOff:n,setFullscreen:function(a){a?m():n()},skip:i,destroy:o,getSlot:function(){return w.slotId},setSlot:function(a){w.slotId=a},getVersion:function(){return w.version},setDebug:function(a){w.debugMode=a},setPosition:g,onReady:p.bind(this,"onReady"),onError:p.bind(this,"onError"),onStarted:p.bind(this,"onStarted"),onCompleted:p.bind(this,"onCompleted"),onClosed:p.bind(this,"onClosed"),onSkipped:p.bind(this,"onSkipped"),onClicked:p.bind(this,"onClicked"),onTimeRemained:p.bind(this,"onTimeRemained"),adMidrollPoint:p.bind(this,"adMidrollPoint")}},AdmanHTML.Ad=function(a,b){"use strict";function c(a){a&&a.forEach(function(a){d(a.url,a.type,a)})}function d(a,c,d){if(a=decodeURIComponent(a),"playheadReachedValue"===c){var e;void 0!==d.thresholdValue||void 0!==d.value?(e=parseInt(d.thresholdValue||d.value,10),b.stats.push({name:"thresholdValue",value:e,type:"thresholdValue."+e,url:a})):(void 0!==d.thresholdPValue||void 0!==d.pvalue)&&(e=parseInt(d.thresholdPValue||d.pvalue,10),b.stats.push({name:"thresholdPValue",value:e,type:"thresholdPValue."+e,url:a}))}else b.stats.push({name:c,type:c,url:a})}function e(a){b.click=a,b.ad&&(b.ad.urlToNavigateOnClick=a)}function f(a){b.settings=b.settings||{},AdmanHTML.Utils.deepExtend(b.settings,a)}function g(c){function d(){a.stats.rb(16138780),a.stats.logError("UNKNOWN_ADV_TYPE")}if(b.ad=c,b.click&&(b.ad.urlToNavigateOnClick=b.click),b.ad.mediafiles&&b.ad.mediafiles.length){var e=b.ad.mediafiles[0];b.ad.mediafiles.forEach(function(b){Math.abs(parseInt(b.height)-a.quality)<Math.abs(parseInt(e.height)-a.quality)&&(e=b)}),AdmanHTML.Utils.mixin(b.ad,e)}delete b.ad.statistics,delete b.ad.mediafiles;var f;switch(b.ad.type){case"swf":case"application/x-shockwave-flash":var g=b.ad.apiFramework||b.ad.api;if(a.browser.mobile||g&&"VPAID"!==g)return d(),!1;f=g?new AdmanHTML.VpaidSwfAdRenderer(a,this):new AdmanHTML.SwfAdRenderer(a,this);break;case"video":case"video/mp4":if(!~b.ad.src.indexOf(".mp4"))return d(),!1;f=new AdmanHTML.VideoAdRenderer(a,this);break;case"audio":case"audio/mp3":f=new AdmanHTML.AudioAdRenderer(a,this);break;case"image":case"image/bmp":case"image/gif":case"image/jpeg":case"image/png":f=new AdmanHTML.ImgAdRenderer(a,this);break;case"text":f=new AdmanHTML.TextAdRenderer(a,this);break;case"empty":f=new AdmanHTML.EmptyAdRenderer(a,this);break;case"debugData":f=new AdmanHTML.DebugAdRenderer(a,this);break;case"video/x-flv":default:return d(),!1}return b.renderer=f,!0}function h(){return new AdmanHTML.Ad(a,JSON.parse(JSON.stringify(b)))}function i(a,c){function d(a){AdmanHTML.Utils.loadImg(a.url);var b=h.indexOf(a);~b&&h.splice(b,1)}function e(a){a=25*Math.floor(a/25);var b=l["thresholdPValue."+a];b&&(g=g.concat(b))}var f=a+("undefined"==typeof c?"":"."+c),g=l[f]?l[f].slice(0):[];g.push(f);var h=b.stats.slice(0);"thresholdPValue"===a&&e(c),b.stats.forEach(function(b){"thresholdPValue"===a&&"thresholdPValue"===b.name&&b.value<c?d(b):"thresholdValue"===a&&"thresholdValue"===b.name&&b.value<c&&d(b),~g.indexOf(b.type)&&d(b)}),b.stats=h}function j(a,c){b.renderer&&b.renderer[a]&&b.renderer[a](c)}function k(){var a={};return a="audio"===b.ad.type||"audio/mp3"===b.ad.type?{allowSeek:!0,allowSkip:!1,allowTrackChange:!0,allowVolumeChange:!1}:b.settings?{allowClose:b.settings.hasOwnProperty("allowClose")?b.settings.allowClose:!0,allowCloseDelay:b.settings.hasOwnProperty("allowCloseDelay")?b.settings.allowCloseDelay:0}:{allowClose:!0,allowCloseDelay:0},AdmanHTML.Utils.mixin(a,b.ad),a}b=b||{stats:[]};var l={closedByUser:["close","skipAd"],click:["addClick"],"thresholdPValue.25":["firstQuartile"],"thresholdPValue.50":["secondQuartile","midpoint"],"thresholdPValue.75":["thirdQuartile"],"thresholdPValue.100":["fourthQuartile"],playbackStarted:["start"],playbackCompleted:["complete"],volumeOff:["mute"],volumeOn:["unmute"],playbackPaused:["pause"],playbackResumed:["resume"],fullscreenOn:["fullscreen"]};return{addStatCollection:c,addStat:d,addClick:e,addSettings:f,getSettings:function(){return b.settings},addAd:g,getAd:function(){return b.ad},getAdForApp:k,isEmpty:function(){return"empty"===b.ad.type},clone:h,log:i,start:j.bind(this,"start"),dispose:j.bind(this,"dispose"),pause:j.bind(this,"pause"),resume:j.bind(this,"resume"),setVolume:j.bind(this,"setVolume"),skip:j.bind(this,"skip"),complete:!1,error:!1}},AdmanHTML.AdSlot=function(a,b,c){"use strict";function d(b,c,d,f){return d&&d>4?void e():(++o,void AdmanHTML.Utils.xhr(b,function(i){--o,i?(p++,i=i.trim(),"<"===i.charAt(0)?(h(i,c,d||0,f),q++):"{"===i.charAt(0)?(g(i,c,d||0,f),q++):(a.stats.rb(16138772),a.stats.logError("UNKNOWN_DATA_FORMAT"))):(a.stats.logError("SLOT_LOADING_ERROR"),console.log(b)),e()}))}function e(){if(!o){if(p&&q)return c(),void console.log(l);f()}}function f(){var b=a.callbacks.onError;b&&b()}function g(b,c,e,f){function g(a){return a?a.filter(function(a){return a.type&&("sectionShown"===a.type||"sectionStarted"===a.type||"sectionEmpty"===a.type)}):[]}function h(b,f){var g=c?c.clone():new AdmanHTML.Ad(a);return g.addStatCollection(b.statistics),g.addStatCollection(b.serviceStatistics),g.log("serviceRequested"),"additionalData"===b.type?(g.log("serviceAnswerEmpty"),"true"===b.doAfter?d(b.url,g,++e,f):d(b.url,g,++e,f)):"statistics"===b.type||i(f,g,b),g}var l,m;try{l=JSON.parse(b)}catch(n){return a.stats.rb(16138753),void a.stats.logError("ERROR_CONVERTING_STRING_TO_JSON")}for(var o in l.sections)if(l.sections.hasOwnProperty(o)){var p=l.sections[o];if(l.settings&&(m=l.settings[o])&&k(o,m),p.forEach(function(b){if("debugData"===b.type){var c=new AdmanHTML.Ad(a);return c.addClick(b.url),void j(o,c,b)}var d=h(b,o);m&&(d.addStatCollection(g(m.statistics)),d.addSettings(m))}),0===p.length){var q=new AdmanHTML.Ad(a);m&&q.addStatCollection(g(m.statistics)),i(o,q,{type:"empty"})}}l.type&&h(l,f)}function h(b,c,e,f){function g(a,b,c){j(a.getElementsByTagName(b),c)}function h(a,b,c,d){g(a,b,function(a){d(l(a),c?k(a,c):null,a)})}function j(a,b){Array.prototype.forEach.call(a,b.bind(this))}function k(a,b){var c=a.attributes.getNamedItem(b);return c?c.value:null}function l(a){return a&&a.childNodes&&a.childNodes[0]?a.childNodes[0].wholeText.trim():null}var m;try{m=AdmanHTML.Utils.parseXml(b)}catch(n){return a.stats.rb(16138763),void a.stats.logError("ERROR_CONVERTING_STRING_TO_XML")}g(m,"Ad",function(b){function m(d){var e=c?c.clone():new AdmanHTML.Ad(a);h(b,"Impression","id",function(a){try{e.addStat(a,"sectionStarted")}catch(b){}}),h(b,"Extension","type",e.addStat),h(b,"Error",null,function(a){e.addStat(a,"error")}),h(d,"Tracking","event",e.addStat);var f=d.getElementsByTagName("VideoClicks")[0];return f&&j(f.childNodes,function(a){"ClickThrough"===a.tagName?e.addClick(l(a)):e.addStat(l(a),"click")}),e}function n(a){var b={width:k(a,"width"),height:k(a,"height"),id:k(a,"id"),assetWidth:k(a,"assetWidth"),assetHeight:k(a,"assetHeight"),expandedWidth:k(a,"expandedWidth"),expandedHeight:k(a,"expandedHeight"),apiFramework:k(a,"apiFramework"),adSlotID:k(a,"adSlotID"),statistics:[]};return h(a,"StaticResource",null,function(a){b.staticResource=a}),h(a,"HTMLResource",null,function(a){b.htmlResource=a}),h(a,"IFrameResource",null,function(a){b.iframeResource=a}),h(a,"CompanionClickTracking",null,function(a){b.statistics.push({type:"click",url:a})}),h(a,"Tracking","event",function(a,c){b.statistics.push({type:c,url:a})}),h(a,"CompanionClickThrough",null,function(a){b.urlToNavigateOnClick=a}),b}g(b,"InLine",function(a){var b=[];g(a,"CompanionAds",function(c){var d=k(c,"required")||"none";g(a,"Companion",function(a){var c=n(a);c.required=d,b.push(c)})}),g(a,"Linear",function(a){var c=m(a),d={mediafiles:[],duration:AdmanHTML.Utils.convertDuration(l(a.getElementsByTagName("Duration")[0]))};g(a,"MediaFile",function(a){d.mediafiles.push({apiFramework:k(a,"apiFramework"),type:k(a,"type"),width:k(a,"width"),height:k(a,"height"),src:l(a)})}),b.length&&(d.companionAds=b),i(f||"preroll",c,d)}),g(a,"NonLinear",function(a){var b=m(a),c={width:k(a,"width"),height:k(a,"height"),duration:AdmanHTML.Utils.convertDuration(k(a,"minSuggestedDuration")),mediafiles:[]};h(a,"NonLinearClickThrough",null,function(a){b.addStat(a,"click")}),h(a,"StaticResource","creativeType",function(a,b){c.mediafiles.push({type:b,src:a})}),i(f||"overlay",b,c)})}),g(b,"VASTAdTagURI",function(a){d(l(a),m(b),++e,f)})})}function i(a,b,c){b.addAd(c)&&(b.sectionType=a,l[a]=l[a]||[],l[a].push(b))}function j(a,b,c){b.addAd(c)&&(b.section=a,n[a]=b)}function k(a,b){m[a]=m[a]||{},AdmanHTML.Utils.mixin(m[a],b),delete m[a].statistics,delete m[a].view,delete m[a].advertisment}var l={},m={},n={},o=0,p=0,q=0;return d(b),{getSection:function(a){return l[a]},getSettings:function(a){return m[a]||{}},getDebug:function(a){return n[a]}}},"function"==typeof define&&define.amd&&define(function(){"use strict";return AdmanHTML}),AdmanHTML.Stats=function(a){"use strict";function b(a){d("//r.mail.ru/d"+a+".gif?rnd="+Math.random())}function c(b){d("//ad.mail.ru/admanhtml/?app=admanhtml&ver="+a.version+"&error="+encodeURI(b)+"&slot="+a.slotId),a.debugMode&&console&&console.warn&&console.warn("Error: "+b)}function d(a){AdmanHTML.Utils.loadImg(a)}return{rb:b,logError:c,simple:d}},AdmanHTML.StyleUtils=function(){"use strict";function a(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})}function b(b,c,d){var e,f=g[c];if(!f)for(e=0;e<h.length;e++)if(f=""===h[e]?c:a(h[e]+"-"+c),void 0!==b[f]){g[c]=f;break}b[f]=d}function c(a){return parseInt(a)+"px"}function d(a,b){function c(a,b){a=parseInt(a,16),b=b||1;var c=a>>16&255,d=a>>8&255,e=255&a;return"rgba("+c+","+d+","+e+","+b+")"}if(Array.isArray(a)){var d=a.map(function(a){return c(a,b)});return"linear-gradient("+d.join(", ")+")"}return c(a,b)}function e(a,b,c){var d=a.style,e=c||Object.keys(b);e.forEach(function(a){b.hasOwnProperty(a)&&f(d,a,b[a],b)})}function f(a,e,f,g){var h,i,j;switch(e){case"fontFace":h="fontFamily",i=f;break;case"hasBackground":f||(h="background",i="none",delete g.backgroundColor);break;case"backgroundColor":h="background",i=d(f,g.backgroundAlpha);break;case"cornerRounding":case"borderCornerRounding":h="borderRadius",i=c(f);break;case"headerColor":case"bodyColor":case"hyperlinkColor":case"textColor":h="color",i=d(f);break;case"headerSize":case"bodySize":case"hyperlinkSize":case"textSize":h="fontSize",i=c(f);break;case"headerUnderline":case"bodyUnderline":case"hyperlinkUnderline":case"textUnderline":h="text-decoration",i=f?"underline":"none",j="";break;case"headerUnderlineOnRollOver":h="text-decoration",i=f?"":"none",j=f?"":"important";break;case"headerBold":case"bodyBold":case"hyperlinkBold":case"textBold":h="fontWeight",i=f?"bold":"normal";break;case"headerIndent":case"bodyIndent":case"hyperlinkIndent":h="marginTop",i=c(f);break;case"bodyPaddingRight":h="marginRight",i=c(f);break;case"width":case"height":h=e,i=c(f);break;case"contentPadding":case"contentIndent":case"controlsSafeArea":h="padding",i=c(f);break;case"maxImageWidth":case"maxImageHeight":h="maxImageWidth"===e?"maxWidth":"maxHeight",i=c(f);break;case"borderSize":h="borderWidth",i=c(f);break;case"borderColor":h="borderColor",i=d(f,g.borderAlpha);break;case"paddingLeft":case"paddingTop":h="paddingLeft"===e?"left":"top",i=c(f);break;case"controlsPaddingTop":case"controlsPaddingRight":h="controlsPaddingRight"===e?"right":"top",i=c(f)}h&&i&&(void 0!==j?a.setProperty(h,i,j):b(a,h,i))}var g={},h=["","webkit","Moz","O","ms"];return{applyStyle:e,getLength:c}}(),AdmanHTML.Utils=function(){"use strict";function a(){return C.major?B:A}function b(b){b(a())}function c(a,b){b&&a.addEventListener("load",b,!1);var c=document.getElementsByTagName("head");if(c&&c.length){var d=c[0];d&&d.appendChild(a)}}function d(a,b,d){var e=document.getElementById(b);if(e&&e.parentNode){if(!d)return;e.parentNode.removeChild(e)}e=document.createElement("style"),e.type="text/css",e.id=b,e.innerHTML=a,c(e)}function e(a){var b=document.querySelector("link[href*='"+a+"']");b||(b=document.createElement("link"),b.type="text/css",b.rel="stylesheet",b.href=a,c(b))}function f(a){var b=document.querySelector("script[src*='"+a+"']");b||(b=document.createElement("script"),b.setAttribute("type","text/javascript"),b.setAttribute("charset","utf8"),b.setAttribute("src",a),c(b))}function g(a,b){var c=new Image;c.onload=function(){b&&b(c)},c.src=a}function h(a,b,c,d,e){d=d||"GET";var f=new XMLHttpRequest;return f.open(d,a,!0),f.withCredentials=!e,f.setRequestHeader("Content-Type","text/plain"),f.send(c||null),b&&(f.onreadystatechange=function(){4===f.readyState&&200===f.status&&b(f.response)},f.onerror=function(){e?b():h(a,b,c,d,!0)}),f}function i(a,b,c,d,e){void 0===e&&(e=!0);var f=a*d>b*c;e&&(f=!f);var g=f?d/b:c/a,h=Math.floor(a*g),i=Math.floor(b*g);return{x:Math.floor((c-h)/2),y:Math.floor((d-i)/2),width:Math.floor(h),height:Math.floor(i)}}function j(a){var b=typeof a;return"object"===b&&!!a&&!Array.isArray(a)}function k(a){var b;for(b in a)return!1;return!0}function l(a,b){if(b){var c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function m(a,b){if(b){var c,d;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d=b[c],j(d)?(a[c]=a[c]||{},a[c]=m(a[c],d)):a[c]=d)}return a}function n(a,b,c){return a=a||0,b=b||0,c=c||1,Math.min(c,Math.max(b,a))}function o(a,b){return a-b}function p(){return Math.floor(Math.random()*Math.pow(2,48)).toString()}function q(a){a=a.split("+").join(" ");for(var b,c={},d=/[?&]?([^=]+)=([^&]*)/g;b=d.exec(a);)c[decodeURIComponent(b[1])]=decodeURIComponent(b[2]);return c}function r(a,b){var c;document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0)):(c=document.createEventObject(),c.eventType=b),c.eventName=b,document.createEvent?a.dispatchEvent(c):a.fireEvent("on"+c.eventType,c)}function s(a){return a?a.substring(a.indexOf("//")+2,a.indexOf("/?")):""}function t(a){var b=a.button,c=a.which;return c||void 0===b?c:1&b?1:2&b?3:4&b?2:0}function u(a){return 1===t(a)}function v(a,b){return b=b||document.body,a===b?!1:b.contains(a)}function w(a){a.preventDefault()}function x(a){var b;if(window.DOMParser)b=(new DOMParser).parseFromString(a,"text/xml");else{if(!window.ActiveXObject)return;b=new window.ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}return b.documentElement}function y(a){if(a){var b=a.split(":");if(3===b.length){var c=parseInt(b[0],10),d=parseInt(b[1],10),e=b[2].split("."),f=parseInt(e[0],10),g=0;if(2===e.length&&(g=parseInt(e[1],10)),!(isNaN(c)||isNaN(d)||isNaN(f)||isNaN(g)))return 3600*c+60*d+f+g/1e3}}return NaN}function z(a,b){var c,d=a;for(c in b)b.hasOwnProperty(c)&&(d=d.replace("{{"+c+"}}",b[c]));return d}var A=0,B=1,C=function(){var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f={major:0,minor:0,release:0},g=null;if(typeof navigator.plugins!==a&&typeof navigator.plugins[c]===b)g=navigator.plugins[c].description,g&&typeof navigator.mimeTypes!==a&&navigator.mimeTypes[e]&&navigator.mimeTypes[e].enabledPlugin&&(g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f.major=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f.minor=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f.release=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof window.ActiveXObject!==a)try{var h=new window.ActiveXObject(d);h&&(g=h.GetVariable("$version"),g&&(g=g.split(" ")[1].split(","),f.major=parseInt(g[0],10),f.minor=parseInt(g[1],10),f.release=parseInt(g[2],10)))}catch(i){}return f}();return{addCss:d,loadCss:e,loadJs:f,loadImg:g,xhr:h,scaleBySide:i,isEmptyObject:k,mixin:l,deepExtend:m,validateMinMax:n,numSorter:o,createIntUID:p,getQueryParams:q,triggerEvent:r,getDomain:s,isLeftButtonPressed:u,isElementInDocument:v,preventDefault:w,parseXml:x,convertDuration:y,renderTemplate:z,checkFlash:a,checkFlashAsync:b,FLASH_READY:B,FLASH_MISSING:A}}(),AdmanHTML.AdRenderer=function(a,b){"use strict";function c(){p.wrapperEl=p.wrapperEl||a.wrapper,p.mainEl=p.mainEl||document.createElement("div"),p.mainEl.parentNode||(p.wrapperEl.childNodes.length?p.wrapperEl.insertBefore(p.mainEl,p.wrapperEl.childNodes[0]):p.wrapperEl.appendChild(p.mainEl),o=!0),p.mainEl.addEventListener("click",p.onClick),window.addEventListener("resize",l)}function d(a){a()}function e(){window.removeEventListener("resize",l),p.mainEl.removeEventListener("click",p.onClick),clearTimeout(n),o&&p.mainEl.parentNode&&p.mainEl.parentNode.removeChild(p.mainEl)}function f(){n=setTimeout(function(){e(),a.cb("onCompleted")},1e3*q.duration)}function g(){window.open(q.urlToNavigateOnClick,"_blank"),b.log("click"),a.cb("onClicked")}function h(){a.cb("onStarted",[b.sectionType,b.getAdForApp()||{}]),b.log("playbackStarted")}function i(c,d){var e=parseInt(c/d*100);c=parseInt(c),a.cb("onTimeRemained",[{remained:d-c,percent:e,duration:d,currentTime:c}]),b.log("thresholdPValue",e),b.log("thresholdValue",c)}function j(a,b){p.mainEl.innerHTML=a,AdmanHTML.Utils.mixin(p.mainEl.style,b)}function k(a){p.wrapperEl=a}function l(){p.onResize(p.mainEl.offsetWidth,p.mainEl.offsetHeight)}function m(){}var n,o,p={},q=b.getAd();return p={start:c,skip:d,dispose:e,onClick:g,onStart:h,registerTimer:f,setView:j,setWrapper:k,onTimeRemained:i,onResize:m}},AdmanHTML.AudioAdRenderer=function(a,b){"use strict";function c(){f.mainEl=document.createElement("audio"),g.forEach(function(a){f.mainEl.addEventListener(a,e)}),f.setView(null,{position:"absolute",width:"1px",height:"1px",top:"-10000px",left:"-10000px"}),f.mainEl.src=b.getAd().src,f.mainEl.load(),f.mainEl.play(),f.start()}function d(){f.dispose(),g.forEach(function(a){f.mainEl.removeEventListener(a,e)})}function e(b){switch(b.type){case"loadedmetadata":f.onStart();break;case"play":a.cb("onPlayed");break;case"pause":a.cb("onPaused");break;case"timeupdate":f.onTimeRemained(f.mainEl.currentTime,f.mainEl.duration);break;case"ended":a.cb("onCompleted");break;case"error":a.cb("onError")}}var f=new AdmanHTML.AdRenderer(a,b),g=["loadedmetadata","error","pause","play","timeupdate","ended"];return{start:c,skip:f.skip,dispose:d,pause:function(){f.mainEl.pause()},resume:function(){f.mainEl.play()},setVolume:function(a){f.mainEl.volume=a}}},AdmanHTML.CloseBtnRenderer=function(a,b){"use strict";function c(){d.start();var a=b.getSettings(),c={};for(var h in g)g.hasOwnProperty(h)&&(c[h]=void 0!==a[h]?a[h]:g[h]);c.controlsPaddingTop=c.controlsPaddingTop-c.controlsSafeArea,c.controlsPaddingRight=c.controlsPaddingRight-c.controlsSafeArea,d.setView(AdmanHTML.Utils.renderTemplate(f,{img:e}),{position:"absolute",cursor:"pointer"}),AdmanHTML.StyleUtils.applyStyle(d.mainEl,c)}var d=new AdmanHTML.AdRenderer(a,b),e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANBAMAAACAxflPAAAAGFBMVEX///8AAAD///////////////////////8GrCwdAAAACHRSTlPMAKZNgI0NmlQIVC0AAABMSURBVAjXYxAUVmBQFhRgEFNgYGBQE2AQYgACJgEGA6YAhiAGAwYFVhEWcQaQpKOhAwMIMAsDCRgfLC8KlDdgKmAoYjCA6oebBzMfAF6oBtnQTZWMAAAAAElFTkSuQmCC",f='<div class="rb-adman_close" style="background:url({{img}});width:13px;height:13px"></div>',g={controlsPaddingTop:3,controlsPaddingRight:0,controlsSafeArea:0};return d.onClick=function(b){b.stopPropagation(),"rb-adman_close"===b.target.className&&a.cb("onClosed")},{start:c,dispose:d.dispose,setWrapper:d.setWrapper}},AdmanHTML.DebugAdRenderer=function(a,b){"use strict";function c(){d.mainEl=document.createElement("span"),d.start(),d.setView("&#9874; "+b.section,{position:"absolute",cursor:"pointer",top:"5px",left:"5px",background:"rgba(204,204,204,0.8)",padding:"5px",color:"#333","border-radius":"6px",font:"12px/19px Tahoma",display:"inline-block","z-index":100})}var d=new AdmanHTML.AdRenderer(a,b),e=b.getAd();return d.onClick=function(){window.open(e.urlToNavigateOnClick,"_blank")},{start:c,dispose:d.dispose}},AdmanHTML.EmptyAdRenderer=function(a,b){"use strict";function c(){b.log("sectionEmpty"),setTimeout(function(){a.cb("onCompleted")})}return{start:c}},AdmanHTML.ImgAdRenderer=function(a,b){"use strict";function c(){e.start(),e.registerTimer(),AdmanHTML.Utils.addCss(h,g);var a=b.getAd();e.setView(AdmanHTML.Utils.renderTemplate(i,a),{position:"absolute",display:"inline-block",left:"50%",bottom:0,transform:"translate(-50%,0)","box-sizing":"border-box",overflow:"hidden","text-align":"center"});var c=b.getSettings();if(c&&c.advertisment&&c.advertisment.image){var d=c.advertisment.image;AdmanHTML.StyleUtils.applyStyle(e.mainEl,d,"fontFace contentIndent hasBackground backgroundColor backgroundAlpha cornerRounding".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_image_wrapper"),d,"borderSize borderColor borderAlpha borderCornerRounding".split(" "));var j=c.advertisment.image.ageRestrictions,k=e.mainEl.querySelector(".rb-adman_age_wrapper");a.ageRestrictions?j&&(AdmanHTML.StyleUtils.applyStyle(k,j),AdmanHTML.StyleUtils.applyStyle(k.querySelector(".rb-adman_age_content"),j,["textUnderline"])):k.parentNode.removeChild(k)}f.setWrapper(e.mainEl),f.start(),e.onStart()}function d(){e.dispose(),f.dispose()}var e=new AdmanHTML.AdRenderer(a,b),f=new AdmanHTML.CloseBtnRenderer(a,b),g="rb-adman-img-style",h=".rb-adman_image_overlay {display:inline-block; overflow:hidden;vertical-align:middle;cursor:pointer;color:#fff}.rb-adman_image_overlay .rb-adman_image_wrapper {display:block;border:0px solid transparent;overflow:hidden;}.rb-adman_image_overlay .rb-adman_image_wrapper img {vertical-align:top;}.rb-adman_image_overlay .rb-adman_age_wrapper {display:block;position:absolute;top:0px;left:3px;border:0px solid transparent;margin-right:1px;text-decoration:none!important}",i='<div class="rb-adman_image_overlay"><div class="rb-adman_image_wrapper"><img src="{{src}}" width="{{width}}px" height="{{height}}px"></div><span class="rb-adman_age_wrapper"><span class="rb-adman_age_content">{{ageRestrictions}}</span></span></div>';return{start:c,skip:e.skip,dispose:d}},AdmanHTML.SwfAdRenderer=function(a,b){"use strict";function c(){e.start(),AdmanHTML.Utils.checkFlashAsync(function(c){c===AdmanHTML.Utils.FLASH_READY?(e.registerTimer(),e.setView(d(b.getAd().src,{width:"100%",height:"100%"},{}),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"black"}),e.onStart()):a.cb("onError")})}function d(a,b,c){var d,e,f=b||{},g=c||{};f.type="application/x-shockwave-flash",window.ActiveXObject?(f.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",g.movie=a):f.data=a,e="<object";for(d in f)f.hasOwnProperty(d)&&(e+=" "+d+'="'+f[d]+'"');e+=">";for(d in g)g.hasOwnProperty(d)&&(e+='<param name="'+d+'" value="'+g[d]+'" />');return e+="</object>"}var e=new AdmanHTML.AdRenderer(a,b);return{start:c,skip:e.skip,dispose:e.dispose,createSwfObject:d,"super":e}},AdmanHTML.TextAdRenderer=function(a,b){"use strict";function c(){e.start(),e.registerTimer(),AdmanHTML.Utils.addCss(h,g);var a=b.getAd();e.setView(AdmanHTML.Utils.renderTemplate(i,a),{position:"absolute",margin:"0 auto",left:0,right:0,bottom:0,"box-sizing":"border-box",overflow:"hidden"});var c=b.getSettings();if(c&&c.advertisment&&c.advertisment.text){var d=c.advertisment.text;AdmanHTML.StyleUtils.applyStyle(e.mainEl,d,"fontFace width height contentPadding hasBackground backgroundColor backgroundAlpha cornerRounding".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_header"),d,"headerColor headerSize headerUnderline headerBold headerIndent".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_header_text"),d,["headerUnderlineOnRollOver"]),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_body"),d,"bodyColor bodySize bodyUnderline bodyLeading bodyIndent bodyPaddingRight".split(" ")),AdmanHTML.StyleUtils.applyStyle(e.mainEl.querySelector(".rb-adman_link"),d,"hyperlinkColor hyperlinkSize hyperlinkUnderline hyperlinkIndent".split(" "));var j=c.advertisment.text.ageRestrictions,k=e.mainEl.querySelector(".rb-adman_age_wrapper");a.ageRestrictions?j&&(AdmanHTML.StyleUtils.applyStyle(k,j),AdmanHTML.StyleUtils.applyStyle(k.querySelector(".rb-adman_age_content"),j,["textUnderline"])):k.parentNode.removeChild(k);var l=e.mainEl.querySelector(".rb-adman_image_wrapper span");if(d.noImage)l.parentNode.removeChild(l);else if(d.contentPadding&&(l.style.marginRight=AdmanHTML.StyleUtils.getLength(d.contentPadding)),d.maxImageHeight||d.maxImageWidth){var m=a.width/a.height;l.style.width=AdmanHTML.StyleUtils.getLength(Math.round(d.maxImageWidth||d.maxImageHeight*m)),l.style.height=AdmanHTML.StyleUtils.getLength(Math.round(d.maxImageHeight||d.maxImageWidth/m))}}f.setWrapper(e.mainEl),f.start(),e.onStart()}function d(){e.dispose(),f.dispose()}var e=new AdmanHTML.AdRenderer(a,b),f=new AdmanHTML.CloseBtnRenderer(a,b),g="rb-adman-text-style",h=".rb-adman_text_overlay {display:block; overflow:hidden;height:100%;cursor:pointer;color:#fff}.rb-adman_text_overlay .rb-adman_image_wrapper {display:block;float:left;position:relative;height:100%;vertical-align:middle}.rb-adman_text_overlay .rb-adman_image_wrapper span {display:inline-block;vertical-align:middle;background-size:contain;background-position:center}.rb-adman_text_overlay .rb-adman_text_wrapper {display:block;overflow:hidden;height:100%;vertical-align:top;line-height:1.2}.rb-adman_text_overlay .rb-adman_header {display:block;white-space:nowrap;margin-right:20px;overflow:hidden;text-overflow:ellipsis}.rb-adman_text_overlay .rb-adman_age_wrapper {display:inline-block; vertical-align:middle;border:0px solid transparent;margin-right:1px;text-decoration:none!important}.rb-adman_text_overlay .rb-adman_header_text {color:inherit;text-decoration:none;letter-spacing:normal;vertical-align:middle}.rb-adman_text_overlay .rb-adman_header_text:hover {color:inherit;text-decoration:underline}.rb-adman_text_overlay .rb-adman_body, .rb-adman_link {display:block;text-decoration:none;}",i='<div class="rb-adman_text_overlay"><div class="rb-adman_image_wrapper"><div style="display:table;height:100%;"><div style="display:table-cell;height:100%;vertical-align:middle"><span style="background-image: url({{src}});width:{{width}}px;height:{{height}}px"></span></div></div></div><div class="rb-adman_text_wrapper"><span class="rb-adman_header"><span class="rb-adman_age_wrapper"><span class="rb-adman_age_content">{{ageRestrictions}}</span></span><span class="rb-adman_header_text">{{header}}</span></span><span class="rb-adman_body">{{body}}</span><span class="rb-adman_link">{{hyperlinkText}}</span></div></div>';return{start:c,skip:e.skip,dispose:d}},AdmanHTML.VideoAdRenderer=function(a,b){"use strict";function c(){f.mainEl=a.videoEl,g.forEach(function(a){f.mainEl.addEventListener(a,e)}),f.mainEl.parentNode?h={src:f.mainEl.src,time:f.mainEl.currentTime}:f.setView(null,{position:"absolute",width:"100%",height:"100%",top:0}),f.mainEl.controls=a.browser.mobile,f.mainEl.src=b.getAd().src,f.mainEl.load(),f.mainEl.play(),f.start()}function d(){f.dispose(),g.forEach(function(a){f.mainEl.removeEventListener(a,e)}),h.src?(f.mainEl.src=h.src,f.mainEl.load(),f.mainEl.play(),f.mainEl.currentTime=h.time):f.mainEl.src=""}function e(b){switch(b.type){case"loadedmetadata":f.onStart();break;case"play":a.cb("onPlayed");break;case"pause":a.cb("onPaused");break;case"timeupdate":f.onTimeRemained(f.mainEl.currentTime,f.mainEl.duration);break;case"ended":a.cb("onCompleted");break;case"error":a.cb("onError")}}var f=new AdmanHTML.AdRenderer(a,b),g=["loadedmetadata","error","pause","play","timeupdate","ended"],h={};return{start:c,skip:f.skip,dispose:d,pause:function(){f.mainEl.pause()},resume:function(){f.mainEl.play()},setVolume:function(a){f.mainEl.volume=a}}},AdmanHTML.VpaidSwfAdRenderer=function(a,b){"use strict";function c(){var a;if(!i)return n.duration;try{a=i.callGet("adDuration")}catch(b){a=n.duration}return a}function d(){m.start(),AdmanHTML.Utils.checkFlashAsync(function(c){if(c===AdmanHTML.Utils.FLASH_READY){a.cb("onStarted",[b.sectionType,b.getAdForApp()||{}]),f(p);var d="vpaidSwfUrl="+encodeURIComponent(n.src)+"&proxyMethodName="+o;m.setView(l.createSwfObject(a.config.vpaidJsInterface,{width:"100%",height:"100%"},{flashvars:d,allowScriptAccess:"always",wmode:"opaque"}),{position:"absolute",top:0,left:0,right:0,bottom:0,"background-color":"black"})}else a.cb("onError")})}function e(){m.dispose(),window[o]=null}function f(a){g(),k=setTimeout(h,a)}function g(){clearTimeout(k)}function h(){a.cb("onError")}var i,j,k,l=new AdmanHTML.SwfAdRenderer(a,b),m=l["super"],n=b.getAd(),o="vpaidProxyMethod"+Date.now(),p=500,q=1e3;return m.onResize=function(a,b){i&&i.call("resizeAd",[a,b,"normal"])},window[o]=function(d){var e;switch(d){case"loaded":f(p);break;case"vpaidloaded":g();break;case"inited":i=m.mainEl.getElementsByTagName("object")[0];var h=i.call("handshakeVersion",["2.0"]);h?(f(q),i.call("initAd",[m.mainEl.offsetWidth,m.mainEl.offsetHeight,"normal",n.bitrate,n.params,""])):a.cb("onError");break;case"AdStarted":g(),b.log("playbackStarted");
break;case"AdLoaded":f(q),i.call("startAd");break;case"AdRemainingTimeChange":e=c(),m.onTimeRemained(e-i.callGet("adRemainingTime"),e);break;case"AdVideoComplete":e=c(),m.onTimeRemained(e,e);break;case"AdStopped":case"AdSkipped":setTimeout(function(){j?j():a.cb("onCompleted")});break;case"AdClickThru":b.log("click"),a.cb("onClicked");break;case"AdError":a.cb("onError")}},{start:d,dispose:e,pause:function(){i&&i.call("pauseAd")},resume:function(){i&&i.call("resumeAd")},setVolume:function(a){i&&i.callSet("adVolume",a)},skip:function(a){j=a;try{i&&i.call("skipAd")}catch(b){}}}};
