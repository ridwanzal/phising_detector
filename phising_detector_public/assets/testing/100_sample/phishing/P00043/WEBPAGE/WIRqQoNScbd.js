/*!CK:2211044410!*//*1383045014,178191655*/

if (self.CavalryLogger) { CavalryLogger.start_js(["w5EYA"]); }

__d("ErrorContextualDialogXUITheme",["cx"],function(a,b,c,d,e,f){var g=b('cx'),h={wrapperClassName:"_572t",arrowDimensions:{offset:12,length:22}};e.exports=h;});
__d("RegistrationLogger",["AsyncSignal","RegistrationClientConfig"],function(a,b,c,d,e,f){var g=b('AsyncSignal'),h=b('RegistrationClientConfig'),i=h.logging.endpoint,j={bumpInlineValidation:function(k,l){if(!h.logging.enabled)return;var m={category:h.logging.categories.INLINE,type:l,field:k};new g(i,m).setHandler(this.handleResponse).send();},handleResponse:function(k){!k;}};e.exports=j;});
__d("RegistrationFieldValidator",["ContextualDialog","ErrorContextualDialogXUITheme","CSS","deferred","Event","EventEmitter","Focus","LayerAutoFocus","RegistrationClientConfig","RegistrationController","RegistrationLogger","cx","getActiveElement","invariant"],function(a,b,c,d,e,f){'use strict';var g=b('ContextualDialog'),h=b('ErrorContextualDialogXUITheme'),i=b('CSS'),j=b('deferred').Deferred,k=b('Event'),l=b('EventEmitter'),m=b('Focus'),n=b('LayerAutoFocus'),o=b('RegistrationClientConfig'),p=b('RegistrationController'),q=b('RegistrationLogger'),r=b('cx'),s=b('getActiveElement'),t=b('invariant');for(var u in l)if(l.hasOwnProperty(u))w[u]=l[u];var v=l===null?null:l.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=l;function w(x,y,z,aa){l.call(this);this.wrapper=x;this.field=y;this.position=z;this.behavior=aa;this.flyout=null;this.steps=[];this.stepContexts=[];this.stepMarkups=[];this.stepLoggingTypes=[];this.stepArgs=[];this.isValid=true;this.stepCounter=null;this.stepProgress=null;p.enrollChildValidator(this);this.addListener('validated',this.maybeShowPersistent,this);this.addListener('validated',this.maybeDismissFlyout,this);this.setupListenersForField();}w.prototype.setupListenersForField=function(){k.listen(this.field,'focus',this.dismissPersistent.bind(this));k.listen(this.field,'focus',this.maybeShowFlyout.bind(this));k.listen(this.field,'blur',this.dismissFlyout.bind(this));switch(this.behavior){case 'follow':k.listen(this.field,'blur',this.validateField.bind(this,0,[]));break;case 'follow-except-empty':k.listen(this.field,'blur',this.validateField.bind(this,0,[o.logging.types.IS_EMPTY]));break;case 'follow-none':break;default:t(false);break;}};w.prototype.getField=function(){return this.field;};w.prototype.getFieldName=function(){return this.field.name;};w.prototype.getFlyoutContext=function(){return this.field;};w.prototype.addValidationStep=function(x,y,z,aa){this.stepMarkups.push(y);this.stepLoggingTypes.push(x);this.steps.push(z);this.stepContexts.push(aa);this.stepArgs.push(Array.prototype.slice.call(arguments,4));};w.prototype.validateField=function(x,y){if(this.stepCounter===null&&x===0){this.stepCounter=0;this.stepProgress=new j();}else if(this.stepCounter+1===x){this.stepCounter=x;}else return;t(0<=this.stepCounter);t(this.stepCounter<=this.steps.length);t(this.stepProgress!==null);if(this.stepCounter<this.steps.length){x=this.stepCounter;if(y.indexOf(this.stepLoggingTypes[x])>=0){this.validateField(x+1,y);}else{var z=this.steps[x].apply(this.stepContexts[x],[this.getField()].concat(this.stepArgs[x]));z.addCallback(this.validateField,this,x+1,y);z.addErrback(this.$RegistrationFieldValidator0,this);}}else{this.stepCounter=null;this.isValid=true;this.emit('validated',true);this.stepProgress.succeed();this.stepProgress=null;}};w.prototype.$RegistrationFieldValidator0=function(){this.isValid=false;var x=this.stepMarkups[this.stepCounter].cloneNode(true),y=this.stepLoggingTypes[this.stepCounter];if(!this.flyout){this.flyout=new g({context:this.getFlyoutContext(),position:this.position,theme:h},x).disableBehavior(n);}else this.flyout.setInnerContent(x);this.stepCounter=null;this.emit('validated',false);this.stepProgress.fail();this.stepProgress=null;q.bumpInlineValidation(this.getFieldName(),y);};w.prototype.runAllValidations=function(){this.validateField(0,[]);return this.stepProgress;};w.prototype.isFocused=function(){return s()===this.field;};w.prototype.focusField=function(){m.set(this.field);};w.prototype.fieldIsValid=function(){return this.isValid;};w.prototype.maybeShowFlyout=function(){if(this.isFocused()&&!this.isValid){t(this.flyout);this.emit('show',this.flyout);}};w.prototype.maybeShowPersistent=function(){i.conditionClass(this.wrapper,"_5634",!this.isFocused()&&!this.isValid);};w.prototype.dismissPersistent=function(){i.removeClass(this.wrapper,"_5634");};w.prototype.dismissFlyout=function(){if(this.flyout)this.emit('hide',this.flyout);};w.prototype.maybeDismissFlyout=function(){if(this.isValid)this.dismissFlyout();};e.exports=w;});
__d("RegistrationMultipleInputValidator",["DataStore","DOM","Event","Focus","RegistrationClientConfig","RegistrationFieldValidator","getActiveElement","invariant"],function(a,b,c,d,e,f){'use strict';var g=b('DataStore'),h=b('DOM'),i=b('Event'),j=b('Focus'),k=b('RegistrationClientConfig'),l=b('RegistrationFieldValidator'),m=b('getActiveElement'),n=b('invariant');for(var o in l)if(l.hasOwnProperty(o))q[o]=l[o];var p=l===null?null:l.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=l;function q(r,s,t,u,v,w){this.fieldType=v;var x;switch(this.fieldType){case k.validators.types.SELECTORS:x='select';break;case k.validators.types.RADIO:x='input[type="radio"]';break;default:n(false);}this.inputs=[];var y=h.scry(s,x);this.inputs.push.apply(this.inputs,y);n(this.inputs.length===w);l.call(this,r,s,t,u);}q.prototype.setupListenersForField=function(){n(this.inputs!=null);this.inputs.forEach(function(r){i.listen(r,'focus',this.dismissPersistent.bind(this));i.listen(r,'focus',this.maybeShowFlyout.bind(this));if(this.fieldType===k.validators.types.RADIO){i.listen(r,'click',function(){if(!this.isFocused())this.emit('fieldblur');}.bind(this));}else i.listen(r,'blur',function(){(function s(){if(!this.isFocused())this.emit('fieldblur');}).bind(this).defer();}.bind(this));},this);this.addListener('fieldblur',this.dismissFlyout,this);switch(this.behavior){case 'follow':this.addListener('fieldblur',this.validateField.bind(this,0,[]));break;case 'follow-except-empty':this.addListener('fieldblur',this.validateField.bind(this,0,[k.logging.types.IS_EMPTY]));break;case 'follow-none':break;default:n(false);break;}};q.prototype.getField=function(){return this.inputs;};q.prototype.getFieldName=function(){return g.get(this.field,'name');};q.prototype.getFlyoutContext=function(){return this.inputs[0];};q.prototype.isFocused=function(){var r=m();for(var s=0;s<this.inputs.length;s++)if(this.inputs[s]===r)return true;return false;};q.prototype.focusField=function(){j.set(this.inputs[0]);};e.exports=q;});
__d("XRegistrationValidateControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f){var g=b('XControllerURIBuilder');e.exports=g.create("\/ajax\/registration\/validation\/{type}\/",{type:{type:"Enum",required:true},contactpoint:{type:"String"}});});
__d("RegistrationInlineValidations",["AsyncRequest","DataStore","deferred","RegistrationClientConfig","RegistrationController","RegistrationFieldValidator","RegistrationMultipleInputValidator","XRegistrationValidateControllerURIBuilder","invariant"],function(a,b,c,d,e,f){'use strict';var g=b('AsyncRequest'),h=b('DataStore'),i=b('deferred').Deferred,j=b('RegistrationClientConfig'),k=b('RegistrationController'),l=b('RegistrationFieldValidator'),m=b('RegistrationMultipleInputValidator'),n=b('XRegistrationValidateControllerURIBuilder'),o=b('invariant');function p(ca){var da=new i();(function ea(){if(!ca.value||/^\s*$/.exec(ca.value)){da.fail();}else da.succeed();}).defer();return da;}function q(ca){var da=new i();(function ea(){for(var fa=0;fa<ca.length;fa++)if(!ca[fa].value||ca[fa].value==='0')return da.fail();da.succeed();}).defer();return da;}function r(ca){var da=new i();(function ea(){for(var fa=0;fa<ca.length;fa++)if(ca[fa].checked)return da.succeed();da.fail();}).defer();return da;}var s=/@|\d/;function t(ca){var da=new i();function ea(ga){var ha=ga.getPayload();if(ha.valid===true){da.succeed();}else da.fail();}function fa(ga){da.succeed();}(function ga(){if(!s.exec(ca.value)){da.fail();}else{var ha=(new n()).setEnum('type',j.logging.types.CONTACTPOINT_INVALID).setString('contactpoint',ca.value).getURI();(new g()).setURI(ha).setMethod('GET').setReadOnly(true).setHandler(ea).setErrorHandler(fa).send();}}).defer();return da;}function u(ca,da){var ea=new i(),fa=k.getField(da);(function ga(){if(fa.value===ca.value){ea.succeed();}else ea.fail();}).defer();return ea;}function v(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCORRECT_NAME;ca.addValidationStep(da,ea,p);}function w(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCORRECT_EMAIL;ca.addValidationStep(da,ea,p);da=j.logging.types.CONTACTPOINT_INVALID;ea=j.messages.INVALID_EMAIL;ca.addValidationStep(da,ea,t);}function x(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCORRECT_EMAIL_CONF;ca.addValidationStep(da,ea,p);da=j.logging.types.CONTACTPOINT_MATCH;ea=j.messages.EMAIL_RETYPE_DIFFERENT;var fa=j.fields.EMAIL;ca.addValidationStep(da,ea,u,null,fa);}function y(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.PASSWORD_BLANK;ca.addValidationStep(da,ea,p);}function z(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.INCOMPLETE_BIRTHDAY;ca.addValidationStep(da,ea,q);}function aa(ca){var da=j.logging.types.IS_EMPTY,ea=j.messages.NO_GENDER;ca.addValidationStep(da,ea,r);}function ba(ca,da,ea,fa){var ga=null,ha=h.get(da,'type');switch(ha){case j.validators.types.TEXT:ga=new l(ca,da,ea,fa);break;case j.validators.types.SELECTORS:var ia=3;ga=new m(ca,da,ea,fa,ha,ia);break;case j.validators.types.RADIO:var ja=2;ga=new m(ca,da,ea,fa,ha,ja);break;default:o(false);}switch(ga.getFieldName()){case j.fields.FIRSTNAME:case j.fields.LASTNAME:v(ga);break;case j.fields.EMAIL:w(ga);break;case j.fields.EMAIL_CONFIRMATION:x(ga);break;case j.fields.PASSWORD:y(ga);break;case j.fields.BIRTHDAY_WRAPPER:z(ga);break;case j.fields.GENDER_WRAPPER:aa(ga);break;default:o(false);}}e.exports=e.exports||{};e.exports.register=ba;});