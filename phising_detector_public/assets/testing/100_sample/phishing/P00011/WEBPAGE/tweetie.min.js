!function(e){"use strict";e.fn.twittie=function(){var t=arguments[0]instanceof Object?arguments[0]:{},a="function"==typeof arguments[0]?arguments[0]:arguments[1],r=e.extend({username:null,list:null,count:4,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php"},t);r.list&&!r.username&&e.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var n=function(e){var t=e.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>');return t},s=function(e){var t=e.split(" ");e=t[1]+" "+t[2]+", "+t[5]+" "+t[3];var a=Date.parse(e),r=arguments.length>1?arguments[1]:new Date,n=parseInt((r.getTime()-a)/1e3);return n+=60*r.getTimezoneOffset(),60>n?"less than a minute ago":120>n?"about a minute ago":3600>n?parseInt(n/60).toString()+" minutes ago":7200>n?"about an hour ago":86400>n?"about "+parseInt(n/3600).toString()+" hours ago":172800>n?"1 day ago":parseInt(n/86400).toString()+" days ago"},i=function(e){for(var t=r.template,a=["date","tweet","avatar","url","retweeted","screen_name"],n=0,s=a.length;s>n;n++)t=t.replace(new RegExp("{{"+a[n]+"}}","gi"),e[a[n]]);return t};this.html('<span class="tweets_loader">Loading...</span>');var u=this;e.getJSON(r.apiPath,{username:r.username,list:r.list,count:r.count,exclude_replies:r.hideReplies},function(t){u.find("span").fadeOut("fast",function(){for(var o=0;o<r.count&&t[o];o++){var l={date:s(t[o].created_at),tweet:n(t[o].retweeted?"RT @"+t[o].user.screen_name+": "+t[o].retweeted_status.text:t[o].text),avatar:'<img src="'+t[o].user.profile_image_url+'" />',url:"http://twitter.com/"+t[o].user.screen_name+"/status/"+t[o].id_str,retweeted:t[o].retweeted,screen_name:n("@"+t[o].user.screen_name)};u.append('<div class="tweet">'+i(l)+"</div>")}e(".tweets_feed").find(".tweets_loader").remove(),"function"==typeof a&&a()})})}}(jQuery);