LI.define("Login.handleSuccess");LI.Login.handleSuccess=function(a){a=a.responseText;var e=LI.ChangePassword.Styles,b=LI.ChangePassword.JS,c=LI.Controls.getControl("login","FrontierAJAXForm");LI.Dialog().open({name:"change-password-dialog",type:"interrupt",width:500,content:{title:LI.i18n.get("change_your_password"),html:a},dependencies:{jsFiles:b,cssFiles:e}});c.resetFormSubmit()};LI.define("Login.handleError");
LI.Login.handleError=function(a){function e(a,d,c){var b=a.parentNode;YDom.addClass(a,"error");a.focus();d||(d=document.createElement("span"),d.className="error hidden",b.appendChild(d),YDom.insertBefore(d,b),a.className.replace("hidden",""));h&&jSecure.setElementContent(d,LI.i18n.get(c))}var b=YDom.get("session_password-login"),c=YDom.get("session_key-login"),f=YDom.get("session_key-login-error"),k=YDom.get("session_password-login-error"),h=YDom.get("mini-profile--js"),g=YDom.get("domainSuggestion"),
d=h?h.children[0]:"";YDom.removeClass(b,"error");YDom.removeClass(c,"error");b.value="";""===a.domainSuggestions&&(YDom.addClass(g,"hide"),YDom.removeClass(d,"wp-margin"));if("wp"===a.ec)e(b,k,"wrong_password"),YDom.addClass(d,"wp-margin");else if("iu"===a.ec||"ium"===a.ec||"wpm"===a.ec){var l=c.parentNode,m="iu"===a.ec?"invalid_username":"ium"===a.ec||"wpm"===a.ec?"invalid_username_mobile":"";(f=f?f:Y$(".error",l)[0])&&e(c,f,m);"wpm"===a.ec&&(e(b,k,"wrong_password"),YDom.addClass(d,"wp-margin"));
""!==a.domainSuggestions&&(b=a.domainSuggestions,YDom.addClass(d,"wp-margin"),YDom.removeClass(g,"hide"),document.getElementById("suggestion").textContent=b)}else"pnlna"===a.ec&&e(c,f,"phone_number_login_not_allowed");!a.ec&&a.fieldErrors&&a.globalError&&LI.injectAlert(a.globalError,"error");a.tc&&(document.getElementById("tryCount").value=a.tc);if(a&&a.fieldErrors){for(var n in a.fieldErrors)YDom.addClass(n,"error");"iu"==a.ec||YDom.hasClass(g,"hide")||(YDom.addClass(g,"hide"),YDom.removeClass(d,
"wp-margin"))}};
$(function(){function a(){var a=h.text(),a=c.val().split("@")[0].concat(a);c.val(a);document.getElementById("clickedSuggestion").value="true";g=!0}function e(a){var b=a.target;"A"===b.tagName&&(a.preventDefault(),window.open(b.href),self.close())}function b(){var a=LI.parseQueryString,b=a(window.location.href).session_redirect;return b&&(b=a(b).l)?"FIREFOX_ACTIVATION"===a(b).trk:!1}var c=$("#session_key-login"),f=$("#mini-profile"),k=$("#not-me--js"),h=$("#suggestion"),g=!1;if(window.opener||b())$(window).on("click",
e);if(!g)h.on("click",a);k.on("click",function(a){c.removeClass("hidden");f.addClass("hidden");k.addClass("hidden");c.focus();WebTracking&&WebTracking.trackUserAction("login_page_v2_interaction_tracking","login_not_you")})});