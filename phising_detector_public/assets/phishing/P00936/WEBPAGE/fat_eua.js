
if(typeof(SK)=='undefined')SK={};var sk_namespaces=["SK.Applications","SK.Env","SK.Obj","SK.Singletons","SK.UI","SK.UI.Arrangement","SK.UI.Help","SK.Util","SK.Const","SK.Actions.Common"];for(var i=0;i<sk_namespaces.length;i++){var nsp=sk_namespaces[i];var nsp_elements=nsp.split('.');var nsp_prefix_arr=[];for(var j=0;j<nsp_elements.length;j++){var nsp_element=nsp_elements[j];var prefix=this.nsp_prefix_arr.length>0?this.nsp_prefix_arr.join(".")+".":"";var nsp_str=prefix+nsp_element;if(typeof(eval(nsp_str))=='undefined'){eval(nsp_str+' = {};');}
nsp_prefix_arr.push(nsp_element);}}


SK.Env=function(options){this.options=options;this.get=function(key){if(typeof this.options[key]=='undefined')return"";return this.options[key];}
this.set=function(key,value){this.options[key]=value;}
this.setMultiple=function(options){for(var i in options){if((this.options[i]!=null)){this.options[i]=SK.Util.merge(this.options[i],options[i]);}else{this.options[i]=options[i];}}}}
SK.Singletons.env=new SK.Env({});


(function(){this.MooTools={version:'1.5.0',build:'0f7b690afee9349b15909f33016a25d2e4d9f4e3'};var typeOf=this.typeOf=function(item){if(item==null)return'null';if(item.$family!=null)return item.$family();if(item.nodeName){if(item.nodeType==1)return'element';if(item.nodeType==3)return(/\S/).test(item.nodeValue)?'textnode':'whitespace';}else if(typeof item.length=='number'){if('callee'in item)return'arguments';if('item'in item)return'collection';}
return typeof item;};var instanceOf=this.instanceOf=function(item,object){if(item==null)return false;var constructor=item.$constructor||item.constructor;while(constructor){if(constructor===object)return true;constructor=constructor.parent;}
if(!item.hasOwnProperty)return false;return item instanceof object;};var Function=this.Function;var enumerables=true;for(var i in{toString:1})enumerables=null;if(enumerables)enumerables=['hasOwnProperty','valueOf','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','constructor'];Function.prototype.overloadSetter=function(usePlural){var self=this;return function(a,b){if(a==null)return this;if(usePlural||typeof a!='string'){for(var k in a)self.call(this,k,a[k]);if(enumerables)for(var i=enumerables.length;i--;){k=enumerables[i];if(a.hasOwnProperty(k))self.call(this,k,a[k]);}}else{self.call(this,a,b);}
return this;};};Function.prototype.overloadGetter=function(usePlural){var self=this;return function(a){var args,result;if(typeof a!='string')args=a;else if(arguments.length>1)args=arguments;else if(usePlural)args=[a];if(args){result={};for(var i=0;i<args.length;i++)result[args[i]]=self.call(this,args[i]);}else{result=self.call(this,a);}
return result;};};Function.prototype.extend=function(key,value){this[key]=value;}.overloadSetter();Function.prototype.implement=function(key,value){this.prototype[key]=value;}.overloadSetter();var slice=Array.prototype.slice;Function.from=function(item){return(typeOf(item)=='function')?item:function(){return item;};};Array.from=function(item){if(item==null)return[];return(Type.isEnumerable(item)&&typeof item!='string')?(typeOf(item)=='array')?item:slice.call(item):[item];};Number.from=function(item){var number=parseFloat(item);return isFinite(number)?number:null;};String.from=function(item){return item+'';};Function.implement({hide:function(){this.$hidden=true;return this;},protect:function(){this.$protected=true;return this;}});var Type=this.Type=function(name,object){if(name){var lower=name.toLowerCase();var typeCheck=function(item){return(typeOf(item)==lower);};Type['is'+name]=typeCheck;if(object!=null){object.prototype.$family=(function(){return lower;}).hide();}}
if(object==null)return null;object.extend(this);object.$constructor=Type;object.prototype.$constructor=object;return object;};var toString=Object.prototype.toString;Type.isEnumerable=function(item){return(item!=null&&typeof item.length=='number'&&toString.call(item)!='[object Function]');};var hooks={};var hooksOf=function(object){var type=typeOf(object.prototype);return hooks[type]||(hooks[type]=[]);};var implement=function(name,method){if(method&&method.$hidden)return;var hooks=hooksOf(this);for(var i=0;i<hooks.length;i++){var hook=hooks[i];if(typeOf(hook)=='type')implement.call(hook,name,method);else hook.call(this,name,method);}
var previous=this.prototype[name];if(previous==null||!previous.$protected)this.prototype[name]=method;if(this[name]==null&&typeOf(method)=='function')extend.call(this,name,function(item){return method.apply(item,slice.call(arguments,1));});};var extend=function(name,method){if(method&&method.$hidden)return;var previous=this[name];if(previous==null||!previous.$protected)this[name]=method;};Type.implement({implement:implement.overloadSetter(),extend:extend.overloadSetter(),alias:function(name,existing){implement.call(this,name,this.prototype[existing]);}.overloadSetter(),mirror:function(hook){hooksOf(this).push(hook);return this;}});new Type('Type',Type);var force=function(name,object,methods){var isType=(object!=Object),prototype=object.prototype;if(isType)object=new Type(name,object);for(var i=0,l=methods.length;i<l;i++){var key=methods[i],generic=object[key],proto=prototype[key];if(generic)generic.protect();if(isType&&proto)object.implement(key,proto.protect());}
if(isType){var methodsEnumerable=prototype.propertyIsEnumerable(methods[0]);object.forEachMethod=function(fn){if(!methodsEnumerable)for(var i=0,l=methods.length;i<l;i++){fn.call(prototype,prototype[methods[i]],methods[i]);}
for(var key in prototype)fn.call(prototype,prototype[key],key);};}
return force;};force('String',String,['charAt','charCodeAt','concat','contains','indexOf','lastIndexOf','match','quote','replace','search','slice','split','substr','substring','trim','toLowerCase','toUpperCase'])('Array',Array,['pop','push','reverse','shift','sort','splice','unshift','concat','join','slice','indexOf','lastIndexOf','filter','forEach','every','map','some','reduce','reduceRight'])('Number',Number,['toExponential','toFixed','toLocaleString','toPrecision'])('Function',Function,['apply','call','bind'])('RegExp',RegExp,['exec','test'])('Object',Object,['create','defineProperty','defineProperties','keys','getPrototypeOf','getOwnPropertyDescriptor','getOwnPropertyNames','preventExtensions','isExtensible','seal','isSealed','freeze','isFrozen'])('Date',Date,['now']);Object.extend=extend.overloadSetter();Date.extend('now',function(){return+(new Date);});new Type('Boolean',Boolean);Number.prototype.$family=function(){return isFinite(this)?'number':'null';}.hide();Number.extend('random',function(min,max){return Math.floor(Math.random()*(max-min+1)+min);});var hasOwnProperty=Object.prototype.hasOwnProperty;Object.extend('forEach',function(object,fn,bind){for(var key in object){if(hasOwnProperty.call(object,key))fn.call(bind,object[key],key,object);}});Object.each=Object.forEach;Array.implement({forEach:function(fn,bind){for(var i=0,l=this.length;i<l;i++){if(i in this)fn.call(bind,this[i],i,this);}},each:function(fn,bind){Array.forEach(this,fn,bind);return this;}});var cloneOf=function(item){switch(typeOf(item)){case'array':return item.clone();case'object':return Object.clone(item);default:return item;}};Array.implement('clone',function(){var i=this.length,clone=new Array(i);while(i--)clone[i]=cloneOf(this[i]);return clone;});var mergeOne=function(source,key,current){switch(typeOf(current)){case'object':if(typeOf(source[key])=='object')Object.merge(source[key],current);else source[key]=Object.clone(current);break;case'array':source[key]=current.clone();break;default:source[key]=current;}
return source;};Object.extend({merge:function(source,k,v){if(typeOf(k)=='string')return mergeOne(source,k,v);for(var i=1,l=arguments.length;i<l;i++){var object=arguments[i];for(var key in object)mergeOne(source,key,object[key]);}
return source;},clone:function(object){var clone={};for(var key in object)clone[key]=cloneOf(object[key]);return clone;},append:function(original){for(var i=1,l=arguments.length;i<l;i++){var extended=arguments[i]||{};for(var key in extended)original[key]=extended[key];}
return original;}});['Object','WhiteSpace','TextNode','Collection','Arguments'].each(function(name){new Type(name);});var UID=Date.now();String.extend('uniqueID',function(){return(UID++).toString(36);});})();Array.implement({every:function(fn,bind){for(var i=0,l=this.length>>>0;i<l;i++){if((i in this)&&!fn.call(bind,this[i],i,this))return false;}
return true;},filter:function(fn,bind){var results=[];for(var value,i=0,l=this.length>>>0;i<l;i++)if(i in this){value=this[i];if(fn.call(bind,value,i,this))results.push(value);}
return results;},indexOf:function(item,from){var length=this.length>>>0;for(var i=(from<0)?Math.max(0,length+from):from||0;i<length;i++){if(this[i]===item)return i;}
return-1;},map:function(fn,bind){var length=this.length>>>0,results=Array(length);for(var i=0;i<length;i++){if(i in this)results[i]=fn.call(bind,this[i],i,this);}
return results;},some:function(fn,bind){for(var i=0,l=this.length>>>0;i<l;i++){if((i in this)&&fn.call(bind,this[i],i,this))return true;}
return false;},clean:function(){return this.filter(function(item){return item!=null;});},invoke:function(methodName){var args=Array.slice(arguments,1);return this.map(function(item){return item[methodName].apply(item,args);});},associate:function(keys){var obj={},length=Math.min(this.length,keys.length);for(var i=0;i<length;i++)obj[keys[i]]=this[i];return obj;},link:function(object){var result={};for(var i=0,l=this.length;i<l;i++){for(var key in object){if(object[key](this[i])){result[key]=this[i];delete object[key];break;}}}
return result;},contains:function(item,from){return this.indexOf(item,from)!=-1;},append:function(array){this.push.apply(this,array);return this;},getLast:function(){return(this.length)?this[this.length-1]:null;},getRandom:function(){return(this.length)?this[Number.random(0,this.length-1)]:null;},include:function(item){if(!this.contains(item))this.push(item);return this;},combine:function(array){for(var i=0,l=array.length;i<l;i++)this.include(array[i]);return this;},erase:function(item){for(var i=this.length;i--;){if(this[i]===item)this.splice(i,1);}
return this;},empty:function(){this.length=0;return this;},flatten:function(){var array=[];for(var i=0,l=this.length;i<l;i++){var type=typeOf(this[i]);if(type=='null')continue;array=array.concat((type=='array'||type=='collection'||type=='arguments'||instanceOf(this[i],Array))?Array.flatten(this[i]):this[i]);}
return array;},pick:function(){for(var i=0,l=this.length;i<l;i++){if(this[i]!=null)return this[i];}
return null;},hexToRgb:function(array){if(this.length!=3)return null;var rgb=this.map(function(value){if(value.length==1)value+=value;return parseInt(value,16);});return(array)?rgb:'rgb('+rgb+')';},rgbToHex:function(array){if(this.length<3)return null;if(this.length==4&&this[3]==0&&!array)return'transparent';var hex=[];for(var i=0;i<3;i++){var bit=(this[i]-0).toString(16);hex.push((bit.length==1)?'0'+bit:bit);}
return(array)?hex:'#'+hex.join('');}});String.implement({contains:function(string,index){return(index?String(this).slice(index):String(this)).indexOf(string)>-1;},test:function(regex,params){return((typeOf(regex)=='regexp')?regex:new RegExp(''+regex,params)).test(this);},trim:function(){return String(this).replace(/^\s+|\s+$/g,'');},clean:function(){return String(this).replace(/\s+/g,' ').trim();},camelCase:function(){return String(this).replace(/-\D/g,function(match){return match.charAt(1).toUpperCase();});},hyphenate:function(){return String(this).replace(/[A-Z]/g,function(match){return('-'+match.charAt(0).toLowerCase());});},capitalize:function(){return String(this).replace(/\b[a-z]/g,function(match){return match.toUpperCase();});},escapeRegExp:function(){return String(this).replace(/([-.*+?^${}()|[\]\/\\])/g,'\\$1');},toInt:function(base){return parseInt(this,base||10);},toFloat:function(){return parseFloat(this);},hexToRgb:function(array){var hex=String(this).match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return(hex)?hex.slice(1).hexToRgb(array):null;},rgbToHex:function(array){var rgb=String(this).match(/\d{1,3}/g);return(rgb)?rgb.rgbToHex(array):null;},substitute:function(object,regexp){return String(this).replace(regexp||(/\\?\{([^{}]+)\}/g),function(match,name){if(match.charAt(0)=='\\')return match.slice(1);return(object[name]!=null)?object[name]:'';});}});Number.implement({limit:function(min,max){return Math.min(max,Math.max(min,this));},round:function(precision){precision=Math.pow(10,precision||0).toFixed(precision<0?-precision:0);return Math.round(this*precision)/precision;},times:function(fn,bind){for(var i=0;i<this;i++)fn.call(bind,i,this);},toFloat:function(){return parseFloat(this);},toInt:function(base){return parseInt(this,base||10);}});Number.alias('each','times');(function(math){var methods={};math.each(function(name){if(!Number[name])methods[name]=function(){return Math[name].apply(null,[this].concat(Array.from(arguments)));};});Number.implement(methods);})(['abs','acos','asin','atan','atan2','ceil','cos','exp','floor','log','max','min','pow','sin','sqrt','tan']);Function.extend({attempt:function(){for(var i=0,l=arguments.length;i<l;i++){try{return arguments[i]();}catch(e){}}
return null;}});Function.implement({attempt:function(args,bind){try{return this.apply(bind,Array.from(args));}catch(e){}
return null;},bind:function(that){var self=this,args=arguments.length>1?Array.slice(arguments,1):null,F=function(){};var bound=function(){var context=that,length=arguments.length;if(this instanceof bound){F.prototype=self.prototype;context=new F;}
var result=(!args&&!length)?self.call(context):self.apply(context,args&&length?args.concat(Array.slice(arguments)):args||arguments);return context==that?result:context;};return bound;},pass:function(args,bind){var self=this;if(args!=null)args=Array.from(args);return function(){return self.apply(bind,args||arguments);};},delay:function(delay,bind,args){return setTimeout(this.pass((args==null?[]:args),bind),delay);},periodical:function(periodical,bind,args){return setInterval(this.pass((args==null?[]:args),bind),periodical);}});(function(){var hasOwnProperty=Object.prototype.hasOwnProperty;Object.extend({subset:function(object,keys){var results={};for(var i=0,l=keys.length;i<l;i++){var k=keys[i];if(k in object)results[k]=object[k];}
return results;},map:function(object,fn,bind){var results={};for(var key in object){if(hasOwnProperty.call(object,key))results[key]=fn.call(bind,object[key],key,object);}
return results;},filter:function(object,fn,bind){var results={};for(var key in object){var value=object[key];if(hasOwnProperty.call(object,key)&&fn.call(bind,value,key,object))results[key]=value;}
return results;},every:function(object,fn,bind){for(var key in object){if(hasOwnProperty.call(object,key)&&!fn.call(bind,object[key],key))return false;}
return true;},some:function(object,fn,bind){for(var key in object){if(hasOwnProperty.call(object,key)&&fn.call(bind,object[key],key))return true;}
return false;},keys:function(object){var keys=[];for(var key in object){if(hasOwnProperty.call(object,key))keys.push(key);}
return keys;},values:function(object){var values=[];for(var key in object){if(hasOwnProperty.call(object,key))values.push(object[key]);}
return values;},getLength:function(object){return Object.keys(object).length;},keyOf:function(object,value){for(var key in object){if(hasOwnProperty.call(object,key)&&object[key]===value)return key;}
return null;},contains:function(object,value){return Object.keyOf(object,value)!=null;},toQueryString:function(object,base){var queryString=[];Object.each(object,function(value,key){if(base)key=base+'['+key+']';var result;switch(typeOf(value)){case'object':result=Object.toQueryString(value,key);break;case'array':var qs={};value.each(function(val,i){qs[i]=val;});result=Object.toQueryString(qs,key);break;default:result=key+'='+encodeURIComponent(value);}
if(value!=null)queryString.push(result);});return queryString.join('&');}});})();(function(){var document=this.document;var window=document.window=this;var parse=function(ua,platform){ua=ua.toLowerCase();platform=(platform?platform.toLowerCase():'');var UA=ua.match(/(opera|ie|firefox|chrome|trident|crios|version)[\s\/:]([\w\d\.]+)?.*?(safari|(?:rv[\s\/:]|version[\s\/:])([\w\d\.]+)|$)/)||[null,'unknown',0];if(UA[1]=='trident'){UA[1]='ie';if(UA[4])UA[2]=UA[4];}else if(UA[1]=='crios'){UA[1]='chrome';}
var platform=ua.match(/ip(?:ad|od|hone)/)?'ios':(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||['other'])[0];if(platform=='win')platform='windows';return{extend:Function.prototype.extend,name:(UA[1]=='version')?UA[3]:UA[1],version:parseFloat((UA[1]=='opera'&&UA[4])?UA[4]:UA[2]),platform:platform};};var Browser=this.Browser=parse(navigator.userAgent,navigator.platform);if(Browser.ie){Browser.version=document.documentMode;}
Browser.extend({Features:{xpath:!!(document.evaluate),air:!!(window.runtime),query:!!(document.querySelector),json:!!(window.JSON)},parseUA:parse});Browser.Request=(function(){var XMLHTTP=function(){return new XMLHttpRequest();};var MSXML2=function(){return new ActiveXObject('MSXML2.XMLHTTP');};var MSXML=function(){return new ActiveXObject('Microsoft.XMLHTTP');};return Function.attempt(function(){XMLHTTP();return XMLHTTP;},function(){MSXML2();return MSXML2;},function(){MSXML();return MSXML;});})();Browser.Features.xhr=!!(Browser.Request);Browser.exec=function(text){if(!text)return text;if(window.execScript){window.execScript(text);}else{var script=document.createElement('script');script.setAttribute('type','text/javascript');script.text=text;document.head.appendChild(script);document.head.removeChild(script);}
return text;};String.implement('stripScripts',function(exec){var scripts='';var text=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(all,code){scripts+=code+'\n';return'';});if(exec===true)Browser.exec(scripts);else if(typeOf(exec)=='function')exec(scripts,text);return text;});Browser.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event});this.Window=this.$constructor=new Type('Window',function(){});this.$family=Function.from('window').hide();Window.mirror(function(name,method){window[name]=method;});this.Document=document.$constructor=new Type('Document',function(){});document.$family=Function.from('document').hide();Document.mirror(function(name,method){document[name]=method;});document.html=document.documentElement;if(!document.head)document.head=document.getElementsByTagName('head')[0];if(document.execCommand)try{document.execCommand("BackgroundImageCache",false,true);}catch(e){}
if(this.attachEvent&&!this.addEventListener){var unloadEvent=function(){this.detachEvent('onunload',unloadEvent);document.head=document.html=document.window=null;};this.attachEvent('onunload',unloadEvent);}
var arrayFrom=Array.from;try{arrayFrom(document.html.childNodes);}catch(e){Array.from=function(item){if(typeof item!='string'&&Type.isEnumerable(item)&&typeOf(item)!='array'){var i=item.length,array=new Array(i);while(i--)array[i]=item[i];return array;}
return arrayFrom(item);};var prototype=Array.prototype,slice=prototype.slice;['pop','push','reverse','shift','sort','splice','unshift','concat','join','slice'].each(function(name){var method=prototype[name];Array[name]=function(item){return method.apply(Array.from(item),slice.call(arguments,1));};});}})();(function(){var _keys={};var DOMEvent=this.DOMEvent=new Type('DOMEvent',function(event,win){if(!win)win=window;event=event||win.event;if(event.$extended)return event;this.event=event;this.$extended=true;this.shift=event.shiftKey;this.control=event.ctrlKey;this.alt=event.altKey;this.meta=event.metaKey;var type=this.type=event.type;var target=event.target||event.srcElement;while(target&&target.nodeType==3)target=target.parentNode;this.target=document.id(target);if(type.indexOf('key')==0){var code=this.code=(event.which||event.keyCode);this.key=_keys[code];if(type=='keydown'||type=='keyup'){if(code>111&&code<124)this.key='f'+(code-111);else if(code>95&&code<106)this.key=code-96;}
if(this.key==null)this.key=String.fromCharCode(code).toLowerCase();}else if(type=='click'||type=='dblclick'||type=='contextmenu'||type=='DOMMouseScroll'||type.indexOf('mouse')==0||type=='wheel'){var doc=win.document;doc=(!doc.compatMode||doc.compatMode=='CSS1Compat')?doc.html:doc.body;this.page={x:(event.pageX!=null)?event.pageX:event.clientX+doc.scrollLeft,y:(event.pageY!=null)?event.pageY:event.clientY+doc.scrollTop};this.client={x:(event.pageX!=null)?event.pageX-win.pageXOffset:event.clientX,y:(event.pageY!=null)?event.pageY-win.pageYOffset:event.clientY};if(type=='DOMMouseScroll'||type=='mousewheel'||type=='wheel')
this.wheel=(event.wheelDelta)?event.wheelDelta/120:-(event.deltaX||event.deltaY||event.detail||0)/3;this.rightClick=(event.which==3||event.button==2);if(type=='mouseover'||type=='mouseout'){var related=event.relatedTarget||event[(type=='mouseover'?'from':'to')+'Element'];while(related&&related.nodeType==3)related=related.parentNode;this.relatedTarget=document.id(related);}}else if(type.indexOf('touch')==0||type.indexOf('gesture')==0){this.rotation=event.rotation;this.scale=event.scale;this.targetTouches=event.targetTouches;this.changedTouches=event.changedTouches;var touches=this.touches=event.touches;if(touches&&touches[0]){var touch=touches[0];this.page={x:touch.pageX,y:touch.pageY};this.client={x:touch.clientX,y:touch.clientY};}}
if(!this.client)this.client={};if(!this.page)this.page={};});DOMEvent.implement({stop:function(){return this.preventDefault().stopPropagation();},stopPropagation:function(){if(this.event.stopPropagation)this.event.stopPropagation();else this.event.cancelBubble=true;return this;},preventDefault:function(){if(this.event.preventDefault)this.event.preventDefault();else this.event.returnValue=false;return this;}});DOMEvent.defineKey=function(code,key){_keys[code]=key;return this;};DOMEvent.defineKeys=DOMEvent.defineKey.overloadSetter(true);DOMEvent.defineKeys({'38':'up','40':'down','37':'left','39':'right','27':'esc','32':'space','8':'backspace','9':'tab','46':'delete','13':'enter'});})();(function(){var Class=this.Class=new Type('Class',function(params){if(instanceOf(params,Function))params={initialize:params};var newClass=function(){reset(this);if(newClass.$prototyping)return this;this.$caller=null;var value=(this.initialize)?this.initialize.apply(this,arguments):this;this.$caller=this.caller=null;return value;}.extend(this).implement(params);newClass.$constructor=Class;newClass.prototype.$constructor=newClass;newClass.prototype.parent=parent;return newClass;});var parent=function(){if(!this.$caller)throw new Error('The method "parent" cannot be called.');var name=this.$caller.$name,parent=this.$caller.$owner.parent,previous=(parent)?parent.prototype[name]:null;if(!previous)throw new Error('The method "'+name+'" has no parent.');return previous.apply(this,arguments);};var reset=function(object){for(var key in object){var value=object[key];switch(typeOf(value)){case'object':var F=function(){};F.prototype=value;object[key]=reset(new F);break;case'array':object[key]=value.clone();break;}}
return object;};var wrap=function(self,key,method){if(method.$origin)method=method.$origin;var wrapper=function(){if(method.$protected&&this.$caller==null)throw new Error('The method "'+key+'" cannot be called.');var caller=this.caller,current=this.$caller;this.caller=current;this.$caller=wrapper;var result=method.apply(this,arguments);this.$caller=current;this.caller=caller;return result;}.extend({$owner:self,$origin:method,$name:key});return wrapper;};var implement=function(key,value,retain){if(Class.Mutators.hasOwnProperty(key)){value=Class.Mutators[key].call(this,value);if(value==null)return this;}
if(typeOf(value)=='function'){if(value.$hidden)return this;this.prototype[key]=(retain)?value:wrap(this,key,value);}else{Object.merge(this.prototype,key,value);}
return this;};var getInstance=function(klass){klass.$prototyping=true;var proto=new klass;delete klass.$prototyping;return proto;};Class.implement('implement',implement.overloadSetter());Class.Mutators={Extends:function(parent){this.parent=parent;this.prototype=getInstance(parent);},Implements:function(items){Array.from(items).each(function(item){var instance=new item;for(var key in instance)implement.call(this,key,instance[key],true);},this);}};})();(function(){this.Chain=new Class({$chain:[],chain:function(){this.$chain.append(Array.flatten(arguments));return this;},callChain:function(){return(this.$chain.length)?this.$chain.shift().apply(this,arguments):false;},clearChain:function(){this.$chain.empty();return this;}});var removeOn=function(string){return string.replace(/^on([A-Z])/,function(full,first){return first.toLowerCase();});};this.Events=new Class({$events:{},addEvent:function(type,fn,internal){type=removeOn(type);this.$events[type]=(this.$events[type]||[]).include(fn);if(internal)fn.internal=true;return this;},addEvents:function(events){for(var type in events)this.addEvent(type,events[type]);return this;},fireEvent:function(type,args,delay){type=removeOn(type);var events=this.$events[type];if(!events)return this;args=Array.from(args);events.each(function(fn){if(delay)fn.delay(delay,this,args);else fn.apply(this,args);},this);return this;},removeEvent:function(type,fn){type=removeOn(type);var events=this.$events[type];if(events&&!fn.internal){var index=events.indexOf(fn);if(index!=-1)delete events[index];}
return this;},removeEvents:function(events){var type;if(typeOf(events)=='object'){for(type in events)this.removeEvent(type,events[type]);return this;}
if(events)events=removeOn(events);for(type in this.$events){if(events&&events!=type)continue;var fns=this.$events[type];for(var i=fns.length;i--;)if(i in fns){this.removeEvent(type,fns[i]);}}
return this;}});this.Options=new Class({setOptions:function(){var options=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(this.addEvent)for(var option in options){if(typeOf(options[option])!='function'||!(/^on[A-Z]/).test(option))continue;this.addEvent(option,options[option]);delete options[option];}
return this;}});})();;(function(){var parsed,separatorIndex,combinatorIndex,reversed,cache={},reverseCache={},reUnescape=/\\/g;var parse=function(expression,isReversed){if(expression==null)return null;if(expression.Slick===true)return expression;expression=(''+expression).replace(/^\s+|\s+$/g,'');reversed=!!isReversed;var currentCache=(reversed)?reverseCache:cache;if(currentCache[expression])return currentCache[expression];parsed={Slick:true,expressions:[],raw:expression,reverse:function(){return parse(this.raw,true);}};separatorIndex=-1;while(expression!=(expression=expression.replace(regexp,parser)));parsed.length=parsed.expressions.length;return currentCache[parsed.raw]=(reversed)?reverse(parsed):parsed;};var reverseCombinator=function(combinator){if(combinator==='!')return' ';else if(combinator===' ')return'!';else if((/^!/).test(combinator))return combinator.replace(/^!/,'');else return'!'+combinator;};var reverse=function(expression){var expressions=expression.expressions;for(var i=0;i<expressions.length;i++){var exp=expressions[i];var last={parts:[],tag:'*',combinator:reverseCombinator(exp[0].combinator)};for(var j=0;j<exp.length;j++){var cexp=exp[j];if(!cexp.reverseCombinator)cexp.reverseCombinator=' ';cexp.combinator=cexp.reverseCombinator;delete cexp.reverseCombinator;}
exp.reverse().push(last);}
return expression;};var escapeRegExp=function(string){return string.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(match){return'\\'+match;});};var regexp=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,'['+escapeRegExp(">+~`!@$%^&={}\\;</")+']').replace(/<unicode>/g,'(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])').replace(/<unicode1>/g,'(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])'));function parser(rawMatch,separator,combinator,combinatorChildren,tagName,id,className,attributeKey,attributeOperator,attributeQuote,attributeValue,pseudoMarker,pseudoClass,pseudoQuote,pseudoClassQuotedValue,pseudoClassValue){if(separator||separatorIndex===-1){parsed.expressions[++separatorIndex]=[];combinatorIndex=-1;if(separator)return'';}
if(combinator||combinatorChildren||combinatorIndex===-1){combinator=combinator||' ';var currentSeparator=parsed.expressions[separatorIndex];if(reversed&&currentSeparator[combinatorIndex])
currentSeparator[combinatorIndex].reverseCombinator=reverseCombinator(combinator);currentSeparator[++combinatorIndex]={combinator:combinator,tag:'*'};}
var currentParsed=parsed.expressions[separatorIndex][combinatorIndex];if(tagName){currentParsed.tag=tagName.replace(reUnescape,'');}else if(id){currentParsed.id=id.replace(reUnescape,'');}else if(className){className=className.replace(reUnescape,'');if(!currentParsed.classList)currentParsed.classList=[];if(!currentParsed.classes)currentParsed.classes=[];currentParsed.classList.push(className);currentParsed.classes.push({value:className,regexp:new RegExp('(^|\\s)'+escapeRegExp(className)+'(\\s|$)')});}else if(pseudoClass){pseudoClassValue=pseudoClassValue||pseudoClassQuotedValue;pseudoClassValue=pseudoClassValue?pseudoClassValue.replace(reUnescape,''):null;if(!currentParsed.pseudos)currentParsed.pseudos=[];currentParsed.pseudos.push({key:pseudoClass.replace(reUnescape,''),value:pseudoClassValue,type:pseudoMarker.length==1?'class':'element'});}else if(attributeKey){attributeKey=attributeKey.replace(reUnescape,'');attributeValue=(attributeValue||'').replace(reUnescape,'');var test,regexp;switch(attributeOperator){case'^=':regexp=new RegExp('^'+escapeRegExp(attributeValue));break;case'$=':regexp=new RegExp(escapeRegExp(attributeValue)+'$');break;case'~=':regexp=new RegExp('(^|\\s)'+escapeRegExp(attributeValue)+'(\\s|$)');break;case'|=':regexp=new RegExp('^'+escapeRegExp(attributeValue)+'(-|$)');break;case'=':test=function(value){return attributeValue==value;};break;case'*=':test=function(value){return value&&value.indexOf(attributeValue)>-1;};break;case'!=':test=function(value){return attributeValue!=value;};break;default:test=function(value){return!!value;};}
if(attributeValue==''&&(/^[*$^]=$/).test(attributeOperator))test=function(){return false;};if(!test)test=function(value){return value&&regexp.test(value);};if(!currentParsed.attributes)currentParsed.attributes=[];currentParsed.attributes.push({key:attributeKey,operator:attributeOperator,value:attributeValue,test:test});}
return'';};var Slick=(this.Slick||{});Slick.parse=function(expression){return parse(expression);};Slick.escapeRegExp=escapeRegExp;if(!this.Slick)this.Slick=Slick;}).apply((typeof exports!='undefined')?exports:this);;(function(){var local={},featuresCache={},toString=Object.prototype.toString;local.isNativeCode=function(fn){return(/\{\s*\[native code\]\s*\}/).test(''+fn);};local.isXML=function(document){return(!!document.xmlVersion)||(!!document.xml)||(toString.call(document)=='[object XMLDocument]')||(document.nodeType==9&&document.documentElement.nodeName!='HTML');};local.setDocument=function(document){var nodeType=document.nodeType;if(nodeType==9);else if(nodeType)document=document.ownerDocument;else if(document.navigator)document=document.document;else return;if(this.document===document)return;this.document=document;var root=document.documentElement,rootUid=this.getUIDXML(root),features=featuresCache[rootUid],feature;if(features){for(feature in features){this[feature]=features[feature];}
return;}
features=featuresCache[rootUid]={};features.root=root;features.isXMLDocument=this.isXML(document);features.brokenStarGEBTN=features.starSelectsClosedQSA=features.idGetsName=features.brokenMixedCaseQSA=features.brokenGEBCN=features.brokenCheckedQSA=features.brokenEmptyAttributeQSA=features.isHTMLDocument=features.nativeMatchesSelector=false;var starSelectsClosed,starSelectsComments,brokenSecondClassNameGEBCN,cachedGetElementsByClassName,brokenFormAttributeGetter;var selected,id='slick_uniqueid';var testNode=document.createElement('div');var testRoot=document.body||document.getElementsByTagName('body')[0]||root;testRoot.appendChild(testNode);try{testNode.innerHTML='<a id="'+id+'"></a>';features.isHTMLDocument=!!document.getElementById(id);}catch(e){};if(features.isHTMLDocument){testNode.style.display='none';testNode.appendChild(document.createComment(''));starSelectsComments=(testNode.getElementsByTagName('*').length>1);try{testNode.innerHTML='foo</foo>';selected=testNode.getElementsByTagName('*');starSelectsClosed=(selected&&!!selected.length&&selected[0].nodeName.charAt(0)=='/');}catch(e){};features.brokenStarGEBTN=starSelectsComments||starSelectsClosed;try{testNode.innerHTML='<a name="'+id+'"></a><b id="'+id+'"></b>';features.idGetsName=document.getElementById(id)===testNode.firstChild;}catch(e){};if(testNode.getElementsByClassName){try{testNode.innerHTML='<a class="f"></a><a class="b"></a>';testNode.getElementsByClassName('b').length;testNode.firstChild.className='b';cachedGetElementsByClassName=(testNode.getElementsByClassName('b').length!=2);}catch(e){};try{testNode.innerHTML='<a class="a"></a><a class="f b a"></a>';brokenSecondClassNameGEBCN=(testNode.getElementsByClassName('a').length!=2);}catch(e){};features.brokenGEBCN=cachedGetElementsByClassName||brokenSecondClassNameGEBCN;}
if(testNode.querySelectorAll){try{testNode.innerHTML='foo</foo>';selected=testNode.querySelectorAll('*');features.starSelectsClosedQSA=(selected&&!!selected.length&&selected[0].nodeName.charAt(0)=='/');}catch(e){};try{testNode.innerHTML='<a class="MiX"></a>';features.brokenMixedCaseQSA=!testNode.querySelectorAll('.MiX').length;}catch(e){};try{testNode.innerHTML='<select><option selected="selected">a</option></select>';features.brokenCheckedQSA=(testNode.querySelectorAll(':checked').length==0);}catch(e){};try{testNode.innerHTML='<a class=""></a>';features.brokenEmptyAttributeQSA=(testNode.querySelectorAll('[class*=""]').length!=0);}catch(e){};}
try{testNode.innerHTML='<form action="s"><input id="action"/></form>';brokenFormAttributeGetter=(testNode.firstChild.getAttribute('action')!='s');}catch(e){};features.nativeMatchesSelector=root.matches||root.mozMatchesSelector||root.webkitMatchesSelector;if(features.nativeMatchesSelector)try{features.nativeMatchesSelector.call(root,':slick');features.nativeMatchesSelector=null;}catch(e){};}
try{root.slick_expando=1;delete root.slick_expando;features.getUID=this.getUIDHTML;}catch(e){features.getUID=this.getUIDXML;}
testRoot.removeChild(testNode);testNode=selected=testRoot=null;features.getAttribute=(features.isHTMLDocument&&brokenFormAttributeGetter)?function(node,name){var method=this.attributeGetters[name];if(method)return method.call(node);var attributeNode=node.getAttributeNode(name);return(attributeNode)?attributeNode.nodeValue:null;}:function(node,name){var method=this.attributeGetters[name];return(method)?method.call(node):node.getAttribute(name);};features.hasAttribute=(root&&this.isNativeCode(root.hasAttribute))?function(node,attribute){return node.hasAttribute(attribute);}:function(node,attribute){node=node.getAttributeNode(attribute);return!!(node&&(node.specified||node.nodeValue));};var nativeRootContains=root&&this.isNativeCode(root.contains),nativeDocumentContains=document&&this.isNativeCode(document.contains);features.contains=(nativeRootContains&&nativeDocumentContains)?function(context,node){return context.contains(node);}:(nativeRootContains&&!nativeDocumentContains)?function(context,node){return context===node||((context===document)?document.documentElement:context).contains(node);}:(root&&root.compareDocumentPosition)?function(context,node){return context===node||!!(context.compareDocumentPosition(node)&16);}:function(context,node){if(node)do{if(node===context)return true;}while((node=node.parentNode));return false;};features.documentSorter=(root.compareDocumentPosition)?function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return 0;return a.compareDocumentPosition(b)&4?-1:a===b?0:1;}:('sourceIndex'in root)?function(a,b){if(!a.sourceIndex||!b.sourceIndex)return 0;return a.sourceIndex-b.sourceIndex;}:(document.createRange)?function(a,b){if(!a.ownerDocument||!b.ownerDocument)return 0;var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);return aRange.compareBoundaryPoints(Range.START_TO_END,bRange);}:null;root=null;for(feature in features){this[feature]=features[feature];}};var reSimpleSelector=/^([#.]?)((?:[\w-]+|\*))$/,reEmptyAttribute=/\[.+[*$^]=(?:""|'')?\]/,qsaFailExpCache={};local.search=function(context,expression,append,first){var found=this.found=(first)?null:(append||[]);if(!context)return found;else if(context.navigator)context=context.document;else if(!context.nodeType)return found;var parsed,i,uniques=this.uniques={},hasOthers=!!(append&&append.length),contextIsDocument=(context.nodeType==9);if(this.document!==(contextIsDocument?context:context.ownerDocument))this.setDocument(context);if(hasOthers)for(i=found.length;i--;)uniques[this.getUID(found[i])]=true;if(typeof expression=='string'){var simpleSelector=expression.match(reSimpleSelector);simpleSelectors:if(simpleSelector){var symbol=simpleSelector[1],name=simpleSelector[2],node,nodes;if(!symbol){if(name=='*'&&this.brokenStarGEBTN)break simpleSelectors;nodes=context.getElementsByTagName(name);if(first)return nodes[0]||null;for(i=0;node=nodes[i++];){if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}}else if(symbol=='#'){if(!this.isHTMLDocument||!contextIsDocument)break simpleSelectors;node=context.getElementById(name);if(!node)return found;if(this.idGetsName&&node.getAttributeNode('id').nodeValue!=name)break simpleSelectors;if(first)return node||null;if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}else if(symbol=='.'){if(!this.isHTMLDocument||((!context.getElementsByClassName||this.brokenGEBCN)&&context.querySelectorAll))break simpleSelectors;if(context.getElementsByClassName&&!this.brokenGEBCN){nodes=context.getElementsByClassName(name);if(first)return nodes[0]||null;for(i=0;node=nodes[i++];){if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}}else{var matchClass=new RegExp('(^|\\s)'+Slick.escapeRegExp(name)+'(\\s|$)');nodes=context.getElementsByTagName('*');for(i=0;node=nodes[i++];){className=node.className;if(!(className&&matchClass.test(className)))continue;if(first)return node;if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}}}
if(hasOthers)this.sort(found);return(first)?null:found;}
querySelector:if(context.querySelectorAll){if(!this.isHTMLDocument||qsaFailExpCache[expression]||this.brokenMixedCaseQSA||(this.brokenCheckedQSA&&expression.indexOf(':checked')>-1)||(this.brokenEmptyAttributeQSA&&reEmptyAttribute.test(expression))||(!contextIsDocument&&expression.indexOf(',')>-1)||Slick.disableQSA)break querySelector;var _expression=expression,_context=context;if(!contextIsDocument){var currentId=_context.getAttribute('id'),slickid='slickid__';_context.setAttribute('id',slickid);_expression='#'+slickid+' '+_expression;context=_context.parentNode;}
try{if(first)return context.querySelector(_expression)||null;else nodes=context.querySelectorAll(_expression);}catch(e){qsaFailExpCache[expression]=1;break querySelector;}finally{if(!contextIsDocument){if(currentId)_context.setAttribute('id',currentId);else _context.removeAttribute('id');context=_context;}}
if(this.starSelectsClosedQSA)for(i=0;node=nodes[i++];){if(node.nodeName>'@'&&!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}else for(i=0;node=nodes[i++];){if(!(hasOthers&&uniques[this.getUID(node)]))found.push(node);}
if(hasOthers)this.sort(found);return found;}
parsed=this.Slick.parse(expression);if(!parsed.length)return found;}else if(expression==null){return found;}else if(expression.Slick){parsed=expression;}else if(this.contains(context.documentElement||context,expression)){(found)?found.push(expression):found=expression;return found;}else{return found;}
this.posNTH={};this.posNTHLast={};this.posNTHType={};this.posNTHTypeLast={};this.push=(!hasOthers&&(first||(parsed.length==1&&parsed.expressions[0].length==1)))?this.pushArray:this.pushUID;if(found==null)found=[];var j,m,n;var combinator,tag,id,classList,classes,attributes,pseudos;var currentItems,currentExpression,currentBit,lastBit,expressions=parsed.expressions;search:for(i=0;(currentExpression=expressions[i]);i++)for(j=0;(currentBit=currentExpression[j]);j++){combinator='combinator:'+currentBit.combinator;if(!this[combinator])continue search;tag=(this.isXMLDocument)?currentBit.tag:currentBit.tag.toUpperCase();id=currentBit.id;classList=currentBit.classList;classes=currentBit.classes;attributes=currentBit.attributes;pseudos=currentBit.pseudos;lastBit=(j===(currentExpression.length-1));this.bitUniques={};if(lastBit){this.uniques=uniques;this.found=found;}else{this.uniques={};this.found=[];}
if(j===0){this[combinator](context,tag,id,classes,attributes,pseudos,classList);if(first&&lastBit&&found.length)break search;}else{if(first&&lastBit)for(m=0,n=currentItems.length;m<n;m++){this[combinator](currentItems[m],tag,id,classes,attributes,pseudos,classList);if(found.length)break search;}else for(m=0,n=currentItems.length;m<n;m++)this[combinator](currentItems[m],tag,id,classes,attributes,pseudos,classList);}
currentItems=this.found;}
if(hasOthers||(parsed.expressions.length>1))this.sort(found);return(first)?(found[0]||null):found;};local.uidx=1;local.uidk='slick-uniqueid';local.getUIDXML=function(node){var uid=node.getAttribute(this.uidk);if(!uid){uid=this.uidx++;node.setAttribute(this.uidk,uid);}
return uid;};local.getUIDHTML=function(node){return node.uniqueNumber||(node.uniqueNumber=this.uidx++);};local.sort=function(results){if(!this.documentSorter)return results;results.sort(this.documentSorter);return results;};local.cacheNTH={};local.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/;local.parseNTHArgument=function(argument){var parsed=argument.match(this.matchNTH);if(!parsed)return false;var special=parsed[2]||false;var a=parsed[1]||1;if(a=='-')a=-1;var b=+parsed[3]||0;parsed=(special=='n')?{a:a,b:b}:(special=='odd')?{a:2,b:1}:(special=='even')?{a:2,b:0}:{a:0,b:a};return(this.cacheNTH[argument]=parsed);};local.createNTHPseudo=function(child,sibling,positions,ofType){return function(node,argument){var uid=this.getUID(node);if(!this[positions][uid]){var parent=node.parentNode;if(!parent)return false;var el=parent[child],count=1;if(ofType){var nodeName=node.nodeName;do{if(el.nodeName!=nodeName)continue;this[positions][this.getUID(el)]=count++;}while((el=el[sibling]));}else{do{if(el.nodeType!=1)continue;this[positions][this.getUID(el)]=count++;}while((el=el[sibling]));}}
argument=argument||'n';var parsed=this.cacheNTH[argument]||this.parseNTHArgument(argument);if(!parsed)return false;var a=parsed.a,b=parsed.b,pos=this[positions][uid];if(a==0)return b==pos;if(a>0){if(pos<b)return false;}else{if(b<pos)return false;}
return((pos-b)%a)==0;};};local.pushArray=function(node,tag,id,classes,attributes,pseudos){if(this.matchSelector(node,tag,id,classes,attributes,pseudos))this.found.push(node);};local.pushUID=function(node,tag,id,classes,attributes,pseudos){var uid=this.getUID(node);if(!this.uniques[uid]&&this.matchSelector(node,tag,id,classes,attributes,pseudos)){this.uniques[uid]=true;this.found.push(node);}};local.matchNode=function(node,selector){if(this.isHTMLDocument&&this.nativeMatchesSelector){try{return this.nativeMatchesSelector.call(node,selector.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'));}catch(matchError){}}
var parsed=this.Slick.parse(selector);if(!parsed)return true;var expressions=parsed.expressions,simpleExpCounter=0,i;for(i=0;(currentExpression=expressions[i]);i++){if(currentExpression.length==1){var exp=currentExpression[0];if(this.matchSelector(node,(this.isXMLDocument)?exp.tag:exp.tag.toUpperCase(),exp.id,exp.classes,exp.attributes,exp.pseudos))return true;simpleExpCounter++;}}
if(simpleExpCounter==parsed.length)return false;var nodes=this.search(this.document,parsed),item;for(i=0;item=nodes[i++];){if(item===node)return true;}
return false;};local.matchPseudo=function(node,name,argument){var pseudoName='pseudo:'+name;if(this[pseudoName])return this[pseudoName](node,argument);var attribute=this.getAttribute(node,name);return(argument)?argument==attribute:!!attribute;};local.matchSelector=function(node,tag,id,classes,attributes,pseudos){if(tag){var nodeName=(this.isXMLDocument)?node.nodeName:node.nodeName.toUpperCase();if(tag=='*'){if(nodeName<'@')return false;}else{if(nodeName!=tag)return false;}}
if(id&&node.getAttribute('id')!=id)return false;var i,part,cls;if(classes)for(i=classes.length;i--;){cls=this.getAttribute(node,'class');if(!(cls&&classes[i].regexp.test(cls)))return false;}
if(attributes)for(i=attributes.length;i--;){part=attributes[i];if(part.operator?!part.test(this.getAttribute(node,part.key)):!this.hasAttribute(node,part.key))return false;}
if(pseudos)for(i=pseudos.length;i--;){part=pseudos[i];if(!this.matchPseudo(node,part.key,part.value))return false;}
return true;};var combinators={' ':function(node,tag,id,classes,attributes,pseudos,classList){var i,item,children;if(this.isHTMLDocument){getById:if(id){item=this.document.getElementById(id);if((!item&&node.all)||(this.idGetsName&&item&&item.getAttributeNode('id').nodeValue!=id)){children=node.all[id];if(!children)return;if(!children[0])children=[children];for(i=0;item=children[i++];){var idNode=item.getAttributeNode('id');if(idNode&&idNode.nodeValue==id){this.push(item,tag,null,classes,attributes,pseudos);break;}}
return;}
if(!item){if(this.contains(this.root,node))return;else break getById;}else if(this.document!==node&&!this.contains(node,item))return;this.push(item,tag,null,classes,attributes,pseudos);return;}
getByClass:if(classes&&node.getElementsByClassName&&!this.brokenGEBCN){children=node.getElementsByClassName(classList.join(' '));if(!(children&&children.length))break getByClass;for(i=0;item=children[i++];)this.push(item,tag,id,null,attributes,pseudos);return;}}
getByTag:{children=node.getElementsByTagName(tag);if(!(children&&children.length))break getByTag;if(!this.brokenStarGEBTN)tag=null;for(i=0;item=children[i++];)this.push(item,tag,id,classes,attributes,pseudos);}},'>':function(node,tag,id,classes,attributes,pseudos){if((node=node.firstChild))do{if(node.nodeType==1)this.push(node,tag,id,classes,attributes,pseudos);}while((node=node.nextSibling));},'+':function(node,tag,id,classes,attributes,pseudos){while((node=node.nextSibling))if(node.nodeType==1){this.push(node,tag,id,classes,attributes,pseudos);break;}},'^':function(node,tag,id,classes,attributes,pseudos){node=node.firstChild;if(node){if(node.nodeType==1)this.push(node,tag,id,classes,attributes,pseudos);else this['combinator:+'](node,tag,id,classes,attributes,pseudos);}},'~':function(node,tag,id,classes,attributes,pseudos){while((node=node.nextSibling)){if(node.nodeType!=1)continue;var uid=this.getUID(node);if(this.bitUniques[uid])break;this.bitUniques[uid]=true;this.push(node,tag,id,classes,attributes,pseudos);}},'++':function(node,tag,id,classes,attributes,pseudos){this['combinator:+'](node,tag,id,classes,attributes,pseudos);this['combinator:!+'](node,tag,id,classes,attributes,pseudos);},'~~':function(node,tag,id,classes,attributes,pseudos){this['combinator:~'](node,tag,id,classes,attributes,pseudos);this['combinator:!~'](node,tag,id,classes,attributes,pseudos);},'!':function(node,tag,id,classes,attributes,pseudos){while((node=node.parentNode))if(node!==this.document)this.push(node,tag,id,classes,attributes,pseudos);},'!>':function(node,tag,id,classes,attributes,pseudos){node=node.parentNode;if(node!==this.document)this.push(node,tag,id,classes,attributes,pseudos);},'!+':function(node,tag,id,classes,attributes,pseudos){while((node=node.previousSibling))if(node.nodeType==1){this.push(node,tag,id,classes,attributes,pseudos);break;}},'!^':function(node,tag,id,classes,attributes,pseudos){node=node.lastChild;if(node){if(node.nodeType==1)this.push(node,tag,id,classes,attributes,pseudos);else this['combinator:!+'](node,tag,id,classes,attributes,pseudos);}},'!~':function(node,tag,id,classes,attributes,pseudos){while((node=node.previousSibling)){if(node.nodeType!=1)continue;var uid=this.getUID(node);if(this.bitUniques[uid])break;this.bitUniques[uid]=true;this.push(node,tag,id,classes,attributes,pseudos);}}};for(var c in combinators)local['combinator:'+c]=combinators[c];var pseudos={'empty':function(node){var child=node.firstChild;return!(child&&child.nodeType==1)&&!(node.innerText||node.textContent||'').length;},'not':function(node,expression){return!this.matchNode(node,expression);},'contains':function(node,text){return(node.innerText||node.textContent||'').indexOf(text)>-1;},'first-child':function(node){while((node=node.previousSibling))if(node.nodeType==1)return false;return true;},'last-child':function(node){while((node=node.nextSibling))if(node.nodeType==1)return false;return true;},'only-child':function(node){var prev=node;while((prev=prev.previousSibling))if(prev.nodeType==1)return false;var next=node;while((next=next.nextSibling))if(next.nodeType==1)return false;return true;},'nth-child':local.createNTHPseudo('firstChild','nextSibling','posNTH'),'nth-last-child':local.createNTHPseudo('lastChild','previousSibling','posNTHLast'),'nth-of-type':local.createNTHPseudo('firstChild','nextSibling','posNTHType',true),'nth-last-of-type':local.createNTHPseudo('lastChild','previousSibling','posNTHTypeLast',true),'index':function(node,index){return this['pseudo:nth-child'](node,''+(index+1));},'even':function(node){return this['pseudo:nth-child'](node,'2n');},'odd':function(node){return this['pseudo:nth-child'](node,'2n+1');},'first-of-type':function(node){var nodeName=node.nodeName;while((node=node.previousSibling))if(node.nodeName==nodeName)return false;return true;},'last-of-type':function(node){var nodeName=node.nodeName;while((node=node.nextSibling))if(node.nodeName==nodeName)return false;return true;},'only-of-type':function(node){var prev=node,nodeName=node.nodeName;while((prev=prev.previousSibling))if(prev.nodeName==nodeName)return false;var next=node;while((next=next.nextSibling))if(next.nodeName==nodeName)return false;return true;},'enabled':function(node){return!node.disabled;},'disabled':function(node){return node.disabled;},'checked':function(node){return node.checked||node.selected;},'focus':function(node){return this.isHTMLDocument&&this.document.activeElement===node&&(node.href||node.type||this.hasAttribute(node,'tabindex'));},'root':function(node){return(node===this.root);},'selected':function(node){return node.selected;}};for(var p in pseudos)local['pseudo:'+p]=pseudos[p];var attributeGetters=local.attributeGetters={'for':function(){return('htmlFor'in this)?this.htmlFor:this.getAttribute('for');},'href':function(){return('href'in this)?this.getAttribute('href',2):this.getAttribute('href');},'style':function(){return(this.style)?this.style.cssText:this.getAttribute('style');},'tabindex':function(){var attributeNode=this.getAttributeNode('tabindex');return(attributeNode&&attributeNode.specified)?attributeNode.nodeValue:null;},'type':function(){return this.getAttribute('type');},'maxlength':function(){var attributeNode=this.getAttributeNode('maxLength');return(attributeNode&&attributeNode.specified)?attributeNode.nodeValue:null;}};attributeGetters.MAXLENGTH=attributeGetters.maxLength=attributeGetters.maxlength;var Slick=local.Slick=(this.Slick||{});Slick.version='1.1.7';Slick.search=function(context,expression,append){return local.search(context,expression,append);};Slick.find=function(context,expression){return local.search(context,expression,null,true);};Slick.contains=function(container,node){local.setDocument(container);return local.contains(container,node);};Slick.getAttribute=function(node,name){local.setDocument(node);return local.getAttribute(node,name);};Slick.hasAttribute=function(node,name){local.setDocument(node);return local.hasAttribute(node,name);};Slick.match=function(node,selector){if(!(node&&selector))return false;if(!selector||selector===node)return true;local.setDocument(node);return local.matchNode(node,selector);};Slick.defineAttributeGetter=function(name,fn){local.attributeGetters[name]=fn;return this;};Slick.lookupAttributeGetter=function(name){return local.attributeGetters[name];};Slick.definePseudo=function(name,fn){local['pseudo:'+name]=function(node,argument){return fn.call(node,argument);};return this;};Slick.lookupPseudo=function(name){var pseudo=local['pseudo:'+name];if(pseudo)return function(argument){return pseudo.call(this,argument);};return null;};Slick.override=function(regexp,fn){local.override(regexp,fn);return this;};Slick.isXML=local.isXML;Slick.uidOf=function(node){return local.getUIDHTML(node);};if(!this.Slick)this.Slick=Slick;}).apply((typeof exports!='undefined')?exports:this);var Element=this.Element=function(tag,props){var konstructor=Element.Constructors[tag];if(konstructor)return konstructor(props);if(typeof tag!='string')return document.id(tag).set(props);if(!props)props={};if(!(/^[\w-]+$/).test(tag)){var parsed=Slick.parse(tag).expressions[0][0];tag=(parsed.tag=='*')?'div':parsed.tag;if(parsed.id&&props.id==null)props.id=parsed.id;var attributes=parsed.attributes;if(attributes)for(var attr,i=0,l=attributes.length;i<l;i++){attr=attributes[i];if(props[attr.key]!=null)continue;if(attr.value!=null&&attr.operator=='=')props[attr.key]=attr.value;else if(!attr.value&&!attr.operator)props[attr.key]=true;}
if(parsed.classList&&props['class']==null)props['class']=parsed.classList.join(' ');}
return document.newElement(tag,props);};if(Browser.Element){Element.prototype=Browser.Element.prototype;Element.prototype._fireEvent=(function(fireEvent){return function(type,event){return fireEvent.call(this,type,event);};})(Element.prototype.fireEvent);}
new Type('Element',Element).mirror(function(name){if(Array.prototype[name])return;var obj={};obj[name]=function(){var results=[],args=arguments,elements=true;for(var i=0,l=this.length;i<l;i++){var element=this[i],result=results[i]=element[name].apply(element,args);elements=(elements&&typeOf(result)=='element');}
return(elements)?new Elements(results):results;};Elements.implement(obj);});if(!Browser.Element){Element.parent=Object;Element.Prototype={'$constructor':Element,'$family':Function.from('element').hide()};Element.mirror(function(name,method){Element.Prototype[name]=method;});}
Element.Constructors={};var IFrame=new Type('IFrame',function(){var params=Array.link(arguments,{properties:Type.isObject,iframe:function(obj){return(obj!=null);}});var props=params.properties||{},iframe;if(params.iframe)iframe=document.id(params.iframe);var onload=props.onload||function(){};delete props.onload;props.id=props.name=[props.id,props.name,iframe?(iframe.id||iframe.name):'IFrame_'+String.uniqueID()].pick();iframe=new Element(iframe||'iframe',props);var onLoad=function(){onload.call(iframe.contentWindow);};if(window.frames[props.id])onLoad();else iframe.addListener('load',onLoad);return iframe;});var Elements=this.Elements=function(nodes){if(nodes&&nodes.length){var uniques={},node;for(var i=0;node=nodes[i++];){var uid=Slick.uidOf(node);if(!uniques[uid]){uniques[uid]=true;this.push(node);}}}};Elements.prototype={length:0};Elements.parent=Array;new Type('Elements',Elements).implement({filter:function(filter,bind){if(!filter)return this;return new Elements(Array.filter(this,(typeOf(filter)=='string')?function(item){return item.match(filter);}:filter,bind));}.protect(),push:function(){var length=this.length;for(var i=0,l=arguments.length;i<l;i++){var item=document.id(arguments[i]);if(item)this[length++]=item;}
return(this.length=length);}.protect(),unshift:function(){var items=[];for(var i=0,l=arguments.length;i<l;i++){var item=document.id(arguments[i]);if(item)items.push(item);}
return Array.prototype.unshift.apply(this,items);}.protect(),concat:function(){var newElements=new Elements(this);for(var i=0,l=arguments.length;i<l;i++){var item=arguments[i];if(Type.isEnumerable(item))newElements.append(item);else newElements.push(item);}
return newElements;}.protect(),append:function(collection){for(var i=0,l=collection.length;i<l;i++)this.push(collection[i]);return this;}.protect(),empty:function(){while(this.length)delete this[--this.length];return this;}.protect()});(function(){var splice=Array.prototype.splice,object={'0':0,'1':1,length:2};splice.call(object,1,1);if(object[1]==1)Elements.implement('splice',function(){var length=this.length;var result=splice.apply(this,arguments);while(length>=this.length)delete this[length--];return result;}.protect());Array.forEachMethod(function(method,name){Elements.implement(name,method);});Array.mirror(Elements);var createElementAcceptsHTML;try{createElementAcceptsHTML=(document.createElement('<input name=x>').name=='x');}catch(e){}
var escapeQuotes=function(html){return(''+html).replace(/&/g,'&amp;').replace(/"/g,'&quot;');};Document.implement({newElement:function(tag,props){if(props&&props.checked!=null)props.defaultChecked=props.checked;if(createElementAcceptsHTML&&props){tag='<'+tag;if(props.name)tag+=' name="'+escapeQuotes(props.name)+'"';if(props.type)tag+=' type="'+escapeQuotes(props.type)+'"';tag+='>';delete props.name;delete props.type;}
return this.id(this.createElement(tag)).set(props);}});})();(function(){Slick.uidOf(window);Slick.uidOf(document);Document.implement({newTextNode:function(text){return this.createTextNode(text);},getDocument:function(){return this;},getWindow:function(){return this.window;},id:(function(){var types={string:function(id,nocash,doc){id=Slick.find(doc,'#'+id.replace(/(\W)/g,'\\$1'));return(id)?types.element(id,nocash):null;},element:function(el,nocash){Slick.uidOf(el);if(!nocash&&!el.$family&&!(/^(?:object|embed)$/i).test(el.tagName)){var fireEvent=el.fireEvent;el._fireEvent=function(type,event){return fireEvent(type,event);};Object.append(el,Element.Prototype);}
return el;},object:function(obj,nocash,doc){if(obj.toElement)return types.element(obj.toElement(doc),nocash);return null;}};types.textnode=types.whitespace=types.window=types.document=function(zero){return zero;};return function(el,nocash,doc){if(el&&el.$family&&el.uniqueNumber)return el;var type=typeOf(el);return(types[type])?types[type](el,nocash,doc||document):null;};})()});if(window.$==null)Window.implement('$',function(el,nc){return document.id(el,nc,this.document);});Window.implement({getDocument:function(){return this.document;},getWindow:function(){return this;}});[Document,Element].invoke('implement',{getElements:function(expression){return Slick.search(this,expression,new Elements);},getElement:function(expression){return document.id(Slick.find(this,expression));}});var contains={contains:function(element){return Slick.contains(this,element);}};if(!document.contains)Document.implement(contains);if(!document.createElement('div').contains)Element.implement(contains);var injectCombinator=function(expression,combinator){if(!expression)return combinator;expression=Object.clone(Slick.parse(expression));var expressions=expression.expressions;for(var i=expressions.length;i--;)
expressions[i][0].combinator=combinator;return expression;};Object.forEach({getNext:'~',getPrevious:'!~',getParent:'!'},function(combinator,method){Element.implement(method,function(expression){return this.getElement(injectCombinator(expression,combinator));});});Object.forEach({getAllNext:'~',getAllPrevious:'!~',getSiblings:'~~',getChildren:'>',getParents:'!'},function(combinator,method){Element.implement(method,function(expression){return this.getElements(injectCombinator(expression,combinator));});});Element.implement({getFirst:function(expression){return document.id(Slick.search(this,injectCombinator(expression,'>'))[0]);},getLast:function(expression){return document.id(Slick.search(this,injectCombinator(expression,'>')).getLast());},getWindow:function(){return this.ownerDocument.window;},getDocument:function(){return this.ownerDocument;},getElementById:function(id){return document.id(Slick.find(this,'#'+(''+id).replace(/(\W)/g,'\\$1')));},match:function(expression){return!expression||Slick.match(this,expression);}});if(window.$$==null)Window.implement('$$',function(selector){if(arguments.length==1){if(typeof selector=='string')return Slick.search(this.document,selector,new Elements);else if(Type.isEnumerable(selector))return new Elements(selector);}
return new Elements(arguments);});var inserters={before:function(context,element){var parent=element.parentNode;if(parent)parent.insertBefore(context,element);},after:function(context,element){var parent=element.parentNode;if(parent)parent.insertBefore(context,element.nextSibling);},bottom:function(context,element){element.appendChild(context);},top:function(context,element){element.insertBefore(context,element.firstChild);}};inserters.inside=inserters.bottom;var propertyGetters={},propertySetters={};var properties={};Array.forEach(['type','value','defaultValue','accessKey','cellPadding','cellSpacing','colSpan','frameBorder','rowSpan','tabIndex','useMap'],function(property){properties[property.toLowerCase()]=property;});properties.html='innerHTML';properties.text=(document.createElement('div').textContent==null)?'innerText':'textContent';Object.forEach(properties,function(real,key){propertySetters[key]=function(node,value){node[real]=value;};propertyGetters[key]=function(node){return node[real];};});var bools=['compact','nowrap','ismap','declare','noshade','checked','disabled','readOnly','multiple','selected','noresize','defer','defaultChecked','autofocus','controls','autoplay','loop'];var booleans={};Array.forEach(bools,function(bool){var lower=bool.toLowerCase();booleans[lower]=bool;propertySetters[lower]=function(node,value){node[bool]=!!value;};propertyGetters[lower]=function(node){return!!node[bool];};});Object.append(propertySetters,{'class':function(node,value){('className'in node)?node.className=(value||''):node.setAttribute('class',value);},'for':function(node,value){('htmlFor'in node)?node.htmlFor=value:node.setAttribute('for',value);},'style':function(node,value){(node.style)?node.style.cssText=value:node.setAttribute('style',value);},'value':function(node,value){node.value=(value!=null)?value:'';}});propertyGetters['class']=function(node){return('className'in node)?node.className||null:node.getAttribute('class');};var el=document.createElement('button');try{el.type='button';}catch(e){}
if(el.type!='button')propertySetters.type=function(node,value){node.setAttribute('type',value);};el=null;var input=document.createElement('input');input.value='t';input.type='submit';if(input.value!='t')propertySetters.type=function(node,type){var value=node.value;node.type=type;node.value=value;};input=null;var pollutesGetAttribute=(function(div){div.random='attribute';return(div.getAttribute('random')=='attribute');})(document.createElement('div'));var hasCloneBug=(function(test){test.innerHTML='<object><param name="should_fix" value="the unknown"></object>';return test.cloneNode(true).firstChild.childNodes.length!=1;})(document.createElement('div'));var hasClassList=!!document.createElement('div').classList;var classes=function(className){var classNames=(className||'').clean().split(" "),uniques={};return classNames.filter(function(className){if(className!==""&&!uniques[className])return uniques[className]=className;});};var addToClassList=function(name){this.classList.add(name);};var removeFromClassList=function(name){this.classList.remove(name);};Element.implement({setProperty:function(name,value){var setter=propertySetters[name.toLowerCase()];if(setter){setter(this,value);}else{var attributeWhiteList;if(pollutesGetAttribute)attributeWhiteList=this.retrieve('$attributeWhiteList',{});if(value==null){this.removeAttribute(name);if(pollutesGetAttribute)delete attributeWhiteList[name];}else{this.setAttribute(name,''+value);if(pollutesGetAttribute)attributeWhiteList[name]=true;}}
return this;},setProperties:function(attributes){for(var attribute in attributes)this.setProperty(attribute,attributes[attribute]);return this;},getProperty:function(name){var getter=propertyGetters[name.toLowerCase()];if(getter)return getter(this);if(pollutesGetAttribute){var attr=this.getAttributeNode(name),attributeWhiteList=this.retrieve('$attributeWhiteList',{});if(!attr)return null;if(attr.expando&&!attributeWhiteList[name]){var outer=this.outerHTML;if(outer.substr(0,outer.search(/\/?['"]?>(?![^<]*<['"])/)).indexOf(name)<0)return null;attributeWhiteList[name]=true;}}
var result=Slick.getAttribute(this,name);return(!result&&!Slick.hasAttribute(this,name))?null:result;},getProperties:function(){var args=Array.from(arguments);return args.map(this.getProperty,this).associate(args);},removeProperty:function(name){return this.setProperty(name,null);},removeProperties:function(){Array.each(arguments,this.removeProperty,this);return this;},set:function(prop,value){var property=Element.Properties[prop];(property&&property.set)?property.set.call(this,value):this.setProperty(prop,value);}.overloadSetter(),get:function(prop){var property=Element.Properties[prop];return(property&&property.get)?property.get.apply(this):this.getProperty(prop);}.overloadGetter(),erase:function(prop){var property=Element.Properties[prop];(property&&property.erase)?property.erase.apply(this):this.removeProperty(prop);return this;},hasClass:hasClassList?function(className){return this.classList.contains(className);}:function(className){return this.className.clean().contains(className,' ');},addClass:hasClassList?function(className){classes(className).forEach(addToClassList,this);return this;}:function(className){this.className=classes(className+' '+this.className).join(' ');return this;},removeClass:hasClassList?function(className){classes(className).forEach(removeFromClassList,this);return this;}:function(className){var classNames=classes(this.className);classes(className).forEach(classNames.erase,classNames);this.className=classNames.join(' ');return this;},toggleClass:function(className,force){if(force==null)force=!this.hasClass(className);return(force)?this.addClass(className):this.removeClass(className);},adopt:function(){var parent=this,fragment,elements=Array.flatten(arguments),length=elements.length;if(length>1)parent=fragment=document.createDocumentFragment();for(var i=0;i<length;i++){var element=document.id(elements[i],true);if(element)parent.appendChild(element);}
if(fragment)this.appendChild(fragment);return this;},appendText:function(text,where){return this.grab(this.getDocument().newTextNode(text),where);},grab:function(el,where){inserters[where||'bottom'](document.id(el,true),this);return this;},inject:function(el,where){inserters[where||'bottom'](this,document.id(el,true));return this;},replaces:function(el){el=document.id(el,true);el.parentNode.replaceChild(this,el);return this;},wraps:function(el,where){el=document.id(el,true);return this.replaces(el).grab(el,where);},getSelected:function(){this.selectedIndex;return new Elements(Array.from(this.options).filter(function(option){return option.selected;}));},toQueryString:function(){var queryString=[];this.getElements('input, select, textarea').each(function(el){var type=el.type;if(!el.name||el.disabled||type=='submit'||type=='reset'||type=='file'||type=='image')return;var value=(el.get('tag')=='select')?el.getSelected().map(function(opt){return document.id(opt).get('value');}):((type=='radio'||type=='checkbox')&&!el.checked)?null:el.get('value');Array.from(value).each(function(val){if(typeof val!='undefined')queryString.push(encodeURIComponent(el.name)+'='+encodeURIComponent(val));});});return queryString.join('&');}});var appendInserters={before:'beforeBegin',after:'afterEnd',bottom:'beforeEnd',top:'afterBegin',inside:'beforeEnd'};Element.implement('appendHTML',('insertAdjacentHTML'in document.createElement('div'))?function(html,where){this.insertAdjacentHTML(appendInserters[where||'bottom'],html);return this;}:function(html,where){var temp=new Element('div',{html:html}),children=temp.childNodes,fragment=temp.firstChild;if(!fragment)return this;if(children.length>1){fragment=document.createDocumentFragment();for(var i=0,l=children.length;i<l;i++){fragment.appendChild(children[i]);}}
inserters[where||'bottom'](fragment,this);return this;});var collected={},storage={};var get=function(uid){return(storage[uid]||(storage[uid]={}));};var clean=function(item){var uid=item.uniqueNumber;if(item.removeEvents)item.removeEvents();if(item.clearAttributes)item.clearAttributes();if(uid!=null){delete collected[uid];delete storage[uid];}
return item;};var formProps={input:'checked',option:'selected',textarea:'value'};Element.implement({destroy:function(){var children=clean(this).getElementsByTagName('*');Array.each(children,clean);Element.dispose(this);return null;},empty:function(){Array.from(this.childNodes).each(Element.dispose);return this;},dispose:function(){return(this.parentNode)?this.parentNode.removeChild(this):this;},clone:function(contents,keepid){contents=contents!==false;var clone=this.cloneNode(contents),ce=[clone],te=[this],i;if(contents){ce.append(Array.from(clone.getElementsByTagName('*')));te.append(Array.from(this.getElementsByTagName('*')));}
for(i=ce.length;i--;){var node=ce[i],element=te[i];if(!keepid)node.removeAttribute('id');if(node.clearAttributes){node.clearAttributes();node.mergeAttributes(element);node.removeAttribute('uniqueNumber');if(node.options){var no=node.options,eo=element.options;for(var j=no.length;j--;)no[j].selected=eo[j].selected;}}
var prop=formProps[element.tagName.toLowerCase()];if(prop&&element[prop])node[prop]=element[prop];}
if(hasCloneBug){var co=clone.getElementsByTagName('object'),to=this.getElementsByTagName('object');for(i=co.length;i--;)co[i].outerHTML=to[i].outerHTML;}
return document.id(clone);}});[Element,Window,Document].invoke('implement',{addListener:function(type,fn){if(window.attachEvent&&!window.addEventListener){collected[Slick.uidOf(this)]=this;}
if(this.addEventListener)this.addEventListener(type,fn,!!arguments[2]);else this.attachEvent('on'+type,fn);return this;},removeListener:function(type,fn){if(this.removeEventListener)this.removeEventListener(type,fn,!!arguments[2]);else this.detachEvent('on'+type,fn);return this;},retrieve:function(property,dflt){var storage=get(Slick.uidOf(this)),prop=storage[property];if(dflt!=null&&prop==null)prop=storage[property]=dflt;return prop!=null?prop:null;},store:function(property,value){var storage=get(Slick.uidOf(this));storage[property]=value;return this;},eliminate:function(property){var storage=get(Slick.uidOf(this));delete storage[property];return this;}});if(window.attachEvent&&!window.addEventListener){var gc=function(){Object.each(collected,clean);if(window.CollectGarbage)CollectGarbage();window.removeListener('unload',gc);}
window.addListener('unload',gc);}
Element.Properties={};Element.Properties.style={set:function(style){this.style.cssText=style;},get:function(){return this.style.cssText;},erase:function(){this.style.cssText='';}};Element.Properties.tag={get:function(){return this.tagName.toLowerCase();}};Element.Properties.html={set:function(html){if(html==null)html='';else if(typeOf(html)=='array')html=html.join('');this.innerHTML=html;},erase:function(){this.innerHTML='';}};var supportsHTML5Elements=true,supportsTableInnerHTML=true,supportsTRInnerHTML=true;var div=document.createElement('div');div.innerHTML='<nav></nav>';supportsHTML5Elements=(div.childNodes.length==1);if(!supportsHTML5Elements){var tags='abbr article aside audio canvas datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video'.split(' '),fragment=document.createDocumentFragment(),l=tags.length;while(l--)fragment.createElement(tags[l]);}
div=null;supportsTableInnerHTML=Function.attempt(function(){var table=document.createElement('table');table.innerHTML='<tr><td></td></tr>';return true;});var tr=document.createElement('tr'),html='<td></td>';tr.innerHTML=html;supportsTRInnerHTML=(tr.innerHTML==html);tr=null;if(!supportsTableInnerHTML||!supportsTRInnerHTML||!supportsHTML5Elements){Element.Properties.html.set=(function(set){var translations={table:[1,'<table>','</table>'],select:[1,'<select>','</select>'],tbody:[2,'<table><tbody>','</tbody></table>'],tr:[3,'<table><tbody><tr>','</tr></tbody></table>']};translations.thead=translations.tfoot=translations.tbody;return function(html){var wrap=translations[this.get('tag')];if(!wrap&&!supportsHTML5Elements)wrap=[0,'',''];if(!wrap)return set.call(this,html);var level=wrap[0],wrapper=document.createElement('div'),target=wrapper;if(!supportsHTML5Elements)fragment.appendChild(wrapper);wrapper.innerHTML=[wrap[1],html,wrap[2]].flatten().join('');while(level--)target=target.firstChild;this.empty().adopt(target.childNodes);if(!supportsHTML5Elements)fragment.removeChild(wrapper);wrapper=null;};})(Element.Properties.html.set);}
var testForm=document.createElement('form');testForm.innerHTML='<select><option>s</option></select>';if(testForm.firstChild.value!='s')Element.Properties.value={set:function(value){var tag=this.get('tag');if(tag!='select')return this.setProperty('value',value);var options=this.getElements('option');value=String(value);for(var i=0;i<options.length;i++){var option=options[i],attr=option.getAttributeNode('value'),optionValue=(attr&&attr.specified)?option.value:option.get('text');if(optionValue===value)return option.selected=true;}},get:function(){var option=this,tag=option.get('tag');if(tag!='select'&&tag!='option')return this.getProperty('value');if(tag=='select'&&!(option=option.getSelected()[0]))return'';var attr=option.getAttributeNode('value');return(attr&&attr.specified)?option.value:option.get('text');}};testForm=null;if(document.createElement('div').getAttributeNode('id'))Element.Properties.id={set:function(id){this.id=this.getAttributeNode('id').value=id;},get:function(){return this.id||null;},erase:function(){this.id=this.getAttributeNode('id').value='';}};})();(function(){var html=document.html,el;el=document.createElement('div');el.style.color='red';el.style.color=null;var doesNotRemoveStyles=el.style.color=='red';var border='1px solid #123abc';el.style.border=border;var returnsBordersInWrongOrder=el.style.border!=border;el=null;var hasGetComputedStyle=!!window.getComputedStyle;Element.Properties.styles={set:function(styles){this.setStyles(styles);}};var hasOpacity=(html.style.opacity!=null),hasFilter=(html.style.filter!=null),reAlpha=/alpha\(opacity=([\d.]+)\)/i;var setVisibility=function(element,opacity){element.store('$opacity',opacity);element.style.visibility=opacity>0||opacity==null?'visible':'hidden';};var setFilter=function(element,regexp,value){var style=element.style,filter=style.filter||element.getComputedStyle('filter')||'';style.filter=(regexp.test(filter)?filter.replace(regexp,value):filter+' '+value).trim();if(!style.filter)style.removeAttribute('filter');};var setOpacity=(hasOpacity?function(element,opacity){element.style.opacity=opacity;}:(hasFilter?function(element,opacity){if(!element.currentStyle||!element.currentStyle.hasLayout)element.style.zoom=1;if(opacity==null||opacity==1){setFilter(element,reAlpha,'');if(opacity==1&&getOpacity(element)!=1)setFilter(element,reAlpha,'alpha(opacity=100)');}else{setFilter(element,reAlpha,'alpha(opacity='+(opacity*100).limit(0,100).round()+')');}}:setVisibility));var getOpacity=(hasOpacity?function(element){var opacity=element.style.opacity||element.getComputedStyle('opacity');return(opacity=='')?1:opacity.toFloat();}:(hasFilter?function(element){var filter=(element.style.filter||element.getComputedStyle('filter')),opacity;if(filter)opacity=filter.match(reAlpha);return(opacity==null||filter==null)?1:(opacity[1]/100);}:function(element){var opacity=element.retrieve('$opacity');if(opacity==null)opacity=(element.style.visibility=='hidden'?0:1);return opacity;}));var floatName=(html.style.cssFloat==null)?'styleFloat':'cssFloat',namedPositions={left:'0%',top:'0%',center:'50%',right:'100%',bottom:'100%'},hasBackgroundPositionXY=(html.style.backgroundPositionX!=null);var removeStyle=function(style,property){if(property=='backgroundPosition'){style.removeAttribute(property+'X');property+='Y';}
style.removeAttribute(property);};Element.implement({getComputedStyle:function(property){if(!hasGetComputedStyle&&this.currentStyle)return this.currentStyle[property.camelCase()];var defaultView=Element.getDocument(this).defaultView,computed=defaultView?defaultView.getComputedStyle(this,null):null;return(computed)?computed.getPropertyValue((property==floatName)?'float':property.hyphenate()):'';},setStyle:function(property,value){if(property=='opacity'){if(value!=null)value=parseFloat(value);setOpacity(this,value);return this;}
property=(property=='float'?floatName:property).camelCase();if(typeOf(value)!='string'){var map=(Element.Styles[property]||'@').split(' ');value=Array.from(value).map(function(val,i){if(!map[i])return'';return(typeOf(val)=='number')?map[i].replace('@',Math.round(val)):val;}).join(' ');}else if(value==String(Number(value))){value=Math.round(value);}
this.style[property]=value;if((value==''||value==null)&&doesNotRemoveStyles&&this.style.removeAttribute){removeStyle(this.style,property);}
return this;},getStyle:function(property){if(property=='opacity')return getOpacity(this);property=(property=='float'?floatName:property).camelCase();var result=this.style[property];if(!result||property=='zIndex'){if(Element.ShortStyles.hasOwnProperty(property)){result=[];for(var s in Element.ShortStyles[property])result.push(this.getStyle(s));return result.join(' ');}
result=this.getComputedStyle(property);}
if(hasBackgroundPositionXY&&/^backgroundPosition[XY]?$/.test(property)){return result.replace(/(top|right|bottom|left)/g,function(position){return namedPositions[position];})||'0px';}
if(!result&&property=='backgroundPosition')return'0px 0px';if(result){result=String(result);var color=result.match(/rgba?\([\d\s,]+\)/);if(color)result=result.replace(color[0],color[0].rgbToHex());}
if(!hasGetComputedStyle&&!this.style[property]){if((/^(height|width)$/).test(property)&&!(/px$/.test(result))){var values=(property=='width')?['left','right']:['top','bottom'],size=0;values.each(function(value){size+=this.getStyle('border-'+value+'-width').toInt()+this.getStyle('padding-'+value).toInt();},this);return this['offset'+property.capitalize()]-size+'px';}
if((/^border(.+)Width|margin|padding/).test(property)&&isNaN(parseFloat(result))){return'0px';}}
if(returnsBordersInWrongOrder&&/^border(Top|Right|Bottom|Left)?$/.test(property)&&/^#/.test(result)){return result.replace(/^(.+)\s(.+)\s(.+)$/,'$2 $3 $1');}
return result;},setStyles:function(styles){for(var style in styles)this.setStyle(style,styles[style]);return this;},getStyles:function(){var result={};Array.flatten(arguments).each(function(key){result[key]=this.getStyle(key);},this);return result;}});Element.Styles={left:'@px',top:'@px',bottom:'@px',right:'@px',width:'@px',height:'@px',maxWidth:'@px',maxHeight:'@px',minWidth:'@px',minHeight:'@px',backgroundColor:'rgb(@, @, @)',backgroundSize:'@px',backgroundPosition:'@px @px',color:'rgb(@, @, @)',fontSize:'@px',letterSpacing:'@px',lineHeight:'@px',clip:'rect(@px @px @px @px)',margin:'@px @px @px @px',padding:'@px @px @px @px',border:'@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)',borderWidth:'@px @px @px @px',borderStyle:'@ @ @ @',borderColor:'rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)',zIndex:'@','zoom':'@',fontWeight:'@',textIndent:'@px',opacity:'@'};Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}};['Top','Right','Bottom','Left'].each(function(direction){var Short=Element.ShortStyles;var All=Element.Styles;['margin','padding'].each(function(style){var sd=style+direction;Short[style][sd]=All[sd]='@px';});var bd='border'+direction;Short.border[bd]=All[bd]='@px @ rgb(@, @, @)';var bdw=bd+'Width',bds=bd+'Style',bdc=bd+'Color';Short[bd]={};Short.borderWidth[bdw]=Short[bd][bdw]=All[bdw]='@px';Short.borderStyle[bds]=Short[bd][bds]=All[bds]='@';Short.borderColor[bdc]=Short[bd][bdc]=All[bdc]='rgb(@, @, @)';});if(hasBackgroundPositionXY)Element.ShortStyles.backgroundPosition={backgroundPositionX:'@',backgroundPositionY:'@'};})();(function(){Element.Properties.events={set:function(events){this.addEvents(events);}};[Element,Window,Document].invoke('implement',{addEvent:function(type,fn){var events=this.retrieve('events',{});if(!events[type])events[type]={keys:[],values:[]};if(events[type].keys.contains(fn))return this;events[type].keys.push(fn);var realType=type,custom=Element.Events[type],condition=fn,self=this;if(custom){if(custom.onAdd)custom.onAdd.call(this,fn,type);if(custom.condition){condition=function(event){if(custom.condition.call(this,event,type))return fn.call(this,event);return true;};}
if(custom.base)realType=Function.from(custom.base).call(this,type);}
var defn=function(){return fn.call(self);};var nativeEvent=Element.NativeEvents[realType];if(nativeEvent){if(nativeEvent==2){defn=function(event){event=new DOMEvent(event,self.getWindow());if(condition.call(self,event)===false)event.stop();};}
this.addListener(realType,defn,arguments[2]);}
events[type].values.push(defn);return this;},removeEvent:function(type,fn){var events=this.retrieve('events');if(!events||!events[type])return this;var list=events[type];var index=list.keys.indexOf(fn);if(index==-1)return this;var value=list.values[index];delete list.keys[index];delete list.values[index];var custom=Element.Events[type];if(custom){if(custom.onRemove)custom.onRemove.call(this,fn,type);if(custom.base)type=Function.from(custom.base).call(this,type);}
return(Element.NativeEvents[type])?this.removeListener(type,value,arguments[2]):this;},addEvents:function(events){for(var event in events)this.addEvent(event,events[event]);return this;},removeEvents:function(events){var type;if(typeOf(events)=='object'){for(type in events)this.removeEvent(type,events[type]);return this;}
var attached=this.retrieve('events');if(!attached)return this;if(!events){for(type in attached)this.removeEvents(type);this.eliminate('events');}else if(attached[events]){attached[events].keys.each(function(fn){this.removeEvent(events,fn);},this);delete attached[events];}
return this;},fireEvent:function(type,args,delay){var events=this.retrieve('events');if(!events||!events[type])return this;args=Array.from(args);events[type].keys.each(function(fn){if(delay)fn.delay(delay,this,args);else fn.apply(this,args);},this);return this;},cloneEvents:function(from,type){from=document.id(from);var events=from.retrieve('events');if(!events)return this;if(!type){for(var eventType in events)this.cloneEvents(from,eventType);}else if(events[type]){events[type].keys.each(function(fn){this.addEvent(type,fn);},this);}
return this;}});Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,input:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,hashchange:1,popstate:2,error:1,abort:1,scroll:1};Element.Events={mousewheel:{base:'onwheel'in document?'wheel':'onmousewheel'in document?'mousewheel':'DOMMouseScroll'}};var check=function(event){var related=event.relatedTarget;if(related==null)return true;if(!related)return false;return(related!=this&&related.prefix!='xul'&&typeOf(this)!='document'&&!this.contains(related));};if('onmouseenter'in document.documentElement){Element.NativeEvents.mouseenter=Element.NativeEvents.mouseleave=2;Element.MouseenterCheck=check;}else{Element.Events.mouseenter={base:'mouseover',condition:check};Element.Events.mouseleave={base:'mouseout',condition:check};}
if(!window.addEventListener){Element.NativeEvents.propertychange=2;Element.Events.change={base:function(){var type=this.type;return(this.get('tag')=='input'&&(type=='radio'||type=='checkbox'))?'propertychange':'change';},condition:function(event){return event.type!='propertychange'||event.event.propertyName=='checked';}};}})();(function(){var eventListenerSupport=!!window.addEventListener;Element.NativeEvents.focusin=Element.NativeEvents.focusout=2;var bubbleUp=function(self,match,fn,event,target){while(target&&target!=self){if(match(target,event))return fn.call(target,event,target);target=document.id(target.parentNode);}};var map={mouseenter:{base:'mouseover',condition:Element.MouseenterCheck},mouseleave:{base:'mouseout',condition:Element.MouseenterCheck},focus:{base:'focus'+(eventListenerSupport?'':'in'),capture:true},blur:{base:eventListenerSupport?'blur':'focusout',capture:true}};var _key='$delegation:';var formObserver=function(type){return{base:'focusin',remove:function(self,uid){var list=self.retrieve(_key+type+'listeners',{})[uid];if(list&&list.forms)for(var i=list.forms.length;i--;){list.forms[i].removeEvent(type,list.fns[i]);}},listen:function(self,match,fn,event,target,uid){var form=(target.get('tag')=='form')?target:event.target.getParent('form');if(!form)return;var listeners=self.retrieve(_key+type+'listeners',{}),listener=listeners[uid]||{forms:[],fns:[]},forms=listener.forms,fns=listener.fns;if(forms.indexOf(form)!=-1)return;forms.push(form);var _fn=function(event){bubbleUp(self,match,fn,event,target);};form.addEvent(type,_fn);fns.push(_fn);listeners[uid]=listener;self.store(_key+type+'listeners',listeners);}};};var inputObserver=function(type){return{base:'focusin',listen:function(self,match,fn,event,target){var events={blur:function(){this.removeEvents(events);}};events[type]=function(event){bubbleUp(self,match,fn,event,target);};event.target.addEvents(events);}};};if(!eventListenerSupport)Object.append(map,{submit:formObserver('submit'),reset:formObserver('reset'),change:inputObserver('change'),select:inputObserver('select')});var proto=Element.prototype,addEvent=proto.addEvent,removeEvent=proto.removeEvent;var relay=function(old,method){return function(type,fn,useCapture){if(type.indexOf(':relay')==-1)return old.call(this,type,fn,useCapture);var parsed=Slick.parse(type).expressions[0][0];if(parsed.pseudos[0].key!='relay')return old.call(this,type,fn,useCapture);var newType=parsed.tag;parsed.pseudos.slice(1).each(function(pseudo){newType+=':'+pseudo.key+(pseudo.value?'('+pseudo.value+')':'');});old.call(this,type,fn);return method.call(this,newType,parsed.pseudos[0].value,fn);};};var delegation={addEvent:function(type,match,fn){var storage=this.retrieve('$delegates',{}),stored=storage[type];if(stored)for(var _uid in stored){if(stored[_uid].fn==fn&&stored[_uid].match==match)return this;}
var _type=type,_match=match,_fn=fn,_map=map[type]||{};type=_map.base||_type;match=function(target){return Slick.match(target,_match);};var elementEvent=Element.Events[_type];if(_map.condition||elementEvent&&elementEvent.condition){var __match=match,condition=_map.condition||elementEvent.condition;match=function(target,event){return __match(target,event)&&condition.call(target,event,type);};}
var self=this,uid=String.uniqueID();var delegator=_map.listen?function(event,target){if(!target&&event&&event.target)target=event.target;if(target)_map.listen(self,match,fn,event,target,uid);}:function(event,target){if(!target&&event&&event.target)target=event.target;if(target)bubbleUp(self,match,fn,event,target);};if(!stored)stored={};stored[uid]={match:_match,fn:_fn,delegator:delegator};storage[_type]=stored;return addEvent.call(this,type,delegator,_map.capture);},removeEvent:function(type,match,fn,_uid){var storage=this.retrieve('$delegates',{}),stored=storage[type];if(!stored)return this;if(_uid){var _type=type,delegator=stored[_uid].delegator,_map=map[type]||{};type=_map.base||_type;if(_map.remove)_map.remove(this,_uid);delete stored[_uid];storage[_type]=stored;return removeEvent.call(this,type,delegator,_map.capture);}
var __uid,s;if(fn)for(__uid in stored){s=stored[__uid];if(s.match==match&&s.fn==fn)return delegation.removeEvent.call(this,type,match,fn,__uid);}else for(__uid in stored){s=stored[__uid];if(s.match==match)delegation.removeEvent.call(this,type,match,s.fn,__uid);}
return this;}};[Element,Window,Document].invoke('implement',{addEvent:relay(addEvent,delegation.addEvent),removeEvent:relay(removeEvent,delegation.removeEvent)});})();(function(){var element=document.createElement('div'),child=document.createElement('div');element.style.height='0';element.appendChild(child);var brokenOffsetParent=(child.offsetParent===element);element=child=null;var isOffset=function(el){return styleString(el,'position')!='static'||isBody(el);};var isOffsetStatic=function(el){return isOffset(el)||(/^(?:table|td|th)$/i).test(el.tagName);};Element.implement({scrollTo:function(x,y){if(isBody(this)){this.getWindow().scrollTo(x,y);}else{this.scrollLeft=x;this.scrollTop=y;}
return this;},getSize:function(){if(isBody(this))return this.getWindow().getSize();return{x:this.offsetWidth,y:this.offsetHeight};},getScrollSize:function(){if(isBody(this))return this.getWindow().getScrollSize();return{x:this.scrollWidth,y:this.scrollHeight};},getScroll:function(){if(isBody(this))return this.getWindow().getScroll();return{x:this.scrollLeft,y:this.scrollTop};},getScrolls:function(){var element=this.parentNode,position={x:0,y:0};while(element&&!isBody(element)){position.x+=element.scrollLeft;position.y+=element.scrollTop;element=element.parentNode;}
return position;},getOffsetParent:brokenOffsetParent?function(){var element=this;if(isBody(element)||styleString(element,'position')=='fixed')return null;var isOffsetCheck=(styleString(element,'position')=='static')?isOffsetStatic:isOffset;while((element=element.parentNode)){if(isOffsetCheck(element))return element;}
return null;}:function(){var element=this;if(isBody(element)||styleString(element,'position')=='fixed')return null;try{return element.offsetParent;}catch(e){}
return null;},getOffsets:function(){var hasGetBoundingClientRect=this.getBoundingClientRect;if(hasGetBoundingClientRect){var bound=this.getBoundingClientRect(),html=document.id(this.getDocument().documentElement),htmlScroll=html.getScroll(),elemScrolls=this.getScrolls(),isFixed=(styleString(this,'position')=='fixed');return{x:bound.left.toInt()+elemScrolls.x+((isFixed)?0:htmlScroll.x)-html.clientLeft,y:bound.top.toInt()+elemScrolls.y+((isFixed)?0:htmlScroll.y)-html.clientTop};}
var element=this,position={x:0,y:0};if(isBody(this))return position;while(element&&!isBody(element)){position.x+=element.offsetLeft;position.y+=element.offsetTop;element=element.offsetParent;}
return position;},getPosition:function(relative){var offset=this.getOffsets(),scroll=this.getScrolls();var position={x:offset.x-scroll.x,y:offset.y-scroll.y};if(relative&&(relative=document.id(relative))){var relativePosition=relative.getPosition();return{x:position.x-relativePosition.x-leftBorder(relative),y:position.y-relativePosition.y-topBorder(relative)};}
return position;},getCoordinates:function(element){if(isBody(this))return this.getWindow().getCoordinates();var position=this.getPosition(element),size=this.getSize();var obj={left:position.x,top:position.y,width:size.x,height:size.y};obj.right=obj.left+obj.width;obj.bottom=obj.top+obj.height;return obj;},computePosition:function(obj){return{left:obj.x-styleNumber(this,'margin-left'),top:obj.y-styleNumber(this,'margin-top')};},setPosition:function(obj){return this.setStyles(this.computePosition(obj));}});[Document,Window].invoke('implement',{getSize:function(){var doc=getCompatElement(this);return{x:doc.clientWidth,y:doc.clientHeight};},getScroll:function(){var win=this.getWindow(),doc=getCompatElement(this);return{x:win.pageXOffset||doc.scrollLeft,y:win.pageYOffset||doc.scrollTop};},getScrollSize:function(){var doc=getCompatElement(this),min=this.getSize(),body=this.getDocument().body;return{x:Math.max(doc.scrollWidth,body.scrollWidth,min.x),y:Math.max(doc.scrollHeight,body.scrollHeight,min.y)};},getPosition:function(){return{x:0,y:0};},getCoordinates:function(){var size=this.getSize();return{top:0,left:0,bottom:size.y,right:size.x,height:size.y,width:size.x};}});var styleString=Element.getComputedStyle;function styleNumber(element,style){return styleString(element,style).toInt()||0;}
function borderBox(element){return styleString(element,'-moz-box-sizing')=='border-box';}
function topBorder(element){return styleNumber(element,'border-top-width');}
function leftBorder(element){return styleNumber(element,'border-left-width');}
function isBody(element){return(/^(?:body|html)$/i).test(element.tagName);}
function getCompatElement(element){var doc=element.getDocument();return(!doc.compatMode||doc.compatMode=='CSS1Compat')?doc.html:doc.body;}})();Element.alias({position:'setPosition'});[Window,Document,Element].invoke('implement',{getHeight:function(){return this.getSize().y;},getWidth:function(){return this.getSize().x;},getScrollTop:function(){return this.getScroll().y;},getScrollLeft:function(){return this.getScroll().x;},getScrollHeight:function(){return this.getScrollSize().y;},getScrollWidth:function(){return this.getScrollSize().x;},getTop:function(){return this.getPosition().y;},getLeft:function(){return this.getPosition().x;}});(function(){var Fx=this.Fx=new Class({Implements:[Chain,Events,Options],options:{fps:60,unit:false,duration:500,frames:null,frameSkip:true,link:'ignore'},initialize:function(options){this.subject=this.subject||this;this.setOptions(options);},getTransition:function(){return function(p){return-(Math.cos(Math.PI*p)-1)/2;};},step:function(now){if(this.options.frameSkip){var diff=(this.time!=null)?(now-this.time):0,frames=diff/this.frameInterval;this.time=now;this.frame+=frames;}else{this.frame++;}
if(this.frame<this.frames){var delta=this.transition(this.frame/this.frames);this.set(this.compute(this.from,this.to,delta));}else{this.frame=this.frames;this.set(this.compute(this.from,this.to,1));this.stop();}},set:function(now){return now;},compute:function(from,to,delta){return Fx.compute(from,to,delta);},check:function(){if(!this.isRunning())return true;switch(this.options.link){case'cancel':this.cancel();return true;case'chain':this.chain(this.caller.pass(arguments,this));return false;}
return false;},start:function(from,to){if(!this.check(from,to))return this;this.from=from;this.to=to;this.frame=(this.options.frameSkip)?0:-1;this.time=null;this.transition=this.getTransition();var frames=this.options.frames,fps=this.options.fps,duration=this.options.duration;this.duration=Fx.Durations[duration]||duration.toInt();this.frameInterval=1000/fps;this.frames=frames||Math.round(this.duration/this.frameInterval);this.fireEvent('start',this.subject);pushInstance.call(this,fps);return this;},stop:function(){if(this.isRunning()){this.time=null;pullInstance.call(this,this.options.fps);if(this.frames==this.frame){this.fireEvent('complete',this.subject);if(!this.callChain())this.fireEvent('chainComplete',this.subject);}else{this.fireEvent('stop',this.subject);}}
return this;},cancel:function(){if(this.isRunning()){this.time=null;pullInstance.call(this,this.options.fps);this.frame=this.frames;this.fireEvent('cancel',this.subject).clearChain();}
return this;},pause:function(){if(this.isRunning()){this.time=null;pullInstance.call(this,this.options.fps);}
return this;},resume:function(){if(this.isPaused())pushInstance.call(this,this.options.fps);return this;},isRunning:function(){var list=instances[this.options.fps];return list&&list.contains(this);},isPaused:function(){return(this.frame<this.frames)&&!this.isRunning();}});Fx.compute=function(from,to,delta){return(to-from)*delta+from;};Fx.Durations={'short':250,'normal':500,'long':1000};var instances={},timers={};var loop=function(){var now=Date.now();for(var i=this.length;i--;){var instance=this[i];if(instance)instance.step(now);}};var pushInstance=function(fps){var list=instances[fps]||(instances[fps]=[]);list.push(this);if(!timers[fps])timers[fps]=loop.periodical(Math.round(1000/fps),list);};var pullInstance=function(fps){var list=instances[fps];if(list){list.erase(this);if(!list.length&&timers[fps]){delete instances[fps];timers[fps]=clearInterval(timers[fps]);}}};})();Fx.CSS=new Class({Extends:Fx,prepare:function(element,property,values){values=Array.from(values);var from=values[0],to=values[1];if(to==null){to=from;from=element.getStyle(property);var unit=this.options.unit;if(unit&&from&&typeof from=='string'&&from.slice(-unit.length)!=unit&&parseFloat(from)!=0){element.setStyle(property,to+unit);var value=element.getComputedStyle(property);if(!(/px$/.test(value))){value=element.style[('pixel-'+property).camelCase()];if(value==null){var left=element.style.left;element.style.left=to+unit;value=element.style.pixelLeft;element.style.left=left;}}
from=(to||1)/(parseFloat(value)||1)*(parseFloat(from)||0);element.setStyle(property,from+unit);}}
return{from:this.parse(from),to:this.parse(to)};},parse:function(value){value=Function.from(value)();value=(typeof value=='string')?value.split(' '):Array.from(value);return value.map(function(val){val=String(val);var found=false;Object.each(Fx.CSS.Parsers,function(parser,key){if(found)return;var parsed=parser.parse(val);if(parsed||parsed===0)found={value:parsed,parser:parser};});found=found||{value:val,parser:Fx.CSS.Parsers.String};return found;});},compute:function(from,to,delta){var computed=[];(Math.min(from.length,to.length)).times(function(i){computed.push({value:from[i].parser.compute(from[i].value,to[i].value,delta),parser:from[i].parser});});computed.$family=Function.from('fx:css:value');return computed;},serve:function(value,unit){if(typeOf(value)!='fx:css:value')value=this.parse(value);var returned=[];value.each(function(bit){returned=returned.concat(bit.parser.serve(bit.value,unit));});return returned;},render:function(element,property,value,unit){element.setStyle(property,this.serve(value,unit));},search:function(selector){if(Fx.CSS.Cache[selector])return Fx.CSS.Cache[selector];var to={},selectorTest=new RegExp('^'+selector.escapeRegExp()+'$');var searchStyles=function(rules){Array.each(rules,function(rule,i){if(rule.media){searchStyles(rule.rules||rule.cssRules);return;}
if(!rule.style)return;var selectorText=(rule.selectorText)?rule.selectorText.replace(/^\w+/,function(m){return m.toLowerCase();}):null;if(!selectorText||!selectorTest.test(selectorText))return;Object.each(Element.Styles,function(value,style){if(!rule.style[style]||Element.ShortStyles[style])return;value=String(rule.style[style]);to[style]=((/^rgb/).test(value))?value.rgbToHex():value;});});};Array.each(document.styleSheets,function(sheet,j){var href=sheet.href;if(href&&href.indexOf('://')>-1&&href.indexOf(document.domain)==-1)return;var rules=sheet.rules||sheet.cssRules;searchStyles(rules);});return Fx.CSS.Cache[selector]=to;}});Fx.CSS.Cache={};Fx.CSS.Parsers={Color:{parse:function(value){if(value.match(/^#[0-9a-f]{3,6}$/i))return value.hexToRgb(true);return((value=value.match(/(\d+),\s*(\d+),\s*(\d+)/)))?[value[1],value[2],value[3]]:false;},compute:function(from,to,delta){return from.map(function(value,i){return Math.round(Fx.compute(from[i],to[i],delta));});},serve:function(value){return value.map(Number);}},Number:{parse:parseFloat,compute:Fx.compute,serve:function(value,unit){return(unit)?value+unit:value;}},String:{parse:Function.from(false),compute:function(zero,one){return one;},serve:function(zero){return zero;}}};Fx.Tween=new Class({Extends:Fx.CSS,initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);},set:function(property,now){if(arguments.length==1){now=property;property=this.property||this.options.property;}
this.render(this.element,property,now,this.options.unit);return this;},start:function(property,from,to){if(!this.check(property,from,to))return this;var args=Array.flatten(arguments);this.property=this.options.property||args.shift();var parsed=this.prepare(this.element,this.property,args);return this.parent(parsed.from,parsed.to);}});Element.Properties.tween={set:function(options){this.get('tween').cancel().setOptions(options);return this;},get:function(){var tween=this.retrieve('tween');if(!tween){tween=new Fx.Tween(this,{link:'cancel'});this.store('tween',tween);}
return tween;}};Element.implement({tween:function(property,from,to){this.get('tween').start(property,from,to);return this;},fade:function(how){var fade=this.get('tween'),method,args=['opacity'].append(arguments),toggle;if(args[1]==null)args[1]='toggle';switch(args[1]){case'in':method='start';args[1]=1;break;case'out':method='start';args[1]=0;break;case'show':method='set';args[1]=1;break;case'hide':method='set';args[1]=0;break;case'toggle':var flag=this.retrieve('fade:flag',this.getStyle('opacity')==1);method='start';args[1]=flag?0:1;this.store('fade:flag',!flag);toggle=true;break;default:method='start';}
if(!toggle)this.eliminate('fade:flag');fade[method].apply(fade,args);var to=args[args.length-1];if(method=='set'||to!=0)this.setStyle('visibility',to==0?'hidden':'visible');else fade.chain(function(){this.element.setStyle('visibility','hidden');this.callChain();});return this;},highlight:function(start,end){if(!end){end=this.retrieve('highlight:original',this.getStyle('background-color'));end=(end=='transparent')?'#fff':end;}
var tween=this.get('tween');tween.start('background-color',start||'#ffff88',end).chain(function(){this.setStyle('background-color',this.retrieve('highlight:original'));tween.callChain();}.bind(this));return this;}});Fx.Morph=new Class({Extends:Fx.CSS,initialize:function(element,options){this.element=this.subject=document.id(element);this.parent(options);},set:function(now){if(typeof now=='string')now=this.search(now);for(var p in now)this.render(this.element,p,now[p],this.options.unit);return this;},compute:function(from,to,delta){var now={};for(var p in from)now[p]=this.parent(from[p],to[p],delta);return now;},start:function(properties){if(!this.check(properties))return this;if(typeof properties=='string')properties=this.search(properties);var from={},to={};for(var p in properties){var parsed=this.prepare(this.element,p,properties[p]);from[p]=parsed.from;to[p]=parsed.to;}
return this.parent(from,to);}});Element.Properties.morph={set:function(options){this.get('morph').cancel().setOptions(options);return this;},get:function(){var morph=this.retrieve('morph');if(!morph){morph=new Fx.Morph(this,{link:'cancel'});this.store('morph',morph);}
return morph;}};Element.implement({morph:function(props){this.get('morph').start(props);return this;}});Fx.implement({getTransition:function(){var trans=this.options.transition||Fx.Transitions.Sine.easeInOut;if(typeof trans=='string'){var data=trans.split(':');trans=Fx.Transitions;trans=trans[data[0]]||trans[data[0].capitalize()];if(data[1])trans=trans['ease'+data[1].capitalize()+(data[2]?data[2].capitalize():'')];}
return trans;}});Fx.Transition=function(transition,params){params=Array.from(params);var easeIn=function(pos){return transition(pos,params);};return Object.append(easeIn,{easeIn:easeIn,easeOut:function(pos){return 1-transition(1-pos,params);},easeInOut:function(pos){return(pos<=0.5?transition(2*pos,params):(2-transition(2*(1-pos),params)))/2;}});};Fx.Transitions={linear:function(zero){return zero;}};Fx.Transitions.extend=function(transitions){for(var transition in transitions)Fx.Transitions[transition]=new Fx.Transition(transitions[transition]);};Fx.Transitions.extend({Pow:function(p,x){return Math.pow(p,x&&x[0]||6);},Expo:function(p){return Math.pow(2,8*(p-1));},Circ:function(p){return 1-Math.sin(Math.acos(p));},Sine:function(p){return 1-Math.cos(p*Math.PI/2);},Back:function(p,x){x=x&&x[0]||1.618;return Math.pow(p,2)*((x+1)*p-x);},Bounce:function(p){var value;for(var a=0,b=1;1;a+=b,b/=2){if(p>=(7-4*a)/11){value=b*b-Math.pow((11-6*a-11*p)/4,2);break;}}
return value;},Elastic:function(p,x){return Math.pow(2,10*--p)*Math.cos(20*p*Math.PI*(x&&x[0]||1)/3);}});['Quad','Cubic','Quart','Quint'].each(function(transition,i){Fx.Transitions[transition]=new Fx.Transition(function(p){return Math.pow(p,i+2);});});(function(){var empty=function(){},progressSupport=('onprogress'in new Browser.Request);var Request=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:'',data:'',headers:{'X-Requested-With':'XMLHttpRequest','Accept':'text/javascript, text/html, application/xml, text/xml, */*'},async:true,format:false,method:'post',link:'ignore',isSuccess:null,emulation:true,urlEncoded:true,encoding:'utf-8',evalScripts:false,evalResponse:false,timeout:0,noCache:false},initialize:function(options){this.xhr=new Browser.Request();this.setOptions(options);this.headers=this.options.headers;},onStateChange:function(){var xhr=this.xhr;if(xhr.readyState!=4||!this.running)return;this.running=false;this.status=0;Function.attempt(function(){var status=xhr.status;this.status=(status==1223)?204:status;}.bind(this));xhr.onreadystatechange=empty;if(progressSupport)xhr.onprogress=xhr.onloadstart=empty;clearTimeout(this.timer);this.response={text:this.xhr.responseText||'',xml:this.xhr.responseXML};if(this.options.isSuccess.call(this,this.status))
this.success(this.response.text,this.response.xml);else
this.failure();},isSuccess:function(){var status=this.status;return(status>=200&&status<300);},isRunning:function(){return!!this.running;},processScripts:function(text){if(this.options.evalResponse||(/(ecma|java)script/).test(this.getHeader('Content-type')))return Browser.exec(text);return text.stripScripts(this.options.evalScripts);},success:function(text,xml){this.onSuccess(this.processScripts(text),xml);},onSuccess:function(){this.fireEvent('complete',arguments).fireEvent('success',arguments).callChain();},failure:function(){this.onFailure();},onFailure:function(){this.fireEvent('complete').fireEvent('failure',this.xhr);},loadstart:function(event){this.fireEvent('loadstart',[event,this.xhr]);},progress:function(event){this.fireEvent('progress',[event,this.xhr]);},timeout:function(){this.fireEvent('timeout',this.xhr);},setHeader:function(name,value){this.headers[name]=value;return this;},getHeader:function(name){return Function.attempt(function(){return this.xhr.getResponseHeader(name);}.bind(this));},check:function(){if(!this.running)return true;switch(this.options.link){case'cancel':this.cancel();return true;case'chain':this.chain(this.caller.pass(arguments,this));return false;}
return false;},send:function(options){if(!this.check(options))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess;this.running=true;var type=typeOf(options);if(type=='string'||type=='element')options={data:options};var old=this.options;options=Object.append({data:old.data,url:old.url,method:old.method},options);var data=options.data,url=String(options.url),method=options.method.toLowerCase();switch(typeOf(data)){case'element':data=document.id(data).toQueryString();break;case'object':case'hash':data=Object.toQueryString(data);}
if(this.options.format){var format='format='+this.options.format;data=(data)?format+'&'+data:format;}
if(this.options.emulation&&!['get','post'].contains(method)){var _method='_method='+method;data=(data)?_method+'&'+data:_method;method='post';}
if(this.options.urlEncoded&&['post','put'].contains(method)){var encoding=(this.options.encoding)?'; charset='+this.options.encoding:'';this.headers['Content-type']='application/x-www-form-urlencoded'+encoding;}
if(!url)url=document.location.pathname;var trimPosition=url.lastIndexOf('/');if(trimPosition>-1&&(trimPosition=url.indexOf('#'))>-1)url=url.substr(0,trimPosition);if(this.options.noCache)
url+=(url.indexOf('?')>-1?'&':'?')+String.uniqueID();if(data&&(method=='get'||method=='delete')){url+=(url.indexOf('?')>-1?'&':'?')+data;data=null;}
var xhr=this.xhr;if(progressSupport){xhr.onloadstart=this.loadstart.bind(this);xhr.onprogress=this.progress.bind(this);}
xhr.open(method.toUpperCase(),url,this.options.async,this.options.user,this.options.password);if(this.options.user&&'withCredentials'in xhr)xhr.withCredentials=true;xhr.onreadystatechange=this.onStateChange.bind(this);Object.each(this.headers,function(value,key){try{xhr.setRequestHeader(key,value);}catch(e){this.fireEvent('exception',[key,value]);}},this);this.fireEvent('request');xhr.send(data);if(!this.options.async)this.onStateChange();else if(this.options.timeout)this.timer=this.timeout.delay(this.options.timeout,this);return this;},cancel:function(){if(!this.running)return this;this.running=false;var xhr=this.xhr;xhr.abort();clearTimeout(this.timer);xhr.onreadystatechange=empty;if(progressSupport)xhr.onprogress=xhr.onloadstart=empty;this.xhr=new Browser.Request();this.fireEvent('cancel');return this;}});var methods={};['get','post','put','delete','GET','POST','PUT','DELETE'].each(function(method){methods[method]=function(data){var object={method:method};if(data!=null)object.data=data;return this.send(object);};});Request.implement(methods);Element.Properties.send={set:function(options){var send=this.get('send').cancel();send.setOptions(options);return this;},get:function(){var send=this.retrieve('send');if(!send){send=new Request({data:this,link:'cancel',method:this.get('method')||'post',url:this.get('action')});this.store('send',send);}
return send;}};Element.implement({send:function(url){var sender=this.get('send');sender.send({data:this,url:url||sender.options.url});return this;}});})();Request.HTML=new Class({Extends:Request,options:{update:false,append:false,evalScripts:true,filter:false,headers:{Accept:'text/html, application/xml, text/xml, */*'}},success:function(text){var options=this.options,response=this.response;response.html=text.stripScripts(function(script){response.javascript=script;});var match=response.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);if(match)response.html=match[1];var temp=new Element('div').set('html',response.html);response.tree=temp.childNodes;response.elements=temp.getElements(options.filter||'*');if(options.filter)response.tree=response.elements;if(options.update){var update=document.id(options.update).empty();if(options.filter)update.adopt(response.elements);else update.set('html',response.html);}else if(options.append){var append=document.id(options.append);if(options.filter)response.elements.reverse().inject(append);else append.adopt(temp.getChildren());}
if(options.evalScripts)Browser.exec(response.javascript);this.onSuccess(response.tree,response.elements,response.html,response.javascript);}});Element.Properties.load={set:function(options){var load=this.get('load').cancel();load.setOptions(options);return this;},get:function(){var load=this.retrieve('load');if(!load){load=new Request.HTML({data:this,link:'cancel',update:this,method:'get'});this.store('load',load);}
return load;}};Element.implement({load:function(){this.get('load').send(Array.link(arguments,{data:Type.isObject,url:Type.isString}));return this;}});if(typeof JSON=='undefined')this.JSON={};(function(){var special={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};var escape=function(chr){return special[chr]||'\\u'+('0000'+chr.charCodeAt(0).toString(16)).slice(-4);};JSON.validate=function(string){string=string.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,'');return(/^[\],:{}\s]*$/).test(string);};JSON.encode=JSON.stringify?function(obj){return JSON.stringify(obj);}:function(obj){if(obj&&obj.toJSON)obj=obj.toJSON();switch(typeOf(obj)){case'string':return'"'+obj.replace(/[\x00-\x1f\\"]/g,escape)+'"';case'array':return'['+obj.map(JSON.encode).clean()+']';case'object':case'hash':var string=[];Object.each(obj,function(value,key){var json=JSON.encode(value);if(json)string.push(JSON.encode(key)+':'+json);});return'{'+string+'}';case'number':case'boolean':return''+obj;case'null':return'null';}
return null;};JSON.secure=true;JSON.decode=function(string,secure){if(!string||typeOf(string)!='string')return null;if(secure==null)secure=JSON.secure;if(secure){if(JSON.parse)return JSON.parse(string);if(!JSON.validate(string))throw new Error('JSON could not decode the input; security is enabled and the value is not secure.');}
return eval('('+string+')');};})();Request.JSON=new Class({Extends:Request,options:{secure:true},initialize:function(options){this.parent(options);Object.append(this.headers,{'Accept':'application/json','X-Request':'JSON'});},success:function(text){var json;try{json=this.response.json=JSON.decode(text,this.options.secure);}catch(error){this.fireEvent('error',[text,error]);return;}
if(json==null)this.onFailure();else this.onSuccess(json,text);}});var Cookie=new Class({Implements:Options,options:{path:'/',domain:false,duration:false,secure:false,document:document,encode:true},initialize:function(key,options){this.key=key;this.setOptions(options);},write:function(value){if(this.options.encode)value=encodeURIComponent(value);if(this.options.domain)value+='; domain='+this.options.domain;if(this.options.path)value+='; path='+this.options.path;if(this.options.duration){var date=new Date();date.setTime(date.getTime()+this.options.duration*24*60*60*1000);value+='; expires='+date.toGMTString();}
if(this.options.secure)value+='; secure';this.options.document.cookie=this.key+'='+value;return this;},read:function(){var value=this.options.document.cookie.match('(?:^|;)\\s*'+this.key.escapeRegExp()+'=([^;]*)');return(value)?decodeURIComponent(value[1]):null;},dispose:function(){new Cookie(this.key,Object.merge({},this.options,{duration:-1})).write('');return this;}});Cookie.write=function(key,value,options){return new Cookie(key,options).write(value);};Cookie.read=function(key){return new Cookie(key).read();};Cookie.dispose=function(key,options){return new Cookie(key,options).dispose();};(function(window,document){var ready,loaded,checks=[],shouldPoll,timer,testElement=document.createElement('div');var domready=function(){clearTimeout(timer);if(ready)return;Browser.loaded=ready=true;document.removeListener('DOMContentLoaded',domready).removeListener('readystatechange',check);document.fireEvent('domready');window.fireEvent('domready');};var check=function(){for(var i=checks.length;i--;)if(checks[i]()){domready();return true;}
return false;};var poll=function(){clearTimeout(timer);if(!check())timer=setTimeout(poll,10);};document.addListener('DOMContentLoaded',domready);var doScrollWorks=function(){try{testElement.doScroll();return true;}catch(e){}
return false;};if(testElement.doScroll&&!doScrollWorks()){checks.push(doScrollWorks);shouldPoll=true;}
if(document.readyState)checks.push(function(){var state=document.readyState;return(state=='loaded'||state=='complete');});if('onreadystatechange'in document)document.addListener('readystatechange',check);else shouldPoll=true;if(shouldPoll)poll();Element.Events.domready={onAdd:function(fn){if(ready)fn.call(this);}};Element.Events.load={base:'load',onAdd:function(fn){if(loaded&&this==window)fn.call(this);},condition:function(){if(this==window){domready();delete Element.Events.load;}
return true;}};window.addEvent('load',function(){loaded=true;});})(window,document);


var MooToolsPatched=true;(function(){var version=(Function.attempt(function(){return navigator.plugins['Shockwave Flash'].description;},function(){return new ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version');})||'0 r0').match(/\d+/g);Browser.Plugins={Flash:{version:Number(version[0]||'0.'+version[1])||0,build:Number(version[2])||0}}})();if((Browser.name==='ie')&&Browser.version<9){(function(){var setStyle=Element.setStyle;Element.implement({setStyle:function(property,value){if(/rgba/.test(value)){value=value.rgbToHex();}
return setStyle.apply(this,[this,property,value]);}})})();}
function _$(){return document.id.apply(document,arguments);}
var $=function(){window.console&&console.warn&&console.warn('$ should be replaced with _$');return document.id.apply(document,arguments);}
Element.NativeEvents.wheel=2;if((Browser.name==='firefox')){(function(){var addEvent=Element.prototype.addEvent;var patched=[];Element.implement({addEvent:function(type,fn){if(type&&['mouseenter','mouseleave'].contains(type)){var button=(function(elem){var c=0;do{elem=elem.getParent();c+=1;}while(elem&&elem.get('tag')!='button'&&c<10);return elem&&elem.get('tag')=='button'?elem:null;})(this);if(button&&!patched.contains(button)){patched.push(button);var entered=false;button.addEvents({mousemove:function(e){var coords=this.getCoordinates();if(coords.left<=e.page.x&&coords.right>=e.page.x&&coords.top<=e.page.y&&coords.bottom>=e.page.y){if(!entered){entered=true;this.fireEvent('mouseenter',[e]);}}else if(entered){entered=false;this.fireEvent('mouseleave',[e]);}}.bind(this),mouseleave:function(e){if(entered){entered=false;this.fireEvent('mouseleave',[e]);}}.bind(this)});}}
addEvent.apply(this,arguments);return this;}});})();}
window.JSON&&(JSON.secure=false);if((Browser.name==='ie')&&Browser.version<9){var JSON={$specialChars:{'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},$replaceChars:function(chr){return JSON.$specialChars[chr]||'\\u00'+Math.floor(chr.charCodeAt()/16).toString(16)+(chr.charCodeAt()%16).toString(16);},encode:function(obj){switch(typeOf(obj)){case'string':return'"'+obj.replace(/[\x00-\x1f\\"]/g,JSON.$replaceChars)+'"';case'array':return'['+String(obj.map(JSON.encode).clean())+']';case'object':case'hash':var string=[];for(var key in obj){var json=JSON.encode(obj[key]);if(json)string.push(JSON.encode(key)+':'+json);};return'{'+string+'}';case'number':case'boolean':return String(obj);case false:return'null';}
return null;},decode:function(string,secure){if(typeOf(string)!='string'||!string.length)return null;if(secure&&!(/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/).test(string.replace(/\\./g,'@').replace(/"[^"\\\n\r]*"/g,'')))return null;return eval('('+string+')');}};}


(function(){if(this.Hash)return;var Hash=this.Hash=new Type('Hash',function(object){if(typeOf(object)=='hash')object=Object.clone(object.getClean());for(var key in object)this[key]=object[key];return this;});this.$H=function(object){return new Hash(object);};Hash.implement({forEach:function(fn,bind){Object.forEach(this,fn,bind);},getClean:function(){var clean={};for(var key in this){if(this.hasOwnProperty(key))clean[key]=this[key];}
return clean;},getLength:function(){var length=0;for(var key in this){if(this.hasOwnProperty(key))length++;}
return length;}});Hash.alias('each','forEach');Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(value){return Object.keyOf(this,value);},hasValue:function(value){return Object.contains(this,value);},extend:function(properties){Hash.each(properties||{},function(value,key){Hash.set(this,key,value);},this);return this;},combine:function(properties){Hash.each(properties||{},function(value,key){Hash.include(this,key,value);},this);return this;},erase:function(key){if(this.hasOwnProperty(key))delete this[key];return this;},get:function(key){return(this.hasOwnProperty(key))?this[key]:null;},set:function(key,value){if(!this[key]||this.hasOwnProperty(key))this[key]=value;return this;},empty:function(){Hash.each(this,function(value,key){delete this[key];},this);return this;},include:function(key,value){if(this[key]==undefined)this[key]=value;return this;},map:function(fn,bind){return new Hash(Object.map(this,fn,bind));},filter:function(fn,bind){return new Hash(Object.filter(this,fn,bind));},every:function(fn,bind){return Object.every(this,fn,bind);},some:function(fn,bind){return Object.some(this,fn,bind);},getKeys:function(){return Object.keys(this);},getValues:function(){return Object.values(this);},toQueryString:function(base){return Object.toQueryString(this,base);}});Hash.alias({indexOf:'keyOf',contains:'hasValue'});})();


MooTools.More={version:'1.5.0',build:'73db5e24e6e9c5c87b3a27aebef2248053f7db37'};(function(){var defined=function(value){return value!=null;};var hasOwnProperty=Object.prototype.hasOwnProperty;Object.extend({getFromPath:function(source,parts){if(typeof parts=='string')parts=parts.split('.');for(var i=0,l=parts.length;i<l;i++){if(hasOwnProperty.call(source,parts[i]))source=source[parts[i]];else return null;}
return source;},cleanValues:function(object,method){method=method||defined;for(var key in object)if(!method(object[key])){delete object[key];}
return object;},erase:function(object,key){if(hasOwnProperty.call(object,key))delete object[key];return object;},run:function(object){var args=Array.slice(arguments,1);for(var key in object)if(object[key].apply){object[key].apply(object,args);}
return object;}});})();


(function(){var defined=function(value){return value!=null;};var hasOwnProperty=Object.prototype.hasOwnProperty;Object.extend({getFromPath:function(source,parts){if(typeof parts=='string')parts=parts.split('.');for(var i=0,l=parts.length;i<l;i++){if(hasOwnProperty.call(source,parts[i]))source=source[parts[i]];else return null;}
return source;},cleanValues:function(object,method){method=method||defined;for(var key in object)if(!method(object[key])){delete object[key];}
return object;},erase:function(object,key){if(hasOwnProperty.call(object,key))delete object[key];return object;},run:function(object){var args=Array.slice(arguments,1);for(var key in object)if(object[key].apply){object[key].apply(object,args);}
return object;}});})();Hash.implement({getFromPath:function(notation){return Object.getFromPath(this,notation);},cleanValues:function(method){return new Hash(Object.cleanValues(this,method));},run:function(){Object.run(arguments);}});


Request.Iframe=new Class({Implements:[Chain,Events,Options],el:{},target_id:'',options:{url:'',method:'GET',data:'',encoding:'',noCache:false},initialize:function(options){this.setOptions(options);this.buildIframe();this.buildForm();this.attachEvents();},generateId:function(){return'request-iframe-'+(Math.random()*(new Date()).getTime());},buildIframe:function(){var id=this.target_id=this.generateId();var iframe=this.el.iframe=new Element('iframe',{src:'about:blank',id:id,name:id,styles:{width:1,height:1,visibility:'hidden',position:'absolute',top:-3000,left:-3000}}).inject(document.body);var frame_doc=iframe.contentWindow.document;frame_doc.open();frame_doc.write('<html>'+'<head>'+
(this.options.noCache?'<meta http-equiv="Pragma" content="no-cache">':'')+'<meta http-equiv="Content-Type" content="text/html; charset='+this.options.encoding+'">'+'</head>'+'<body></body>'+'</html>');frame_doc.close();},buildForm:function(){var form=this.el.form=new Element('form',{'action':this.options.url,'method':this.options.method,'accept-charset':this.options.encoding,'target':this.target_id}).inject(document.body);var params=this.extract(this.options.data);for(var i in params){new Element('input',{'type':'hidden','name':i,'value':params[i]}).inject(form);}},extract:function(data){if(['object','hash'].contains(typeOf(data))){return data;}
data=String(data).split('&');var params={};for(var i=0,l=data.length;i<l;i+=1){var pair=data[i].split('=');params[pair.shift()]=pair.join('=');}
return params;},attachEvents:function(){this.el.iframe.addEvent('load',this.onIframeLoad.bind(this));},onIframeLoad:function(){try{this.el.iframe.contentWindow.document;}catch(e){this.fireEvent('onFailure',[e]);this.fireEvent('onComplete');return;}
var is_mobile=!!((navigator.userAgent+"").match(/(iPhone|iPad|iPod|android|htc|mobile)/i));var scripts=this.el.iframe.contentWindow.document.getElementsByTagName('script');var script_tag;var content='';for(var i=0,l=scripts.length;i<l;i+=1){if(scripts[i].getAttribute('type')=='text/html'){script_tag=scripts[i];break;}}
if(script_tag){content=script_tag[(is_mobile?'innerText':'innerHTML')].replace(/\-\-\>[\s\r\n]+$/,'').split('<\/script>').join('</script>');}else{content=this.el.iframe.contentWindow.document.body[(is_mobile?'innerText':'innerHTML')];}
this.returnContent(content);this.destroy();},returnContent:function(content){this.fireEvent('onSuccess',[content]);this.fireEvent('onComplete');},executeRequest:function(){this.el.form.submit();this.fireEvent('onRequest');},send:function(){this.executeRequest();},post:function(){this.executeRequest();},get:function(){this.executeRequest();},cancel:function(){this.el.iframe.removeEvents('load');this.destroy();this.fireEvent('onCancel');},destroy:function(){this.el.form.destroy();this.el.iframe.destroy.delay((Browser.name==='firefox')?1:0,this.el.iframe);}});Request.Iframe.JSON=new Class({Extends:Request.Iframe,options:{method:'POST'},returnContent:function(content){var json;try{json=JSON.decode(content);}catch(e){this.fireEvent('onFailure',[e]);this.fireEvent('onComplete');return;}
this.parent(json);}});


Element.implement({getElementsOneLevelDeep:function(selector){var result=new Elements();var nodes=[this];while(nodes.length>0){var currentNode=nodes.pop();var filtered=currentNode.getChildren(selector);if(filtered.length==0){nodes=nodes.concat(Array.flatten(currentNode.getChildren()));}
result.append(filtered);}
return result;}});


if(typeof(SK)=='undefined')SK={};SK.API=new Class({initialize:function(token,request_params){this.token=token?token:(SK.Singletons&&SK.Singletons.env?SK.Singletons.env.get('session_id'):'');this.request_type='ajax';this.request_params=Object.append({async:true,method:'post',noCache:true},Array.pick([request_params,{sensitive_content:false}]));return this;},getRequestType:function(){return this.request_type;},buildRequest:function(cmd,params,callback){if((this.request_params.encoding!=null)&&['','ISO-8859-1','UTF-8'].indexOf(this.request_params.encoding)===-1){this.request_type='iframe';if(this.request_params.encoding!=''){params.encoding=this.request_params.encoding;params.safe_wrap=1;}}
params.auth_token=this.token;params.cmd=cmd;params.sensitive_content=this.request_params.sensitive_content?1:0;callback=Array.pick([callback,function(){}]);var request_params=Object.append(this.request_params,{url:'/api',onSuccess:function(json){if(!json){callback.apply(null,[false,"System error. Try again later.",{}]);}else{json.data=this.unescapeData(json.data);callback.apply(null,[json.return_code=="SUCCESS",json.message,json.data]);}}.bind(this),onFailure:function(){callback.apply(null,[false,"",{}]);},data:params});return new(this.request_type==='iframe'?Request.Iframe.JSON:Request.JSON)(request_params);},execute:function(cmd,params,callback){return this.buildRequest(cmd,params,callback).send();},unescapeData:function(data){if(!this.request_params.sensitive_content)return data;if(typeOf(data)=='array'){for(var i=0;i<data.length;i++){data[i]=this.unescapeData(data[i]);}}else if(typeOf(data)=='object'){for(var i in data){data[i]=this.unescapeData(data[i]);}}else if(typeOf(data)=='string'){data=this.safelyUnescape(data);}
return data;},safelyUnescape:function(str){str=str.replace(/\\\\/g,"\\");str=str.replace(/\\x27/g,"'");str=str.replace(/\\x22/g,'"');str=str.replace(/\\x3C/g,"<");str=str.replace(/\\x3E/g,">");str=str.replace(/\\x3F/g,"?");str=str.replace(/\\n/g,"\n");return str;}});


var THE_PAGE_IS_LOADED=false;if(navigator.userAgent.match(/MSIE.*Mac/)){Array.prototype.push=function(str_value){this[this.length]=str_value;}}
var ONLOAD_FUNCTIONS=new Array();function Goto(form_name,tmpl,pairs_to_set)
{var form=document.forms[form_name];form.template.value=tmpl;if(typeof(form.news_id)!='undefined')form.news_id.value='';if(typeof(pairs_to_set)!='undefined'){var array=pairs_to_set.split('&');for(var i=0;i<array.length;i++){var pair=array[i].split('=');var obj=eval('form.'+pair[0]);if(typeof(obj)!='undefined'){obj.value=pair[1];}}}
if(form.action.indexOf("javascript:Goto")!=-1){form.action=tmpl;}
form.submit();}
function GotoEx(window_obj,form_name,tmpl)
{window_obj.Goto(form_name,tmpl);}
function Trim(str)
{str=str.replace(/^\s*/,"");str=str.replace(/\s*$/,"");return str;}
function IsValidInteger(str)
{str=Trim(str);return str.length>0&&IsValid(str,'0123456789-');}
function IsValidNatural(str)
{str=Trim(str);return str.length>0&&str.indexOf('0')!=0&&IsValid(str,'1234567890');}
function IsValidReal(str)
{str=Trim(str);return str.length>0&&IsValid(str,'0123456789.-');}
function IsValid(str,alphabet)
{for(var i=0;i<str.length;i++){if(alphabet.indexOf(str.charAt(i))==-1)return false;}
return true;}
function IsValidIdentifier(str)
{str=Trim(str);return IsValid(str,'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890-_');}
function IsValidEmail(strEmail)
{var validEmailRegExp=/^[a-z0-9]([a-z0-9_\-\.]*)@([a-z0-9_\-\.]+)(\.[a-z]{2,6}(\.[a-z]{2,6}){0,2})$/i;return validEmailRegExp.test(strEmail);}
function IsValidSQLDate(sql_date)
{sql_date=Trim(sql_date);var parts=sql_date.split(' ');var time_str=parts.length>1?parts[1]:"";var date_str=parts.length>0?parts[0]:"";if(date_str==""){return false;}
if(time_str!=""){var time_parts=time_str.split(/:/);if(time_parts.length!=3)return false;var time_parts_valid=(time_parts[0]!=""&&time_parts[0]>=0&&time_parts[0]<=23&&time_parts[1]!=""&&time_parts[1]>=0&&time_parts[1]<=59&&time_parts[2]!=""&&time_parts[2]>=0&&time_parts[2]<=59);if(!time_parts_valid)return false;}
var date_parts=date_str.split(/-/);if(date_parts.length!=3)return false;var date_obj=new Date(date_parts[0],date_parts[1]-1,date_parts[2]);return date_parts[0]==date_obj.getFullYear()&&date_parts[1]==date_obj.getMonth()+1&&date_parts[2]==date_obj.getDate();}
function SKPopup(url,width,height,options)
{SKPopupHandle(url,width,height,options);}
function SKPopupHandle(url,width,height,options)
{var left=screen.width/2-width/2;var top=screen.height/2-height/2;var name='OpenedPopupWindow'+width+height;var resizable="yes";var scrollbars="yes";var status="no";var toolbar="no";var menubar="no";var modal="no";var location="no";if(typeof(options)!='undefined'){if(typeof(options['resizable'])!='undefined')
resizable=options['resizable'];if(typeof(options['scrollbars'])!='undefined')
scrollbars=options['scrollbars'];if(typeof(options['left'])!='undefined')
left=options['left'];if(typeof(options['top'])!='undefined')
top=options['top'];if(typeof(options['name'])!='undefined')
name=options['name'];if(typeof(options['status'])!='undefined')
status=options['status'];if(typeof(options['toolbar'])!='undefined'){toolbar=options['toolbar'];}
if(typeof(options['modal'])!='undefined'){modal=options['modal'];}
if(typeof(options['menubar'])!='undefined'){menubar=options['menubar'];}
if(typeof(options['location'])!='undefined'){location=options['location'];}}
var options='left='+left+',top='+top+',width='+width+',height='+height+',resizable='+resizable+',scrollbars='+scrollbars+',toolbar='+toolbar+',menubar='+menubar+',location='+location+',modal='+modal+',status='+status;try{document.body.style.cursor='wait';var handle=window.open(url,name,options);if(handle)
handle.focus();else
AlertSystemMessage("<font class=\"heading1\">Please, enable pop-up windows</font>\n"+"<font class=\"plain\">Your browser is set up to block pop-up windows or you have a 3rd party pop-up blocker installed. To be able to administer your site, please enable pop-ups.<br><div class=\"popupBlockerImage\">&nbsp;</div></font>");document.body.style.cursor='default';return handle;}catch(e){document.body.style.cursor='default';return null;}}
function AreCookiesEnabled()
{var test_cookie_string="TestingIfCookiesAreEnabled=TestValue";document.cookie=test_cookie_string;if(document.cookie.indexOf(test_cookie_string)==-1){return false;}
document.cookie=test_cookie_string+'Expires: '+"; expires=Thu, 01-Jan-70 00:00:01 GMT";return true;}
function AlertNotEnabledCookiesMessage()
{AlertSystemMessage("<font class=\"heading1\">Your cookies are disabled</font>\n"+"<font class=\"plain\">Session cookies are not allowed in your browser settings. To be able to administrate your website, please allow cookies.</font>");}
function AlertSystemMessage(message)
{var box=document.createElement('div');box.setAttribute('class','SystemAlertPlaceholder');box.className='SystemAlertPlaceholder';box.id='SystemAlertPlaceholderID';box.setAttribute('id','SystemAlertPlaceholderID');box.innerHTML='<div class="content"><div class="text">'+
message+'<div class="break"></div><a href="javascript:{}" class="plain" onclick="document.body.removeChild(document.getElementById(\'SystemAlertPlaceholderID\'));">Hide This Message</a><br>'+'</div></div>'+'<div class="bl"></div><div class="bm"></div><div class="br"></div>';document.body.appendChild(box);}
function RefreshCachedImages()
{}
function LoginToEdit(login,login_page,template_path)
{var options=new Array();options['resizable']='no';options['scrollbars']='no';if(typeof(template_path)=='undefined'||template_path==''){template_path=document.location.pathname;}
SKPopup(login_page+'?template_path='+escape(template_path)+'&domain='+document.location.host+'&target_window=top.opener'+'&login='+login,300,200,options);}
function ExecuteOnLoadFunctions()
{THE_PAGE_IS_LOADED=true;for(var i=0;i<ONLOAD_FUNCTIONS.length;i++){if(typeof ONLOAD_FUNCTIONS[i]=='function'){ONLOAD_FUNCTIONS[i]();}else{eval(ONLOAD_FUNCTIONS[i]);}}}
function IsPageLoaded()
{return THE_PAGE_IS_LOADED;}
function FixURL(url)
{url=Trim(url);url=url.replace(/\"/g,escape('"'));url=url.replace(/\'/g,escape("'"));url=url.replace(/ /g,escape(" "));if(url.toLowerCase().indexOf('://')==-1&&url.toLowerCase().indexOf('mailto:')!=0){if(url.indexOf('@')!=-1&&url.indexOf('.')!=-1){return'mailto:'+url;}else{return'http://'+url;}}
return url;}
function ScrollTop(){window.scrollTo(0,0);}
function GetCurrentLocationFileName(){var loc=document.location.pathname;return loc.substring(loc.lastIndexOf('/')+1,loc.length);}


function AddImagenEncoding(arrIDs){var sEncoding=SK.Singletons.env.get('encoding');for(var i=0;i<arrIDs.length;i++){var oImage=document.getElementById(arrIDs[i]);if(!oImage||typeof oImage=='undefined')return;oImage.src+='&encoding=%22'+escape(sEncoding)+'%22';}}
function LoadCSS(sUrl,oProps){var arrHead=document.getElementsByTagName('HEAD');var oHead=arrHead[0];var oLink=document.createElement('LINK');oLink.rel=(oProps&&typeof oProps.rel!='undefined')?oProps.rel:'stylesheet';oLink.type=(oProps&&typeof oProps.type!='undefined')?oProps.type:'text/css';if(oProps&&typeof oProps.title!='undefined'){oLink.title=oProps.title;}
oLink.href=sUrl;oHead.appendChild(oLink);}
function LoadScript(sUrl,oProps){var arrHead=document.getElementsByTagName('HEAD');var oHead=arrHead[0];var oScript=document.createElement('SCRIPT');oScript.type=(oProps&&typeof oProps.type!='undefined')?oProps.type:'text/javascript';oScript.src=sUrl;oHead.appendChild(oScript);}


var MOUSEOVERS={};var MOUSEOUTS={};var SK__PAGE_ID=new Array();function MouseOver(image_name,layer_name)
{if(!IsPageLoaded())
return;var _document=document;if(!document.all&&typeof(layer_name)!='undefined'){_document=(new Layer(layer_name)).Document;}
if(typeof _document.images[image_name]!='undefined'){if(typeof(MOUSEOVERS[image_name])!='undefined'){_document.images[image_name].src=MOUSEOVERS[image_name].src;}else{_document.images[image_name].src=eval(image_name+'_h').src;}}}
function MouseOut(image_name,layer_name)
{if(!IsPageLoaded())
return;var _document=document;if(!document.all&&typeof(layer_name)!='undefined'){_document=(new Layer(layer_name)).Document;}
if(typeof _document.images[image_name]!='undefined'){if(typeof(MOUSEOUTS[image_name])!='undefined'){_document.images[image_name].src=MOUSEOUTS[image_name].src;}else{_document.images[image_name].src=eval(image_name).src;}}}
function MouseClick(image_name,template)
{if(!IsPageLoaded())
return;document.ObjEditForm.current_highlighted_image_name.value=image_name;Goto('ObjEditForm',template);}
function SK__ImageHL(cfg)
{MOUSEOUTS[cfg.name]=new Image();MOUSEOUTS[cfg.name].src=cfg.base;MOUSEOVERS[cfg.name]=new Image();MOUSEOVERS[cfg.name].src=cfg.base+(cfg.base.charAt(cfg.base.length-1)=='/'?"":"/")+"over=1";}
function SK__CurrentItem(cfg)
{if(cfg.link==SK__PAGE_ID){MOUSEOUTS[cfg.name]=MOUSEOVERS[cfg.name];var old_onload=window.onload;window.onload=function(){if(old_onload){old_onload();}
MouseOver(cfg.name);};};}
function SK__SetPageID(id)
{SK__PAGE_ID=id;}
function SK__IsCurrentPage(link_id)
{return link_id==SK__PAGE_ID;}


var NN_4=(document.layers)?1:0;var IE=(document.all)?1:0;var NN_6=(!document.all&&document.getElementById)?1:0;var VISIBLE=NN_4?"show":"visible";var HIDDEN=NN_4?"hide":"hidden";var DISPLAY_ON="block";var DISPLAY_OFF="none";var LAYER__IS_NETSCAPE=(navigator.appName.indexOf("Explorer")==-1);var LAYER__NETSCAPE_TIME_PATCH_COEFFICIENT=NN_4?0:0;var inited_mouse_actions=false;var LAYERS_HASH={};var old_mouse_pos=new Object();old_mouse_pos.left=0;old_mouse_pos.top=0;var allow_default_dragging=false;var default_mousedown=null;var default_mousemove=null;var default_mouseup=null;function Layer(layer_name)
{NN_4=(document.layers)?1:0;IE=(document.all)?1:0;NN_6=(!document.all&&document.getElementById)?1:0;if(typeof(LAYERS_HASH)=='undefined')
LAYERS_HASH=new Array();this.LayerName=layer_name;this.Layer=Layer__GetLayerObj(layer_name);this.LayerStyle=Layer__GetLayerObjStyle(layer_name);this.Draggable=false;if(typeof(this.Layer)=='undefined'||typeof(this.LayerStyle)=='undefined'){this.Success=false;return null;}
this.SetPosition=Layer__SetLayerPosition;this.GetPosition=Layer__GetLayerPosition;this.SetVisible=Layer__SetLayerVisible;this.IsVisible=Layer__IsLayerVisible;this.SetDisplay=Layer__SetLayerDisplay;this.Move=Layer__Move;this.GetDimentions=IE||NN_6?Layer__GetLayerDimentions:Layer__GetLayerDimentions_NN;this.SetDimentions=IE||NN_6?Layer__SetLayerDimentions:Layer__SetLayerDimentions_NN;this.HTML=IE||NN_6?Layer__HTML:Layer__HTML_NN;this.DocumentMargins=IE||NN_6?Layer__GetDocumentMargins:Layer__GetDocumentMargins_NN;this.Document=IE?document:(NN_6?document:this.Layer.document);this.InitDrag=Layer__InitDrag;this.ReleaseDrag=Layer__ReleaseDrag;this.Maximize=Layer__Maximize;this.Center=Layer__Center;this.DocumentMargins();LAYERS_HASH[this.LayerName]=this;this.Success=true;return this;}
function Layer__DefaultDragging(func_handler_mousedown,func_handler_mousemove,func_handler_mouseup)
{default_mousedown=func_handler_mousedown;default_mousemove=func_handler_mousemove;default_mouseup=func_handler_mouseup;allow_default_dragging=true;}
function Layer__AllowDefaultDragging()
{allow_default_dragging=true;}
function Layer__ForbidDefaultDragging()
{allow_default_dragging=false;}
function Layer__GetLayerObj(layer_name,nested_ref){var layer;if(NN_6||IE){layer=document.getElementById(layer_name);}else if(NN_4){var layer_parent;if(typeof(nested_ref)!='undefined'){layer_parent=document.layers[nested_ref].document;}else{layer_parent=document;}
layer=layer_parent.layers[layer_name];}
return layer;}
function Layer__GetLayerObjStyle(layer_name,nested_ref){var layer=Layer__GetLayerObj(layer_name,nested_ref);if(!layer)return;if(NN_6){layer=layer.style;}else if(IE){layer=layer.style;}else if(NN_4){}
return layer;}
function Layer__SetLayerPosition(left,top)
{this.LayerStyle.left=left+((left+"").indexOf("px")==-1?"px":"");this.LayerStyle.top=top+((top+"").indexOf("px")==-1?"px":"");}
function Layer__GetLayerPosition()
{var pos=new Object();pos.left=parseInt(this.LayerStyle.left);pos.top=parseInt(this.LayerStyle.top);return pos;}
function Layer__SetLayerDimentions(width,height)
{this.LayerStyle.width=width+((width+"").indexOf("px")==-1?"px":"");this.LayerStyle.height=height+((height+"").indexOf("px")==-1?"px":"");}
function Layer__SetLayerDimentions_NN(width,height)
{this.LayerStyle.clip.width=width+((width+"").indexOf("px")==-1?"px":"");this.LayerStyle.clip.height=height+((height+"").indexOf("px")==-1?"px":"");}
function Layer__GetLayerDimentions()
{var dimentions=this.GetPosition();dimentions.width=parseInt(this.LayerStyle.width);dimentions.height=parseInt(this.LayerStyle.height);return dimentions;}
function Layer__GetLayerDimentions_NN()
{var dimentions=this.GetPosition();dimentions.width=parseInt(this.LayerStyle.clip.width);dimentions.height=parseInt(this.LayerStyle.clip.height);return dimentions;}
function Layer__Move(start_left,start_top,end_left,end_top,timeout,speed_coefficient,name)
{var layer=typeof(name)=='undefined'?this:new Layer(name);if(start_left==end_left&&start_top==end_top){layer.SetPosition(start_left,start_top);return;}
if(typeof(speed_coefficient)=='undefined'){speed_coefficient=1;}
var sign_left=__Layer__Sign(start_left,end_left);var sign_top=__Layer__Sign(start_top,end_top);var dleft=__Layer__Distance(start_left,end_left);var dtop=__Layer__Distance(start_top,end_top);var offset_left=1;var offset_top=1;if(dleft>dtop){if(dtop==0){offset_top=0;offset_left=1;}else{offset_top=1;offset_left=Math.floor(dleft/dtop);}}else{if(dleft==0){offset_top=1;offset_left=0;}else{offset_top=Math.floor(dtop/dleft);offset_left=1;}}
if(start_left!=end_left){start_left+=speed_coefficient*sign_left*offset_left+LAYER__NETSCAPE_TIME_PATCH_COEFFICIENT;}
if(start_top!=end_top){start_top+=speed_coefficient*sign_top*offset_top;}
layer.SetPosition(start_left,start_top);var new_sign_left=__Layer__Sign(start_left,end_left);var new_sign_top=__Layer__Sign(start_top,end_top);if(sign_left*new_sign_left<=0&&sign_top*new_sign_top<=0){return;}
var _name=typeof(name)=='undefined'?this.LayerName:name;if(timeout>0){window.setTimeout('Layer__Move('+start_left+', '+start_top+', '+end_left+', '+end_top+', '+timeout+', '+speed_coefficient+', "'+_name+'")',timeout);}else{Layer__Move(start_left,start_top,end_left,end_top,0,speed_coefficient,_name);}}
function __Layer__Distance(start,end)
{if(start>0&&end>0){return Math.abs(end-start);}
return Math.abs(start)+Math.abs(end);}
function __Layer__Sign(start,end)
{if(start<end)
return 1;if(start==end)
return 0;return-1;}
function Layer__SetLayerVisible(visible)
{this.LayerStyle.visibility=visible?VISIBLE:HIDDEN;}
function Layer__IsLayerVisible()
{return this.LayerStyle.visibility==VISIBLE;}
function Layer__SetLayerDisplay(visible)
{this.LayerStyle.display=visible?DISPLAY_ON:DISPLAY_OFF;}
function Layer__HTML(code)
{this.Layer.innerHTML=code;}
function Layer__HTML_NN(code)
{this.Document.open();this.Document.write(code);this.Document.close();}
function Layer__GetDocumentMargins()
{var d=document.body;if(document.documentElement&&document.compatMode!='BackCompat')d=document.documentElement;this.ScrollLeft=parseInt(d.scrollLeft);this.ScrollTop=parseInt(d.scrollTop);if(navigator.userAgent.toLowerCase().indexOf("safari")!=-1){this.ScrollLeft=parseInt(document.body.scrollLeft);this.ScrollTop=parseInt(document.body.scrollTop);}
this.WindowWidth=parseInt(d.clientWidth);this.WindowHeight=parseInt(d.clientHeight);this.DocumentWidth=parseInt(d.clientWidth)+parseInt(this.ScrollLeft);this.DocumentHeight=parseInt(d.clientHeight)+parseInt(this.ScrollTop);this.FullDocumentWidth=parseInt(d.scrollWidth);this.FullDocumentHeight=parseInt(d.scrollHeight);}
function Layer__GetDocumentMargins_NN()
{this.DocumentWidth=window.innerWidth+window.pageXOffset;this.DocumentHeight=window.innerHeight+window.pageYOffset;this.FullDocumentWidth=this.DocumentWidth;this.FullDocumentHeight=this.DocumentHeight;this.ScrollLeft=window.pageXOffset;this.ScrollTop=window.pageYOffset;this.WindowWidth=window.innerWidth;this.WindowHeight=window.innerHeight;}
function Layer__Maximize()
{this.DocumentMargins();this.SetDimentions(this.WindowWidth,this.WindowHeight);}
function Layer__Center(horizontally,vertically)
{var pos=this.GetPosition();var dimentions=this.GetDimentions();this.DocumentMargins();if(horizontally)
pos.left=this.WindowWidth/2-dimentions.width/2;if(vertically)
pos.top=this.WindowHeight/2-dimentions.height/2;this.SetPosition(pos.left,pos.top);}
function Layer__InitDrag()
{if(!inited_mouse_actions){if(IE){document.onmousedown=Layer__System__MOUSEDOWN;document.onclick=Layer__System__MOUSEUP;document.onmousemove=Layer__System__MOUSEMOVE;}else{document.onmousedown=Layer__System__MOUSEDOWN;document.captureEvents(Event.MOUSEDOWN);document.onmouseup=Layer__System__MOUSEUP;document.captureEvents(Event.MOUSEUP);document.onmousemove=Layer__System__MOUSEMOVE;document.captureEvents(Event.MOUSEMOVE);}
inited_mouse_actions=true;}
LAYERS_HASH[this.LayerName].Draggable=true;}
function Layer__ReleaseDrag()
{LAYERS_HASH[this.LayerName].Dragging=false;}
function Layer__System__MOUSEDOWN(event_obj)
{var dragged_some=false;for(var key in LAYERS_HASH){if(LAYERS_HASH[key].Draggable&&Layer__System__ClickedOverLayer(LAYERS_HASH[key],event_obj)){if(IE)
LAYERS_HASH[key].Dragging=true;else
LAYERS_HASH[key].Dragging=!LAYERS_HASH[key].Dragging;dragged_some=true;}}
if(!dragged_some&&allow_default_dragging){var current_pos=Layer__System__CurrentMousePosition(event_obj);default_mousedown(current_pos);}}
function Layer__System__MOUSEMOVE(event_obj)
{var old_pos=old_mouse_pos;var current_pos=Layer__System__CurrentMousePosition(event_obj);var dragged_some=false;for(var key in LAYERS_HASH){if(LAYERS_HASH[key].Draggable&&LAYERS_HASH[key].Dragging){LAYERS_HASH[key].LayerStyle.left=parseInt(LAYERS_HASH[key].LayerStyle.left)+(current_pos.left-old_pos.left);LAYERS_HASH[key].LayerStyle.top=parseInt(LAYERS_HASH[key].LayerStyle.top)+(current_pos.top-old_pos.top);dragged_some=true;}}
if(!dragged_some&&allow_default_dragging){default_mousemove(old_pos,current_pos);}}
function Layer__System__MOUSEUP(event_obj)
{var dragged_some=false;for(var key in LAYERS_HASH){if(LAYERS_HASH[key].Draggable&&LAYERS_HASH[key].Dragging){if(IE)
LAYERS_HASH[key].Dragging=false;dragged_some=true;}}
if(!dragged_some&&allow_default_dragging){var current_pos=Layer__System__CurrentMousePosition(event_obj);default_mouseup(current_pos);}}
function Layer__System__ClickedOverLayer(layer,event_obj)
{var pos=Layer__System__CurrentMousePosition(event_obj);var layer_pos=layer.GetDimentions();layer_pos.right=layer_pos.left+layer_pos.width;layer_pos.bottom=layer_pos.top+layer_pos.height;return(pos.left>=layer_pos.left&&pos.left<=layer_pos.right&&pos.top>=layer_pos.top&&pos.top<=layer_pos.bottom);}
function Layer__System__CurrentMousePosition(event_obj)
{var pos=new Object();if(IE){pos.left=event.clientX+document.body.scrollLeft;pos.top=event.clientY+document.body.scrollTop;}else{pos.left=event_obj.pageX+window.pageXOffset;pos.top=event_obj.pageY+window.pageYOffset;;}
old_mouse_pos=pos;return pos;}


if(typeof deconcept=="undefined"){var deconcept=new Object();}
if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}
if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}
deconcept.SWFObject=function(_1,id,w,h,_5,c,_7,_8,_9,_a,_b){if(!document.createElement||!document.getElementById){return;}
this.DETECT_KEY=_b?_b:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}
if(id){this.setAttribute("id",id);}
if(w){this.setAttribute("width",w);}
if(h){this.setAttribute("height",h);}
if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}
this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion(this.getAttribute("version"),_7);if(c){this.addParam("bgcolor",c);}
var q=_8?_8:"high";this.addParam("quality",q);this.addParam("allowscriptaccess","always");this.addParam("allownetworking","external");this.setAttribute("useExpressInstall",_7);this.setAttribute("doExpressInstall",false);var _d=(_9)?_9:window.location;this.setAttribute("xiRedirectUrl",_d);this.setAttribute("redirectUrl","");if(_a){this.setAttribute("redirectUrl",_a);}};deconcept.SWFObject.prototype={setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16.push(key+"="+_18[key]);}
return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");}
_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}
var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}
_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");}
_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}
var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}
_19+="</object>";}
return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}
if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}
return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(_23,_24){var _25=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_25=new deconcept.PlayerVersion(x.description.replace(/([a-z]|[A-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");for(var i=15;i>6;i--){try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);_25=new deconcept.PlayerVersion([i,0,0]);break;}
catch(e){}}}
catch(e){}
if(_23&&_25.major>_23.major){return _25;}
if(!_23||((_23.minor!=0||_23.rev!=0)&&_25.major==_23.major)||_25.major!=6||_24){try{_25=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}
catch(e){}}}
return _25;};deconcept.PlayerVersion=function(_29){this.major=parseInt(_29[0])!=null?parseInt(_29[0]):0;this.minor=parseInt(_29[1])||0;this.rev=parseInt(_29[2])||0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}
if(this.major>fv.major){return true;}
if(this.minor<fv.minor){return false;}
if(this.minor>fv.minor){return true;}
if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(q){var _2d=q.indexOf(_2b+"=");var _2e=(q.indexOf("&",_2d)>-1)?q.indexOf("&",_2d):q.length;if(q.length>1&&_2d>-1){return q.substring(q.indexOf("=",_2d)+1,_2e);}}return"";}};if(Array.prototype.push==null){Array.prototype.push=function(_2f){this[this.length]=_2f;return this.length;};}
var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;


var MEDIA_OBJECT_PROPS=['src','type','width','height','align','style','controller','uimode','showcontrols','scale','showlogo','autoplay','autostart','loop','playcount'];var AUDIO_MIME_TYPES={'mp3':'audio/mpeg','wav':'audio/wav','wma':'audio/x-ms-wma','mid':'audio/mid','aif':'audio/x-aiff','aiff':'audio/x-aiff','au':'audio/basic'};function MediaObject(src,width,height,align,controls,autoplay,loop,style){this.html=function(){var ebd=[];ebd.src=src;if(width)ebd.width=width;if(height)ebd.height=height;if(align)ebd.align=align;if(style)ebd.style=style;var is_audio=src.match(/\.(mp3|wma|wav|mid|aiff?|au)$/);if(is_audio){var extension=is_audio[1];ebd.type=AUDIO_MIME_TYPES[extension];}
ebd.controller=(controls?'true':'false');ebd.uimode=(controls?'full':'none');ebd.showcontrols=(controls?1:0);ebd.scale='tofit';ebd.showlogo='false';ebd.autoplay=(autoplay?'true':'false');ebd.autostart=document.all?(autoplay?'true':'false'):(autoplay?1:0);ebd.loop=(loop?'true':'false');ebd.playcount=(loop?999999:1);var chunks=['<embed'];for(var idx=0;idx<MEDIA_OBJECT_PROPS.length;idx++){var prop=MEDIA_OBJECT_PROPS[idx];if(prop in ebd){chunks.push(prop+'="'+ebd[prop]+'"');}}
chunks.push('/>');if(is_audio&&Browser.name==='chrome'){var chrome_autoplay=(autoplay)?'autoplay':'';return'<audio controls src="'+ebd.src+'" type="'+ebd.type+'" '+chrome_autoplay+' loop="'+ebd.loop+'"></audio>';}
return chunks.join(' ');}
this.write=function(){document.write(this.html());}}


var CVI_PENDING=[];var CVI_LOADED=false;var CVI_LOADER=null;var CVI_EFFECTS={reflex:function(image,options){cvi_reflex.add(image,options);},instant:function(image,options){cvi_instant.add(image,options);}};function ApplyImageEffect(image){if(image){var config=null;try{eval('config = '+image.getAttribute('options'));}catch(ex){}
CVI_PENDING.push([image,config]);}
if(CVI_LOADED){var curr;for(var i=0,l=CVI_PENDING.length;i<l;i+=1){var curr=CVI_PENDING[i];image=_$(curr[0]);var config=curr[1];if(config&&config.name in CVI_EFFECTS){var parent=image.getParent();CVI_EFFECTS[config.name](image,config);image.setStyle('display','none').inject(parent);}}}else{if(!CVI_LOADER){CVI_LOADER=new Loader;CVI_LOADER.loadScript(CVI_LIBRARY_URL);CVI_LOADER.onload=function(){CVI_LOADED=true;if(document.all)
setTimeout(ApplyImageEffect,200);else
ApplyImageEffect();}
CVI_LOADER.load();}}}


var LOADER_SINK='image_sink';var LOADER_POOL=[];var LOADER_COUNT=0;function Loader(){this.id=LOADER_COUNT++;this.onerror=null;this.onload=null;this.onchange=null;this.loadScript=Loader__loadScript;this.loadImage=Loader__loadImage;this.loadElement=Loader__loadElement;this.clear=Loader__clear;this.load=Loader__load;this.ready=Loader__ready;this.merge=Loader__merge;this.addResource=Loader__addResource;this.getResource=Loader__getResource;this.setLoaded=Loader__setLoaded;this.setFailed=Loader__setFailed;this.notify=Loader__notify;this.clear();LOADER_POOL[this.id]=this;}
function Loader__clear(){this.resources={};this.pending=0;this.total=0;this.loaded=0;this.failed=0;this.preloaded=0;this.prefailed=0;this.loading=false;}
function Loader__load(){this.loading=true;this.loaded=this.preloaded;this.failed=this.prefailed;this.pending-=this.loaded;this.pending-=this.failed;this.preloaded=0;this.prefailed=0;this.notify();}
function Loader__loadElement(elem,url,sink){if(!this.addResource(url))return;elem.onload=LoadedHandler;elem.onerror=FailedHandler;elem.owner=this.id;elem.url=url;elem.src=url;if(!sink){sink=document.getElementById(LOADER_SINK);if(!sink){sink=document.createElement('DIV');sink.style.display='none';sink.id=LOADER_SINK;document.body.appendChild(sink);}}
sink.appendChild(elem);}
function Loader__loadScript(url){var scriptObj=document.createElement('SCRIPT');scriptObj.id="loader_gen_scr_"+this.id+"_"+genuid();if((Browser.name==='ie'&&Browser.version<11)&&!window.addEventListener){scriptObj.onreadystatechange=function(){if(scriptObj.readyState=='loaded'||scriptObj.readyState=='complete'){this.onload();}}}else{scriptObj.addEventListener('load',this.onload,false);}
this.loadElement(scriptObj,url,document.getElementsByTagName("head")[0]);}
function Loader__loadImage(url){var imageObj=document.createElement('IMG');imageObj.id="loader_gen_img_"+this.id+"_"+genuid();this.loadElement(imageObj,url);}
function Loader__ready(){return(this.loading==false);}
function Loader__merge(that){for(var url in that.resources){this.addResource(url);this.setLoaded(url,{id:that.resources[url]});}}
function Loader__addResource(url){if(url in this.resources||!url)return false;this.resources[url]=null;this.pending++;this.total++;this.notify();return true;}
function Loader__getResource(url){var resource=null;if(url in this.resources){resource=document.getElementById(this.resources[url]);if(resource){resource=resource.cloneNode(false);resource.id='resource_'+genuid();}}
return resource;}
function Loader__setLoaded(url,obj){if(this.resources[url])return;if(this.loading){this.pending--;this.loaded++;}else{this.preloaded++;}
this.resources[url]=obj.id;this.notify();}
function Loader__setFailed(url){if(this.loading){this.pending--;this.failed++;}else{this.prefailed++;}
this.resources[url]=null;this.notify();}
function Loader__notify(){if(!this.loading)return;if(this.onchange)this.onchange();if(this.pending==0){this.loading=false;if(this.failed==0){if(this.onload)this.onload();}else{if(this.onerror)this.onerror();}}}
function LoadedHandler(){var owner=LOADER_POOL[this.owner];if(owner){owner.setLoaded(this.url,this);}}
function FailedHandler(){var owner=LOADER_POOL[this.owner];if(owner){owner.setFailed(this.url);}}
function genuid(){return(new Date).getMilliseconds()+"_"+Math.floor(Math.random()*10000000000);}


SK.EventTracker=new Class({et_params:{category:'',action:'',label:''},trackEvent:function(){this.trackEvent=!SK.Singletons.env.get('user_id')&&this.hasGA()?this._trackEvent:function(){};this.trackEvent.apply(this,arguments);},_trackEvent:function(params){params=params||{};params=Object.append(Object.append({},this.et_params),params);if(params.category&&params.action){_gaq.push(['_trackEvent',params.category,params.action,params.label,params.value,params.nointeraction]);params=null;}},hasGA:function(){return!!window._gaq;}});


function StripLocation(loc){var protocol_end='://';var protocol_end_pos=loc.indexOf(protocol_end);if(-1==protocol_end_pos){return"";}
var domain_start=protocol_end_pos+protocol_end.length;var last_occ_pos=loc.lastIndexOf('/');if(-1==last_occ_pos||last_occ_pos<=domain_start){return loc;}
return loc.substring(0,last_occ_pos);}
function RemoveWWW(loc){return loc.replace(':\/\/www\.','://');}
function ExtarctDomain(loc){var protocol_end='://'
var protocol_end_pos=loc.indexOf(protocol_end);if(-1==protocol_end_pos){return"";}
var domain_start=protocol_end_pos+protocol_end.length;var first_occ_pos=loc.indexOf('/',domain_start+1);if(-1==first_occ_pos){return loc.substring(domain_start);}
return loc.substring(domain_start,first_occ_pos);}
function GetReferrer(loc,referrer){if(referrer==''){return""}
var stripped_loc=StripLocation(loc);stripped_loc=RemoveWWW(stripped_loc);referrer=RemoveWWW(referrer);if(0==referrer.indexOf(stripped_loc)){return"";}
return ExtarctDomain(referrer);}
function StatsGetCookie(name){var dc=document.cookie;var prefix=name+"=";var begin=dc.indexOf("; "+prefix);if(begin==-1){begin=dc.indexOf(prefix);if(begin!=0)return'';}else{begin+=2;}
var end=dc.indexOf(";",begin);if(end==-1)end=dc.length;return unescape(dc.substring(begin+prefix.length,end));}
function StatsDeleteCookie(name){document.cookie=name+"=; path=/; expires=Thu, 01-Jan-70 00:00:01 GMT";}
function HitStats(script_url,site_id,page_id,sess_id_name,prof_info){var cur_referrer=StatsGetCookie('cur_referrer');if(cur_referrer!=''){StatsDeleteCookie('cur_referrer');}else{cur_referrer=document.referrer;}
var ref=GetReferrer(document.location.href,cur_referrer);var ref_pv=ref!=''?'&ref='+escape(ref):'';var sess_id=StatsGetCookie(sess_id_name);var url=script_url+"?__DCP_NO_SESS__=1&site_id="+site_id+"&page_id="+page_id+"&sess_id="+sess_id+ref_pv+
(prof_info?"&prof_time="+escape(prof_info.RawTime)+"&prof_text="+escape(prof_info.Message):"");var hit_frm=document.createElement('IFRAME');hit_frm.style.visibility='hidden';hit_frm.style.display='none';hit_frm.style.width=1;hit_frm.style.height=1;hit_frm.src=url;hit_frm.id="hit_frame";document.body.insertBefore(hit_frm,document.body.lastChild);}
function SSOpenPage(file_name)
{if(file_name!=""){var path_name=window.opener.location.pathname;var index=path_name.lastIndexOf('/');if(index==-1)return;path_name=path_name.substring(0,index+1)+file_name;window.opener.document.location.href=path_name;}}


if(typeof SK=='undefined')SK={};if(typeof SK.Utils=='undefined')SK.Utils={};SK.Utils.SiteReferrer=new Class({COOKIE_NAME:'site_referrer',initialize:function(){},store:function(){var referrer=document.referrer;var host=document.location.host;if(referrer=="")return;var ref_host=(referrer.split('/'))[2];if(host!=ref_host){Cookie.write(this.COOKIE_NAME,referrer,{duration:30,path:'/'});}},retrieve:function(){return Cookie.read(this.COOKIE_NAME);}});


if(typeof SK=='undefined')SK={};if(typeof SK.DB=='undefined')SK.DB={};SK.DB=new Class({db_cache:{},column_cache:{},initialize:function(token,api_options){this.token=token;this.api_options=Object.merge({},{encoding:SK.Util.getEncoding()},api_options||null);},execute:function(command,properties,callback){var api_properties={};for(var i in properties){var value=properties[i];if(typeOf(properties[i])!='string'){value=JSON.encode(properties[i]);}
api_properties[i]=value;}
new SK.API(this.token,this.api_options).execute(command,api_properties,callback);},getDatabases:function(callback_ok,callback_failure){this.execute('db.get_all',{},function(success,message,data){if(success){data.databases.each(function(db){this.mgr.db_cache[db.id]=db;},this);this.callback_ok(data.databases.sort(function(a,b){var db1=a.name.toLowerCase();var db2=b.name.toLowerCase();return db1<db2?-1:db1>db2?1:0;}));}else{if(this.callback_failure)this.callback_failure(message);}}.bind({mgr:this,callback_ok:callback_ok,callback_failure:callback_failure}));},getDatabase:function(db_id,callback_ok,callback_failure){if(typeof(this.db_cache[db_id])!='undefined'){callback_ok(this.db_cache[db_id]);return;}
this.execute('db.get',{db_id:db_id},function(success,message,data){if(success){this.mgr.db_cache[data.id]=data;this.callback_ok(data);}else{this.callback_failure(message);}}.bind({mgr:this,callback_ok:callback_ok,callback_failure:callback_failure}));},getDatabaseID:function(db_name,callback_ok,callback_failure){this.getDatabases(function(databases){for(var i=0;i<databases.length;i++){if(databases[i].name==db_name){this.callback_ok(databases[i].id);return;}}
if(this.callback_failure)this.callback_failure("Database was not found");}.bind({callback_ok:callback_ok,callback_failure:callback_failure}),callback_failure);},addDatabase:function(db_meta,callback_ok,callback_failure){this.execute('db.add',db_meta,function(success,message,data){if(success){this.mgr.db_cache[data.id]=data;this.callback_ok(data);}else{this.callback_failure(message);}}.bind({mgr:this,callback_ok:callback_ok,callback_failure:callback_failure}));},getColumns:function(db_id,callback_ok,callback_failure){this.getColumnsUIProperties(db_id,function(columns_ui_properties){var callback_ok=this.callback_ok;var callback_failure=this.callback_failure;this.mgr.execute('db.column.get_all',{db_id:this.db_id},function(success,message,data){if(success){data.columns.each(function(column){this.mgr.column_cache[column.id]=column;},this);var columns_in_order_list=[];var columns_in_order_index={};var columns_hidden_index={};for(var i=0;i<columns_ui_properties.ordered.length;i++){var id=columns_ui_properties.ordered[i];var column=this.mgr.column_cache[id];if(typeof column=='undefined')continue;column.width=columns_ui_properties.width[id];column.sorted=false;if(id==columns_ui_properties.default_sort_column_id){column.sorted=true;column.sort_order=columns_ui_properties.default_sort_column_order.toLowerCase();}
columns_in_order_list.push(column);columns_in_order_index[columns_ui_properties.ordered[i]]=true;}
for(var i=0;i<columns_ui_properties.hidden.length;i++){columns_in_order_index[columns_ui_properties.hidden[i]]=true;}
for(var i=0;i<data.columns.length;i++){if(typeof columns_in_order_index[data.columns[i].id]=='undefined'&&typeof columns_hidden_index[data.columns[i].id]=='undefined'){columns_in_order_list.push(data.columns[i]);}}
this.callback_ok(columns_in_order_list);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({mgr:this.mgr,callback_ok:callback_ok,callback_failure:callback_failure,ui_properties:columns_ui_properties}));}.bind({mgr:this,db_id:db_id,callback_ok:callback_ok,callback_failure:callback_failure}),function(message){if(this.callback_failure)this.callback_failure(message);}.bind({callback_failure:callback_failure}));},getColumnsUIProperties:function(db_id,callback_ok,callback_failure){this.getDatabase(db_id,function(db){var ordered_column_ids=[];var visible_column_ids=[];var hidden_column_ids=[];var widths_per_column=[];var default_sort_column_id=null;var default_sort_column_order=null;if(typeof db.extra.columns_order!='undefined'){ordered_column_ids=db.extra.columns_order;}
var column_types={"0":visible_column_ids,"1":hidden_column_ids};if(typeof db.extra.columns!='undefined'){for(var i=0;i<db.extra.columns.length;i++){var hidden=typeof db.extra.columns[i].hidden=='undefined'?0:db.extra.columns[i].hidden;column_types[hidden].push(db.extra.columns[i].id);var width=typeof db.extra.columns[i].width=='undefined'?'':db.extra.columns[i].width;widths_per_column[db.extra.columns[i].id]=width;}}
this.callback_ok({visible:visible_column_ids,hidden:hidden_column_ids,ordered:ordered_column_ids,width:widths_per_column,default_sort_column_id:(db.extra.sort_on!=null)?db.extra.sort_on:null,default_sort_column_order:(db.extra.sort_by!=null)?db.extra.sort_by:null});}.bind({callback_ok:callback_ok,callback_failure:callback_failure}),function(message){if(this.callback_failure)this.callback_failure(message);}.bind({callback_failure:callback_failure}));},getColumnsMeta:function(db_id,column_names,callback_ok,callback_failure){this.getColumns(db_id,function(columns){if(column_names==null){this.callback_ok(columns);}else{var only_columns=[];for(var i=0;i<column_names.length;i++){for(var j=0;j<columns.length;j++){if(column_names[i]==columns[j].name){only_columns.push(columns[j]);}}}
this.callback_ok(only_columns);}}.bind({callback_ok:callback_ok,callback_failure:callback_failure}),function(message){if(this.callback_failure)this.callback_failure(message);}.bind({callback_failure:callback_failure}));},addColumn:function(column_meta,callback_ok,callback_failure){this.execute('db.column.add',column_meta,function(success,message,data){if(success){this.callback_ok(data);}else{this.callback_failure(message);}}.bind({mgr:this,callback_ok:callback_ok,callback_failure:callback_failure}));},updateColumn:function(){alert("Not implemented yet");},removeColumn:function(){alert("Not implemented yet");},updateCells:function(db_id,cells,callback_ok,callback_failure){this.mapCellsByColumnID(db_id,cells,function(cells,columns){this.mgr.updateCellsByIDs(this.db_id,columns,cells,this.callback_ok,this.callback_failure)}.bind({mgr:this,db_id:db_id,callback_ok:callback_ok,callback_failure:callback_failure}),callback_failure);},updateCellsByIDs:function(db_id,columns_meta,cells,callback_ok,callback_failure){this.execute('db.cell.update_multiple',{cells:cells.map(function(cell){return Object.append(cell,{lock_id:'auto'});})},function(success,message,data){if(!success){this.callback_failure(message);}else{var new_cells={};var columns_map={};for(var i=0;i<this.columns.length;i++){columns_map[this.columns[i].id]=this.columns[i];}
for(var i=0;i<data.cells.length;i++){var column_name=typeof(columns_map[data.cells[i].col_id])=='undefined'?'('+data.cells[i].col_id+')':columns_map[data.cells[i].col_id].name;new_cells[column_name]=data.cells[i];}
this.callback_ok(columns_meta,new_cells);}}.bind({callback_ok:callback_ok,callback_failure:callback_failure,columns:columns_meta}));},mapCellsByColumnID:function(db_id,cells,callback_ok,callback_failure){this.getColumns(db_id,function(columns){var columns_map={};for(var i=0;i<columns.length;i++){columns_map[columns[i].name]=columns[i];}
var new_cells={};for(var col_name in this.cells){if(typeof columns_map[col_name]=='undefined'){this.callback_failure("Invalid column name: "+col_name);return;}
var column=columns_map[col_name];new_cells[column.id]=cells[col_name];}
this.callback_ok(new_cells,columns);}.bind({mgr:this,db_id:db_id,callback_ok:callback_ok,callback_failure:callback_failure,cells:cells}),function(message){this.callback_failure(message);}.bind({mgr:this,callback_ok:callback_ok,callback_failure:callback_failure}));},getRecords:function(db_id,column_names,filter,callback_ok,callback_failure){this.getColumnsMeta(db_id,column_names,function(columns_meta){if(this.filter==null){this.filter={where:null,sort:null,limit:null};}
var columns_map={};for(var i=0;i<columns_meta.length;i++){columns_map[columns_meta[i].name]=columns_meta[i];}
if(this.filter.where!=null){var processed_where=[];for(var i=0;i<this.filter.where.length;i++){if(typeof columns_map[this.filter.where[i][0]]!='undefined'){this.filter.where[i][0]=columns_map[this.filter.where[i][0]].id;processed_where.push(this.filter.where[i]);}}
if(processed_where.length==0){if(this.callback_failure)this.callback_failure("Invalid WHERE statement or column not found");return;}
this.filter.where=processed_where;}
if(this.filter.sort!=null){if(typeof(columns_map[filter.sort.column])=='undefined'){if(this.callback_failure)this.callback_failure("Invalid SORT statement or column not found");return;}
this.filter.sort.column=columns_map[filter.sort.column].id;}
this.mgr.getRecordsByIDs(this.db_id,columns_meta,this.filter,this.callback_ok,this.callback_failure);}.bind({mgr:this,db_id:db_id,filter:filter,callback_ok:callback_ok,callback_failure:callback_failure}),function(message){if(this.callback_failure)this.callback_failure(message);}.bind({callback_failure:callback_failure}));},getRecordsByIDs:function(db_id,columns_meta,filter,callback_ok,callback_failure){if(!columns_meta){this.getColumns(db_id,function(columns_meta){this.mgr.getRecordsByIDs(this.db_id,columns_meta,this.filter,this.callback_ok,this.callback_failure);}.bind({mgr:this,db_id:db_id,filter:filter,callback_ok:callback_ok,callback_failure:callback_failure}),callback_failure||function(){});return;}
var index_only=(typeof filter!='undefined'&&filter.limit!='undefined'&&filter.limit!=null)?1:0;var original_filter=filter;if(filter!=null){var new_filter={};if(filter.sort!=null)new_filter.sort=filter.sort;if(filter.where!=null)new_filter.where=filter.where;if(new Hash(new_filter).getKeys().length>0){filter=$H(new_filter);}else{filter={};}}
var callback=function(success,message,data){if(success){var total_num_rows=data.rows.length;var rows_to_get=[];if(this.index_only==0){this.mgr.postProcessRows(this.columns_meta,data.rows,total_num_rows,this.callback_ok,this.callback_failure);return;}else{rows_to_get=data.rows.splice(this.filter.limit.from,this.filter.limit.count);}
this.mgr.getRowsData(rows_to_get,function(rows_data){this.mgr.postProcessRows(this.columns_meta,rows_data,this.total_num_rows,this.callback_ok,this.callback_failure);}.bind({mgr:this.mgr,total_num_rows:total_num_rows,callback_ok:this.callback_ok,callback_failure:this.callback_failure,columns_meta:this.columns_meta}),function(message){if(this.callback_failure)this.callback_failure(message);}.bind({callback_failure:callback_failure}));}else{if(this.callback_failure)this.callback_failure(message);}}.bind({mgr:this,filter:original_filter,index_only:index_only,callback_failure:callback_failure,callback_ok:callback_ok,columns_meta:columns_meta});if(typeof filter.where=='undefined'){this.execute('db.query.get_all_rows',{db_id:db_id,filter:filter,index_only:index_only},callback);}else{this.execute('db.query.get_filtered_rows',{filter:filter,index_only:index_only},callback);}},mapCellsByColumnName:function(columns_meta,cells){var columns_map={};var hr_cells={};for(var i=0;i<columns_meta.length;i++){columns_map[columns_meta[i].id]=columns_meta[i];}
for(var col_id in cells){var name="("+col_id+")";if(typeof columns_map[col_id]!='undefined'){name=columns_map[col_id].name;}
hr_cells[name]=cells[col_id];}
return hr_cells;},postProcessRows:function(columns_meta,rows_data,total_num_rows,callback_ok,callback_failure){var final_rows=[];for(var i=0;i<rows_data.length;i++){var cells=rows_data[i].cells;var hr_cells=this.mapCellsByColumnName(columns_meta,cells);final_rows.push({row_id:rows_data[i].row_id,cells:hr_cells});}
callback_ok(columns_meta,final_rows,total_num_rows);},getRowsData:function(rows,callback_ok,callback_failure){if(rows.length==0){callback_ok([]);return;}
this.execute('db.row.get_multiple',{rows:rows},function(success,message,data){if(success){this.callback_ok(data.rows);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({callback_failure:callback_failure,callback_ok:callback_ok}))},addRecord:function(db_id,cells,callback_ok,callback_failure){this.mapCellsByColumnID(db_id,cells,function(cells,columns){this.mgr.addRecordByIDs(this.db_id,columns,cells,this.callback_ok,this.callback_failure)}.bind({mgr:this,db_id:db_id,callback_ok:callback_ok,callback_failure:callback_failure}),callback_failure);},addRecordByIDs:function(db_id,columns_meta,cells,callback_ok,callback_failure){this.execute('db.row.add',{db_id:db_id,cells:cells},function(success,message,data){if(success){var hr_cells=this.mgr.mapCellsByColumnName(this.columns,data.cells);this.callback_ok(data.row_id,hr_cells,this.columns);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({mgr:this,callback_failure:callback_failure,callback_ok:callback_ok,columns:columns_meta}));},updateRecord:function(db_id,row_id,cells,callback_ok,callback_failure){this.mapCellsByColumnID(db_id,cells,function(cells,columns){this.mgr.updateRecordByIDs(this.row_id,columns,cells,this.callback_ok,this.callback_failure)}.bind({mgr:this,row_id:row_id,callback_ok:callback_ok,callback_failure:callback_failure}),callback_failure);},updateRecordByIDs:function(row_id,columns,cells,callback_ok,callback_failure){var cells_to_update=[];for(var col_id in cells){cells_to_update.push({row_id:row_id,col_id:col_id,value:cells[col_id],lock_id:'auto'});}
this.execute('db.cell.update_multiple',{cells:cells_to_update},function(success,message,data){if(success){var hr_cells=this.mgr.mapCellsByColumnName(this.columns,data.cells);this.callback_ok(data.row_id,hr_cells,this.columns);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({mgr:this,callback_failure:callback_failure,callback_ok:callback_ok,columns:columns}));},removeRecord:function(){alert('Not implemented yet');},getTokens:function(callback_ok,callback_failure){this.execute('db.access.get_all',{},function(success,message,data){if(success){this.callback_ok(data.tokens);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({callback_failure:callback_failure,callback_ok:callback_ok}));},addToken:function(properties,callback_ok,callback_failure){this.execute('db.access.add',properties,function(success,message,data){if(success){this.callback_ok(data);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({callback_ok:callback_ok,callback_failure:callback_failure}));},updateToken:function(token_id,properties,callback_ok,callback_failure){this.execute('db.access.update',{token_id:token_id,meta:properties},function(success,message,data){if(success){this.callback_ok(data);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({callback_ok:callback_ok,callback_failure:callback_failure}));},getTokenByName:function(name,callback_ok,callback_failure){this.getTokens(function(tokens){for(var i=0;i<tokens.length;i++){if(tokens[i].name==name){this.callback_ok(tokens[i]);return;}}
this.callback_failure("Token was not found");}.bind({mgr:this,callback_ok:callback_ok,callback_failure:callback_failure,name:name}),callback_failure)},getToken:function(id,callback_ok,callback_failure){this.execute('db.access.get',{id:id},function(success,message,data){if(success){this.callback_ok(data);}else{if(this.callback_failure)this.callback_failure(message);}}.bind({callback_ok:callback_ok,callback_failure:callback_failure}));},createOrUpdateToken:function(properties,callback_ok,callback_failure){var context={self:this,onComplete:callback_ok,onFailure:callback_failure,properties:properties};this.getTokenByName(properties.name,function(data){this.self.updateToken(data.id,this.properties,this.onComplete,this.onFailure);}.bind(context),function(message){this.self.addToken(this.properties,this.onComplete,this.onFailure);}.bind(context));},removeToken:function(){alert('Not implemented yet');}});SK.DB.Column={TEXT:0,NUMBER:1,DATE:2,RICH_TEXT:3,PASSWORD:4,FILE:5,ID:6,CHECKBOX:7,DROPDOWN:8,MULTICHOICE:9,COMBO:10,FLOAT:11};SK.DB.Format=new Class({column_handlers:{},initialize:function(){[{id:SK.DB.Column.TEXT,handler:SK.DB.Format.Text},{id:SK.DB.Column.NUMBER,handler:SK.DB.Format.Number},{id:SK.DB.Column.DATE,handler:SK.DB.Format.Date},{id:SK.DB.Column.RICH_TEXT,handler:SK.DB.Format.RichText},{id:SK.DB.Column.PASSWORD,handler:SK.DB.Format.Password},{id:SK.DB.Column.FILE,handler:SK.DB.Format.File},{id:SK.DB.Column.ID,handler:SK.DB.Format.ID},{id:SK.DB.Column.CHECKBOX,handler:SK.DB.Format.Checkbox},{id:SK.DB.Column.DROPDOWN,handler:SK.DB.Format.Dropdown},{id:SK.DB.Column.MULTICHOICE,handler:SK.DB.Format.Multichoice},{id:SK.DB.Column.COMBO,handler:SK.DB.Format.Combo},{id:SK.DB.Column.FLOAT,handler:SK.DB.Format.Float}].each(function(column_type){this.setColumnHandler(column_type.id,column_type.handler);},this);},setColumnHandler:function(col_type,callback){this.column_handlers[col_type]=callback;},getColumnHandler:function(col_type){return typeof this.column_handlers[col_type]=='undefined'?SK.DB.Format.Default:this.column_handlers[col_type];},toClient:function(column_meta,value){var handler_ref=this.getColumnHandler(column_meta.type);var handler=new handler_ref(column_meta);return handler.toClient(value);},toServer:function(column_meta,value){var handler_ref=this.getColumnHandler(column_meta.type);var handler=new handler_ref(column_meta);return handler.toServer(value);}});SK.DB.Format.Default=new Class({"type":"default",column_meta:{},initialize:function(column_meta){this.column_meta=column_meta;},generateColumnCSSClass:function(){return"db-column-type db-column-type-"+this.type;},getColumnMeta:function(){return this.column_meta;},preFormat:function(value){if(!(value!=null))return'';return value;},toClient:function(value){value=this.preFormat(value);if(value=='')return value;return'<span class="'+this.generateColumnCSSClass()+'">'+value+'</span>';},toServer:function(value){return value;}});SK.DB.Format.Text=new Class({Extends:SK.DB.Format.Default,"type":"text"});SK.DB.Format.Number=new Class({Extends:SK.DB.Format.Default,"type":"number"});SK.DB.Format.Date=new Class({Extends:SK.DB.Format.Default,"type":"date"});SK.DB.Format.RichText=new Class({Extends:SK.DB.Format.Default,"type":"rich-text"});SK.DB.Format.Password=new Class({Extends:SK.DB.Format.Default,"type":"password",toClient:function(value){return'<span class="'+this.generateColumnCSSClass()+'">**********</span>';}});SK.DB.Format.File=new Class({Extends:SK.DB.Format.Default,"type":"file",toClient:function(value){value=this.preFormat(value);if(value=='')return value;var parts=value.split('/');var file_name=parts[parts.length-1].split(/\?|\#/)[0];return'<a class="'+this.generateColumnCSSClass()+'" href="'+value+'" target="_blank">'+file_name+'</a>';}});SK.DB.Format.ID=new Class({Extends:SK.DB.Format.Default,"type":"id"});SK.DB.Format.Checkbox=new Class({Extends:SK.DB.Format.Default,"type":"checkbox"});SK.DB.Format.Dropdown=new Class({Extends:SK.DB.Format.Default,"type":"dropdown",toClient:function(value){var options=this.getColumnMeta().extra.options;if((options!=null)){for(var i=0;i<options.length;i++){var option=options[i];if(typeof option[value]!='undefined'){value=option[value];break;}}}
value=this.preFormat(value);if(value=='')return value;return'<span class="'+this.generateColumnCSSClass()+'">'+value+'</span>';}});SK.DB.Format.Multichoice=new Class({Extends:SK.DB.Format.Dropdown,"type":"multichoice",toClient:function(value){if(!(value!=null)||typeOf(value)!='array'){return'';}
var arr=[];for(var i=0;i<value.length;i++){var e=value[i];arr.push(this.parent(e));}
return arr.join(", ");}});SK.DB.Format.Combo=new Class({Extends:SK.DB.Format.Default,"type":"combo"});SK.DB.Format.Float=new Class({Extends:SK.DB.Format.Default,"type":"float"});SK.DB.Setup=new Class({database:{},columns:[],tokens:[],session_id:null,callback_ok:function(){},callback_failure:function(){},initialize:function(session_id,structure,callback_ok,callback_failure){this.session_id=session_id;this.database=Array.pick([structure.database,{}]);this.columns=Array.pick([structure.columns,[]]);this.tokens=Array.pick([structure.tokens,[]]);this.callback_ok=callback_ok;this.callback_failure=callback_failure;},create:function(){var sync=new SK.Sync([this.setupDatabase.bind(this),this.setupColumns.bind(this),this.setupTokens.bind(this)],function(){this.callback_ok({database:this.database,columns:this.columns,tokens:this.tokens});}.bind(this),this.callback_failure);sync.run();},setupDatabase:function(sync_obj){this.hasDatabase(this.database.name,function(db_id){this.mgr.database.id=db_id;this.sync.ready();}.bind({mgr:this,sync:sync_obj}),function(){this.mgr.addDatabase(this.sync);}.bind({mgr:this,sync:sync_obj}))},hasDatabase:function(name,callback_yes,callback_no){new SK.DB(this.session_id).getDatabaseID(name,callback_yes,callback_no);},addDatabase:function(sync_obj){new SK.DB(this.session_id).addDatabase(this.database,function(db_meta){this.mgr.database=db_meta;this.sync.ready();}.bind({mgr:this,sync:sync_obj}),function(message){this.sync.failure(message);}.bind({mgr:this,sync:sync_obj}));},setupColumns:function(sync_obj){var db_id=this.database.id;new SK.DB(this.session_id).getColumns(db_id,function(columns){var desired_columns=this.mgr.columns;var missing_columns=[];var available_columns=[];for(var i=0;i<desired_columns.length;i++){var found=false;for(var j=0;j<columns.length;j++){if(columns[j].name==desired_columns[i].name&&columns[j].type==desired_columns[i].type){desired_columns[i]=$H(columns[j]);found=true;break;}}
if(!found){missing_columns.push(desired_columns[i]);}else{available_columns.push(desired_columns[i]);}}
if(missing_columns.length>0){this.mgr.columns=available_columns;this.mgr.addColumns(this.sync,missing_columns);}else{this.sync.ready();}}.bind({mgr:this,sync:sync_obj}),function(message){this.sync.failure("There was a failure setting up the columns in the database: "+message);}.bind({sync:sync_obj}));},getColumns:function(){return this.columns;},addColumns:function(sync_obj,columns){var add_column_functions=[];for(var i=0;i<columns.length;i++){add_column_functions.push(function(sync_obj){new SK.DB(this.mgr.session_id).addColumn(Object.append(this.column,{db_id:this.mgr.database.id}),function(column_meta){this.mgr.columns.push($H(column_meta));this.sync.ready();}.bind({mgr:this.mgr,sync:sync_obj,column:this.column}),function(message){this.sync.failure(message);}.bind({mgr:this.mgr,sync:sync_obj}));}.bind({mgr:this,column:columns[i]}));}
var columns_sync=new SK.Sync(add_column_functions,function(){this.sync.ready();}.bind({mgr:this,sync:sync_obj}),function(message){this.sync.failure(message);}.bind({sync:sync_obj}));columns_sync.run();},setupTokens:function(sync_obj){new SK.DB(this.session_id).getTokens(function(tokens){var desired_tokens=this.mgr.tokens;for(var i=0;i<desired_tokens.length;i++){var found=false;for(var j=0;j<tokens.length;j++){if(tokens[j].name==desired_tokens[i].name){desired_tokens[i]=$H(tokens[j]);found=true;break;}}
if(!found){desired_tokens[i]._sync_mode='add';}else{desired_tokens[i]._sync_mode='update';}}
this.mgr.tokens=[];this.mgr.syncTokens(this.sync,desired_tokens);}.bind({mgr:this,sync:sync_obj}),function(message){this.sync.failure("There was a failure setting up the access to the database: "+message);}.bind({sync:sync_obj}));},syncTokens:function(sync_obj,tokens){var sync_token_functions=[];for(var i=0;i<tokens.length;i++){sync_token_functions.push(function(sync_obj){var token=this.token;for(var i=0;i<token.extra.db_permissions.length;i++){token.extra.db_permissions[i].databases=[this.mgr.database.id];}
var sync_token_callback_ok=function(token_meta){this.mgr.tokens.push($H(token_meta));this.sync.ready();}.bind({mgr:this.mgr,sync:sync_obj,token:this.token});var sync_token_callback_failure=function(message){this.sync.failure(message);}.bind({mgr:this.mgr,sync:sync_obj});if(token._sync_mode=='add'){new SK.DB(this.mgr.session_id).addToken(token,sync_token_callback_ok,sync_token_callback_failure);}else if(token._sync_mode=='update'){new SK.DB(this.mgr.session_id).updateToken(token.id,{name:token.name,extra:token.extra},sync_token_callback_ok,sync_token_callback_failure);}else{sync_obj.ready();}}.bind({mgr:this,token:tokens[i]}));}
var tokens_sync=new SK.Sync(sync_token_functions,function(){this.sync.ready();}.bind({mgr:this,sync:sync_obj}),function(message){this.sync.failure(message);}.bind({sync:sync_obj}));tokens_sync.run();}});SK.DB.Setup.Serialized=new Class({Extends:SK.DB.Setup,initialize:function(session_id,structure,callback_ok,callback_failure){var callback_ok_wrapped=function(structure){structure.database.id=SK.Util.serializeDBId(structure.database.id);for(var i in structure.tokens){structure.tokens[i].token=SK.Util.serializeToken(structure.tokens[i].token);}
for(var i in structure.columns){structure.columns[i].id=SK.Util.serializeColId(structure.columns[i].id);structure.columns[i].db_id=SK.Util.serializeDBId(structure.columns[i].db_id);}
this.callback_ok(structure);}.bind({callback_ok:callback_ok});this.parent(session_id,structure,callback_ok_wrapped,callback_failure);}});SK.DB.QueryHelpers=new Class({generateEmptyResult:function(){return{"rows":[]};},validateResponse:function(success,message){if(!success){alert('Response error: '+message);}
return success;}});SK.DB.Query=new Class({Implements:[SK.DB.QueryHelpers],initialize:function(token,request_params){this.request=new SK.API(token,request_params);return this;},buildRequest:function(filter,columns,callback){var params={filter:JSON.encode(filter),index_only:1}
return this.request.buildRequest('db.query.get_filtered_rows',params,this.retrieveFilteredRows.bind({mgr:this,columns:columns,callback:callback}));},execute:function(filter,columns,callback){return this.buildRequest(filter,columns,callback).send();},retrieveFilteredRows:function(success,message,data){if(!this.mgr.validateResponse(success,message)){return;}
if(!data.rows.length){this.callback.apply(null,[this.mgr.generateEmptyResult()]);return;}
var cells=[];for(var i=0;i<data.rows.length;i++){for(var j=0;j<this.columns.length;j++){cells.push({"row_id":data.rows[i],"col_id":this.columns[j]});}}
this.mgr.request.execute('db.cell.get_multiple',{cells:JSON.encode(cells)},this.mgr.retrieveMultipleCells.bind({mgr:this.mgr,callback:this.callback,rows_order:data.rows}));},retrieveMultipleCells:function(success,message,data){if(!this.mgr.validateResponse(success,message)){return;}
var temp={};for(var i=0;i<data.cells.length;i++){var cell=data.cells[i];if(!temp[cell.row_id]){temp[cell.row_id]={};}
temp[cell.row_id][cell.col_id]=cell.value;}
var result=this.mgr.generateEmptyResult();for(var i=0;i<this.rows_order.length;i++){var row_id=this.rows_order[i];result.rows.push({row_id:row_id,cells:temp[row_id]});delete temp[row_id];}
this.rows_order=[];this.callback.apply(this,[result]);}});SK.DB.QueryAggregate=new Class({Implements:[SK.DB.QueryHelpers],columns:[],filters:[],callbacks:[],checks:[],requestId:0,completeCallbacks:[],initialize:function(token,request_params){this.request=new SK.API(token,request_params);return this;},buildRequest:function(filter,columns,callback){this.filters.push(filter);this.columns.push(columns);this.callbacks.push(this.createCallbackWrapper(callback));return this;},createCallbackWrapper:function(callback){this.checks.push(0);return function(){this.callback.apply(null,arguments);this.checks.pop();if(this.checks.length==0){this.mgr.completeCallbacks[this.requestId].call(null);}}.bind({mgr:this,callback:callback,requestId:this.requestId,checks:this.checks});},send:function(){this.execute.apply(this,arguments);},execute:function(callback){callback=Array.pick([callback,function(){}]);var filters=[];var index=0;while(this.filters.length){filters.push({id:index,filter:this.filters.shift()});index++;}
if(!filters.length){callback.call(null);return;}
this.completeCallbacks[this.requestId]=callback;var params={filters:JSON.encode(filters),index_only:1};this.request.execute('db.query.get_filtered_rows_multiple',params,this.retrieveFilteredRows.bind({mgr:this,callbacks:this.callbacks,columns:this.columns}));this.callbacks=[];this.columns=[];this.checks=[];this.requestId++;},retrieveFilteredRows:function(success,message,data){if(!this.mgr.validateResponse(success,message)){return;}
var results={};for(var index in data){var rows=data[index].rows;var columns=this.columns[index];var callback=this.callbacks[index];if(rows.length==0){callback.apply(null,[this.mgr.generateEmptyResult()]);continue;}
results[index]=[];for(var i=0;i<rows.length;i++){for(var j=0;j<columns.length;j++){results[index].push({"row_id":rows[i],"col_id":columns[j]});}}}
var cells=[];for(var index in results){cells=cells.concat(results[index]);}
if(!cells.length){return;}
this.mgr.request.execute('db.cell.get_multiple',{cells:JSON.encode(cells)},this.mgr.retrieveMultipleCells.bind({mgr:this.mgr,callbacks:this.callbacks,results:results}));},retrieveMultipleCells:function(success,message,data){if(!this.mgr.validateResponse(success,message)){return;}
var data_map={};for(var i=0;i<data.cells.length;i++){var cell=data.cells[i];if(!data_map[cell.row_id]){data_map[cell.row_id]={};}
data_map[cell.row_id][cell.col_id]=cell.value;}
for(var index in this.results){var temp={};for(var i=0;i<this.results[index].length;i++){var cell=this.results[index][i];if(!temp[cell.row_id]){temp[cell.row_id]={};}
temp[cell.row_id][cell.col_id]=data_map[cell.row_id][cell.col_id];}
var result=this.mgr.generateEmptyResult();for(var row_id in temp){result.rows.push({row_id:row_id,cells:temp[row_id]});delete temp[row_id];}
this.callbacks[index].apply(null,[result]);}}});


if(typeof SK=='undefined')SK={};if(typeof SK.Util=='undefined')SK.Util={};SK.Util.serializeAny=function(key,id){if(!id){return'';}
id=id.toString();if(id.indexOf('{SK_'+key)==0){return id;}
return'{SK_'+key+'__'+id+'__SK}';}
SK.Util.serializeDBId=function(id){return SK.Util.serializeAny('DBID',id);}
SK.Util.serializeColId=function(id){return SK.Util.serializeAny('COLID',id);}
SK.Util.serializeNodeId=function(id){return SK.Util.serializeAny('NODEID',id);}
SK.Util.serializeToken=function(id){return SK.Util.serializeAny('TOKEN',id);}
SK.Util.deserializeAny=function(key,id){if(!id){return'';}
id=id.toString();var prefix='{SK_'+key+'__';var suffix='__SK}';if(id.indexOf(prefix)!=0){return id;}
if(id.indexOf(suffix)!=(id.length-suffix.length)){return id;}
return id.substring(prefix.length,id.length-suffix.length);}
SK.Util.deserializeDBId=function(id){return SK.Util.deserializeAny('DBID',id);}
SK.Util.deserializeColId=function(id){return SK.Util.deserializeAny('COLID',id);}
SK.Util.deserializeNodeId=function(id){return SK.Util.deserializeAny('NODEID',id);}
SK.Util.deserializeToken=function(id){return SK.Util.deserializeAny('TOKEN',id);}
SK.Util.deserializeMulti=function(string){if(!string){return'';}
return string.replace(/\{SK_([A-Z]+)__[\da-zA-Z\.]+__SK\}/g,function(pattern,key){return SK.Util.deserializeAny(key,pattern);});}
SK.Util.Deserializer=new Class({dbId:SK.Util.deserializeDBId,colId:SK.Util.deserializeColId,nodeId:SK.Util.deserializeNodeId,token:SK.Util.deserializeToken,multi:SK.Util.deserializeMulti});SK.Util.Serializer=new Class({dbId:SK.Util.serializeDBId,colId:SK.Util.serializeColId,nodeId:SK.Util.serializeNodeId,token:SK.Util.serializeToken,multi:function(){return arguments[0];}});


SK.Sync=new Class({initialize:function(functions,callback_ok,callback_failure){this.functions=[].append(functions);this.callback_ok=callback_ok;this.callback_failure=callback_failure;},run:function(){this.runNextFunction();},runFunction:function(f){f(this);},runNextFunction:function(){if(this.functions.length==0){this.callback_ok();return;}
var f=this.functions[0];this.functions=this.functions.splice(1,this.functions.length-1);this.runFunction(f);},ready:function(){this.runNextFunction();},failure:function(message){this.callback_failure(message);}});SK.Async=new Class({initialize:function(functions,callback_ok,callback_failure){this.functions=[].append(functions);this.num_functions=this.functions.length;this.callback_ok=callback_ok;this.callback_failure=callback_failure;},run:function(){for(var i=0;i<this.functions.length;i++){var f=this.functions[i];this.runFunction.delay(1,this,[f]);}},runFunction:function(f){f(this);},ready:function(){if(this.num_functions<=0){return this;}
this.num_functions--;if(this.num_functions==0){this.callback_ok();return;}},failure:function(message){this.callback_failure(message);}});


if(typeof SK=='undefined')SK={};if(typeof SK.Util=='undefined')SK.Util={};SK.Util.isSlowSystem=function(){return parseInt(SK.Singletons.env.get('system_type'))==SK.Util.SYSTEM_TYPE_SLOW;};SK.Util.getEncoding=function(){var charset_properties=['characterSet','charset','inputEncoding','defaultCharset'];for(var i=0;i<charset_properties.length;i++){if(typeof(document[charset_properties[i]])!='undefined'){return document[charset_properties[i]];}}
return"";};SK.Util.duplicate=function(json){var new_json={};if(typeof(json)!='object')return json;for(var i in json){new_json[i]=SK.Util.duplicate(json[i]);}
return new_json[i];};SK.Util.isScalar=function(a){if(!a)return false;return typeof(a)!='object'||typeof(a)=='function';};SK.Util.isArray=function(a){if(!a)return false;return typeof(a)=='object'&&typeof(a.length)!='undefined';};SK.Util.isHash=function(a){if(!a)return false;return!SK.Util.isScalar(a)&&!SK.Util.isArray(a);};SK.Util.merge=function(base_json,instance_json){var merged=null;if(typeof instance_json=='undefined')
instance_json=null;if(typeof base_json=='undefined')
base_json=null;if(instance_json==null&&base_json==null)return null;if(SK.Util.check(instance_json)&&!SK.Util.check(base_json)&&(SK.Util.isScalar(instance_json)||SK.Util.isArray(instance_json))){return instance_json;}
if(!SK.Util.check(instance_json)&&SK.Util.check(base_json)&&(SK.Util.isScalar(base_json)||SK.Util.isArray(base_json))){return base_json;}
if(base_json){if(SK.Util.isHash(base_json)){merged=merged==null?{}:merged;for(var i in base_json){if(instance_json&&typeof instance_json[i]!='undefined'&&SK.Util.isScalar(instance_json[i])){merged[i]=instance_json[i];}else{var merged_stuct=SK.Util.merge(base_json[i],instance_json?instance_json[i]:null);if(merged_stuct)merged[i]=merged_stuct;}}}}
if(instance_json){if(SK.Util.isHash(instance_json)){merged=merged==null?{}:merged;for(var i in instance_json){if(instance_json[i]==null){delete merged[i];}else{var merged_stuct=SK.Util.merge(base_json?base_json[i]:null,instance_json[i]);if(merged_stuct)merged[i]=merged_stuct;}}}}
return merged;};SK.Util.check=function(item){return!!item||item===0;}
SK.Util.elementForceImplementLayout=function(element){var parentElement=element.getParent();element.store("elementData",{"element":element,"parentElement":parentElement,"styles":element.getStyles('opacity','top','position')});element.setStyles({'opacity':0,'position':'absolute','top':0});_$(document.body).adopt(element);return element;}
SK.Util.elementRestoreInitialLayoutState=function(element){var elementData=element.retrieve('elementData');if(elementData){elementData.parentElement.adopt(elementData.element.setStyles(elementData.styles));}}
SK.Util.isTouchDevice=function(){return'createTouch'in document;}
SK.Util.isNumeric=function(n){return!isNaN(parseFloat(n))&&isFinite(n);}
SK.Util.isEmail=function(email){var regex=new RegExp(/^[a-zA-Z0-9\._%\+\-]+@[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,4}$/);return regex.test(email);}
SK.Util.Currency={};SK.Util.Currency.formatSymbol=function(price,symbol,position){if(!position||position!=='left'||position!=='right'){if(symbol.indexOf('$')!==-1){position='left';}}
if(position==='left'){return symbol+price;}
return price+symbol;}
SK.Util.Currency.getInfo=function(currency,currencies_infos){var currency_info=[];currency_info.abbr=currency;currency_info.symbol=' '+currency;currency_info.position="right";var currency=currencies_infos[currency];if(currency.shortcode){currency_info.symbol=currency.shortcode;currency_info.position=currency.shortcode_position;}
return currency_info;}
SK.Util.justifyLine=function(left,right,separator,char){left=String(left||"");right=String(right||"");separator=String(separator||" ");char=char||65;var texts_length=(left.length+right.length);if(texts_length<char){var separators_nr=(char-texts_length)+1;return left+new Array(separators_nr).join(separator)+right;}else{return"\r\n"+left+"\r\n"+right+"\r\n"+"\r\n";}}


if(typeof SK=='undefined')var SK={};if(typeof SK.Util=='undefined')SK.Util={};SK.Util.URL={parseQueryString:function(query){var query_str=query||document.location.href;var begin=query_str.indexOf("?");if(begin==-1){return{};}
var end=query_str.indexOf("#",begin);if(end==-1)end=query_str.length;var params_str=query_str.substring(begin+1,end);var params=params_str.split("&");var result={};for(var i=0;i<params.length;i++){var pair=params[i].split("=");if(pair.length==2){result[unescape(pair[0])]=unescape(pair[1]);}}
return result;}};


if(typeof(SK)=='undefined')SK={};if(typeof(SK.Util)=='undefined')SK.Util={};if(typeof(SK.Util.DateTime)=='undefined')SK.Util.DateTime={};if(typeof(SK.LocationFormats)=='undefined')SK.LocationFormats={};SK.LocationFormats.DateTime=new Class({months:['January','February','March','April','May','June','July','August','September','October','November','December'],days:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],months_short:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],days_short:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],env:null,default_format:'$YEAR$-$0M$-$0D$',regexp_subs:null,initialize:function(){this.getEnv();this.createRegExpSubs();},getEnv:function(){this.env=SK.Singletons&&SK.Singletons.env?SK.Singletons.env:null;if(!this.env||!this.env.get('locale')){var win=window;try{do{win=win.opener||win.parent;if(win.SK.Singletons&&win.SK.Singletons.env&&win.SK.Singletons.env.get('locale')){if(this.env){this.env.set('locale',win.SK.Singletons.env.get('locale'));}else{this.env=Object.append({},win.SK.Singletons.env);}}}while((win.opener&&win!==win.opener)||win!==win.parent);}catch(e){}}},createRegExpSubs:function(){this.regexp_subs={$WEEKDAY$:'('+this.days.join('|')+')',$WD$:'('+this.days_short.join('|')+')',$YEAR$:'\\d{4}',$YR$:'\\d{2}',$MONTH$:'('+this.months.join('|')+')',$MNT$:'('+this.months_short.join('|')+')',$MN$:'(0\\d|1[0-2]|[1-9])',$0M$:'(0\\d|1[0-2])',$D$:'([0-2]\\d|3[0-1]|[1-9])',$0D$:'([0-2]\\d|3[0-1])',$H$:'(1[0-2]|[0-9])',$H24$:'([1-2]\\d|[0-9])',$M$:'[0-5]\\d',$S$:'[0-5]\\d',$AMPM$:'(AM|PM)','$AM.PM$':'(P\\.M\\.|A\\.M\\.)',$TZ$:null,$TIMEZONE$:null,$UTC$:null};this.regexp_subs.$H12$=this.regexp_subs.$H$;},getFormat:function(format){format=format||'';if(format.indexOf('$')>=0){return format;}
format=this.env?this.env.get('locale')[format]:this.default_format;return format||this.default_format;},addZero:function(num){return num<10?"0"+num:num;},parseDate:function(input){var date_obj;if(!input){date_obj=new Date();}
else if(typeOf(input)=='date'){return input.toString()!=='Invalid Date'?input:null;}
else{if(/^[a-zA-Z]{3}, \d{2} [a-zA-Z]{3} \d{4} \d{2}:\d{2}:\d{2} (\+|\-)\d{4}$/.test(input)){return new Date(Date.parse(input));}
input=input.replace(/\-|\./g,'/');if(input.match(/^\d{1,2}:\d{2}/)){input='01/01/1970 '+input;}
date_obj=new Date(input);}
if(date_obj.toString()=='Invalid Date'){return null;}
return date_obj;},parseDateUTC:function(input){var date_obj=this.parseDate(input);if(!date_obj){return null;}
return new Date(Date.UTC(date_obj.getFullYear(),date_obj.getMonth(),date_obj.getDate(),date_obj.getHours(),date_obj.getMinutes(),date_obj.getSeconds()));},format:function(input,format){format=this.getFormat(format);var date_obj=this.parseDate(input);if(!date_obj){return input;}
var day=date_obj.getDay();var date=date_obj.getDate();var month=date_obj.getMonth();var year=date_obj.getFullYear();var hours=date_obj.getHours();var minutes=date_obj.getMinutes();var seconds=date_obj.getSeconds();var offset=this.getOffset(date_obj);var tz_match=date_obj.toString().match((Browser.name==='ie'&&Browser.version<11)?/(UTC(\+|\-)\d{4}|[A-Z]{3,4})/:/\(([\(\)a-zA-Z\s\,\.]+)\)$/);var timezone=tz_match?tz_match[1]:'';var subs={$WEEKDAY$:this.days[day],$WD$:this.days_short[day],$YEAR$:year,$YR$:String(year).substr(2),$MONTH$:this.months[month],$MNT$:this.months_short[month],$MN$:month+1,$0M$:this.addZero(month+1),$D$:date,$0D$:this.addZero(date),$H$:hours>12?hours-12:hours,$H24$:hours,$M$:this.addZero(minutes),$S$:this.addZero(seconds),$AMPM$:hours>=12?'PM':'AM','$AM.PM$':hours>=12?'P.M.':'A.M.',$TZ$:timezone,$UTC$:offset<0?offset:'+'+offset};subs.$H12$=subs.$H$;subs.$TIMEZONE$=subs.$TZ$;return format.replace(/\$[A-Z0-9\.]+\$/g,function(wildcard){var return_value=typeof(this.subs[wildcard])!='undefined'?this.subs[wildcard]:'';return return_value;}.bind({subs:subs}));},formatUTC:function(input,format){return this.format(this.parseDateUTC(input),format);},cache:{},validate:function(input,format){format=this.getFormat(format);var pattern;if(this.cache[format]){pattern=this.cache[format];}else{format=format.replace(/[\(\)\|\-\.\?\!\:\/\\]/g,function(c){return'\\'+c;});pattern=new RegExp('^'+format.replace(/\$[A-Z0-9\.]+\$/g,function(wildcard){return this.regexp_subs[wildcard];}.bind(this))+'$','i');this.cache[format]=pattern;}
return pattern.test(input);},setDefaultFormat:function(fmt){this.default_format=fmt;},parseInput:function(input,format){format=this.getFormat(format);var index_year=format.indexOf('$YEAR$');var index_m=format.indexOf('$MN$');index_m=index_m<0?format.indexOf('$0M$'):index_m;var index_d=format.indexOf('$D$');index_d=index_d<0?format.indexOf('$0D$'):index_d;if(index_year>index_m&&index_d<index_m){input=input.replace(/^(\d{1,2})(.{1})(\d{1,2})/,function(all,day,sep,month){return month+sep+day;});}
return this.parseDate(input)||new Date(input);},nowUTC:function(){var today=new Date();var offset=this.getOffset(today);today.setHours(today.getHours()-offset);return today;},getOffset:function(date_obj){return-(date_obj.getTimezoneOffset())/60;}});(function(SK){var mgr=new SK.LocationFormats.DateTime();SK.Util.DateTime.format=mgr.format.bind(mgr);SK.Util.DateTime.formatUTC=mgr.formatUTC.bind(mgr);SK.Util.DateTime.validate=mgr.validate.bind(mgr);SK.Util.DateTime.parseInput=mgr.parseInput.bind(mgr);SK.Util.DateTime.setDefaultFormat=mgr.setDefaultFormat.bind(mgr);SK.Util.DateTime.nowUTC=mgr.nowUTC.bind(mgr);})(SK);


SK.UI.Lightbox=new Class({win:{},defaults:{width:800,height:600},fx:{},initialize:function(){if(!_$('sk-lightbox-wrapper')){return;}
this.init();},init:function(html){this.initWindow();this.initEvents();this.initEffects();},initEvents:function(){_$(document.body).addEvent('click',this.delegateClickEvent.bind(this));_$(window).addEvent('load',function(){SK.StopPropagationRegistry.getElements().addEvent('click',this.delegateClickEvent.bind(this));}.bind(this));_$(window).addEvent('keydown',function(e){if(e.key=='esc'){this.hideWindow();}}.bind(this));this.win.close.addEvent('click',function(e){e.preventDefault();this.hideWindow();}.bind(this));},initEffects:function(){this.fx.show=new Fx.Tween(this.win.wrapper,{property:'opacity',duration:300});this.fx.hide=new Fx.Tween(this.win.wrapper,{property:'opacity',duration:300,onComplete:this.resetWindow.bind(this)});this.fx.resizeHeight=new Fx.Tween(this.win.wrapper,{property:'height',duration:1500});this.fx.resizeWidth=new Fx.Tween(this.win.wrapper,{property:'width',duration:1500});},delegateClickEvent:function(e){var target=this.getLinkElement(_$(e.target));if(!target||(target.getProperty('target')||'').indexOf('sk_lightbox')<0){return;}
e.preventDefault();this.displayLightbox(target);},getLinkElement:function(element){var i=10;while(i&&element&&element.tagName!=='A'){element=element.getParent();i-=1;}
return element&&element.tagName=='A'?element:null;},initWindow:function(){this.win={wrapper:_$('sk-lightbox-wrapper'),close:_$('sk-lightbox-close'),iframe:_$('sk-lightbox-iframe'),inner:_$('sk-lightbox-ui'),dom:_$('sk-lightbox-dom'),image_wrap:_$('sk-lightbox-image-wrapper'),image:_$('sk-lightbox-image')};if((Browser.platform==='ios')){this.win.iframeWrap=new Element('div',{styles:{'overflow':'auto','-webkit-overflow-scrolling':'touch'}}).wraps(this.win.iframe);}
this.win.wrapper.setStyles({'opacity':'0','visibility':'hidden','display':'none'});},resizeWindow:function(width,height){var win=_$(window);var padding=parseInt(this.win.inner.getStyle('padding-top'),10);var offset=parseInt(this.win.inner.getStyle('top'),10);var win_width=win.getWidth()-20;var win_height=win.getHeight()-20;var diff=(offset+padding)*2;width=Number(width)+diff;height=Number(height)+diff;width=width>win_width?win_width:width;height=height>win_height?win_height:height;this.win.wrapper.setStyles({width:width,height:height});},resetWindow:function(){this.win.wrapper.setStyles({width:'',height:'',marginLeft:'',marginTop:'',visibility:'hidden',display:'none'});this.win.iframe.src='about:blank';},displayLightbox:function(a){var properties=this.parseProperties(a.getProperty('target'));var url=a.getProperty('href');var width=properties.width||this.defaults.width;var height=properties.height||this.defaults.height;if(url=='javascript:void(null)'){var img=a.getElement('img');if(img){url=img.getProperty('src');}}
this.showWindow(url,width,height);},showWindow:function(url,width,height){if(this.win.iframeWrap){this.win.iframeWrap.setStyles({'width':'100%','height':'100%','display':'none'});}
this.resizeWindow(width,height);this.loadContent(url);this.win.wrapper.setStyles({'visibility':'visible','display':'block'});this.fx.show.start(1);},hideWindow:function(){this.fx.hide.start(0);},loadContent:function(url){switch(this.getContentType(url)){case'image':this.loadImage(url);break;case'dom':this.loadDOM(url);break;case'html':default:this.loadHtml(url);break;}},loadImage:function(url){this.win.image.set('html','');this.hideFrame();this.hideDOM();this.showImage();var image=new Element('img',{src:url}).inject(this.win.image);image.addEvent('load',function(image){this.fixImageDimensions(image);this.resizeWindow(image.getWidth(),image.getHeight());}.bind(this,image));},loadDOM:function(dom){this.hideFrame();this.hideImage();var current_el=this.win.dom.getElement('*');current_el&&current_el.dispose();dom.inject(this.win.dom);this.showDOM();},loadHtml:function(url){this.win.iframeWrap&&this.win.iframeWrap.setStyle('display','block');this.showFrame();this.hideImage();this.hideDOM();if(this.win.iframe.src!=url){this.win.iframe.src=url;}},showImage:function(){this.win.image_wrap.setStyle('display','');},showDOM:function(){this.win.dom.setStyle('display','');},showFrame:function(){this.win.iframe.setStyle('display','');},hideImage:function(){this.win.image_wrap.setStyle('display','none');},hideDOM:function(){this.win.dom.setStyle('display','none');},hideFrame:function(){this.win.iframe.setStyle('display','none');},parseProperties:function(string_properties){return JSON.decode(string_properties.replace('sk_lightbox',''));},getContentType:function(url){if(typeOf(url)=='element'){return'dom';}
if(/\.(?:jpe?g|gif|png)$/.test(url)){return'image';}
return'html';},fixImageDimensions:function(image){var inner_height=this.win.inner.getHeight()-(parseInt(this.win.inner.getStyle('padding-top'),10)*2);if(image.getHeight()>inner_height){image.setStyle('height',inner_height);}
var inner_width=this.win.inner.getWidth()-(parseInt(this.win.inner.getStyle('padding-left'),10)*2);if(image.getWidth()>inner_width){image.setStyle('width',inner_width);}},setHeightFx:function(height){var padding=parseInt(this.win.inner.getStyle('padding-top'),10);var offset=parseInt(this.win.inner.getStyle('top'),10);var additionalHeight=(offset+padding)*2;var newHeight=parseInt(height,10)+additionalHeight;this.fx.resizeHeight.start(newHeight);}});SK.UI.Lightbox.Open=function(){};SK.UI.Lightbox.Close=function(){};SK.UI.Lightbox.IsLightboxTarget=function(){};_$(window).addEvent('domready',function(){var mgr=new SK.UI.Lightbox();SK.UI.Lightbox.Open=function(){var args=Array.prototype.link.apply(arguments,[{url:function(s){return Type.isString(s)||Type.isElement(s);},width:function(s){return Type.isNumber(Number(s));},height:function(s){return Type.isNumber(Number(s));},target:function(s){return Type.isString(s)&&s.indexOf('sk_lightbox')>-1;}}]);if(args.target){var window_properties=JSON.decode(args.target.replace('sk_lightbox',''));Object.append(args,window_properties);}
this.showWindow(args.url,args.width,args.height);}.bind(mgr);SK.UI.Lightbox.Close=mgr.hideWindow.bind(mgr);SK.UI.Lightbox.IsLightboxTarget=function(value){return value.indexOf('sk_lightbox')===0;}
SK.UI.Lightbox.SetHeightFx=mgr.setHeightFx.bind(mgr);});


SK.Util=SK.Util||{};SK.Util.toPercent=function(num,tail_length){return(num.toFloat()*100).toFixed(tail_length>=0?tail_length:2)+'%';}
SK.Util.fromPercent=function(percent,tail_length){return(percent.toFloat()/100).toFixed(tail_length>=0?tail_length:5).toFloat();}


if(typeof(SK)=='undefined')SK={};SK.ImageTransition=new Class({elements:{container:null,original:null,rollover:null},fx:{},duration:{over:300,out:200},initialize:function(elements,dimensions){this.setDimensions(dimensions);this.setElements(elements);this.setStyles();this.initEvents();},setElements:function(elements){this.elements=elements;},setDimensions:function(dimensions){this.dimensions=dimensions;},setStyles:function(){},initEvents:function(){if(!SK.Util.isTouchDevice()){this.getContainer().addEvents({mouseenter:this.rollOver.bind(this),mouseleave:this.rollOut.bind(this)});}},rollOver:function(){this.getOriginalImage().setStyle('display','none');this.getRolloverImage().setStyle('display','');},rollOut:function(){this.getOriginalImage().setStyle('display','');this.getRolloverImage().setStyle('display','none');},getOriginalImage:function(){return this.elements.original;},getRolloverImage:function(){return this.elements.rollover;},getContainer:function(){return this.elements.container;},getDuration:function(name){return this.duration[name];},cancelAll:function(){for(var fx in this.fx){this.fx[fx].cancel().removeEvents();}},getDimensions:function(){return this.dimensions;},getWidth:function(){return this.getDimensions().width;},getHeight:function(){return this.getDimensions().height;}});SK.ImageTransition.FadeBase=new Class({setFadeStyles:function(){var rollover=this.getRolloverImage();rollover.setStyles({display:'',position:'absolute',left:0,top:0});(rollover.getElement('img')||rollover).setStyle('opacity',0);},fadeRollOver:function(callback_complete){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('over')});callback_complete&&this.fx.rollover.addEvent('complete',callback_complete);this.fx.rollover.start(1);},fadeRollOut:function(callback_complete){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('out')});callback_complete&&this.fx.rollover.addEvent('complete',callback_complete);this.fx.rollover.start(0);}});SK.ImageTransition.FadeIn=new Class({Extends:SK.ImageTransition,Implements:[SK.ImageTransition.FadeBase],initialize:function(){this.parent.apply(this,arguments);var rollover=this.getRolloverImage();this.fx.rollover=new Fx.Tween((rollover.getElement('img')||rollover),{property:'opacity'});},setStyles:function(){this.parent();this.setFadeStyles();},rollOver:function(){this.fadeRollOver();},rollOut:function(){this.fadeRollOut();},setElements:function(){this.parent.apply(this,arguments);if((Browser.name==='ie'&&Browser.version<11)&&!window.addEventListener){this.IEFixPNG();}},IEFixPNG:function(){var original_img=this.getOriginalImage();var rollover_img=this.getRolloverImage();var width=this.getWidth();var height=this.getHeight();var filter='<div style="width: 100%; height: 100%; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\'{src}\', sizingMethod=\'scale\');"></div>';if(/\.png$/i.test(original_img.src)){var replacement=new Element('div',{html:filter.substitute({src:original_img.src})}).inject(original_img,'after').setStyles({width:width,height:height});original_img.setStyle('display','none');this.elements.original=replacement;}
if(/\.png$/i.test(rollover_img.src)){var replacement=new Element('div',{html:filter.substitute({src:rollover_img.src})}).inject(rollover_img,'after').setStyles({width:width,height:height});rollover_img.setStyle('display','none');this.elements.rollover=replacement;}}});SK.ImageTransition.Dissolve=new Class({Extends:SK.ImageTransition.FadeIn,initialize:function(){this.parent.apply(this,arguments);this.fx.original=new Fx.Tween(this.getOriginalImage(),{property:'opacity'});},fadeRollOver:function(){this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('over')});this.fx.original.start(0);this.parent.apply(this,arguments);},fadeRollOut:function(){this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('out')});this.fx.original.start(1);this.parent.apply(this,arguments);}});SK.ImageTransition.BaseDurations=new Class({duration:{over:450,out:315}});SK.ImageTransition.BaseTopBottom=new Class({Extends:SK.ImageTransition,Implements:[SK.ImageTransition.BaseDurations],initialize:function(){this.parent.apply(this,arguments);this.fx.rollover=new Fx.Tween(this.getRolloverImage(),{property:'top'});},setStyles:function(){this.top=-this.getHeight();this.getRolloverImage().setStyles({top:this.top,display:'block'});},rollOver:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('over')});this.fx.rollover.start(0);},rollOut:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('out')});this.fx.rollover.start(this.top);}});SK.ImageTransition.BaseBottomTop=new Class({Extends:SK.ImageTransition,Implements:[SK.ImageTransition.BaseDurations],initialize:function(){this.parent.apply(this,arguments);this.fx.rollover=new Fx.Tween(this.getRolloverImage(),{property:'top'});},setStyles:function(){var original=this.getOriginalImage();this.top=-this.getHeight();this.getRolloverImage().setStyles({display:'',top:-this.top});},rollOver:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('over')});this.fx.rollover.start(0);},rollOut:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('out')});this.fx.rollover.start(-this.top);}});SK.ImageTransition.BaseLeftRight=new Class({Extends:SK.ImageTransition,Implements:[SK.ImageTransition.BaseDurations],initialize:function(){this.parent.apply(this,arguments);this.fx.rollover=new Fx.Tween(this.getRolloverImage(),{property:'left'});},setStyles:function(){this.left=-this.getWidth();this.getRolloverImage().setStyles({display:'',left:this.left});this.getContainer().setStyle('white-space','nowrap');},rollOver:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('over')});this.fx.rollover.start(0);},rollOut:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('out')});this.fx.rollover.start(this.left);}});SK.ImageTransition.BaseRightLeft=new Class({Extends:SK.ImageTransition,Implements:[SK.ImageTransition.BaseDurations],initialize:function(){this.parent.apply(this,arguments);this.fx.rollover=new Fx.Tween(this.getRolloverImage(),{property:'left'});},setStyles:function(){this.left=-this.getWidth();this.getRolloverImage().setStyles({display:'',left:-this.left});this.getContainer().setStyle('white-space','nowrap');},rollOver:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('over')});this.fx.rollover.start(0);},rollOut:function(){this.fx.rollover.cancel();this.fx.rollover.setOptions({duration:this.getDuration('out')});this.fx.rollover.start(-this.left);}});SK.ImageTransition.WipeMask=new Class({createMask:function(property_name,styles){this.elements.rollover=new Element('span',{'class':'sk-rollover-image sk-rollover-mask',styles:styles}).inject(this.elements.rollover,'before').grab(this.elements.rollover);this.fx.rollover_mask=new Fx.Tween(this.getRolloverImage(),{property:property_name});}});SK.ImageTransition.WipeTopBottom=new Class({Extends:SK.ImageTransition.BaseBottomTop,Implements:[SK.ImageTransition.WipeMask],initialize:function(){this.parent.apply(this,arguments);this.createMask('top',{top:this.top});},rollOver:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('over')});this.fx.rollover_mask.start(0);},rollOut:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('out')});this.fx.rollover_mask.start(this.top);}});SK.ImageTransition.WipeBottomTop=new Class({Extends:SK.ImageTransition.BaseTopBottom,Implements:[SK.ImageTransition.WipeMask],initialize:function(){this.parent.apply(this,arguments);this.createMask('top',{top:-this.top});},rollOver:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('over')});this.fx.rollover_mask.start(0);},rollOut:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('out')});this.fx.rollover_mask.start(-this.top);}});SK.ImageTransition.WipeLeftRight=new Class({Extends:SK.ImageTransition.BaseRightLeft,Implements:[SK.ImageTransition.WipeMask],initialize:function(){this.parent.apply(this,arguments);this.createMask('left',{left:this.left});},rollOver:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('over')});this.fx.rollover_mask.start(0);},rollOut:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('out')});this.fx.rollover_mask.start(this.left);}});SK.ImageTransition.WipeRightLeft=new Class({Extends:SK.ImageTransition.BaseLeftRight,Implements:[SK.ImageTransition.WipeMask],initialize:function(){this.parent.apply(this,arguments);this.createMask('left',{left:-this.left});},rollOver:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('over')});this.fx.rollover_mask.start(0);},rollOut:function(){this.parent();this.fx.rollover_mask.cancel();this.fx.rollover_mask.setOptions({duration:this.getDuration('out')});this.fx.rollover_mask.start(-this.left);}});SK.ImageTransition.IrisBase=new Class({Extends:SK.ImageTransition,initialize:function(){this.parent.apply(this,arguments);this.getRolloverImage().setStyle('display','');this.createMask();this.fx.mask=new Fx.Morph(this.elements.mask,{fps:31});},createMask:function(image,init_state_is_visible){var dimensions=this.getDimensions();this.mask_dimensions={width:(dimensions.width/Math.sqrt(2))*2,height:(dimensions.height/Math.sqrt(2))*2};this.elements.table=new Element('table',{cellspacing:0,cellpadding:0,border:0,styles:{position:'absolute',width:dimensions.width*3,height:dimensions.height*3,left:-dimensions.width,top:-dimensions.height},html:'<tbody><tr><td align="center"></td></tr></tbody>'}).inject(this.getRolloverImage(),'after');var styles={left:-dimensions.width/2,top:-dimensions.height/2,width:dimensions.width,height:dimensions.height};this.elements.mask=new Element('div',{styles:{position:'relative',width:init_state_is_visible?this.mask_dimensions.width:0,height:init_state_is_visible?this.mask_dimensions.height:0,overflow:'hidden','border-radius':'50%'},html:['<div style="position: absolute; left: 50%; top: 50%;">','<div style="position: relative; width: {width}px; height: {height}px;',' top: {top}px; left: {left}px">','</div>','</div>'].join('').substitute(styles)}).inject(this.elements.table.getElement('td'));this.elements.mask.getElements('div')[1].grab(image);},getMask:function(){return this.elements.mask;},showMask:function(duration){this.fx.mask.cancel();this.fx.mask.setOptions({duration:this.getDuration(duration)});this.fx.mask.start({width:this.mask_dimensions.width,height:this.mask_dimensions.height});},hideMask:function(duration){this.fx.mask.cancel();this.fx.mask.setOptions({duration:this.getDuration(duration)});this.fx.mask.start({width:0,height:0});}});SK.ImageTransition.IrisOut=new Class({Extends:SK.ImageTransition.IrisBase,createMask:function(){this.parent(this.getRolloverImage(),false);},rollOver:function(){this.showMask('over');},rollOut:function(){this.hideMask('out');}});SK.ImageTransition.IrisIn=new Class({Extends:SK.ImageTransition.IrisBase,createMask:function(){this.parent(this.getOriginalImage(),true);},rollOver:function(){this.hideMask('over');},rollOut:function(){this.showMask('out');}});SK.ImageTransition.SlideTopBottom=new Class({Extends:SK.ImageTransition.BaseTopBottom,initialize:function(){this.parent.apply(this,arguments);this.fx.original=new Fx.Tween(this.getOriginalImage(),{property:'top'});},rollOver:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('over')});this.fx.original.start(-this.top);},rollOut:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('out')});this.fx.original.start(0);}});SK.ImageTransition.SlideBottomTop=new Class({Extends:SK.ImageTransition.BaseBottomTop,initialize:function(){this.parent.apply(this,arguments);this.fx.original=new Fx.Tween(this.getOriginalImage(),{property:'top'});},rollOver:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('over')});this.fx.original.start(this.top);},rollOut:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('out')});this.fx.original.start(0);}});SK.ImageTransition.SlideLeftRight=new Class({Extends:SK.ImageTransition.BaseLeftRight,initialize:function(){this.parent.apply(this,arguments);this.fx.original=new Fx.Tween(this.getOriginalImage(),{property:'left'});},rollOver:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('over')});this.fx.original.start(-this.left);},rollOut:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('out')});this.fx.original.start(0);}});SK.ImageTransition.SlideRightLeft=new Class({Extends:SK.ImageTransition.BaseRightLeft,initialize:function(){this.parent.apply(this,arguments);this.fx.original=new Fx.Tween(this.getOriginalImage(),{property:'left'});},rollOver:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('over')});this.fx.original.start(this.left);},rollOut:function(){this.parent();this.fx.original.cancel();this.fx.original.setOptions({duration:this.getDuration('out')});this.fx.original.start(0);}});SK.ImageTransition.MoveUpDissolve=new Class({Extends:SK.ImageTransition.Dissolve,duration:{'over-move':300,'over-fade':150,'out-move':200,'out-fade':100},initialize:function(){this.parent.apply(this,arguments);this.fx.moveup=new Fx.Tween(this.getContainer(),{property:'top',transition:'sine:in'});},setStyles:function(){this.parent();this.getContainer().setStyles({top:0});if((Browser.name==='ie'&&Browser.version<11)&&Browser.version<8){var container=this.getContainer();var margin_left=container.getStyle('margin-left').toInt();container.setStyles({left:margin_left,marginLeft:0,marginRight:container.getStyle('margin-right').toInt()+margin_left});}},getMoveUpDistance:function(){return this.move_up_distance||(this.move_up_distance=(function(){var height=this.getHeight();var distance=Math.round(height*.03);return-(distance<2?2:distance);}.bind(this))());},rollOver:function(){this.cancelAll();this.fx.moveup.addEvent('complete',function(){this.fadeRollOver();}.bind(this));this.fx.moveup.setOptions({duration:this.getDuration('over-move')});this.fx.moveup.start(this.getMoveUpDistance());},rollOut:function(){this.cancelAll();this.fadeRollOut(function(){this.fx.moveup.setOptions({duration:this.getDuration('out-move')});this.fx.moveup.start(0);}.bind(this));},getDuration:function(name){switch(name){case'over':name='over-fade';break;case'out':name='out-fade';break;}
return this.parent(name);}});SK.ImageTransitions={none:SK.ImageTransition,fadein:SK.ImageTransition.FadeIn,dissolve:SK.ImageTransition.Dissolve,slidetopbottom:SK.ImageTransition.SlideTopBottom,slidebottomtop:SK.ImageTransition.SlideBottomTop,slideleftright:SK.ImageTransition.SlideLeftRight,sliderightleft:SK.ImageTransition.SlideRightLeft,irisin:SK.ImageTransition.IrisIn,irisout:SK.ImageTransition.IrisOut,wipetopbottom:SK.ImageTransition.WipeTopBottom,wipebottomtop:SK.ImageTransition.WipeBottomTop,wipeleftright:SK.ImageTransition.WipeLeftRight,wiperightleft:SK.ImageTransition.WipeRightLeft,moveupdissolve:SK.ImageTransition.MoveUpDissolve};


if(typeof(SK)=='undfined')SK={};_$(window).addEvent('load',function(){$$('img').each(function(image){if(SK.RolloverImage.HasRollover(image)){SK.RolloverImage.Init(image);}});});SK.RolloverImage=function(){};SK.RolloverImage.GetProperties=function(attr_value){var props={url:'',transition:'',zoom:''};if(attr_value){var args=JSON.decode(attr_value.substring(attr_value.indexOf('['),attr_value.indexOf(']')+1));props.url=args[0]?args[0].trim():'';props.transition=args[1]?args[1].trim():'';props.zoom=args[3]?JSON.decode(args[3].trim()):'';}
return props;}
SK.RolloverImage.Init=function(image){var element=image.getParent('.sk-rte-image-zoomed')||image;var dimensions=SK.RolloverImage.GetDimensions(element);var attr_value=image.getAttribute('onmouseover');if(((Browser.name==='ie'&&Browser.version<11)&&Browser.version==7)){attr_value=attr_value.toString().replace(/^function[^{]+{/,'').replace(/}$/,'').trim();}
var props=SK.RolloverImage.GetProperties(attr_value);var spacer=new Element('img',{src:'/Shared/Images/space.gif','class':'sk-rollover-spacer',width:dimensions.width,style:'padding-bottom: '+((Browser.name==='ie'&&Browser.version<11)&&Browser.version<8?dimensions.height+'px':SK.Util.toPercent(dimensions.height/dimensions.width))});var transition_wrapper=new Element('span',{'class':'sk-rollover-wrapper sk-rollover-wrapper-transition sk-rollover-mask sk-rollover-stretch'}).inject(element,'before').grab(element);var root_container=new Element('span',{'class':'sk-rollover-wrapper sk-rollover-relative sk-rollover-mask'}).grab(spacer).inject(transition_wrapper,'before').grab(transition_wrapper);var container_styles={margin:element.getStyle('margin'),'float':element.getStyle('float')};if((Browser.name==='ie'&&Browser.version<11)&&Browser.version<9){Object.append(container_styles,{borderTop:element.getStyle('border-top'),borderRight:element.getStyle('border-right'),borderBottom:element.getStyle('border-bottom'),borderLeft:element.getStyle('border-left')});}else{container_styles.border=element.getStyle('border');}
root_container.setStyles(container_styles).setProperty('title',image.getProperty('title'));var border_width=element.getStyle('borderWidth');element.setStyles({margin:0,'float':'none',border:'0 none'});image.removeProperty('title');image.removeProperty('alt');var mo_image=new Element('img',{src:props.url,style:'display: none',border:0}).inject(transition_wrapper);var rollover=mo_image;if(props.zoom){rollover=new Element('span',{'class':'sk-rte-image-zoomed',style:mo_image.getAttribute('style')}).inject(mo_image.addClass('sk-rte-image-zoomimg'),'after').grab(mo_image.setProperty('style','').setStyles(SK.RolloverImage.GetZoomStyles(props.zoom)));}
new SK.ImageTransitions[props.transition]({container:root_container,original:element.addClass('sk-rollover-image sk-rollover-org'),rollover:rollover.addClass('sk-rollover-image sk-rollover-mo')},dimensions);}
SK.RolloverImage.HasRollover=function(image){return image&&image.tagName=='IMG'&&image.onmouseover&&image.getAttribute('onmouseover').toString().indexOf('SK.RolloverImage')>=0;}
SK.RolloverImage.GetDimensions=function(image){if(image.getWidth()){return SK.RolloverImage.GetRealDimensions(image);}
var parent=image.getParent();var previous=image.getPrevious();var styles={position:image.getStyle('position'),left:image.getStyle('left'),top:image.getStyle('top')};image.inject(document.body);var dimensions=SK.RolloverImage.GetRealDimensions(image);if(previous){image.inject(previous,'after');}else{image.inject(parent);}
image.setStyles(styles);return dimensions;}
SK.RolloverImage.GetRealDimensions=function(image){var styles=image.getStyles('width','height');Object.each(styles,function(value,name,styles){styles[name]=parseInt(value,10);});return styles;}
SK.RolloverImage.ConvertToNegative=function(margin){var arr=margin.split(' ');for(var i=0,l=arr.length;i<l;i+=1){if(arr[i].indexOf('-')!==0){arr[i]='-'+arr[i];}}
return arr.join(' ');}
SK.RolloverImage.GetZoomStyles=function(zoom_properties){if(!zoom_properties.zoom_version){return zoom_properties;}
var styles={};for(var name in zoom_properties){if(/_pc$/.test(name)&&!/^real_/.test(name)){styles[name.replace(/_pc$/,'')]=zoom_properties[name];}}
return styles;}


SK.StopPropagationRegistry=['.subNav'];SK.StopPropagationRegistry.getElements=function(){var elements=new Elements([]);this.each(function(selector){var elements=$$(selector);for(var i=0,l=elements.length;i<l;i+=1){if(!this.elements.contains(elements[i])){this.elements.push(elements[i]);}}},{array:this,elements:elements});return elements;}


if((Browser.name==='ie'&&Browser.version<11)&&!window.addEventListener){_$(window).addEvent('domready',function(){$$('table[class]').each(function(table){var data=JSON.decode(table.getProperty('data-properties'));if(!data){return;}
if(data.odd_rows_bgcolor){table.getElements('tr:even').setStyle('background-color',data.odd_rows_bgcolor);}
if(data.even_rows_bgcolor){table.getElements('tr:odd').setStyle('background-color',data.even_rows_bgcolor);}});});}


SK.Applications.Hooks={actions:(function(){var actions={};try{actions=Object.clone(parent.SK.Applications.Hooks.actions);}catch(e){};return actions;})(),filters:(function(){var filters={};try{filters=Object.clone(parent.SK.Applications.Hooks.filters);}catch(e){};return filters;})(),registerHook:function(hook_type,app_id,hook_name,callback,priority){hook_type=hook_type||'actions';priority=priority||10;this[hook_type][app_id]=this[hook_type][app_id]||{};this[hook_type][app_id][hook_name]=this[hook_type][app_id][hook_name]||[];this[hook_type][app_id][hook_name][priority]=this[hook_type][app_id][hook_name][priority]||[];this[hook_type][app_id][hook_name][priority].push(callback);},unregisterHook:function(hook_type,app_id,hook_name,callback,priority){hook_type=hook_type||'actions';priority=priority||10;if(!this[hook_type][app_id]||!this[hook_type][app_id][hook_name]||!this[hook_type][app_id][hook_name][priority]){return;}
this[hook_type][app_id][hook_name][priority].erase(callback);},unregisterHooks:function(hook_type,app_id,hook_name){hook_type=hook_type||'actions';if(!this[hook_type][app_id]||!this[hook_type][app_id][hook_name]){return;}
this[hook_type][app_id][hook_name]=[];},addAction:function(){var args=Array.prototype.slice.call(arguments);args.unshift('actions');this.registerHook.apply(this,args);},addFilter:function(){var args=Array.prototype.slice.call(arguments);args.unshift('filters');this.registerHook.apply(this,args);},removeAction:function(){var args=Array.prototype.slice.call(arguments);args.unshift('actions');this.unregisterHook.apply(this,args);},removeActions:function(){var args=Array.slice(arguments);args.unshift('actions');this.unregisterHooks.apply(this,args);},removeFilter:function(){var args=Array.prototype.slice.call(arguments);args.unshift('filters');this.unregisterHook.apply(this,args);},removeFilters:function(){var args=Array.slice(arguments);args.unshift('filters');this.unregisterHooks.apply(this,args);},executeCallbacks:function(hook_type,app_id,hook_name){hook_type=hook_type||'actions';if(!this[hook_type][app_id]||!this[hook_type][app_id][hook_name]){return Array.prototype.slice.call(arguments,3)[0]||'';}
var args=Array.prototype.slice.call(arguments,3);var callbacks=this[hook_type][app_id][hook_name].clean();var value=args[0];for(var i=0,l=callbacks.length;i<l;i+=1){for(var j=0,jl=callbacks[i].length;j<jl;j+=1){if(hook_type=='filters'){args.splice(0,1,value);}
value=callbacks[i][j].apply(null,args);}}
return value||'';},doAction:function(app_id,hook_name){var args=Array.prototype.slice.call(arguments);args.unshift('actions');this.executeCallbacks.apply(this,args);},applyFilters:function(app_id,hook_name){var args=Array.prototype.slice.call(arguments);args.unshift('filters');return this.executeCallbacks.apply(this,args);}};


SK.Applications.HooksFunctions=new Class({getHookArguments:function(){var args=Array.prototype.slice.call(arguments);args.unshift(this.options.app_id);return args;},getHookRegistry:function(){return this.options.window.SK.Applications.Hooks;},addFilter:function(){this.getHookRegistry().addFilter.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));},removeFilter:function(){this.getHookRegistry().removeFilter.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));},removeFilters:function(){this.getHookRegistry().removeFilters.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));},applyFilters:function(){return this.getHookRegistry().applyFilters.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));},addAction:function(){this.getHookRegistry().addAction.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));},removeAction:function(){this.getHookRegistry().removeAction.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));},removeActions:function(){this.getHookRegistry().removeActions.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));},doAction:function(){this.getHookRegistry().doAction.apply(this.getHookRegistry(),this.getHookArguments.apply(this,arguments));}});


SK.Applications.Plugins={plugins:(function(){var plugins={};try{plugins=Object.append({},parent.SK.Applications.Plugins.plugins);}catch(e){};return plugins;})(),getAll:function(app_id,sort_by,order){var plugins=[];if(!this.plugins[app_id]){return plugins;}
for(var id in this.plugins[app_id].ids){plugins.push(this.plugins[app_id].ids[id]);}
return this.sortPlugins(plugins,sort_by,order);},getByType:function(app_id,type,sort_by,order){if(!this.plugins[app_id]||!this.plugins[app_id].types||!this.plugins[app_id].types[type]){return[];}
return this.sortPlugins([].append(this.plugins[app_id].types[type]),sort_by,order);},sortPlugins:function(plugins,sort_by,order){sort_by=sort_by&&sort_by!='registration'?sort_by:'priority';order=order&&order.toLowerCase()=='desc'?'desc':'asc';return plugins.sort(function(sort_by,order,a,b){return sort_by=='registration'||a[sort_by]==b[sort_by]?0:(order=='asc'&&a[sort_by]>b[sort_by]||order=='desc'&&a[sort_by]<b[sort_by]?1:-1);}.bind(this,sort_by,order));},getByID:function(app_id,id){if(!this.plugins[app_id]||!this.plugins[app_id].ids[id]){return null;}
return Object.append({},this.plugins[app_id].ids[id]);},getByFeatures:function(){alert('Not yet implemented');return[];},register:function(app_id,meta){if(!app_id){alert('SK.Applications.Plugins.register: You need to specify application ID!');return null;}
if(!meta){alert('SK.Applications.Plugins.register: You need to register plugin meta object!');return null;}
if(!meta.id){alert('SK.Applications.Plugins.register: You need to specify plugin ID in the meta object!');return null;}
var plugin=this.getByID(app_id,meta.id);if(plugin){return plugin;}
this.plugins[app_id]=this.plugins[app_id]||{types:{},ids:{}};this.plugins[app_id].types[meta.type]=this.plugins[app_id].types[meta.type]||[];this.plugins[app_id].types[meta.type].push(this.plugins[app_id].ids[meta.id]=Object.append({type:'Other',name:meta.id,priority:1000,features:[],init:{}},meta,{get:function(property){return this[property]||'';}}));return this.plugins[app_id].ids[meta.id];}};


SK.Applications=SK.Applications||{};SK.Applications.PluginInit=new Class({namespace:'',plugins:{},plugins_list:[],drawSelector:function(params){params=Object.append({sort_by:'priority',order:'asc',placeholder:null,selector:{},optional:false,optional_ui:{}},params);params.selector=Object.append({ui:'select',type:'property',layout:'horizontal'},params.selector);params.optional_ui=Object.append({type:'property'},params.optional_ui);var plugins=[];switch(true){case!!params.id:var plugin=SK.Applications.Plugins.getByID(this.options.app_id,params.id);plugin&&plugins.push(plugin);params.selector.name||(params.selector.name=params.id);params.optional_ui.name||(params.optional_ui.name=params.id);break;case!!params.type:plugins=SK.Applications.Plugins.getByType(this.options.app_id,params.type,params.sort_by,params.order);params.selector.name||(params.selector.name=params.type);params.optional_ui.name||(params.optional_ui.name=params.type);break;case!!params.features:plugins=SK.Applications.Plugins.getByFeatures(this.options.app_id,params.features,params.sort_by,params.order);params.selector.name||(params.selector.name=params.features.join('-'));params.optional_ui.name||(params.optional_ui.name=params.features.join('-'));break;}
var placeholder=_$(params.placeholder)||this.options.placeholder.getElement(params.placeholder)||$$(params.placeholder)[0]||this.newElement('div').inject(this.options.placeholder);var ui_placeholder=this.newElement('div',{html:['<div>','<div class="label"><label>',params.selector.label,'</label></div>','<div class="field"></div>','</div>'].join(' ')}).inject(placeholder);var name=params.selector.type=='config'?this.getPrefix('config')+params.selector.name:this.getNamespace(params.selector.name,this.getPrefix('property'));var ui;switch(params.selector.ui){case'select':var id=this.generateID();ui=this.newElement('select',{id:id,html:(function(plugins){var options=[];for(var i=0,l=plugins.length;i<l;i+=1){options.push('<option value="',plugins[i].id,'">',plugins[i].name,'</option>');}
return options.join('');})(plugins),name:name,events:{change:this.onSelectorChange.bind(this,ui_placeholder,name)}}).inject(ui_placeholder.getElement('.field'));ui_placeholder.getElement('label').set('for',id);if(params.optional){this.newElement('option',{text:params.optional_ui.label||'None',value:-1}).inject(ui,'top');}
break;case'checkboxes':case'radios':ui=this.newElements();var type=({checkboxes:'checkbox',radios:'radio'})[params.selector.ui];var wrapper=ui_placeholder.getElement('div').clone(true);wrapper.getElement('label').set('text','');for(var i=0,l=plugins.length;i<l;i+=1){var id=this.generateID(name+plugins[i].id);var field_placeholder=(params.selector.layout=='vertical'?(!i?ui_placeholder.getElement('div'):wrapper.clone(true).inject(ui_placeholder)):ui_placeholder).getElement('.field');var input=this.newElement('input',{id:id,type:type,name:name,value:plugins[i].id}).inject(field_placeholder);ui.push(input);this.newElement('label',{'for':id,text:plugins[i].name}).inject(field_placeholder);var subplugins_placeholder=params.selector.layout=='vertical'?this.newElement('div').inject(input.getParent(),'after'):ui_placeholder;input.addEvent('click',this.onSelectorChange.bind(this,subplugins_placeholder,name));Object.append(input,{getValue:function(){var value=Elements.getValue(this.getWindow().$$('input[name='+this.name+']')).filter(function(item){return!!item;});return this.type=='radio'?value.pick()||0:value;},setValue:function(value){var elements=this.getWindow().$$('input[name='+this.name+']');for(var i=0,l=elements.length;i<l;i+=1){if(value&&value.indexOf(elements[i].value)>-1||value==elements[i].value){elements[i].checked=true;continue;}
elements[i].checked=false;}
return this;}});}
if(params.optional){var id=this.generateID();this.newElement('div',{html:['<div>','<div class="label">','<label for="',id,'">',params.optional_ui.label,'</label>','</div>','<div class="field">','<input type="checkbox" name="',this.getNamespace(params.optional_ui.name,this.getPrefix('property')),'" id="',id,'" value="1">','</div>','</div>'].join('')}).inject(ui_placeholder,'before').getElement('input').addEvent('click',function(e){this.setStyle('display',e.target.checked?'':'none');}.bind(ui_placeholder)).setValue(params.optional_ui.value);}
break;}
ui.setValue(params.selector.value);return ui;},initPlugin:function(params){var id=params.id,placeholder=this.newElement('div').inject(params.placeholder||this.options.placeholder),callback_ok=params.callback_ok||function(){},callback_failure=params.callback_failure||function(){},namespace=this.getNamespace();var plugin=SK.Applications.Plugins.getByID(this.options.app_id,id);if(!this.plugins[id]){var options=Object.append({},this.options,{plugin_id:id,owner:{plugin_meta:this.options.plugin_id?Object.append(SK.Applications.Plugins.getByID(this.options.app_id,this.options.plugin_id),{bindings:undefined}):undefined},configuration:this.configuration,namespace:this.getNamespace(id),placeholder:placeholder});var binding=this.options.window.SK.Applications.Plugin.GetBinding(this.options.binding_item_id,plugin.bindings);if(!binding||!binding.init){return null;}
var instance=this.plugins[id]=new(binding.init)(options);binding.source&&instance.queueHtmlFiles({name:'binding_source',url:binding.source});var context={id:id};instance.addEvents({load:function(id,placeholder,namespace,instance,context,options){var template=instance.getTemplate('binding_source');if(!template){return;}
context.placeholder=this.newElement('div',{'class':namespace+' '+this.getNamespace(id),html:new SK.TemplateEngine(template,Object.append({},options,{PropertyName:function(name){return this.getNamespace(name,this.getPrefix('property'));}.bind(instance)}))}).inject(placeholder);}.bind(this,id,placeholder,namespace,instance,context,options),init:function(context,callback_ok,env){context.placeholder&&this.options.window.SK.Applications.Hooks.doAction(this.options.app_id,'init-plugin',context.placeholder);callback_ok(env);this.doAction('activate-plugin',context.id,this.plugins[context.id]);}.bind(this,context,callback_ok),initFail:callback_failure});instance.init();}else{this.doAction('activate-plugin',id,this.plugins[id]);}
return this.plugins[id];},onSelectorChange:function(placeholder,name,e){var element=_$(e.target);var type=element.get('type');var selected_id=element.value;var common_class='.'+this.getNamespace();var unique_class='.'+this.getNamespace(selected_id);if(type==='checkbox'){placeholder.getElements(unique_class).setStyle('display',element.checked?'':'none');}else{placeholder.getElements(common_class).setStyle('display','none').filter(unique_class).setStyle('display','');}
if(selected_id!=-1&&!this.getPluginInstance(selected_id)){this.initPlugin({id:selected_id,placeholder:placeholder,namespace:name});}else{this.doAction('activate-plugin',selected_id,this.getPluginInstance(selected_id));}},getPluginInstance:function(id){return this.plugins[id];},getNamespace:function(name,prefix){return(prefix||'')+this.namespace+(name?'_'+name:'');},setNamespace:function(namespace){this.namespace=namespace||'';},getPrefix:function(name){return(this.options.prefixes||{})[name]||'';},newElement:function(tag,options){return this.options.window.document.newElement(tag,options);},newElements:function(elements){return this.options.window.$$(elements);},generateID:function(prefix){return(prefix||'id-')+Math.round(Math.random()*1000000);}});


SK.Applications.Plugin=new Class({Implements:[Events,Options,SK.Applications.PluginInit,SK.Applications.HooksFunctions],resource_files:{js:[],css:[],html:[]},columns:[],databases:[],templates:{},options:{},configuration:{},initialize:function(options){if(!options||!options.properties||!options.configuration){this.logError('SK Applications Platform: You need to pass environment');}
this.setOptions(options);this.configuration=options.configuration;this.options.configuration=JSON.decode(SK.Util.deserializeMulti(JSON.encode(options.configuration)));this.setNamespace(options.namespace);},init:function(){this.fireEvent('beforeInit',[this.options]);new SK.Async([function(async){this.loadResourceFiles(async.ready.bind(async),async.failure.bind(async));}.bind(this),function(async){this.setupDB(async.ready.bind(async),async.failure.bind(async));}.bind(this)],function(){this.logInfo('Plugin init successfully!');this.fireEvent('init',[this.options]);this.fireEvent('afterInit',[this.options]);}.bind(this),function(message){this.logError('FAILED to init Plugin!',message||'');this.fireEvent('failInit');}.bind(this)).run();},logInfo:function(){window.console&&console.info&&(console.info.apply?console.info.apply(console,arguments):console.info([].append(arguments)));},logError:function(){window.console&&console.error&&(console.error.apply?console.error.apply(console,arguments):console.error([].append(arguments)));},loadResourceFiles:function(callback_ok,callback_failure){new SK.Async([this.loadJavaScriptFiles.bind(this),this.loadCssFiles.bind(this),this.loadHtmlFiles.bind(this)],function(callback_ok){this.logInfo('Resources loaded successfully!');this.fireEvent('onLoad',[this.options]);(callback_ok||function(){})(this.options);}.bind(this,callback_ok),callback_failure||function(){}).run();},loadJavaScriptFiles:function(async){var fns=[];var files=this.resource_files.js;this.resource_files.js=[];for(var i=0,l=files.length;i<l;i+=1){var file=files[i];if(!file.url){if(typeOf(file)!=='string'){continue;}
file.url=file;}
var script=new Element('script',{src:file.url});fns.push(function(script,file,async){script.addEventListener?script.addEventListener('load',async.ready.bind(async),false):script.onreadystatechange=function(script,async){if(['loaded','complete'].contains(script.readyState)){async.ready();}}.bind(null,script,async);script.inject((this.options.window||window).document.body);}.bind(this,script,file));}
this.runAsync(fns,async);},loadCssFiles:function(async){var fns=[];var files=this.resource_files.css;this.resource_files.css=[];for(var i=0,l=files.length;i<l;i+=1){var file=files[i];if(!file.url){if(typeOf(file)!=='string'){continue;}
file.url=file;}
var style=new Element('link',{type:'text/css',rel:'stylesheet',href:file.url});if(file.classname){fns.push(function(async){var div=new Element('div',{'class':file.classname,style:'position: absolute; left: -3000px; top: -3000px;'}).inject((this.options.window||window).document.body);var timer=setInterval(function(){if(div.getHeight()){clearInterval(timer);typeof(file.onload)=='function'&&file.onload();async.ready();}},13);});}
style.inject((this.options.window||window).document.body);}
this.runAsync(fns,async);},loadHtmlFiles:function(async){var fns=[];var files=this.resource_files.html;this.resource_files.html=[];for(var i=0,l=files.length;i<l;i+=1){var file=files[i];if(!file.name||!file.url){continue;}
fns.push(function(file,async){new SK.API(this.options.session_id,{encoding:SK.Util.getEncoding()}).execute('utils.get_file',{path:file.url},function(async,file,success,message,data){if(!success){alert(message);return async&&async.failure(message);}
this.templates[file.name]=data.content;typeof(file.onload)=='function'&&file.onload();return async&&async.ready();}.bind(this,async,file));}.bind(this,file));}
this.runAsync(fns,async);},runAsync:function(fns,async){if(!fns.length){async.ready();return;}
new SK.Async(fns,async.ready.bind(async),async.failure.bind(async)).run();},queueResourceFiles:function(type,files){this.resource_files[type].append(Array.from(files));},queueJavaScriptFiles:function(files){this.queueResourceFiles('js',files);},queueCssFiles:function(files){this.queueResourceFiles('css',files);},queueHtmlFiles:function(files){this.queueResourceFiles('html',files);},getTemplate:function(name){return this.templates[name];},setTemplate:function(name,html){this.templates[name]=html;},getDatabase:function(name){return name?(this.options.configuration.databases[name]||null):this.getDefaultDatabase();},getDefaultDatabase:function(){for(var database in this.options.configuration.databases);return this.options.configuration.databases[this.options.configuration.default_db]||database;},getColumn:function(name,db_name){var database=this.getDatabase(db_name);if(!database||!database.columns||!database.columns.length){return null;}
for(var i=0,l=database.columns.length;i<l;i+=1){if(database.columns[i].name==name){return database.columns[i];}}
return null;},setupDB:function(callback_ok,callback_failure){for(var i=0,l=this.databases.length;i<l;i+=1){if(this.options.configuration.databases[this.databases[i].database.name]){this.databases.splice(i,1);i-=1;l-=1;}}
var database=this.getDefaultDatabase();for(var i=0,l=this.columns.length;i<l;i+=1){for(var j=0,jl=database.columns.length;j<jl;j+=1){if(this.columns[i].name==database.columns[j].name){this.columns.splice(i,1);i-=1;l-=1;break;}}}
if(!this.databases.length&&!this.columns.length){callback_ok();return;}
var fns=[];for(var i=0,l=this.databases.length;i<l;i+=1){fns.push(function(i,async){new SK.DB.Setup.Serialized(this.options.session_id,this.databases[i],function(async,db){this.configuration.databases[db.database.name]=db;this.options.configuration.databases[db.database.name]=JSON.decode(SK.Util.deserializeMulti(JSON.encode(db)));async.ready();}.bind(this,async),async.failure.bind(async)).create();}.bind(this,i));}
for(var i=0,l=this.columns.length;i<l;i+=1){fns.push(function(i,database,async){new SK.API().execute('db.column.add',Object.append({db_id:database.database.id},this.columns[i]),function(async,database,success,message,column){if(!success){return async.failure(message);}
database.columns.push(column);this.configuration.databases[database.database.name].columns.push(Object.append({},column,{id:SK.Util.serializeColId(column.id),db_id:SK.Util.serializeDBId(column.db_id)}));return async.ready();}.bind(this,async,database));}.bind(this,i,database));}
new SK.Async(fns,this.saveConfig.bind(this,callback_ok,callback_failure),callback_failure||function(){}).run();},saveConfig:function(callback_ok,callback_failure){new SK.App.Config(this.options).set(this.configuration,callback_ok||function(){},callback_failure||function(){});},getAccessToken:function(name,db_name){var db=this.getDatabase(db_name);if(!db||!db.tokens||!db.tokens.length){return'';}
for(var i=0,l=db.tokens.length;i<l;i+=1){if(db.tokens[i].name===name){return db.tokens[i].token;}}
return db.tokens.getLast().token||'';},getProperty:function(name){return this.options.properties[this.getNamespace(name)]||'';},getProperties:function(){var properties={};var namespace=this.getNamespace('|').replace(/\|$/,'');for(var namespaced_name in this.options.properties){if(namespaced_name.indexOf(namespace)>-1){properties[namespaced_name.replace(namespace,'')]=this.options.properties[namespaced_name];}}
return properties;}});


SK.Applications.Display=new Class({Implements:[Events,Options,SK.Applications.PluginInit,SK.Applications.HooksFunctions],options:{window:window},configuration:{},initialize:function(options){this.configuration=options.configuration;this.setOptions(options);this.options.configuration=JSON.decode(SK.Util.deserializeMulti(JSON.encode(options.configuration)))||{};this.options.placeholder=_$(this.options.placeholder);this.options.window=window;SK.Applications.Plugin.GetBinding=this.getBinding.bind(this);},getBinding:function(binding_item_id,bindings){var binding;for(var i=0,l=bindings.add_content.length;i<l;i+=1){if(bindings.add_content[i].id==binding_item_id){return bindings.add_content[i][SK.Singletons.env.get('admin_mode')?'display_admin':'display_user'];}}
return null;},hideZeroFootprint:function(){this.options.placeholder.getParent().addClass('sk-remove-zero-footprint');},showZeroFootprint:function(){this.options.placeholder.getParent().removeClass('sk-remove-zero-footprint');}});


if(typeof(SK)=='undefined')var SK={};if(typeof(SK.CallToActionButton)=='undefined')SK.CallToActionButton={};if(typeof(SK.CallToActionButton.Animations)=='undefined')SK.CallToActionButton.Animations={};


SK.CallToActionButton.Animations.Registry={registry:{transitions:{},highlights:{}},register:function(type,name,constructor){this.registry[type][name]=constructor;},get:function(type,name){return this.registry[type][name];}};


SK.CallToActionButton.Animations.Queue={queue:{transitions:[],highlights:[]},get:function(type){return this.queue[type];},add:function(type,id,name){this.queue[type].push({id:id,type:type,name:name,init:function(){var constructor=SK.CallToActionButton.Animations.Registry.get(this.type,this.name);return new constructor(_$(this.id));}});},getTransitions:function(){return this.get('transitions');},getHighlights:function(){return this.get('highlights');},addTransition:function(id,name){this.add('transitions',id,name);},addHighlight:function(id,name){this.add('highlights',id,name);}};


SK.CallToActionButton.Animations.Utils=new Class({constants:{CSS_PREFIX:'cta-'},elements:{},fx:{},setElements:function(elements){Object.append(this.elements,elements||{});},createElements:function(){},getElement:function(name){name=name||'button';return this.elements[name]||(this.elements[name]=this.getElement('button').getElement('.'+this.constants.CSS_PREFIX+name.split('.').join('.cta-')));},getElements:function(){var elements=new Elements([]);for(var i=0,l=arguments.length;i<l;i+=1){var element=this.getElement(arguments[i]);if(element){elements.push(element);}}
return elements;},setStyles:function(){},initFx:function(){},init:function(){},onRollOver:function(){},onRollOut:function(){},initEvents:function(){if(!SK.Util.isTouchDevice()){this.getElement('button').addEvents({mouseenter:this.onRollOver.bind(this),mouseleave:this.onRollOut.bind(this)});}},getElementWidth:function(element){var width=element.getWidth()-parseInt(element.getStyle('padding-left'),10)-
parseInt(element.getStyle('padding-right'),10)-
parseInt(element.getStyle('border-left-width'),10)-
parseInt(element.getStyle('border-right-width'),10);return width>0?width:0;},getElementHeight:function(element){var height=element.getHeight()-parseInt(element.getStyle('padding-top'),10)-
parseInt(element.getStyle('padding-bottom'),10)-
parseInt(element.getStyle('border-top-width'),10)-
parseInt(element.getStyle('border-bottom-width'),10);return height>0?height:0;},isElementEmpty:function(elem){if(typeOf(elem)=='string'){elem=this.getElement(elem);}
return!(elem.get('text')||elem.getElement('img'));},fixPngIE:function(img){if(!img){return;}
var src=img.getProperty('src');if(/\.png$/i.test(src)){new Element('div',{styles:{width:img.getWidth(),height:img.getHeight(),filter:'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\'{src}\', sizingMethod=\'scale\')'.substitute({src:src})}}).replaces(img);}}});


_$(window).addEvent('load',function(){new SK.CallToActionButton.Display();});SK.CallToActionButton.Display=new Class({resources:{transitions:'/Shell/CallToActionButtons/Scripts/Animations/fat_transitions.js',highlights:'/Shell/CallToActionButtons/Scripts/Animations/fat_highlights.js'},initialize:function(){this.initTransitions();this.initHighlights();},initTransitions:function(){this.processQueue('transitions',SK.CallToActionButton.Animations.Queue.getTransitions());},initHighlights:function(){this.processQueue('highlights',SK.CallToActionButton.Animations.Queue.getHighlights());},processQueue:function(type,queue){if(queue.length){this.loadResource(type,this.initQueue.pass([queue],this));}},loadResource:function(type,callback){var script=new Element('script',{src:this.resources[type]});if((Browser.name==='ie'&&Browser.version<11)&&!window.addEventListener){script.onreadystatechange=function(){if(script.readyState=='loaded'||script.readyState=='complete'){callback();}}}else{script.addEventListener('load',callback,false);}
script.inject($$('head')[0]);},initQueue:function(queue){queue.each(function(item){item.init();});}});


SK.CallToActionButton.GetColorTheme=function(index,doc){index=index||0;doc=doc||document;if(!this.themes[doc]){this.themes[doc]=new Array(3);}
if(!this.themes[doc][index]){var temp_cta=new Element('span',{'class':'cta-button cta-custom-color-'+index,html:'<span class="cta-wrap cta-body"><span class="cta-body cta-normal"></span></span>',style:'display: none'}).inject(document.body);var bgr_normal=temp_cta.getElement('.cta-normal');var bgcolor=bgr_normal.getStyle('background-color').trim().replace('transparent','')||temp_cta.getStyle('background-color').trim().replace('transparent','');var bgimage=bgr_normal.getStyle('background-image').trim().replace('none','')||temp_cta.getStyle('background-image').trim().replace('none','');var result=[];if(bgcolor){result.push(bgcolor);}
if(bgimage){result.push(bgimage);}
this.themes[doc][index]=result.join(' ');temp_cta.destroy();}
return this.themes[doc][index];}.bind({themes:{}});

