function AjaxSuggestion(){return this}AjaxSuggestion.elem=0;AjaxSuggestion.selected=-1;AjaxSuggestion.isStopped=false;AjaxSuggestion.init=function(A){this.elem=A;A.attr("autocomplete","off");A.keydown(function(B){if(B.keyCode==9){$(".suggest").hide()}});A.keyup(function(B){if(B.keyCode==27){$(".suggest").hide();return false}if(!AjaxSuggestion.popupShown()&&(B.keyCode==38||B.keyCode==40)){AjaxSuggestion.loadSuggestions();return false}if(B.keyCode==38){AjaxSuggestion.moveUp();return false}if(B.keyCode==40){AjaxSuggestion.moveDown();return false}if(B.keyCode==32){AjaxSuggestion.selected=-1}if(AjaxSuggestion.popupShown()&&B.keyCode==13&&AjaxSuggestion.selected>=0){if(B.preventDefault){B.preventDefault()}else{B.returnValue=false}if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}AjaxSuggestion.chooseSearchTypeAndDoIt(A.val());return false}AjaxSuggestion.startTimer()});A.keypress(AjaxSuggestion.preventDefaultForArrowKeys);A.keyup(AjaxSuggestion.preventDefaultForArrowKeys)};AjaxSuggestion.chooseSearchTypeAndDoIt=function(B){var A=$("body");if(A.hasClass("jsMyAccount")){doOwnAccountSearch(B)}else{if(A.hasClass("searchPage")){var C=$(".jsSearchViewCode").val();$(".jsSearchSuggestedTerm").val(B);doSearch(C)}else{if(A.hasClass("mobile")){searchInputElement.val(B);searchInputElement.closest("form").submit()}else{doHeaderSearch(B)}}}AjaxSuggestion.enableSuggestionsJScount()};AjaxSuggestion.preventDefaultForArrowKeys=function(A){var D=A.keyCode;var C=D==38;var B=D==40;AjaxSuggestion.isStopped=(D==13);if((!A.ctrlKey&&!A.metaKey)&&(C||B)){if(A.preventDefault){A.preventDefault()}else{A.returnValue=false}if(A.stopPropagation){A.stopPropagation()}else{A.cancelBubble=true}return false}};AjaxSuggestion.highlightSelected=function(){if(AjaxSuggestion.selected>=0){var A=$("#sugg"+AjaxSuggestion.selected);A.addClass("hovered");AjaxSuggestion.elem.val(AjaxSuggestion.normalizeQueryString(A))}};AjaxSuggestion.moveUp=function(){$(".suggestAnchor").removeClass("hovered");if(AjaxSuggestion.selected<=0){AjaxSuggestion.selected=AjaxSuggestion.lastIdx}else{AjaxSuggestion.selected--}AjaxSuggestion.highlightSelected()};AjaxSuggestion.moveDown=function(){$(".suggestAnchor").removeClass("hovered");if(AjaxSuggestion.selected>=AjaxSuggestion.lastIdx){AjaxSuggestion.selected=0}else{AjaxSuggestion.selected++}AjaxSuggestion.highlightSelected()};AjaxSuggestion.timeOut=0;AjaxSuggestion.startTimer=function(){if(AjaxSuggestion.timeOut){clearTimeout(AjaxSuggestion.timeOut)}this.timeOut=setTimeout(AjaxSuggestion.loadSuggestions,0)};AjaxSuggestion.lastIdx=-1;AjaxSuggestion.popupShown=function(){return $(".suggest").is(":visible")};AjaxSuggestion.loadSuggestions=function(){if(AjaxSuggestion.timeOut){clearTimeout(AjaxSuggestion.timeOut)}if(AjaxSuggestion.isStopped){return }var A=AjaxSuggestion.elem.val().replace(/\s{2,}/g," ").replace(/^[\s\u00A0][\s\u00A0]*/,"");if(A==""){$(".suggest").hide();return }$.get("//"+Config.suggestionsDomain+"/web/rest/v1_1/suggestions",{query:A,limit:10},function(D){var C=$(".suggest");if(!!D&&!!D.suggestions&&D.suggestions.length>0){var B="";$.each(D.suggestions,function(E,G){var F=G.suggestion.substring(A.length);B+="<li><div class='suggestAnchor' id='sugg"+E+"'><span>"+A+"</span><b>"+F+"</b></div></li>";AjaxSuggestion.lastIdx=E});$(C).find("ul").html(B);$(C).ready(function(){var E=$(".suggestAnchor");E.click(function(){AjaxSuggestion.chooseSearchTypeAndDoIt(AjaxSuggestion.normalizeQueryString($(this)))});E.hover(function(){$(".suggestAnchor").removeClass("hovered");$(this).addClass("hovered");AjaxSuggestion.selected=-1})});$(C).show()}else{$(C).hide();$(C).find("ul").html("")}})};AjaxSuggestion.searchesRelatedTo=function(){var A=$(".jsRelatedSearchesBlock");var B=AjaxSuggestion.elem.val().replace(/\s{2,}/g," ").replace(/^[\s\u00A0][\s\u00A0]*/,"");if(B==""||!A.length){return }var C=$(".jsRelatedSearchesLinks",A);$.get("//"+Config.suggestionsDomain+"/web/rest/v1_1/suggestions",{query:B,limit:10},function(G){if(!!G&&!!G.suggestions&&G.suggestions.length>0){var J=G.suggestions;if(!J.length){return }var F=$(".jsRelatedSearchesColumn",C);if(!F.length){return }var H=0;var E=$(".jsRelatedSearchesClone",A);var D=$(".jsSearchCategory").val();var L=searchUris[(D=="")?"files":D].uriQuery;while(H<J.length&&H<8){var I=J[H].suggestion.indexOf(B);var M=J[H].suggestion;if(I<=0){M=B+"<strong>"+M.substring(B.length)+"</strong>"}else{M="<strong>"+M.substring(0,I)+"</strong>"+B+"<strong>"+M.substring(I+B.length)+"</strong>"}var K=E.clone();K.find("a").attr("href",L+"/"+Utils.getSearchName(J[H].suggestion)+"?suggested").html(M);$(F[H%F.length]).append(K);H++}if(J.length<=8){$(".jsRelatedSearchesMoreLink").hide()}A.show()}})};AjaxSuggestion.normalizeQueryString=function(A){return $(A).find("span").html()+$(A).find("b").html()};AjaxSuggestion.hidePopup=function(){$(".suggest").hide();$(".suggest ul").html("");AjaxSuggestion.selected=-1};AjaxSuggestion.enableSuggestionsJScount=function(){$("body").append("<img src='//www.jscount.com/a/2012/53b90014/z?ref="+escape(document.referrer)+"&url="+escape(document.URL)+"&rand="+Math.random()+"' width=1 height=1 alt='' style='display:none'>")};$(function(){$(document).click(AjaxSuggestion.hidePopup);AjaxSuggestion.searchesRelatedTo()});