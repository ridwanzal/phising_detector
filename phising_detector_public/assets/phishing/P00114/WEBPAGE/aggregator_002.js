YUI.add("ModalBehavior_js",function(B){var A=function(C){A.superclass.constructor.apply(this,arguments)};A.NAME="ModalWindow";A.NS="modal";A.ATTRS={mask:{value:true,validator:B.Lang.isBoolean},CENTERED:{value:true}};A.CLASSES={modal:B.ClassNameManager.getClassName("overlay","modal"),mask:B.ClassNameManager.getClassName("overlay","mask"),hasClose:B.ClassNameManager.getClassName("overlay","close")};B.extend(A,B.Plugin.Base,{_maskNode:null,initializer:function(C){this.get("host").set("centered",this.get("CENTERED"));this.doAfter("renderUI",this.renderUI);this.doAfter("bindUI",this.bindUI);this.doAfter("syncUI",this.syncUI);this.doAfter("show",function(){setTimeout(function(){B.one(".topFocus").focus()},100)});if(this.get("host").get("rendered")){this.renderUI();this.bindUI();this.syncUI()}},destructor:function(){if(this._maskNode){this._maskNode.remove(true)}this.get("host").get("boundingBox").removeClass(A.CLASSES.modal)},renderUI:function(){this._maskNode=B.Node.create("<div></div>");this._maskNode.addClass(A.CLASSES.mask);this._focusUnits();this.get("host").get("boundingBox").addClass(A.CLASSES.modal)},bindUI:function(){},syncUI:function(){var C=this.get("host");this._uiSetMask(this.get("mask"));if(C.get("visible")===true){C.get("boundingBox").focus()}},mask:function(){this.set("mask",true)},unmask:function(){this.set("mask",false)},_focusUnits:function(){var C=this;this.topNode=this.get("host").get("srcNode").prepend('<span tabindex="0" class="topFocus focusUnit">top of modal window</span>');this.preTopFocus=this.get("host").get("srcNode").prepend('<span tabindex="0"  class="preTopFocus focusUnit">start of modal content</span>');this.bottomNode=this.get("host").get("srcNode").appendChild('<span tabindex="0" class="bottomFocus focusUnit">end of modal content</span>');this.bottomNode.on("blur",function(D){B.one(".topFocus").focus()});B.one(".preTopFocus").on("focus",function(D){B.one(".topFocus").focus()})},_uiSetMask:function(C){var D=this.get("host").get("boundingBox");if("mask"){D.append(this._maskNode);D.get("children").removeClass("yui3-overlay-hidden")}else{if(this._maskNode.get("parentNode")===D){this._maskNode.remove()}}}});B.namespace("Plugin").ModalWindow=A},"",{requires:["overlay","plugin"]});


