var PopupModule={type:{error:"confirmErrorPopup",trash:"confirmDeletePopup",wait:"bgTaskWaitPopup"},popupWithButtons:function(D){var E=$($("#confirmPopup").clone());var F=$(".jsPopupBody",E);var G=D.type||"simple";if(!PopupModule.type.hasOwnProperty(G)){G="simple"}G=G.toLowerCase();if(G=="simple"){$(".jsConfirmMsg",F).remove();F.append(D.content)}else{F.addClass(PopupModule.type[G]);var C=F.find(".jsConfirmMsg");D.useHtml?C.html(D.content):C.text(D.content)}D.confirmButtonText&&E.find(".jsConfirmOk").text(D.confirmButtonText);if(!D.buttonsType){E.find(".jsClose").hide()}else{D.cancelButtonText&&E.find(".jsClose").text(D.cancelButtonText)}var H=function(J){if(J.which==13){if(D.buttonsType){D.confirmCallback&&D.confirmCallback()}A.closePopup()}};var B=function(){D.cancelCallback&&D.cancelCallback();$("body").unbind("keydown",H)};var I=D.title||(D.type=="error"?$(".jsErrorDefaultTitle").val():$(".jsInfoDefaultTitle").val());var A=PopupModule.popup({title:I,element:E,afterClose:B,closeOnClickOnOutsideArea:true,notCloseOthers:D.notCloseOthers});if(!D.buttonsType){$(".jsConfirmOk",A).click(A.closePopup)}else{$(".jsConfirmOk",A).click(function(){D.confirmCallback&&D.confirmCallback();A.closePopup()})}$("body").keydown(H);return A},popup:function(E){if(!E.notCloseOthers){$(".p_window").remove();$(".p_overlay").remove()}var A=E.closeButton!==false?"<a class='close jsClose'></a>":"";var B=$('<div class="p_window"><div class="ii"><div class="hh"><span id="accountPopupTitle"></span>'+A+"</div><div class='cc'>"+(E.content?E.content:"")+'<div class="clear"></div></div></div></div>');if(E.element){if(E.insertElement){B.find(".cc").html("").append(E.element)}else{B.find(".cc").html("").append(E.element.html())}}var D=$('<div class="p_overlay"></div>');if(E.notCloseOthers&&$("body .p_window:first").length){$("body .p_window:first").after(D,B)}else{$("body").prepend(D,B)}B.find(".hh").width(B.outerWidth(true)-52).addClass("paddingR10");B.find("#accountPopupTitle").html(E.title);B.css({"visibility":"visible","display":"block"});B.calculatePosition=function(){var I=$(window).height()/2;var H=$(window).width()/2;var G=B.height()/2;var F=B.width()/2;B.css({"top":"50%","left":"50%","margin-left":"-"+F+"px","margin-top":"-"+G+"px"});if(G>I){B.css({"top":"0","margin-top":"0","position":"absolute"})}};B.calculatePosition();$(window).resize(B.calculatePosition);var C=function(F){if(F.which==27){B.closePopup()}};if(E.closeButton!==false){$("body").keydown(C)}B.closePopup=function(){$("body").unbind("keydown",C);if(E.onClose&&!E.onClose()){return }B.remove();D.remove();if(E.afterClose){E.afterClose()}};B.setTitle=function(F){B.find("#accountPopupTitle").html(F)};B.find(".jsClose").click(B.closePopup);if(E.closeOnClickOnOutsideArea){D.click(B.closePopup)}B.show();if(E.loadingDiv){B.showLoading=function(){$("#"+E.loadingDiv).show()};B.hideLoading=function(){$("#"+E.loadingDiv).hide()};B.showLoading()}if(typeof attachTips!="undefined"){attachTips(true)}$.fn.placeholder&&B.find(".jsDynamicPlaceholder[placeholder]").placeholder();return B}};