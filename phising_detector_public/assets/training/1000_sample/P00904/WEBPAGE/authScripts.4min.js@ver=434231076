Authenticate={};(function(A){A.fn.loginForm=function(){return this.each(function(){var F=A(this);var E=A(".jsInputLogin",F);var B=A(".jsInputPassword",F);var C=A(".jsErrorPlace",F).hide();var D=A(".capsWarning",F).hide();var G=false;E.add(B).keydown(function(){if(event.keyCode==13){F.submit();return false}});F.submit(function(){if(G){return true}var H=E.val();var I=B.val();C.text("").hide();A.ajax({type:"get",url:Config.mainSiteUrlHttpsPath+"web/login/validate",data:{login:H,password:I},dataType:"jsonp",success:function(J){G=J.success;if(!G){C.text(J.errorMessage).show()}else{F.submit()}},error:function(J){G=true;F.submit()}});return false});B.caps(function(H){H?D.slideDown("slow"):D.slideUp("slow")})})}}(jQuery));(function(){var C="#postAuthenticate=";var D={};Authenticate.showPopup=function(E){E=$.extend({returnTo:null,isSignUp:false,title:"",promoCouponCode:null,postAuthenticateParams:null},E);var I={};if(E.postAuthenticateParams&&E.postAuthenticateParams.eventName){if(!E.returnTo){E.returnTo=document.location.href}var H=JSON.stringify(E.postAuthenticateParams);var F=encodeURIComponent(H).replace(/'/g,"%27");E.returnTo+=C+F}if(E.returnTo){I.returnTo=encodeURIComponent(E.returnTo)}if(E.promoCouponCode){I.promoCouponCode=E.promoCouponCode}$("body").css("cursor","wait");$.get("/authPopup.jsp",I,function(K){$("body").css("cursor","");K=$("<div/>").html(K);var J=PopupModule.popup({title:$(".jsAuthTitle",K).val(),element:K});G(J,E.isSignUp)});function G(J,L){$("form.jsLoginForm",J).loginForm();$("#loginSide",J).bind("click focus",function(){$(this).animate({width:"298px"},400);$("#signupSide").animate({width:"198px"},400)});$("#signupSide",J).bind("click focus",function(){$(this).animate({width:"298px"},400);$("#loginSide").animate({width:"198px"},400)});var K=L?$("#signupEmailField, #signupPassField, #signupPassFieldRepeat"):$("#loginfield, #passfield");K.focusP();K.click();K=L?$("#signupEmailField"):$("#loginfield");K.focusP()}};Authenticate.addPostAuthenticateListener=function(E,F){Events.addListener(E,F)};Authenticate.isPostAuthentication=function(E){return !!D[E]};function A(){var K=document.location.hash;var G=K.indexOf(C);if(G!=-1){var H=K.substr(G+C.length,K.length);if(H){var J=decodeURIComponent(H).replace("%27","'");try{var E=JSON.parse(J);var F=E.eventName;var L=E.params||{};if(!F){throw"event name absent"}D[F]=L}catch(I){Utils.log("Something wrong happend during execute hash-callback, "+I)}}if(!($.browser.msie&&$.browser.version<9)){document.location.hash=K.substr(0,G)}}}function B(){for(var E in D){Events.fireEvent(E,D[E])}}A();$(function(){setTimeout(B,1)})})();(function(){Authenticate.showPopupSocial=function(A){$("body").css("cursor","wait");$.get("/web/login/simplePopup",function(D){$("body").css("cursor","");var C=PopupModule.popup({element:$("<div/>").html(D)});B(C,A)});function B(C,D){$("form.jsLoginForm",C).loginForm();$("#loginSide",C).bind("click focus",function(){$(this).animate({width:"298px"},400);$("#signupSide").animate({width:"198px"},400)});$("#signupSide",C).bind("click focus",function(){$(this).animate({width:"298px"},400);$("#loginSide").animate({width:"198px"},400)});$(".jsClassicLogin",C).click(function(){Authenticate.showPopup({returnTo:decodeURIComponent($(this).attr("returnTo")),isSignUp:$(this).attr("isSignUp")=="true",postAuthenticateParams:(D&&D.postAuthenticateParams)?D.postAuthenticateParams:null})});$(".socialLoginBigButtons .gaClick").click(function(){Events.fireEvent("send.g.a",["SocialDownloads",$(this).attr("data-element")])})}}})();$(function(){(function(){$("form.jsLoginForm").loginForm()})()});