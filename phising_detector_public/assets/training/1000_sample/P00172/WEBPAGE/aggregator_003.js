YUI.add("cookie",function(C,Q){var K=C.Lang,I=C.Object,G=null,D=K.isString,P=K.isObject,F=K.isUndefined,E=K.isFunction,H=encodeURIComponent,B=decodeURIComponent,N=C.config.doc;function J(L){throw new TypeError(L)}function M(L){if(!D(L)||L===""){J("Cookie name must be a non-empty string.")}}function A(L){if(!D(L)||L===""){J("Subcookie name must be a non-empty string.")}}C.Cookie={_createCookieString:function(R,U,S,O){O=O||{};var W=H(R)+"="+(S?H(U):U),L=O.expires,V=O.path,T=O.domain;if(P(O)){if(L instanceof Date){W+="; expires="+L.toUTCString()}if(D(V)&&V!==""){W+="; path="+V}if(D(T)&&T!==""){W+="; domain="+T}if(O.secure===true){W+="; secure"}}return W},_createCookieHashString:function(L){if(!P(L)){J("Cookie._createCookieHashString(): Argument must be an object.")}var O=[];I.each(L,function(S,R){if(!E(S)&&!F(S)){O.push(H(R)+"="+H(String(S)))}});return O.join("&")},_parseCookieHash:function(T){var S=T.split("&"),U=G,R={};if(T.length){for(var O=0,L=S.length;O<L;O++){U=S[O].split("=");R[B(U[0])]=B(U[1])}}return R},_parseCookieString:function(X,Z,a){var Y={};if(D(X)&&X.length>0){var L=(Z===false?function(b){return b}:B),V=X.split(/;\s/g),W=G,O=G,S=G;for(var R=0,T=V.length;R<T;R++){S=V[R].match(/([^=]+)=/i);if(S instanceof Array){try{W=B(S[1]);O=L(V[R].substring(S[1].length+1))}catch(U){}}else{W=B(V[R]);O=""}if(!F(a)&&a.reverseCookieLoading){if(F(Y[W])){Y[W]=O}}else{Y[W]=O}}}return Y},_setDoc:function(L){N=L},exists:function(L){M(L);var O=this._parseCookieString(N.cookie,true);return O.hasOwnProperty(L)},get:function(O,L){M(O);var T,R,S;if(E(L)){S=L;L={}}else{if(P(L)){S=L.converter}else{L={}}}T=this._parseCookieString(N.cookie,!L.raw,L);R=T[O];if(F(R)){return G}if(!E(S)){return R}else{return S(R)}},getSub:function(O,S,R,L){var T=this.getSubs(O,L);if(T!==G){A(S);if(F(T[S])){return G}if(!E(R)){return T[S]}else{return R(T[S])}}else{return G}},getSubs:function(O,L){M(O);var R=this._parseCookieString(N.cookie,false,L);if(D(R[O])){return this._parseCookieHash(R[O])}return G},remove:function(O,L){M(O);L=C.merge(L||{},{expires:new Date(0)});return this.set(O,"",L)},removeSub:function(O,T,L){M(O);A(T);L=L||{};var S=this.getSubs(O);if(P(S)&&S.hasOwnProperty(T)){delete S[T];if(!L.removeIfEmpty){return this.setSubs(O,S,L)}else{for(var R in S){if(S.hasOwnProperty(R)&&!E(S[R])&&!F(S[R])){return this.setSubs(O,S,L)}}return this.remove(O,L)}}else{return""}},set:function(O,R,L){M(O);if(F(R)){J("Cookie.set(): Value cannot be undefined.")}L=L||{};var S=this._createCookieString(O,R,!L.raw,L);N.cookie=S;return S},setSub:function(O,S,R,L){M(O);A(S);if(F(R)){J("Cookie.setSub(): Subcookie value cannot be undefined.")}var T=this.getSubs(O);if(!P(T)){T={}}T[S]=R;return this.setSubs(O,T,L)},setSubs:function(O,R,L){M(O);if(!P(R)){J("Cookie.setSubs(): Cookie value must be an object.")}var S=this._createCookieString(O,this._createCookieHashString(R),false,L);N.cookie=S;return S}}},"3.16.0",{requires:["yui-base"]});

YUI.add("history-base",function(B,O){var I=B.Lang,E=B.Object,L=YUI.namespace("Env.History"),M=B.Array,N=B.config.doc,F=N.documentMode,J=B.config.win,C={merge:true},H="change",A="add",G="replace";function D(){this._init.apply(this,arguments)}B.augment(D,B.EventTarget,null,null,{emitFacade:true,prefix:"history",preventable:false,queueable:true});if(!L._state){L._state={}}function K(P){return I.type(P)==="object"}D.NAME="historyBase";D.SRC_ADD=A;D.SRC_REPLACE=G;D.html5=!!(J.history&&J.history.pushState&&J.history.replaceState&&("onpopstate" in J||B.UA.gecko>=2)&&(!B.UA.android||B.UA.android>=2.4));D.nativeHashChange=("onhashchange" in J||"onhashchange" in N)&&(!F||F>7);B.mix(D.prototype,{_init:function(Q){var P;Q=this._config=Q||{};this.force=!!Q.force;P=this._initialState=this._initialState||Q.initialState||null;this.publish(H,{broadcast:2,defaultFn:this._defChangeFn});if(P){this.replace(P)}},add:function(){var P=M(arguments,0,true);P.unshift(A);return this._change.apply(this,P)},addValue:function(Q,S,P){var R={};R[Q]=S;return this._change(A,R,P)},get:function(Q){var R=L._state,P=K(R);if(Q){return P&&E.owns(R,Q)?R[Q]:undefined}else{return P?B.mix({},R,true):R}},replace:function(){var P=M(arguments,0,true);P.unshift(G);return this._change.apply(this,P)},replaceValue:function(Q,S,P){var R={};R[Q]=S;return this._change(G,R,P)},_change:function(R,Q,P){P=P?B.merge(C,P):C;if(P.merge&&K(Q)&&K(L._state)){Q=B.merge(L._state,Q)}this._resolveChanges(R,Q,P);return this},_fireEvents:function(R,Q,P){this.fire(H,{_options:P,changed:Q.changed,newVal:Q.newState,prevVal:Q.prevState,removed:Q.removed,src:R});E.each(Q.changed,function(T,S){this._fireChangeEvent(R,S,T)},this);E.each(Q.removed,function(T,S){this._fireRemoveEvent(R,S,T)},this)},_fireChangeEvent:function(R,P,Q){this.fire(P+"Change",{newVal:Q.newVal,prevVal:Q.prevVal,src:R})},_fireRemoveEvent:function(R,P,Q){this.fire(P+"Remove",{prevVal:Q,src:R})},_resolveChanges:function(V,T,Q){var U={},P,S=L._state,R={};T||(T={});Q||(Q={});if(K(T)&&K(S)){E.each(T,function(W,X){var Y=S[X];if(W!==Y){U[X]={newVal:W,prevVal:Y};P=true}},this);E.each(S,function(X,W){if(!E.owns(T,W)||T[W]===null){delete T[W];R[W]=X;P=true}},this)}else{P=T!==S}if(P||this.force){this._fireEvents(V,{changed:U,newState:T,prevState:S,removed:R},Q)}},_storeState:function(Q,P){L._state=P||{}},_defChangeFn:function(P){this._storeState(P.src,P.newVal,P._options)}},true);B.HistoryBase=D},"3.16.0",{requires:["event-custom-complex"]});

YUI.add("history-hash",function(A,N){var C=A.HistoryBase,F=A.Lang,L=A.Array,J=A.Object,K=YUI.namespace("Env.HistoryHash"),B="hash",E,D,I,H=A.config.win,M=A.config.useHistoryHTML5;function G(){G.superclass.constructor.apply(this,arguments)}A.extend(G,C,{_init:function(O){var P=G.parseHash();O=O||{};this._initialState=O.initialState?A.merge(O.initialState,P):P;A.after("hashchange",A.bind(this._afterHashChange,this),H);G.superclass._init.apply(this,arguments)},_change:function(Q,P,O){J.each(P,function(S,R){if(F.isValue(S)){P[R]=S.toString()}});return G.superclass._change.call(this,Q,P,O)},_storeState:function(R,Q){var P=G.decode,O=G.createHash(Q);G.superclass._storeState.apply(this,arguments);if(R!==B&&P(G.getHash())!==P(O)){G[R===C.SRC_REPLACE?"replaceHash":"setHash"](O)}},_afterHashChange:function(O){this._resolveChanges(B,G.parseHash(O.newHash),{})}},{NAME:"historyHash",SRC_HASH:B,hashPrefix:"",_REGEX_HASH:/([^\?#&=]+)=?([^&=]*)/g,createHash:function(Q){var O=G.encode,P=[];J.each(Q,function(S,R){if(F.isValue(S)){P.push(O(R)+"="+O(S))}});return P.join("&")},decode:function(O){return decodeURIComponent(O.replace(/\+/g," "))},encode:function(O){return encodeURIComponent(O).replace(/%20/g,"+")},getHash:(A.UA.gecko?function(){var O=A.getLocation(),Q=/#(.*)$/.exec(O.href),R=Q&&Q[1]||"",P=G.hashPrefix;return P&&R.indexOf(P)===0?R.replace(P,""):R}:function(){var O=A.getLocation(),Q=O.hash.substring(1),P=G.hashPrefix;return P&&Q.indexOf(P)===0?Q.replace(P,""):Q}),getUrl:function(){return location.href},parseHash:function(R){var O=G.decode,S,W,U,T,P,Q={},V=G.hashPrefix,X;R=F.isValue(R)?R:G.getHash();if(V){X=R.indexOf(V);if(X===0||(X===1&&R.charAt(0)==="#")){R=R.replace(V,"")}}T=R.match(G._REGEX_HASH)||[];for(S=0,W=T.length;S<W;++S){U=T[S];P=U.split("=");if(P.length>1){Q[O(P[0])]=O(P[1])}else{Q[O(U)]=""}}return Q},replaceHash:function(Q){var O=A.getLocation(),P=O.href.replace(/#.*$/,"");if(Q.charAt(0)==="#"){Q=Q.substring(1)}O.replace(P+"#"+(G.hashPrefix||"")+Q)},setHash:function(P){var O=A.getLocation();if(P.charAt(0)==="#"){P=P.substring(1)}O.hash=(G.hashPrefix||"")+P}});E=K._notifiers;if(!E){E=K._notifiers=[]}A.Event.define("hashchange",{on:function(Q,O,P){if(Q.compareTo(H)||Q.compareTo(A.config.doc.body)){E.push(P)}},detach:function(R,P,Q){var O=L.indexOf(E,Q);if(O!==-1){E.splice(O,1)}}});D=G.getHash();I=G.getUrl();if(C.nativeHashChange){if(!K._hashHandle){K._hashHandle=A.Event.attach("hashchange",function(Q){var O=G.getHash(),P=G.getUrl();L.each(E.concat(),function(R){R.fire({_event:Q,oldHash:D,oldUrl:I,newHash:O,newUrl:P})});D=O;I=P},H)}}else{if(!K._hashPoll){K._hashPoll=A.later(50,null,function(){var P=G.getHash(),O,Q;if(D!==P){Q=G.getUrl();O={oldHash:D,oldUrl:I,newHash:P,newUrl:Q};D=P;I=Q;L.each(E.concat(),function(R){R.fire(O)})}},null,true)}}A.HistoryHash=G;if(M===false||(!A.History&&M!==true&&(!C.html5||!A.HistoryHTML5))){A.History=G}},"3.16.0",{requires:["event-synthetic","history-base","yui-later"]});

