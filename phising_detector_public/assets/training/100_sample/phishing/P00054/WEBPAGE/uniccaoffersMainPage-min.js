USAA.ec.IARestructure.UNICCAOffersMainPage=function(V){var W=this;var O=YAHOO.util.Dom;var S=V.globalEvMngr;var Q;var T={};var E="slider_single_container";var R="delayRenderCarouselImage";var C="noRenderCarouselNavImage";var P="marquee-home-member-nav";var G="noRenderCarouselNavSpan";var H="noRenderCarouselNavDiv";var K={width:285,autoPlayInterval:0,autoPlay:false};var M={id:"carouselContainer",width:970,autoPlayInterval:8000,autoPlay:true};W.staticData=V.staticData.banners;W.bannerData=[];W.bannerIds=[];var I=function(X,Y){X.addListener("afterScroll",function(c,b){if(c.last!=1){var Z=c.last==c.first?b.id*3+(c.last)+4:(b.id*3)+(c.last-1)+4;if(!b.carousel[W.bannerIds[Z]]){var a='[{"OffersInfo": {"offerIDs": ["'+W.bannerIds[Z]+'"],"pageName": "'+USAA.ec.IARestructure.pageName+'","DispAction": "OfferContact"}}]';Q.realTimeHelper.postDispose(a);b.carousel[W.bannerIds[Z]]=true}}},{id:Y,carousel:X})};var U=function(Y){if(Y.last==3&&(Y.last!=Y.first)){if(T.WebLargeBannerZone2){var X='[{"OffersInfo": {"offerIDs": ["'+W.bannerIds[2]+'","'+W.bannerIds[3]+'"],"pageName": "'+USAA.ec.IARestructure.pageName+'","DispAction": "OfferContact"}}]';Q.realTimeHelper.postDispose(X)}W.bannerCarousel.removeListener("afterScroll",U)}};var L=function(Y,d){var j=new USAA.ec.widget.Carousel(Y.id,{width:Y.width,numVisible:1,carouselEl:"UL",animation:{speed:0.7,effect:YAHOO.util.Easing.easeOut},autoPlayInterval:Y.autoPlayInterval,isCircular:true});var e=false;var h=O.getElementsByClassName("carousel")[0];var b=h.getElementsByTagName("*");var l=O.getElementsByClassName("marquee-link");var k=function(m){if(j.isAutoPlayOn()){if(m.type==="focus"||m.type==="click"){e=true}j.stopAutoPlay()}};var c=function(m){if(!j.isAutoPlayOn()&&!e){j.startAutoPlay()}};for(var a=1;a<b.length;a++){if((b[a].tagName).toUpperCase()=="LI"){b[a].setAttribute("aria-hidden","true");b[a].setAttribute("role","presentation");b[a].style.visibility="hidden"}}O.batch(l,function(m){_yEvent.addListener(m,"focus",k);_yEvent.addListener(m,"click",k);_yEvent.addListener(m,"mouseover",k);_yEvent.addListener(m,"mouseout",c)});j.render();j.show();if(Y.autoPlay===true){j.startAutoPlay()}j.indexedVal=d;(Y.id).search("slider_single")!=-1?I(j,d):null;Y.id=="carouselContainer"?(j.addListener("afterScroll",U),W.bannerCarousel=j):null;j.productObj=true;j.keyEvnt=false;var X=O.get(Y.id);var g=O.getElementsByClassName("yui-carousel-nav","div",X)[0];var f=O.getElementsByClassName("product-bucket","button",g);if(Y.id.search("slider_single_container")!=-1||Y.id.search("carouselContainer")!=-1){var Z=X.getElementsByTagName("*");O.batch(Z,function(m){if(m.tagName.toLowerCase()=="a"||m.tagName.toLowerCase()=="button"||m.tagName.toLowerCase()=="img"||m.tagName.toLowerCase()=="input"||m.tagName.toLowerCase()=="area"){_yEvent.addListener(m,"keydown",function(o){var q=o||window.event;if(q&&q.keyCode==39||q.keyCode==40){var p;var n=function(){if(!j.isAnimating()){var s=O.getElementsByClassName("marquee-link","a",X);for(var r=0;r<s.length;r++){if(s[r].id.search("-Clone")!=-1&&O.hasClass(s[r].parentNode,"yui-carousel-nav-page-selected")){s[r].focus();break}}s=O.getElementsByClassName("single-slider-link","a",X);for(var r=0;r<s.length;r++){if(s[r].id.search("-Clone")!=-1&&O.hasClass(s[r].parentNode,"yui-carousel-nav-page-selected")){s[r].focus();break}}clearInterval(p)}};p=setInterval(n,10)}})}})}O.batch(f,function(m){_yEvent.addListener(m,"click",function(n){if(j.isAnimating()){_yEvent.stopEvent(n)}else{j.productObj=false}})})};var J=function(){var r,c,b,f,X,k,n,v,a=/(?:\("?'?)([a-zA-Z0-9\/\:\-\_\.\?\=\&\%\#]+)(?:"?'?\))/;for(var o in W.bannerData){r=O.getElementsByClassName(R,"IMG",W.staticData.id[o])[0];c=O.getElementsByClassName(C,"IMG",W.staticData.id[o])[0];v=O.getElementsByClassName(G,"SPAN",W.staticData.id[o])[0];b=O.getElementsByClassName(H,"DIV",W.staticData.id[o])[0];X=O.get(P+(parseInt(o)+1));if(c!==undefined){c.parentNode.removeChild(c)}if(v!==undefined){v.parentNode.removeChild(v)}n=O.getElementsByClassName("text","SPAN",X)[0];var t=O.getElementsByClassName("on","SPAN",X)[0];if(n){n.parentNode.removeChild(n)}if(t){t.parentNode.removeChild(t)}if(r){f=(r.style.backgroundImage.match(a)[1]);r.src=f;r.style.backgroundImage=""}if(b){X.innerHTML=X.innerHTML+b.innerHTML;b.parentNode.removeChild(b);var Z=X.cloneNode(true);Z.setAttribute("id",Z.getAttribute("id")+"-Clone");Z.style.display="none";var p=O.getElementsByClassName("hiddenMessage","span",Z)[0];if(p){p.innerHTML=p.innerHTML+" (Currently Active)"}X.parentNode.appendChild(Z)}else{if(X){var Z=X.cloneNode(true);Z.setAttribute("id",Z.getAttribute("id")+"-Clone");Z.style.display="none";X.parentNode.appendChild(Z)}}}if(M.id&&O.getElementsByClassName("bannerContent","div",M.id)){var Y=O.getElementsByClassName("bannerContent","div",M.id);for(var o=0;o<Y.length;o++){O.hasClass(Y[o],"hidden")?O.removeClass(Y[o],"hidden"):null}}if(O.get(M.id)){L(M)}var l=O.getElementsByClassName(E,"div");var u=K;for(var q=l.length,o=0;o<q;o+=1){var g=document.createElement("DIV");O.addClass(g,"yui-carousel-nav");var e=document.createElement("UL");O.addClass(e,"productBucketNav");for(var q=l.length,m=0;m<q;m+=1){var d=document.createElement("LI");var s=l[o].parentNode.id+"-"+(m+1);var h='<a id="'+s+'nav" class="'+s+' single-slider-link" href="#'+s+'"><span class="hiddenMessage">View Offer </span><em>'+(m+1)+'</em></a><a aria-hidden="true" role="presentation" style="display:none;" id="'+s+'nav-Clone" class="'+s+' single-slider-link" href="#'+s+'"><span class="hiddenMessage">View Offer </span><em>'+(m+1)+'</em><span class="hiddenMessage"> (Currently Active)</span></a>';d.innerHTML=h;e.appendChild(d)}g.appendChild(e);l[o].appendChild(g);u.id=l[o].id;O.hasClass(l[o].parentNode,"hidden")?O.removeClass(l[o].parentNode,"hidden"):null;L(u,o)}};var F=function(X){for(var Y in W.bannerData){var a=W.bannerData[Y];var Z=document.createElement("DIV");Z.innerHTML=a;O.get(W.staticData.id[Y])?O.get(W.staticData.id[Y]).appendChild(Z):null}J()};var D=function(Z,Y){var X='[{"OffersInfo": {"offerIDs": [';for(i in W.bannerIds){W.bannerFlag[i]?X+='"'+W.bannerIds[i]+'",':null}X=X.substring(0,X.length-1);X+='],"pageName": "'+USAA.ec.IARestructure.pageName+'","DispAction": "OfferContact"}}]';Q.realTimeHelper.postDispose(X)};var N=function(){for(var X in W.staticData.id){O.get(W.staticData.id[X]).innerHTML=""}};var A=function(Y){var X=Y.Obj.jsonData;T=X;var c=W.staticData.zone;W.bannerFlag=[];var b=0;for(var Z in W.staticData.zone){var d=W.staticData.zone[Z];if(X[d]){for(var a in X[d].realTimeOffers.list){X[d].realTimeOffers.list[a]?W.bannerData[b++]=X[d].realTimeOffers.list[a].map.Markup:null;W.bannerIds[W.bannerIds.length]=X[d].realTimeOffers.list[a].map.OfferId;if(d=="WebLargeBannerZone1"){W.bannerFlag[b-1]=true}else{if(d!="WebLargeBannerZone2"&&a==0){W.bannerFlag[b-1]=true}}}}}N();F();Q=Y.Obj.rpcMang;D()};S.oEvents.DataReady.subscribe(A);var B=function(){for(var Y in W.staticData.id){var X=document.createElement("div");X.innerHTML=O.get(W.staticData.id[Y]).innerHTML;var Z=(X.getElementsByTagName("div"));Z=Z[0].innerHTML;W.bannerData[Y]=Z}J()};S.oEvents.RenderStaticContent.subscribe(B);S.oEvents.AJAXcallFailed.subscribe(B)};USAA.ec.IARestructure.AppManager=function(B){var C=this;var E=function(J){C.Data={};for(i in J){C.Data[J[i].webZone]=J[i]}C.gEvManager.oEvents.DataReady.fire({eventType:"tDataReady",Obj:{staticData:USAA.ec.IARestructure.templatJson,jsonData:C.Data,rpcMang:C.jsonrpc}})};var D=function(){C.gEvManager.oEvents.AJAXcallFailed.fire({eventType:"tAJAXcallFailed",Obj:{staticData:USAA.ec.IARestructure.templatJson}})};var I=function(J){J?(E(J),C.gEvManager.oEvents.TabChanged.fire({eventType:"tTabChanged",Obj:{tabRef:C.TabView,index:0}})):D()};var F=function(){var K=document.location.href;var L=K.search(".com");var J=K.substring(0,L+4)+USAA.ec.IARestructure.RPCCallUrl;return J};var H=function(){C.jsonrpc=new JSONRpcClient(F(),["realTimeHelper.loadRealTimeWebOffers","realTimeHelper.postDispose"]);C.jsonrpc.realTimeHelper.loadRealTimeWebOffers(I,USAA.ec.IARestructure.AJAXcall)};this.gEvManagerConfig=[{name:"DataReady",type:"tDataReady"},{name:"TabChanged",type:"tTabChanged"},{name:"TabContentRendered",type:"tTabContentRendered"},{name:"RenderStaticContent",type:"tRenderStaticContent"},{name:"AJAXcallFailed",type:"tAJAXcallFailed"}];if(!C.gEvManager){C.gEvManager=new USAA.ec.pfm.EventManager(C.gEvManagerConfig);C.gEvManager.loadConfig(C.gEvManagerConfig)}var A=function(){var J,L,K=document.cookie.split(";");for(i=0;i<K.length;i++){J=K[i].substr(0,K[i].indexOf("="));L=K[i].substr(K[i].indexOf("=")+1);J=J.replace(/^\s+|\s+$/g,"");if(J=="usaa.com.uniqueId"){return unescape(L)}}};var G=function(){C.bannersManager=new USAA.ec.IARestructure.UNICCAOffersMainPage({staticData:USAA.ec.IARestructure.templatJson,globalEvMngr:C.gEvManager});var J=A();J&&USAA.ec.IARestructure.AJAXcall?H():C.gEvManager.oEvents.RenderStaticContent.fire({eventType:"tRenderStaticContent",Obj:{}})};G()};USAA.register("uniccaoffersMainPage");USAA.register("uniccaoffersMainPage-min");