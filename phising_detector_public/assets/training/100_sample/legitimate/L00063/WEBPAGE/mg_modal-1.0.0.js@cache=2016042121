var MG_Modal=(function(){function b(){var g={autoOpen:false,className:"generalMTubes",closeButton:true,closeDocument:true,closeKey:false,content:"",maxWidth:"",minWidth:"",overlay:true,position:"",pageScrolling:false,timeMs:null};this.closeButton=null;this.container=null;this.instance=null;this.modal=null;this.timer=null;this.options=MG_Utils.extendDefaults(g,arguments[0]);if(this.options.autoOpen){this.openModal()}}b.prototype={constructor:b,closeModal:function(h){this.instance=0;MG_Utils.removeClass(document.body,"isOpenMTubes");if(this.container.parentNode){this.container.parentNode.removeChild(this.container)}if(this.options.timeMs){clearTimeout(this.timer)}if(this.options.pageScrolling){var g=document.body;MG_Utils.removeClass(g,"scrollMTubes");g.style.height=""}if(h&&typeof h=="function"){h(this.container,this.modal)}},openModal:function(h){if(!this.instance){d.call(this);f.call(this);MG_Utils.addClass(document.body,"isOpenMTubes");MG_Utils.addClassMultiple([this.modal,this.container],"elOpenMTubes");if(this.options.timeMs){var g=this;this.timer=setTimeout(function(){g.closeModal()},this.options.timeMs)}if(h&&typeof h=="function"){h(this.container,this.modal)}}this.instance=1}};function d(){var h,i=document.createElement("div"),g=document.createDocumentFragment();if(typeof this.options.content==="string"){h=this.options.content}else{h=this.options.content.innerHTML.replace(/MHP1138-/gi,"")}e.call(this);c.call(this);a.call(this);i.className="contentMTubes";i.innerHTML=h;this.modal.appendChild(i);this.container.appendChild(this.modal);g.appendChild(this.container);document.body.appendChild(g)}function e(){this.container=document.createElement("div");this.container.id="modalWrapMTubes";this.container.className=(!MG_Utils.isRbga()?"noRbga ":"")+"fadeInMTubes containerMTubes "+this.options.className;return this.container}function c(){this.modal=document.createElement("div");this.modal.className="modalMTubes "+this.options.className;this.modal.style.minWidth=this.options.minWidth;this.modal.style.maxWidth=this.options.maxWidth;return this.modal}function f(){var i=this;if(this.closeButton){var g=function(){i.closeModal();MG_Utils.removeEventHandler(i.closeButton,"click",g)};MG_Utils.addEventHandler(i.closeButton,"click",g)}if(this.container&&this.options.closeDocument){var j=function(k){if((k.target&&k.target.id||k.srcElement.id)==="modalWrapMTubes"){i.closeModal();MG_Utils.removeEventHandler(i.container,"click",j)}};MG_Utils.addEventHandler(i.container,"click",j)}if(this.container&&this.options.closeKey){var h=function(l){var k=l.keyCode?l.keyCode:l.charCode;if(l.keyCode==27){i.closeModal();MG_Utils.removeEventHandler(document,"keyup",h)}};MG_Utils.addEventHandler(document,"keyup",h)}}function a(){if(this.options.closeButton){this.closeButton=document.createElement("button");this.closeButton.className="closeMTubes buttonMTubes";this.modal.appendChild(this.closeButton)}if(this.options.overlay){MG_Utils.addClass(this.container,"isVisibleMTubes")}if(this.options.pageScrolling){var g=document.body;MG_Utils.addClassMultiple([this.container,g],"scrollMTubes");g.style.height=MG_Utils.docHeight()+"px"}if(this.options.position){this.modal.style.marginTop=this.options.position}}return b})();