(function(){document.getElementById("suggest-container")||$("#search-block .search-suggest").prepend('<div id="suggest-container" style="display:none" class="suggest"><div class="suggest-bd"></div><div class="suggest-ft"><div class="declare">\u7531360\u641c\u7d22\u63d0\u4f9b</div></div></div>');var e=qboot.jsonp,t="suggest-container",n="haosou-input",r="search-block",i="search-hotword";if(!$("#"+n)[0])return;var s=$("#"+n)[0],o=$("#"+r)[0],u=$("#"+t)[0],a=$("#"+t+" .suggest-bd")[0],f=s.form,l=new qSuggest(s,{autoPosition:!1,uiReferElem:o,uiWrapElem:u,uiContainerElem:a,posAdjust:{width:-2,top:-1},recAllTimeout:120});(function(){var r=qSuggest.log,s=l,o=s.ui,u=s.data,a="reci",f="direct",c="common",h="on",p={},d={},v=function(e){return String(e).replace(/[^\x00-\xff]/g,"abc").replace(/[\d]/g,"abc").length},m="",g=!1;p[c]=[1,50],p[f]=[6,50],d[c]=[],d[f]=[],d[a]=[],o.searchForm.on("submit",function(e){var t=o.getFocusedGroup();if(t==f){var n=$("#suggest-direct>a."+h);n[0]&&g&&(window.open(n.attr("href")),e.preventDefault&&e.preventDefault(),g=!1)}else{var n=$("#suggest-reci>a."+h);t==a&&n[0]&&n.attr("href")&&g&&(window.open(n.attr("href")),e.preventDefault&&e.preventDefault(),g=!1)}o.getTextInputVal()==s.query,m=o.getTextInputVal()}),function(){var e=null,t=window.hotwordData=[],n=[],r={},u="g-arrow-up",f="https://www.so.com/",l="http://www.so.com/zt/api/hotword.js";$.ajax({url:l,success:function(e,r){if(e&&e.length>0){for(var i=0,s=e.length;i<s;i++)e[i][1]=f+e[i][1];n=e,t=window.hotwordData=n}},dataType:"jsonp",jsonpCallback:"hotword"}),o.on("change",function(e){e.query||o.hide()}),o.textInput.on("mousedown",function(e){o.getTextInputVal().trim()==""&&($("#suggest-reci")[0]?$("#suggest-container").is(":visible")?o.hide():o.show():(s.query="",o.render()),o.focusTextInput(),o.on("change",function(e){o.hide(),o.off("change",arguments.callee)}))}),o.textInput.on("keydown",function(e){var t=o.container.html()?!0:!1;!t&&e.keyCode==40&&o.getTextInputVal().trim()==""&&$("#"+i).trigger("click")}),o.bindGroupHandler(a,{render:{setup:function(){d[a]=[]},build:function(){if(s.query==""){if(t&&t.length>0){if(!e){e={};var n="",r=e.total=t.length,f="",l=[];for(var c=0;c<r;c++)f=c<3?"<em class='hot'>"+(c+1)+"</em>":"<em>"+(c+1)+"</em>",l=[],+t[c][2]&&l.push("new"),n+="<a"+(t[c][1]?' href="'+t[c][1]+'"':"")+' data-text="'+t[c][0]+'" data-index="'+c+'">'+f+'<span class="'+l.join(" ")+'">'+t[c][0]+"</span></a>";e.content=n?'<div id="suggest-reci">'+n+'<div class="reci-setting"></div></div>':""}return o.setGroupTotal(a,e.total),e.content}return""}$("#"+i).removeClass(u)},teardown:function(){d[a]=$("#suggest-reci>a")}},init:function(){o.initGroupUserBehavior(a,"#suggest-reci>a"),o.container.delegate("#suggest-reci>a","click",function(e){$(this).attr("href")||e.preventDefault()}),o.on("itemSelect",function(e){if(e.group!==a)return;if(e.index>-1&&d[a][e.index]){var t=d[a].eq(e.index),n=t.attr("data-text");e.trigger!="keyboard"&&o.setTextInputVal(n),t.attr("href")?e.trigger=="keyboard"&&o.getTextInputVal()==n&&(g=!0):o.trigger("enter",{trigger:e.trigger}),t.attr("href")}}),o.on("itemFocus",function(e){if(e.group!==a)return;if(e.index>-1&&d[a][e.index]){var t=d[a].eq(e.index);t.addClass(h),e.trigger==="keyboard"&&o.setTextInputVal(t.attr("data-text"))}}),o.on("itemBlur",function(e){if(e.group!==a)return;e.index>-1&&d[a][e.index]&&d[a].eq(e.index).removeClass(h)})}})}(),function(){u.bindGroupHandler(f,{request:function(e,t){if(!t||!e)return;var n=v(e);n>=p[f][0]&&n<=p[f][1]&&qboot.jsonp("http://sug.h.qhimg.com/sug.php?ver=2.1&kw="+encodeURIComponent(e)+"&from=hao360cn",function(e,n){t(e)},{jsonp:"cb"})},receive:function(e){return e&&e.errno===0?{query:e.kw,data:e}:null}}),o.bindGroupHandler(f,{render:{setup:function(){d[f]=[]},build:function(e){if(!e)return"";var t="",n=e.app,r=e.res[0];n==="video"&&(t='<a class="video" data-subApp="'+n+'" data-text="'+r[0]+'" data-index="0" href="'+r[2]+'" hidefocus="false" style="outline:0;" target="_blank"><h2><strong>'+r[0]+"</strong> "+r[1]+'<ins class="hdicon"></ins></h2><div class="meta">'+r[3]+'</div><div class="meta">'+r[4]+"</div></a>"),n==="website"&&(t='<a class="website" data-subApp="'+n+'" data-text="'+r[0]+'" data-index="0" href="'+r[2]+'" hidefocus="false" style="outline:0;" target="_blank"><h2><img src="'+r[4]+'" /><strong>'+r[0]+"</strong> - "+r[3]+'</h2><div class="meta">'+r[1]+"</div></a>");if(n==="caipiao"||n==="mall"||n==="tuan"||n==="game")t='<a class="'+n+'" data-subApp="'+n+'" data-text="'+r[0]+'" data-index="0" href="'+r[2]+'" hidefocus="false" style="outline:0;" target="_blank"><h2><strong>'+r[0]+"</strong> - "+r[1]+'</h2><div class="meta">'+r[3]+"</div></a>";return t=t?'<div id="suggest-direct">'+t+"</div>":"",t&&o.setGroupTotal(f,1),t},teardown:function(){d[f]=$("#suggest-direct>a")}},init:function(){o.initGroupUserBehavior(f,"#suggest-direct>a"),o.on("itemSelect",function(e){if(e.group===f){r("itemSelect[DIRECT] index:"+e.index);if(e.index>-1&&d[f][e.index]){var t=d[f].eq(e.index),n=t.attr("data-text");e.trigger=="keyboard"&&o.getTextInputVal()==n?g=!0:e.trigger!="keyboard"&&o.setTextInputVal(n)}}}),o.on("itemFocus",function(e){if(e.group!==f)return;if(e.index>-1&&d[f][e.index]){var t=d[f].eq(e.index);t.addClass(h),e.trigger==="keyboard"&&o.setTextInputVal(t.attr("data-text"))}}),o.on("itemBlur",function(e){if(e.group!==f)return;e.index>-1&&d[f][e.index]&&d[f].eq(e.index).removeClass(h)})}})}(),function(){u.bindGroupHandler(c,{request:function(t,n){if(!n||!t)return;var r=v(t);r>=p[c][0]&&r<=p[c][1]&&e("http://sug.so.360.cn/suggest?word="+encodeURIComponent(t)+"&encodein=utf-8&encodeout=utf-8&pq="+encodeURIComponent(m),function(e,t){n(e)},{jsonp:"callback"})},receive:function(e){return e&&e.q&&e.s&&e.s.length>0?{query:e.q,data:e.s}:null}}),o.bindGroupHandler(c,{render:{setup:function(){d[c]=[]},build:function(){var e=0;return function(t){if(!t)return"";var n="",r,i=s.query.length,u=0;o.setGroupTotal(c,t.length);for(var a=0,f=t.length;a<f;a++){t[a]=t[a].trim(),r=t[a].toLowerCase();if(r===s.query)continue;r.indexOf(s.query)===0&&(r=s.query+"<b>"+r.substring(i)+"</b>"),n+='<a data-text="'+t[a]+'" data-index="'+u+'"  class="suggest-item">'+r+"</a>",u++}return n=n?'<div id="suggest-common" class="suggest-list">'+n+"</div>":"",e!=f&&(e=f,$(".suggest-ft .declare").css("position","relative").css("position","absolute")),n}}(),teardown:function(){d[c]=$("#suggest-common>a")}},init:function(){o.initGroupUserBehavior(c,"#suggest-common>a"),o.container.delegate("#suggest-common>a","click",function(e){e.preventDefault()}),o.on("itemSelect",function(e){if(e.group!==c)return;if(e.index>-1&&d[c][e.index]){var t=d[c].eq(e.index);e.trigger!="keyboard"&&o.setTextInputVal(t.attr("data-text")),o.trigger("enter",{trigger:e.trigger}),r("itemSelect[COMMON] index:"+e.index),s.renderQuery!=s.query}}),o.on("itemFocus",function(e){if(e.group!==c)return;if(e.index>-1&&d[c][e.index]){var t=d[c].eq(e.index);t.addClass(h),e.trigger=="keyboard"&&o.setTextInputVal(t.attr("data-text"))}}),o.on("itemBlur",function(e){if(e.group!==c)return;e.index>-1&&d[c][e.index]&&d[c].eq(e.index).removeClass(h)})}})}(),o.on("itemSelect",function(e){setTimeout(function(){o.hide()},300)}),$(document).on("mouseup",function(e){var r=$(e.target);(!r.attr("id")||[n,t,i].indexOf(r.attr("id"))==-1)&&!r.parents("#"+n)[0]&&!r.parents("#"+t)[0]&&!r.parents("#"+i)[0]&&o.hide()}),$(window).on("blur",function(){o.hide()})})()})();