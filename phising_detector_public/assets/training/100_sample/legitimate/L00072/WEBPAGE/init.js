/* product-home/1.0.0 init.js Date:2016-03-08 10:07:33 */
seajs.use(["jdf/1.0.0/unit/globalInit/2.0.0/globalInit.js","product/home/1.0.0/widget/hotwords/hotwords.js","jdf/1.0.0/ui/lazyload/1.0.0/lazyload.js","jdf/1.0.0/ui/switchable/1.0.0/switchable.js","jdf/1.0.0/unit/localStorage/1.0.0/localStorage.js","jdf/1.0.0/ui/easing/1.0.0/easing","jdf/1.0.0/ui/fixable/1.0.0/fixable","jdf/1.0.0/ui/smartkey/1.0.0/smartkey","jdf/1.0.0/ui/elevator/1.0.0/elevator","product/home/1.0.0/widget/elevator/elevator.js","jdf/1.0.0/unit/cookie/1.0.0/cookie.js","product/home/1.0.0/widget/focus/focus.js","product/home/1.0.0/widget/lifeserv/lifeserv.js","product/home/1.0.0/js/patch.js"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k("areaId")?k("areaId"):1;var p=/^http\:\/\/localhost|http\:\/\/page\.jd\.com\/product\/home\/1\.0\.0\/html\//.test(location.href)?"":"//d.3.cn/index-"+o+"-";var q=function(a){var b=a.attr("data-path-js");if(b)return void seajs.use(b,function(){a.addClass("lazy-fn-done")});var c=function(a){var b="send_log_"+(new Date).getTime();var c=window[b]=new Image;c.onload=c.onerror=function(){window[b]=null},c.src=a,c=null};var d=function(a){c("//ai.jd.com/jdip/getFloor.php?floor_type="+a+"&callback=floor_error")};var f=a.attr("data-path");var g=f.replace(/\.js$/,"");var h="jd_home_2015_"+f;var i=a.attr("data-time");var j=p+f;var k=a.attr("id");k=k.replace("lazy-","load"),k=k.replace(/-/g,"_");var l=function(a){var b=[];var c={};a.each(function(){var d=$(this).attr("fclog");c[d]||(c[d]=!0,b.push(d))}),pageConfig.clog&&pageConfig.clog.logDomain&&b.length>0&&((new Image).src=pageConfig.clog.logDomain+b.join("||")+"&v="+pageConfig.clog.logV)};"lazy-todays"==a.attr("id")?setTimeout(function(){var a=$("#top-banner [fclog],#logo-right [fclog],#treasure [fclog],#focus [fclog],#todays [fclog]");l(a)},200):setTimeout(function(){l($("[fclog]",a))},200);var m=-1;var n=!1;var o=function(b,c){q(b,c),m=setTimeout(function(){a.hasClass("lazy-fn-done")||(e.check()&&e.get(h)&&e.get(h).data?(a.addClass("lazy-fn-done"),a.html(e.get(h).data)):(q(b,c),m=setTimeout(function(){a.hasClass("lazy-fn-done")||(a.remove(),d(g))},5e3)))},5e3)};var q=function(b,c){var d=!0;"undefined"!=typeof c&&(d=!1),$.ajax({url:j,dataType:"jsonp",jsonpCallback:k,cache:d,success:function(c){n||(clearTimeout(m),a.addClass("lazy-fn-done"),a.html(c.content),b&&b(c),n=!0)},error:function(){}})};i&&e.check()&&!/isdebug=(-\d)*-d/.test(location.search)&&""!=p?e.get(h)&&e.get(h).time==i?(a.addClass("lazy-fn-done"),a.html(e.get(h).data)):o(function(a){e.set(h,{time:i,data:a.content})},!0):""!=p?o():$.ajax({type:"GET",url:j,dataType:"html",success:function(b){a.addClass("lazy-fn-done"),a.html(b)},error:function(){a.remove()}})};$('.lazy-fn-wrap[data-space="1"]').size()?($('.lazy-fn-wrap[data-space="1"]').lazyload({type:"fn",space:500,source:$('.lazy-fn-wrap[data-space="1"] .lazy-fn'),onchange:function(a){q(a),s(a.attr("id"))}}),$('.lazy-fn-wrap[data-space="2"]').lazyload({type:"fn",space:500,source:$('.lazy-fn-wrap[data-space="2"] .lazy-fn'),onchange:function(a){q(a),s(a.attr("id"))}})):$(".lazy-fn-wrap").lazyload({type:"fn",space:500,source:$(".lazy-fn"),onchange:function(a){q(a),s(a.attr("id"))}});function r(a){$("body").trigger(a+"-load")}var s=function(a){a&&r(a)};b(),a(),j.init(),n.init()});
