!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";!function(a,b){var c,d,e="top_ad injected_billboard injected_navstrip top_rhs middle_rhs btf_rhs2 rhs_cornerstone bottom_ad".split(" "),f="top_ad top_rhs injected_navstrip injected_billboard navboard".split(" "),g=ad_utils.slot_events,h=function(a){consoleLog(a,"ads-amazon-csm")},i={},j={},k={},l={},m=window.ue_t0;if("function"!=typeof a||"function"!=typeof b)return void h("uet() / uex() not available, will not record CSM metrics");for(d=0;d<e.length;d++)!function(c){g.listen(c,"iframe",function(){i[c]=(new Date).getTime(),a("bb",c,{wb:1})}),g.listen(c,"request",function(){j[c]=(new Date).getTime(),a("be",c,{wb:1})}),g.listen(c,"tagdeliver",function(){k[c]=(new Date).getTime(),a("af",c,{wb:1})}),g.listen(c,"reflow",function(b){var d=(new Date).getTime();0===b.data.duration&&m&&(d=m+10),l[c]=d,a("cf",c,{wb:1},d)}),g.listen(c,"load",function(){var d=generic.monitoring.get_remnant_partner(c),e=c+"."+d;"none"!==d&&(a("bb",e,{wb:1},i[c]),a("be",e,{wb:1},j[c]),a("af",e,{wb:1},k[c]),a("cf",e,{wb:1},l[c]),b("ld",e,{wb:1})),b("ld",c,{wb:1})})}(e[d]);ad_utils.ads_header.on_done(function(){var e=[],m=function(a){var b,c=0;for(b in a)c=Math.max(c,a[b]);return c};for(d=0;d<f.length;d++)c=f[d],c in ad_utils.slots_on_page&&e.push(c);h("determined core_slots: "+e.join(",")),g.listen_all(e,"iframe",function(){a("bb","core_ads",{wb:1},m(i))}),g.listen_all(e,"request",function(){a("be","core_ads",{wb:1},m(j))}),g.listen_all(e,"tagdeliver",function(){a("af","core_ads",{wb:1},m(k))}),g.listen_all(e,"reflow",function(){a("cf","core_ads",{wb:1},m(l))}),g.listen_all(e,"load",function(){b("ld","core_ads",{wb:1})})})}(window.uet,window.uex)},{}],2:[function(a,b,c){"use strict";!function(){var a=function(a){try{a()}catch(b){consoleError(b.message,"imdbads.cmd")}};window.imdbads=window.imdbads||{},imdbads.cmd=imdbads.cmd||[],ad_utils.ads_header.on_done(function(){var b=0,c=imdbads.cmd||[];for(b=0;b<c.length;b++)a(c[b]);imdbads.cmd={push:function(b){a(b)}}})}()},{}],3:[function(a,b,c){"use strict";!function(a){a.install(a,{extended_split:function(a,b,c){for(var d,e=[],f=0;(!c||e.length<c-1)&&(d=a.indexOf(b,f),-1!==d);)e.push(a.substring(f,d)),f=d+b.length;return e.push(a.substring(f)),e},object_from_querystring:function(b){var c,d,e=b.split("&"),f={};if(""===b)return{};for(c=0;c<e.length;c++)d=a.extended_split(e[c],"=",2),f[d[0]]=1===d.length?null:decodeURIComponent(d[1]);return f},cookie:{set:function(a,b,c){var d,e,f,g;if(c){var h=new Date;h.setTime(h.getTime()+24*c*60*60*1e3),d="; expires="+h.toGMTString()}else d="";e=document.location.host.split("."),f=e.pop(),g=e.pop(),document.cookie=a+"="+escape(b)+d+"; path=/; domain="+g+"."+f},get:function(a){var b,c,d=document.cookie.split(";");for(b=0;b<d.length;b++)if("string"==typeof d[b]&&(c=d[b].split("="),c[0]&&c[1]&&c[0].replace(/\s/,"")===a))return unescape(c[1]);return null},erase:function(a){this.set(a,"",-1)}}})}(window.generic)},{}],4:[function(a,b,c){"use strict";window.IMDbTimer&&window.IMDbTimer.events&&!function(a,b,c){generic.send_csm_head_metrics=function(){a.record("csm_head_pre_title",c.csm_head_pre_title-b),a.record("csm_head_post_title",c.csm_head_post_title-b),a.record("csm_head_pre_css",c.csm_head_pre_css-b),a.record("csm_head_post_css",c.csm_head_post_css-b),a.record("csm_head_pre_icon",c.csm_head_pre_icon-b),a.record("csm_head_post_icon",c.csm_head_post_icon-b),a.record("csm_head_pre_ads",c.csm_head_pre_ads-b)}}(csm,IMDbTimer.starttime,IMDbTimer.events)},{}],5:[function(a,b,c){"use strict";!function(a,b,c){var d=a.generic=a.generic||{},e={},f=a.IMDbTimer,g="IMDbTimer"in a?a.IMDbTimer.starttime:NaN,h=b.location.hash.match("debug=1"),i=h||!isNaN(g)&&Math.random()<.25,j=h||Math.random()<.25,k="none",l="1P",m=function(){var b={},e={},f={top_ad:1,top_rhs:1,injected_navstrip:1,injected_billboard:1,navboard:1,bottom_ad:2,middle_rhs:2,btf_rhs2:2,rhs_cornerstone:2},g={top_ad:1,top_rhs:1,bottom_ad:1},h={reflow:1,"ad-delivery":1,load:1},i={};return d.on_document_ready(function(e){e(a).bind("beforeunload",function(){var a,e;for(a in b)e=b[a],e.request&&e.load===c&&d.monitoring.record_event("ad_load_failure."+a);d.monitoring.send_metrics()})}),{is_slot_monitored:function(a){return a in f||a in g},is_twilight_slot:function(a){return a in f},is_twilight_core_slot:function(a){return a in f&&1===f[a]},is_forester_slot:function(a){return a in g},is_forester_event:function(a,b){return this.is_forester_slot(a)&&b in h},set_metric_value:function(a,c,d){(b[a]=b[a]||{})[c]=d},get_metric_value:function(a,c){return a in b?b[a][c]:void 0},core_slots:function(){var a,b={};for(a in f)1===f[a]&&(b[a]=1);return b},record_slot_status:function(a){var b=a.match(/^(.*)\.(got_ad|null|blank|fail)$/);b&&(i[b[1]]=b[2])},core_slots_have_an_ad:function(){var a,b=!1;for(a in m.core_slots()){if(!(a in i))return null;"got_ad"===i[a]&&(b=!0)}return b},set_partner:function(a,b){return e[a]=b,this},get_partner:function(a){return e[a]},set_remnant_partner:function(a,b){return m.set_partner(a,b)},get_remnant_partner:function(a){return m.get_partner(a)}}}(),n="http://www.imdb.com/twilight/?",o=function(){var a,b=function(){var a="DART";return{prepare_and_send_metric:function(b,c,d,f){e({slot:c,ad_network_name:a,aid:b.aid,cid:b.cid,slot_event:d,time:f})}}}(),c=function(){var a="PDA",b=20,c=100;return{prepare_and_send_metric:function(d,f,g){var h,i,j=b;(i=function(){h=ad_utils.get_cornerstone_ad_object(d),h?e({slot:d,ad_network_name:a,aid:h.adId,cid:h.creativeId,slot_event:f,time:g}):--j&&setTimeout(i,c)})()}}}(),e=function(b){var c,e,f,g,i,k,l,n,o,p,q;j&&m.is_forester_slot(b.slot)&&(c="http://fls-na.amazon.com/1/display-ads-cx/1/OP/?",e="LMET",f="imdb",g=ad_utils.get_mapped_amazon_slot_name(b.slot),i=a,k=b.ad_network_name,l=b.aid,n=b.cid,p=b.time,o=b.slot_event,q='{"s":"'+f+'","l":"'+g+'","p":"'+i+'","n":"'+k+'","a":"'+l+'","c":"'+n+'","m":"'+o+'","v":"'+p+'"}',h&&consoleLog(q+" metrics sent","forester"),d.one_way_send(c+e+escape(q)))};return{send_forester_metric:function(a,d,e,f){b.prepare_and_send_metric(a,d,e,f),c.prepare_and_send_metric(d,e,f)},set_page_type:function(b){a=b}}}();a.csm=function(){var a={};return{measure:function(a,b){this.record(a,this.duration(),b)},record:function(b,c,e,f){var g,h=a[b];if(i&&!csm.metrics[b]&&d.monitoring.record_metric(b+(f?f:""),c,e),csm.metrics[b]=c,h){for(g=0;g<h.length;g++)try{h[g](c,b)}catch(j){consoleLog("error invoking callback for "+b,"csm")}delete a[b]}},duration:function(a){return(a?a:+new Date)-g},listen:function(b,c){b in csm.metrics?setTimeout(c,0):(a[b]=a[b]||[]).push(c)},metrics:{}}}(),d.monitoring={event_starts:{},event_stops:{},events_to_stop:0,event_duration:{},event_counters:[],all_events_started_flag:!1,twilight_info:"",twilight_client:function(){var a,b=navigator.userAgent;return a=b.match(/MSIE (\d+)/),a&&a[1]>=6?"ie"+a[1]:(a=b.match(/Mac OS.*Firefox\/(\d+)/))?"3"===a[1]?"firefox3-mac":"firefox-mac":(a=b.match(/Firefox\/(\d+)/),a?"3"===a[1]?"firefox3":"firefox":-1!==b.indexOf("Chrome")?"chrome":-1!==b.indexOf("Safari")?"safari":-1!==b.indexOf("Opera")?"opera":"Other")}(),isTwilightActiveSample:i,page_type:"",start_timing:function(a){this.start_timing_at(a,(new Date).getTime())},start_timing_at:function(a,b){this.event_starts[a]=b,this.events_to_stop++},stop_timing:function(a,b,c){var d=(new Date).getTime(),e=a;this.event_starts[a]&&(this.event_stops[a]=d,b&&(e+="."+b),this.record_metric(e,d-this.event_starts[a]),delete this.event_starts[a],this.events_to_stop--,(c||this.all_events_started_flag&&0===this.events_to_stop)&&this.send_metrics())},record_event:function(a,b){var c;if(this.event_counters.push(a),a in e)for(weblab in e[a])c=a+"__weblab_"+weblab,this.event_counters.push(c),consoleLog(c,"twilight");consoleLog(a,"twilight"),b&&this.send_metrics()},record_metric:function(a,b,c){var d,f;if(m.record_slot_status(a),this.event_duration[a]=b,consoleLog(a+","+b,"twilight"),a in e)for(d in e[a])f=a+"__weblab_"+d,this.event_duration[f]=b,consoleLog(f+","+b,"twilight");c&&this.send_metrics()},send_metrics:function(){var a,b,c=n+this.twilight_info,e=[],f=0,g="",h=function(a,b){e.push(function(){return f++,"&Operation."+f+"="+a+"&OperationTiming."+f+"="+b})},i=function(a){e.push(function(){return f++,"&Counter."+f+"="+a})},j=function(){g.length&&(d.one_way_send(c+g+"&ord="+ad_utils.ord),consoleLog("metrics sent ("+f+")","twilight"),g="",f=0)},k=1700;for(a in this.event_duration)h(a,this.event_duration[a]);for(this.event_duration={},b=0;b<this.event_counters.length;b++)i(this.event_counters[b]);for(this.event_counters=[],b=0;b<e.length;b++)g+=e[b](),g.length+c.length>k&&j();j()},set_twilight_info:function(a,b,c,d,e,g){f&&"java"===f.pt&&(a+=".java"),this.twilight_info="PageType="+a+"&Geo="+b+"&tw_ord="+c+"&timestamp="+d+"&Client="+this.twilight_client+"&Site="+g,n=e},set_forester_info:function(a){o.set_page_type(a)},all_events_started:function(){this.all_events_started_flag=!0},set_partner:function(a,b){var c=a.frameElement.id;m.set_partner(c,b)},get_partner:function(a){return m.get_partner(a)||k},set_remnant_partner:function(a,b){d.monitoring.set_partner(a,b)},get_remnant_partner:function(a){return d.monitoring.get_partner(a)},set_remnant_partner_fallback:function(a,b){var c=m.get_partner(a);"undefined"==typeof c?m.set_partner(a,b):m.set_partner(a,c+"_"+b)},update_slot_metrics:function(a,b,e){var f,g=ad_utils.get_slot_iframe(a),h=g?g.contentWindow.document.ad:null,i="."+d.monitoring.get_partner(a);a&&m.is_slot_monitored(a)&&m.get_metric_value(a,b)===c&&(m.set_metric_value(a,b,c!==e?e:csm.duration()),f=m.get_metric_value(a,b),h&&m.is_forester_event(a,b)&&(o.send_forester_metric(h,a,b,f),"load"===b&&o.send_forester_metric(h,a,"ad-delivery",m.get_metric_value(a,"load")-m.get_metric_value(a,"request"))),m.is_twilight_slot(a)&&(csm.record("csm_"+a+"_"+b,f,0,i),"load"===b&&"."+k!==i&&"."+l!==i&&csm.record("csm_"+a+"_deliver",f-m.get_metric_value(a,"tagdeliver"),0,i),m.is_twilight_core_slot(a)&&p.send(b)))},get_metric_value:function(a,b){return m.get_metric_value(a,b)},enable_weblab_metrics:function(a,b,c){var d,f;for(d=0;d<c.length;d++)f=c[d],e[f]=e[f]||{},e[f][a+"_"+b]=1}},d.on_document_ready(function(c){var e;c(a).bind("beforeunload",function(c){var d=(b.location+"").split("#",2)[0];a.name="clicktoresponse:"+(new Date).getTime()+":"+d}),d.monitoring.isTwilightActiveSample&&(csm.measure("csm_ready"),c(a).load(function(){csm.measure("csm_load",!0)}),c("div.dfp_slot").each(function(){d.monitoring.record_event("dfp_slot")}),e=parseInt(c("#servertime").attr("time"),10),isNaN(e)||d.monitoring.record_metric("csm_server",e))}),function(){if("http:"===b.location.protocol){var c,e=a.name.match(/^clicktoresponse:(\d+):(.*)$/);e&&(b.referrer===e[2]&&f&&(c=f.starttime-e[1],f.clicktoresponse=c,d.monitoring.record_metric("click_to_response",c)),a.name="")}}();var p=function(){var a,b=[],e=m.core_slots(),f={},g=!1,h=function(){var a;if(!g){g=!0,consoleLog("Finalized core ads on current page: "+b.join(","));for(a in f)p.send(a)}};for(a in e)ad_utils.slot_events.listen(a,"iframe",function(a){b.push(a.slot),b.length===e.length&&h()});return d.on_document_ready(h),{send:function(a){var d,e,h=0;if(g){for(e=0;e<b.length;e++){if(d=m.get_metric_value(b[e],a),c===d)return;h=Math.max(h,d)}csm.record("csm_core_ads_"+a,h)}else f[a]=1}}}()}(window,document)},{}],6:[function(a,b,c){"use strict";!function(a){var b={},c={},d=function(a,b,c,d){var e=new f(b,c,d?d:{});try{a(e)}catch(g){consoleError(g)}},e=function(a,b){return a+":"+b},f=function(a,b,c){this.slot=a,this.event=b,this.data=c},g=function(a,b){return function(){0===--b&&a.apply(this,arguments)}};a.slot_events={listen:function(a,f,g){var h,i,j,k=f.replace(/(^\s+|\s+$)/g,"").split(/\s+/);for(j=0;j<k.length;j++)i=k[j],h=e(a,i),h in c?d(g,a,i,c[h]):(b[h]=b[h]||[]).push(g);return this},listen_all:function(a,b,c){var d,e=g(c,a.length);for(d=0;d<a.length;d++)this.listen(a[d],b,e)},trigger:function(a,f,g){var h,i=e(a,f),j=b[i]||[];if(i in c)return generic.monitoring.record_event(i+"_already_fired",!1),void consoleError("attempted to fire "+i+", but it has already fired!");for(c[i]=g,h=0;h<j.length;h++)d(j[h],a,f,g);return this},has_fired:function(a,b){return e(a,b)in c}}}(window.ad_utils)},{}],7:[function(a,b,c){"use strict";!function(a,b,c){var d=a.ads_js_start?(new Date).getTime()-a.ads_js_start:null,e=navigator.userAgent,f=/MSIE/.test(e),g=/Firefox/.test(e),h=a.generic,i={top_ad:"t",top_rhs:"tr"},j={injected_billboard:"top_ad",injected_navstrip:"top_ad",navboard:"top_ad"},k={top_ad:[{width:"728",height:"300"},{width:"728",height:"90"}],injected_billboard:[{width:"970",height:"500"},{width:"970",height:"250"}],top_rhs:[{width:"988",height:"320"}]},l=["ia.media-imdb.com"],m=b.all?function(a){return b.all[a]}:function(a){return b.getElementById(a)},n=function(a){return b.getElementsByTagName(a)},o=function(a){var b="string"==typeof a?m(a):a;return b.src.length>0&&-1===b.src.indexOf("www.imdb.com")&&-1===b.src.indexOf("javascript:")?void h.monitoring.record_event("iframe_not_sourceless_fdoc",!1):b.contentWindow?b.contentWindow.document:b.contentDocument},p=function(a){return m(a)},q=function(a){return m(a+"_wrapper")},r=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,function(){c.apply(a,arguments)}):a.addEventListener(b,c,!1)},s=1e16*Math.random(),t="/images/a/ifb/doubleclick/indirect.html",u={},v={},w=function(){var a,c,d="as",e=function(){var a="{";c&&("h"in c&&(a+=f("h")),"h"in c&&"n"in c&&(a+=","),"n"in c&&(a+=f("n"))),a+="}",h.cookie.set(d,a,h.days_to_midnight||1)},f=function(a){var b="";return jQuery.each(c[a],function(a,c){b+='"'+a+'":['+i(c[0])+","+i(c[1])+"],"}),'"'+a+'":{'+b.substr(0,b.length-1)+"}"},g=function(){var b=h.cookie.get(d);if(b)try{c=jQuery.parseJSON(b),a=a||c||{}}catch(e){a=a||(c={})}},i=function(a){var b=parseInt(a,10);return isFinite(b)?b:0},j=function(){return"/"===b.location.pathname?"h":"n"},k=function(a,b){var c=ad_utils.get_ad_object(a[0]);return"none"===a.css("display")?0:parseInt(c.w,10)},l=function(a,b){var c=0,d=ad_utils.get_ad_object(a[0]),e=parseInt(d.h,10);return"top_ad"===b?jQuery("#nb20").hasClass("banner")?c=-5:jQuery("#nb20").hasClass("supertab")&&(c=-15):"injected_billboard"===b&&(c=20),"swfAutoMaxHeight"in a[0].contentWindow&&(e=a[0].contentWindow.swfMinHeight),"none"===a.css("display")||0===e?0:e+c},m={top_ad:"t",top_rhs:"tr",injected_navstrip:"in",injected_billboard:"ib"};return{store:function(){h.on_document_ready(function(a){var b;try{g(),c=c||{},b=c[j()]||{},a.each(m,function(c,d){var e=a("#"+c);0!==e.length&&(b[d]=[k(e,c),l(e,c)])}),c[j()]=b,e()}catch(d){consoleLog("Failed to store ad size cookie "+d.toString(),"ads")}})}}}(),x=function(){var a=function(a,b){var c=o(a);g||c.open("text/html","replace"),c.write("<body>"+b+"<script>document.close()</script></body>")},b=function(a,b){var c="__srcless_"+Math.floor(68719476735*Math.random()).toString(36),d="<body><script>document.write(parent.ad_utils."+c+");delete parent.ad_utils."+c+";</script></body>";ad_utils[c]=b,a.src="javascript:unescape('"+escape(d)+"')"};return{inject_slot:function(c,d){var e=c.id,g=c.getAttribute("data-dart-params")||"",h='<style>body{background:transparent;}</style><script type="data-doubleclick" src="http://ia.media-imdb.com/images/G/01/mobile/blank_pixel._V137875076_.gif'+g+'"></script>'+d+'<script>document.write("<script defer>parent.ad_utils.ad_table.'+e+'.fired=true;<\\/script>");</script>';f?b(c,h):a(c,h)}}}();a.ad_utils={ord:s,regenerateOrd:function(){a.consoleLog("Regenerating Client Side Ord","ads"),s=1e16*Math.random(),a.ad_utils.ord=s},ad_table:{},ad_queue:[],low_latency_punt_ads:{},blank_ad_code:"<script>document.ad={h:0,w:0,scope:'blank'}</script>",slots_on_page:null,get_slot_iframe:p,setup_slot_metrics:function(a){ad_utils.slot_events.listen(a,"iframe request reflow tagdeliver load",function(a){var b=a.data.duration,d=a.data.timestamp;b===c&&d&&(b=csm.duration(d)),h.monitoring.update_slot_metrics(a.slot,a.event,b)}),ad_utils.slot_events.listen(a,"request",function(a){var b=a.slot;h.monitoring.start_timing(b)}),ad_utils.slot_events.listen(a,"request tagdeliver",function(a){var b,c=a.slot,d=ad_utils.inject_ad.get_injectable_slots(c);for(b=0;b<d.length;b++)ad_utils.slot_events.trigger(d[b],a.event,a.data)}),ad_utils.slot_events.listen(a,"load",function(b){var c=b.data.type;c?h.monitoring.stop_timing(a,c,!0):consoleError(b.slot+" loaded, but type was not reported"),h.monitoring.update_slot_metrics(b.slot,"trueload")}),ad_utils.slot_events.listen(a,"punt",function(a){var b=a.event+"_"+a.data.type;h.monitoring.update_slot_metrics(a.slot,b)})},register_ad:function(a){ad_utils.setup_slot_metrics(a),ad_utils.slot_events.trigger(a,"iframe"),this.ad_table[a]={slot:a}},gpt:function(){var a=null,b=[];return{handle_response:function(c){var d;for(a=c,d=0;d<b.length;d++)this.render_ad(b[d])},render_ad:function(c){var d,e,f,g;return a?(d=a[c]||{},e=p(c),f=d._html_||"",g=null!==e.getAttribute("data-roadblocked"),g&&(f="<!-- roadblocked -->"+ad_utils.blank_ad_code,ad_utils.slot_events.trigger(c,"request",{duration:0})),void x.inject_slot(e,f)):void b.push(c)}}}(),expand_ad:function(a){var c=this,d=a.id,e=a.height,f=a.width;if(!("expand_called"in this.ad_table[d])){var g,i=q(d),k=i.id,l=this.get_ad_object(a),n=m(d+"_before"),o=m(d+"_after"),p=csm.duration(),r=m(d+"_reflow_helper"),s=r?r.offsetTop:null;if(d+"_wrapper"!==k&&!h.has_document_readied())return void h.on_document_ready(function(){c.expand_ad(a)});if(this.ad_table&&this.ad_table[d]){if(this.ad_table[d].expanded=1,l&&(b.ads||(b.ads={}),b.ads[l.cid]=l,"w"in l&&(a.width=parseInt(l.w,10)),"h"in l&&(a.height=parseInt(l.h,10)),"z"in l&&l.z&&(i.style.zIndex=l.z,i.style.position="relative"),l.st?this.expand_supertab(l):l.bb?this.expand_billboard(l):"top_ad"!==d||!this.is_open(l)||l.clickroll||l.overlay||this.expand_top_banner(),l.wrap&&this.expand_wrap(l),l.bamf&&this.expand_bamf(l,a),l.inner_bamf&&this.expand_inner_bamf(l),l.relative_bamf&&this.expand_relative_bamf(l),this.is_open(l)?(n&&this.display_label(n),o&&this.display_label(o)):this.collapse_ad(a),l.styles))for(g in l.styles)h.override_style(g,l.styles[g].style);this.ad_table[d].expand_called=1,h.on_document_ready(function(b){b(a).trigger("expand_ad")}),e===a.height&&f===a.width?ad_utils.slot_events.trigger(d,"reflow",{duration:0}):setTimeout(function(){var a="top_ad"===d&&ad_utils.is_open(l)&&!l.st?10:0,b=r&&r.offsetTop===s+a;ad_utils.slot_events.trigger(d,"reflow",{duration:b?0:p})},10),d in j||ad_utils.slot_events.has_fired(d,"tagdeliver")||ad_utils.slot_events.trigger(d,"tagdeliver",{duration:p}),w.store(),b.body.className=b.body.className}}},get_ad_object:function(a){var b=a.id,c=o(a),d=null;try{d=c.ad}catch(e){consoleLog("Cannot access ad parameters: "+e.toString(),"ads")}if(d)"pid"in d||(d.pid="DFP");else{var f,g,h,i=0,j=0,k=["img","object","embed","iframe"];for(g in k)for(h=c.getElementsByTagName(k[g]),f=0;f<h.length;f++){var l,m,n=h[f];l=n.scrollWidth||n.width,m=n.scrollHeight||n.height,l&&l>1&&(i=Math.max(i,parseInt(l,10))),m&&m>1&&(j=Math.max(j,parseInt(m,10))),consoleLog(b+" : estimated size : "+l+","+m,"ads")}d={w:i.toString(),h:j.toString(),pid:"",url:"",aid:"0",cid:"0"},(0===i||0===j)&&(d.scope="null")}return c.ad=d,d},get_cornerstone_ad_object:function(a){var b=i[a]+"adData";return"aanResponse"in top.document&&b in top.document.aanResponse?top.document.aanResponse[b]:null},get_mapped_amazon_slot_name:function(a){return i[a]?i[a]:a},clean_up_slot_metrics:function(a){var b=a.id,c=(o(a),this.get_ad_object(a));try{h.monitoring.stop_timing(b,this.get_type_of_ad(c),!0)}catch(d){consoleLog("stop_timing failed: "+d.toString(),"ads")}},on_ad_load:function(a){if(a.src.length>0&&-1===a.src.indexOf("www.imdb.com")&&-1===a.src.indexOf("javascript:"))return void h.monitoring.record_event("iframe_not_sourceless",!1);var b,c,d,e=a.id,f=this.ad_table[e];if(!f||!f.fired)return void consoleLog("deflected spurious onload event for "+e,"on_ad_load");b=this.get_ad_object(a),c=this.get_type_of_ad(b),f.loaded=!0,("blank"===b.scope||"null"===b.scope)&&(d="0"===a.getAttribute("data-original-width")&&"0"===a.getAttribute("data-original-height")?0:h.monitoring.get_metric_value(e,"reflow"));try{f.expanded||this.expand_ad(a)}catch(g){consoleLog("Exception during expand_ad:"+g.message)}ad_utils.slot_events.trigger(e,"load",{duration:d,type:c})},is_open:function(a){return a&&"w"in a&&"h"in a&&a.w>0&&a.h>0&&"blank"!==a.scope},expand_supertab:function(a){var b=m("nb15"),c=m("nb20");b?b.className="supertab":c&&(c.className="supertab")},expand_billboard:function(a){function d(){var a,b=h.cookie.get(J),c=b&&b.split(/o|c/),d=b&&b.split(/\d*/),e={};if(c&&d)for(""===d[0]&&d.shift(),a=0;a<d.length;++a)e[c[a]]=d[a];r=e}function e(){var a,b="";new Date;for(a in r)r.hasOwnProperty(a)&&(b+=a+r[a]);h.cookie.set(J,b,h.days_to_midnight||1)}function f(a,b){for(var c,d=A.createElement("div"),e=a.getElementsByTagName(b),f="";e.length>0;)c=e[0],d.appendChild(c),f+=d.innerHTML,d.removeChild(c);return f}function g(){parseInt(y.style.height,10)!==parseInt(A.ad.h,10)&&y.contentWindow.minimize(),y.style.display="none",D||K?k():h.on_document_ready(i)}function i(){j(),k()}function j(){if(!K&&(D=m("top_rhs_wrapper"),E=D?D.parentElement||D.parentNode:null,D))try{z.parentNode.removeChild(s),E.insertBefore(s,D),s.style.marginRight="",s.style.marginTop=""}catch(a){consoleLog("caught a duplicate call to attempt_reattach_show_ad_button","ads")}}function k(){H!==c&&""!==H&&(s.style.display="block"),d(),r[a.aid]="c",e(),n="",n+=f(A,"object"),n+=f(A,"embed"),n+=f(A,"iframe"),w.store(),z.style.margin="0px",K=!0}function l(){s.style.display="none",y.style.display="block",d(),r[a.aid]="o",e(),n&&(C.innerHTML=n+C.innerHTML),A.getElementById("billboard_close_button").onclick=g,w.store(),z.style.margin="20px 19px"}var n,r,s,t,u=b,v=parent,x="injected_billboard",y=p(x),z=q(x),A=o(x),B=A.getElementsByTagName("body"),C=1===B.length?B[0]:A.createElement("body"),D=m("top_rhs_wrapper"),E=D?D.parentElement||D.parentNode:null,F=a.bb_close,G=a.bb_close_tracker,H=a.bb_show,I=a.bb_show_tracker,J="ax",K=!1;return z?(z.className=(z.className?z.className+" ":"")+"billboard",s=u.createElement("div"),s.id="billboard_show_button",s.style.display="none",E?E.insertBefore(s,D):(ad_utils.slot_events.listen("top_rhs","iframe",function(){j()}),s.style.marginRight="19px",s.style.marginTop="7px",z.parentNode.insertBefore(s,z)),1===a.bb&&(t=A.createElement("div"),t.id="billboard_close_button",t.style.cssFloat="right",t.style.cursor="pointer",t.style.position="absolute",t.style.top=0,t.style.right=0,t.style.zIndex=5e6,t.innerHTML=F||"",t.onclick=function(){v.ad_utils.ns.get("billboard").close()},C.appendChild(t),v.ad_utils.ns.register("billboard","close",function(){g(),"undefined"!=typeof G&&G()}),s.innerHTML=H,s.onclick=function(){l(),"undefined"!=typeof I&&I()},d(),a.aid in r&&"c"===r[a.aid]&&g()),!0):!1},expand_top_banner:function(){var a=m("nb15");a?a.className="banner":m("nb20").className="banner"},expand_bamf:function(a,b){var c=a.bamf;h.extend(b.style,c.style)},expand_inner_bamf:function(a){var b=a.inner_bamf,c=m(b.targetId);c&&b.node&&h.insert_after(b.node,c)},expand_relative_bamf:function(a){var b,c=a.relative_bamf,d=m(c.targetId);"insert_after"===c.relation?b=h.insert_after:"insert_before"===c.relation?b=h.insert_before:"insert_inside"===c.relation&&(b=h.insert_inside),d&&c.node&&b(c.node,d)},expand_wrap:function(a){a.styles||(a.styles={});var b;b=a.sleeves?{wrapper:{style:{background:a.wrap}},root:{style:{background:"none","box-shadow":"none"}},pagecontent:{style:{height:"100%"}}}:{"styleguide-v2":{style:{background:a.wrap}},root:{style:{"background-color":"transparent","box-shadow":"none"}},pagecontent:{style:{height:"100%"}},nb20:{style:{background:"none"}}},h.extend(a.styles,b)},expand_label:function(a){a.className=a.className.replace(/hidden/,"")},display_label:function(a){a.style.display="block",a.style.visibility="visible"},collapse_ad:function(a){var b=a.id,c=function(a){var b=m(a);b&&(b.style.display="none")};a.style.display="none",c(b+"_wrapper"),c(b+"_before"),c(b+"_after")},get_type_of_ad:function(a){return a?a.scope?a.scope:"got_ad":"null"},show_ad_feedback:function(c){function d(){return g("#ad_feedback_"+c).remove(),!1}function e(c){var d=g(a),e=g(b),f=(d.width()-300)/2+e.scrollLeft(),h=(d.height()-320)/2+e.scrollTop();c.css({top:0>h?0:h,left:f})}try{var f,g=jQuery,h=p(c),i=h.contentWindow,j=ad_utils.get_ad_object(h),k=i.location.hash.match(/#([^;]*);/),l={adId:j?j.aid:"",cid:j?j.cid:"",page_id:a.location.href.substr(0,255),pagesubtype:k?k[1]:"",slot:c},m=l.adId+";"+l.cid+";"+l.slot,n=g("#ad_feedback_container"),o=0;if(g("div.dfp_slot iframe").each(function(){var a=this.id,b=(this.contentDocument,ad_utils.get_ad_object(this));a in v||!b||(f=ad_utils.get_cornerstone_ad_object(a),f?v[a]={aid:f.adId,cid:f.creativeId,pid:f.adNetwork}:v[a]={aid:b.aid,cid:b.cid,pid:b.pid},v[a].url=b.url,v[a].dim=b.w+"x"+b.h)}),g.each(v,function(a,b){l["slot_"+o]=a,l["cid_"+o]=b.cid,l["aid_"+o]=b.aid,l["pid_"+o]=b.pid,l["dim_"+o]=b.dim,l["url_"+o]=b.url,o++}),0===n.length&&(n=g('<iframe id="ad_feedback_container">'),n.addClass("hidden").attr({name:"ad_feedback_container",scrolling:"no",frameborder:"no",marginheight:"0",marginwidth:"0",allowtransparency:"yes"}),n[0].hide=function(){g(this).addClass("hidden")},n[0].show=function(){g(this).removeClass("hidden")},n[0].isHidden=function(){return n.hasClass("hidden")},g("body").append(n)),""===n.attr("src")||n.attr("ref")!==m)n.unbind().load(function(){n[0].show(),e(n),g(this).unbind()}).attr("src","/ads/feedback#"+g.param(l)).attr("ref",m);else{if(!n[0].isHidden())return n[0].hide(),!1;n[0].show(),e(n)}}catch(q){consoleLog("ad feedback failure : "+q,"ads"),d()}return!1},report_ad_data:function(a,b){var c,d=a,e={};if(d!==top){try{for(;d.parent!==top;)d=d.parent;c=d.frameElement.id}catch(f){return void consoleLog("could not determine ad slot: "+f)}$.each("aid cid pid url dom dim".split(" "),function(a,c){c in b&&(e[c]=b[c])}),v[c]=e}},ns:function(){var a={},b=function(a,b,d){var e;e="string"==typeof a?a:a.frameElement.id,c(e)[b]=d},c=function(b){return a[b]=a[b]||{}};return{register:b,get:c}}(),inject_ad:function(){var a={},b={},c={},d=function(a){consoleLog(a,"inject_ad")};return{render:function(b){var e=p(b),f=a[b];c[b]||(d(b+" rendered"),c[b]=1,ad_utils.ad_table[b]={slot:b,injected:!0},f?x.inject_slot(e,f):x.inject_slot(e,'<script>document.ad = {h:"0",w:"0",scope:"blank"}</script>'))},register:function(c){var e=j[c],f=this;d(c+" registered"),b[c]=1,a[c]?f.render(c):ad_utils.slot_events.listen(e,"load",function(){f.render(c)}),ad_utils.setup_slot_metrics(c),ad_utils.slot_events.trigger(c,"iframe")},inject:function(c,e){d(c+" injected"),a[c]=e,b[c]&&this.render(c)},get_injectable_slots:function(a){var b,c=[];for(b in j)j[b]===a&&c.push(b);return c}}}(),weblab:function(){var a={};return{set_treatment:function(b,c){a[b]=c},get_treatment:function(b){return a[b]}}}(),attach_aax_callback:function(a,b){b.aax_render_ad=function(c){c&&c.html?(b.document.write(c.html),b.document.got_aax_ad="got_ad"):b.document.got_aax_ad="blank",ad_utils.slot_events.trigger(a,"tagdeliver")}},inject_serverside_ad:function(a,b){var c=p(a),d=null!==c.getAttribute("data-roadblocked"),e=null!==c.getAttribute("data-blank-serverside");ad_utils.slot_events.trigger(a,"request",{duration:0}),d?b="<!-- roadblocked -->"+ad_utils.blank_ad_code:e&&(b="<!-- blank -->"+ad_utils.blank_ad_code),x.inject_slot(c,b)},aax_render_ad:function(a){var b=p(a),c=b.getAttribute("data-aax-url"),d="<script>parent.ad_utils.attach_aax_callback('"+a+"', window);</script><script src=\""+c+'"></script>';b.onload=function(){var c,d=ad_utils.ad_table[a];return d&&d.fired?("got_ad"!==o(b).got_aax_ad?(b.style.display="none",c="blank"):c=frame_doc(b).got_aax_ad,void ad_utils.slot_events.trigger(a,"load",{type:c})):void consoleLog("deflected spurious cornerstone onload event for "+a,"aax_render_ad")},ad_utils.slot_events.trigger(a,"request"),x.inject_slot(b,d)},register_punt_ad:function(a,b,c,d){this.low_latency_punt_ads[a]={w:b,h:c,markup:d}},inject_punt_ad:function(a,b){var c=a.frameElement,d=c.id,e=o(c),f=null,g=null,h=e&&e.ad&&e.ad.aid?e.ad.aid:"0",i=e&&e.ad&&e.ad.cid?e.ad.cid:"0";d in this.low_latency_punt_ads?(f=this.low_latency_punt_ads[d],e.ad={w:f.w,h:f.h,pid:"",url:"",aid:h,cid:i},this.expand_ad(c),g=f.markup.replace(/\[PUNT_ORIGIN\]/,encodeURIComponent('{"punt_origin":"'+b+'"}')),e.write(g),ad_utils.slot_events.trigger(d,"punt",{type:"got_ad"})):ad_utils.slot_events.trigger(d,"punt",{type:"blank"})},fp:function(){return a.imdbads.frequencyCapping}(),tandem:function(){var a={};return{register_swf:function(b,c){return consoleLog("Register swf: "+b+" "+c,"Tandem"),a[c]?(consoleError("swf already registered: "+b+" "+c,"Tandem"),!1):void(a[c]={id:b})},send_message:function(b,c,d){var e,g,h=a[b];if(consoleLog("Sending message: "+b+" "+c+" "+d,"Tandem"),!h)return consoleError("Attempted message to : "+b+" before registered.","Tandem"),!1;for(g in ad_utils.ad_table)o(g)&&o(g).getElementById(h.id)&&(e=o(g).getElementById(h.id));m(h.id)&&(e=m(h.id));try{return f?e.receiveTimelineMessage(d,c):e.getElementsByTagName("embed")[0].receiveTimelineMessage(d,c),!0}catch(i){return consoleError("Unable to call receiveTimelineMessage on: "+b,"Tandem"),consoleError(i),!1}}}}(),set_slots_on_page:function(a){ad_utils.slots_on_page=a},ads_header:function(){var a=!1,b=[];return{on_done:function(c){if(a)try{c()}catch(d){consoleWarn(d)}else b.push(c)},done:function(){var c;for(a=!0,c=0;c<b.length;c++)try{b[c]()}catch(d){consoleWarn(d)}b=null}}}(),is3PAd:function(a){if("string"!=typeof a&&!(a instanceof String))return consoleLog("Creative should be a valid string"),!1;var b="<!-- IMDb Third Party Creative -->";return 0===a.indexOf(b)},renderAdInSF:function(c,d){var e=b.getElementById(c);if(null!==e){var f=e.parentElement;f.removeChild(e);var g=new ad_utils.AdDetails(e,d),h=b.createElement("div");h.setAttribute("name",c),h.setAttribute("id",c),h.setAttribute("class","text/x-dacx-safeframe"),h.setAttribute("data-ad-details",JSON.stringify(g)),f.appendChild(h),a.DAsf.loadAds()}},AdDetails:function(a,b){this.slot=a.id,this.slotName=a.id,this.htmlContent=b,this.loadAfter="",this.allowedSizes=k[this.slot],this.allowedDomains=l,this["class"]=a.getAttribute("class"),this.iframeExtraStyle=a.getAttribute("style")||"";var c={};c.width=a.getAttribute("width"),c.height=a.getAttribute("height"),this.size=JSON.stringify(c)}},h.install(h,{should_jQuery_noConflict:a.$&&!a.jQuery,one_way_send_record:[],insert_after:function(a,b){try{b.parentNode.insertBefore(a,b.nextSibling)}catch(c){b.parentNode.appendChild(a)}},insert_before:function(a,b){b.parentNode.insertBefore(a,b)},insert_inside:function(a,b){b.appendChild(a)},extend:function(a,b){var c;for(c in b)"object"==typeof b[c]?a[c]!==b[c]&&("undefined"==typeof a[c]&&(a[c]={}),this.extend(a[c],b[c])):a[c]=b[c]},override_style:function(a,b,c){var d,e="#"+a;for(d in b)b[d]+=" !important";h.add_json_style(e,b,c)},add_json_style:function(a,b,c,d){var e,f=a+"{";for(e in b)f+=e+":"+b[e]+";";f+="}",h.add_css_style(f,c,d)},add_css_style:function(a,c,d){var e,f,g,h="css-style-generic",i=[h];c&&c.length?i.push(c):c=h,d||(d="a");for(g in i)m(i[g])||(e=b.createElement("style"),e.setAttribute("type","text/css"),e.id=i[g],n("head")[0].appendChild(e));if(e=m(c),e.styleSheet&&"cssText"in e.styleSheet)f=("a"===d?e.styleSheet.cssText:"")+a,e.styleSheet.cssText=f;else{f=("a"===d?e.innerHTML:"")+a;try{e.innerHTML=f}catch(j){e.innerText=f}}},add_css_file:function(a,c){
c||(c="css-file-generic");var d=m(c);d||(d=b.createElement("link"),d.setAttribute("type","text/css"),d.rel="stylesheet",d.id=c,n("head")[0].appendChild(d)),d.href=a},set:function(a,b){var c=a.split(":");"cookie"===c[0]?h.cookie.set(c[1],b):h.cache.set(c[1],b)},get:function(a){var b=a.split(":");return"cookie"===b[0]?h.cookie.get(b[1]):h.cache.get(b[1])},erase:function(a){var b=a.split(":");return"cookie"===b[0]?h.cookie.erase(b[1]):h.cache.erase(b[1])},cache:{set:function(a,b){u[a]=b},get:function(a){return u[a]},erase:function(a){delete u[a]}},load_script:function(a){var c=b.createElement("script");c.type="text/javascript",c.src=a,n("head")[0].appendChild(c)},load_script_notify:function(a,c){var d=b.createElement("script"),e=!1;d.type="text/javascript",d.src=a,d.onload=d.onreadystatechange=function(){var f=this.readyState;e||f&&"complete"!==f&&"loaded"!==f||(e=!0,b.body.removeChild(d),"function"==typeof c&&c(a))},b.body.appendChild(d)},one_way_send:function(a){var b=new Image(0,0);b.src=a,this.one_way_send_record.push(b)},load_when_visible:function(b,c){var d=0,e=jQuery(a),f=e.height()+e.scrollTop();if(jQuery("#"+b).length){var g=jQuery(jQuery("#"+b).get(0)),h=g.offset().top;f>h?c(b):e.scroll(function(){f=e.height()+e.scrollTop(),h=g.offset().top,f>h&&!d&&(d=1,c(b))})}else c(b)},unload_plugins:function(){for(var a,c,d,e,f,g=[b],h=new RegExp("^("+location.protocol+"//"+location.hostname+")?(/.*)?$"),i=function(a){var b,c;for(b=a.length-1;b>=0;b--)c=a[b],c.parentNode.removeChild(c)};g.length;)for(a=g.pop(),i(a.getElementsByTagName("object")),i(a.getElementsByTagName("embed")),c=a.getElementsByTagName("iframe"),f=c.length-1;f>=0;f--)d=c[f],h.test(d.src)?(e=o(d),e&&g.push(e)):i([d])},addEventListener:function(a,b,c){r(a,b,c)}}),a.custom={amazon:{load_callback:function(a){}},indirect:{close:function(a){a.location.href.match("floater")&&custom.floater.close(a.frameElement.id)}},full_page:{style_id:"custom__full_page__generated_styles",data_url:"/images/a/js/graffiti_data.js",apply_fast:function(a,b){var c,d,e,f,g,i,j,k=this.styles[a.treatment],l=[];for(c in k)if(k.hasOwnProperty(c))for(d=k[c],i=0;i<d.length;i++)if(e=d[i],f=b?null:e["default"],e.fixed?f=e.fixed:e.name in a&&(f=a[e.name]),f){for("string"==typeof f&&(f=[f]),g="",j=0;j<f.length;j++)g+="  "+c+" : "+f[j]+(e.important?" !important":"")+";\n";l.push(e.selector+"{\n"+g+"}\n")}h.add_css_style(l.join("\n"),this.style_id,"o")},apply:function(c){var d=this;b.getElementById("root").style.boxShadow="none",a.generic.on_document_ready(function(){d.settings=c,"styles"in d?d._apply():a.generic.load_script_notify(d.data_url,function(){d._apply()})})},_apply:function(){var a,b=this.settings.ARGS.split(/&/),c={},d=this,e="/* ARGS:"+this.settings.ARGS+" */\n";jQuery.each(b,function(a,b){var d=/^(.*)=(.*)$/.exec(b);3===d.length&&(c[d[1]]=unescape(d[2].replace(/\+/g," ")))}),a=this.invert_styles(c.treatment),jQuery.each(a,function(a,b){b.fixed?e+=d.format_css(b,b.fixed):(c[a]||b["default"])&&(e+=d.format_css(b,c[a]))});try{jQuery("style#"+this.style_id).remove(),jQuery("head").append(jQuery('<style type="text/css">').attr("id",this.style_id).html(e))}catch(f){h.add_css_style(e,this.style_id,"o")}},invert_styles:function(a){var b=["default","important","fixed"],c={};return jQuery.each(this.styles[a],function(a,d){jQuery.each(d,function(d,e){var f=c[e.name]={style:a,selector:e.selector};jQuery.each(b,function(a,b){e[b]&&(f[b]=e[b])})})}),c},format_css:function(a,b){return a.selector+" { "+a.style+" : "+(b?b:a["default"])+(a.important?" !important;":";")+"}\n"}},floater:{close:function(a){h.extend(m(a),{style:{width:"0px",height:"0px"}})},launch:function(a,c,d,e,f,g,i){var j=b.createElement("iframe"),k="string"==typeof e?m(e):e;"none"!==d&&setTimeout(function(){custom.floater.close(i)},1e3*d),h.extend(j,{id:i,name:i,src:a,width:c[0]+"px",height:c[1]+"px",frameBorder:"0",scrolling:"no",allowTransparency:"true",style:{marginLeft:g[0]+"px",marginTop:g[1]+"px",zIndex:g[2],position:"absolute"}}),f(j,k)},set:function(a,b,c,d,e,f){var g=Math.ceil(9999999*Math.random()),i="floater_"+g;return h.cache.set(i,a),custom.floater.launch(t+"?source=cache:"+i,b,c,d,e,f,i),i}},css:{inject_css:function(c,d){a.generic.on_document_ready(function(){var a=c.getElementById(d),e=b.head;h.insert_inside(a,e)})}}};var y=function(a,b){return b?'<param name="'+a+'" value="'+b+'">':""},z=function(a,b){return b?" "+a+'="'+b+'" ':""};a.flashAdUtils={makeFlashAd:function(a){var d,e,f,g=a.id,h=a.src,i=a.width,j=a.height,k=a.bgcolor,l=a.wmode||"opaque",m=a.salign,n=a.scale,o=a.extraParams,p=a.extraTAGs,q=a.minVersion,r=escape(a.clickThru),s=a.clickTAGs,t=function(a){return null!==a&&a!==c&&(a+"").length},u=function(a){return isFinite(parseInt(a,10))},v="";if(!(t(g)&&t(h)&&u(i)&&u(j)))return void consoleLog("makeFlashAd: Missing required params","flashAdUtils");if(flashAdUtils.canPlayFlash(q)||consoleLog("makeFlashAd: Current flash version too low","flashAdUtils"),s)for(d=0;d<s.length;d++)s[d]&&(v=v+"&clickTAG"+(d+1)+"="+escape(s[d]));if(p)for(e in p)v=v+"&"+escape(e)+"="+escape(p[e]);v+="&ord="+ad_utils.ord,v+=b.getElementById("navbar")?b.getElementById("megaMenu")?"&navbar=mega":"&navbar=legacy":"&navbar=null";var w="",x="";try{var A={width:1,height:1,src:1,bgcolor:1,wmode:1,salign:1,scale:1,flashvars:1};for(f in o)A[f]||(w+=y(f,o[f]),x+=z(f,o[f]))}catch(B){}var C=y("bgcolor",k),D=z("bgcolor",k),E=y("wmode",l),F=z("wmode",l),G=y("scale",n),H=z("scale",n),I=y("salign",m),J=z("salign",m),K='<object  classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"  codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"  width="'+i+'"  height="'+j+'"  id="swf_'+g+'"><param name="movie" value="'+h+'"><param name="flashvars" value="env=WEB&clickTAG='+r+"&"+v+'"><param name="play" value="true"><param name="quality" value="high"><param name="allowScriptAccess" value="always">'+G+I+C+E+w+'<div style="margin-left:0.1px"><embed src="'+h+'"  flashvars="env=WEB&clickTAG='+r+"&"+v+'"  quality="high"  play="true"  width="'+i+'"  height="'+j+'"  name="swf_'+g+'"  allowScriptAccess="always"  type="application/x-shockwave-flash"  pluginspage="http://www.macromedia.com/go/getflashplayer" '+H+J+D+F+x+"></embed></div></object>";return K},canPlayFlash:function(a){var b=!1,c=parseInt(a,10);a=!a||9>c?9:c;var d=navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]?navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin:0;if(d&&navigator.plugins["Shockwave Flash"]){var e,f,g=navigator.plugins["Shockwave Flash"].description.split(" ");for(f=0;f<g.length;++f)isNaN(parseInt(g[f],10))||(e=parseInt(g[f],10));b=e>=a}else if(navigator.userAgent&&navigator.userAgent.indexOf("MSIE")>=0&&-1!==navigator.appVersion.indexOf("Win"))try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a);h.AllowScriptAccess="always";var i=h.GetVariable("$version"),j=i.match(/([0-9]+)/);b=j[1]>=a}catch(k){}return b}},w.store(),h.on_document_ready(function(b){b(a).load(function(){w.store()})}),h.on_document_ready(function(){r(a,"unload",function(){h.unload_plugins()})}),d&&h.on_document_ready(function(){h.monitoring.record_metric("ads_js_response",d)})}(window,document)},{}],8:[function(a,b,c){"use strict";!function(a,b){a.imdbads=a.imdbads||{},a.imdbads.frequencyCapping=function(){var c=function(){try{return d&&!e?"undefined"!=typeof mraidbridge&&"undefined"!=typeof mraidbridge.localstorage?mraidbridge.localstorage:void 0:(d&&e&&null!==a.localStorage&&(a.localStorage.setItem("foo","foo"),a.localStorage.removeItem("foo")),a.localStorage)}catch(b){return void 0}},d=/iphone|ipad|ipod/i.test(a.navigator.userAgent.toLowerCase()),e=null!==b.domain.match(/imdb/g),f="IMDbAdvertisingFrequencyCapping",g=function(){var b;if(c()&&a.JSON){if(b=c().getItem(f))try{return JSON.parse(b)}catch(d){c().removeItem(f),console.log("Could not deserialize persistence variable")}return{}}return null},h=function(b){c()&&a.JSON&&c().setItem(f,JSON.stringify(b))},i=function(){var a,b=g();if(b){for(a in b)j(b[a])&&delete b[a];h(b)}},j=function(a){return a&&a.l&&a.l>l?!1:!0},k=(new Date).getTime(),l=k-864e5;return a.generic&&a.generic.on_document_ready?a.generic.on_document_ready(i):"complete"==b.readyState?i():a.addEventListener("load",i,!1),{should_autoplay:function(a){var b=g();return b?j(b[a]):!1},log_autoplay:function(b){var c=g();c?(c[b]={l:k},h(c)):(console.log("Autoplay logged, but localStorage is not available!"),a.generic&&a.generic.monitoring&&a.generic.monitoring.record_event&&a.generic.monitoring.record_event("flash_persistence_failure",!0))},clear_autoplay:function(){h({})}}}()}(window,document)},{}],9:[function(a,b,c){"use strict";a(10),a(17)},{10:10,17:17}],10:[function(a,b,c){"use strict";a(14),a(13),a(11),a(16),a(8),a(7),a(12),a(6),a(3),a(5),a(4),a(1),a(2),a(15)},{1:1,11:11,12:12,13:13,14:14,15:15,16:16,2:2,3:3,4:4,5:5,6:6,7:7,8:8}],11:[function(a,b,c){"use strict";window.consoleLog=function(a,b,c){var d,e=window.consoleLog,f=document.location,g=f.hash.match("debug=1"),h="error"===c||g;b?(e[b]=e[b]||[]).push(a):b="global",d=b+" : "+a,(e.global=e.global||[]).push(d);try{if(!h)return;window.console&&(window.console[c]?window.console[c](d):window.console.log&&window.console.log(d))}catch(i){}},window.consoleWarn=function(a,b){consoleLog(a,b,"warn")},window.consoleError=function(a,b){consoleLog(a,b,"error")}},{}],12:[function(a,b,c){"use strict";!function(a,b,c){var d=a.custom=a.custom||{};d.strings=function(){return{chained_replace:function(a){var b,c=this;for(b=0;b<a.length;b++){var d=a[b];c=c.replace(d[0],d[1])}return c}}}()}(window,document)},{}],13:[function(a,b,c){"use strict";!function(a){a.install(a,{document_readys:[],document_is_ready:function(){var b,c=a.document_readys;for(a.document_readys=null,b=0;b<c.length;b++)try{c[b](jQuery)}catch(d){}a.should_jQuery_noConflict&&jQuery.noConflict(!1)},on_document_ready:function(b){a.has_document_readied()?b(jQuery):a.document_readys.push(b)},has_document_readied:function(){return null===a.document_readys}})}(window.generic)},{}],14:[function(a,b,c){"use strict";!function(){window.generic=window.generic||{},window.generic.install=function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}}()},{}],15:[function(a,b,c){"use strict";!function(a,b,c){a.custom.parallax={init:function(c){a.generic.on_document_ready(function(){var d=c.getElementById("parallax"),e=b.getElementById("root");generic.insert_before(d,e);var f=c.getElementById("skrollr_core_src").innerHTML;b.getElementById("skrollr_core_dest").innerHTML=f,a.skrollr&&a.skrollr.init({mobileCheck:function(){return!1},smoothScrolling:!0});for(var g=1;10>=g;g++){var h=b.getElementById("parallax_layer"+g);h&&(custom.parallax.seen["parallax_layer"+g]={obj:h,seen:!1})}b.addEventListener("scroll",custom.parallax.scrollListener)})},seen:{},interactionTrackers:{},scrollListener:function(){for(var a,c,d=1;10>=d;d++)a=custom.parallax.seen["parallax_layer"+d],a&&!a.seen&&(c=a.obj.getBoundingClientRect().top-b.documentElement.clientHeight<-100,c&&((new Image).src=custom.parallax.interactionTrackers["parallax_layer"+d],a.seen=!0))}}}(window,document)},{}],16:[function(a,b,c){"use strict";document.getElementsByTagName("html")[0].className+=" scriptsOn"},{}],17:[function(a,b,c){!function d(b,c,e){function f(h,i){if(!c[h]){if(!b[h]){var j="function"==typeof a&&a;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=c[h]={exports:{}};b[h][0].call(l.exports,function(a){var c=b[h][1][a];return f(c?c:a)},l,l.exports,d,b,c,e)}return c[h].exports}for(var g="function"==typeof a&&a,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){!function(a,d){function e(a){var b=V(0),c=a.trim().slice(b.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/);return c?{key:c[1],pos:c[2],val:b+c[3]}:{val:a}}function f(a,b,c){var d={};return d[a.key]=b,a.pos&&(d[a.pos]=c),d}function g(a,b,c){p(a,"each");var d,g=t(a),h=a.outerHTML,i=!!Z[g],k=Z[g]||{tmpl:h},l=a.parentNode,m=document.createComment("riot placeholder"),n=[],o=q(a);l.insertBefore(m,a),c=e(c),b.one("premount",function(){l.stub&&(l=b.root),a.parentNode.removeChild(a)}).on("update",function(){var e=W(c.val,b);T(e)||(d=e?JSON.stringify(e):"",e=e?Object.keys(e).map(function(a){return f(c,a,e[a])}):[]);for(var h=document.createDocumentFragment(),p=n.length,q=e.length;p>q;)n[--p].unmount(),n.splice(p,1);for(p=0;q>p;++p){var r=!d&&c.key?f(c,e[p],p):e[p];n[p]?n[p].update(r):((n[p]=new j(k,{parent:b,isLoop:!0,hasImpl:i,root:Q.test(g)?l:a.cloneNode(),item:r},a.innerHTML)).mount(),h.appendChild(n[p].root)),n[p]._item=r}l.insertBefore(h,m),o&&(b.tags[g]=n)}).one("updated",function(){var a=Object.keys(b);w(l,function(c){1!=c.nodeType||c.isLoop||c._looped||(c._visited=!1,c._looped=!0,E(c,b,a))})})}function h(a,b,c){w(a,function(a){if(1==a.nodeType){a.isLoop=a.isLoop||a.parentNode&&a.parentNode.isLoop||a.getAttribute("each")?1:0;var d=q(a);d&&!a.isLoop&&c.push(r(d,a,b)),a.isLoop||E(a,b,[])}})}function i(a,b,c){function d(a,b,d){if(b.indexOf(V(0))>=0){var e={dom:a,expr:b};c.push(u(e,d))}}w(a,function(a){var c=a.nodeType;if(3==c&&"STYLE"!=a.parentNode.tagName&&d(a,a.nodeValue),1==c){var e=a.getAttribute("each");return e?(g(a,b,e),!1):(n(a.attributes,function(b){var c=b.name,e=c.split("__")[1];return d(a,b.value,{attr:e||c,bool:e}),e?(p(a,c),!1):void 0}),q(a)?!1:void 0)}})}function j(a,b,c){function e(){var a=t&&r?k:q||k;n(C.attributes,function(b){l[b.name]=W(b.value,a)}),n(Object.keys(G),function(b){l[b]=W(G[b],a)})}function f(a){for(var b in w)typeof k[b]!==O&&(k[b]=a[b])}function g(){k.parent&&r&&n(Object.keys(k.parent),function(a){var b=!~R.indexOf(a)&&~H.indexOf(a);(typeof k[a]===O||b)&&(b||H.push(a),k[a]=k.parent[a])})}function j(a){if(n(B,function(b){b[a?"mount":"unmount"]()}),q){var b=a?"on":"off";r?q[b]("unmount",k.unmount):q[b]("update",k.update)[b]("unmount",k.unmount)}}var k=I.observable(this),l=D(b.opts)||{},p=X(a.tmpl),q=b.parent,r=b.isLoop,t=b.hasImpl,w=v(b.item),z=[],B=[],C=b.root,E=a.fn,F=C.tagName.toLowerCase(),G={},H=[];E&&C._tag&&C._tag.unmount(!0),this.isMounted=!1,C.isLoop=r,C._tag=this,this._id=J++,u(this,{parent:q,root:C,opts:l,tags:{}},w),n(C.attributes,function(a){var b=a.value;V(/{.*}/).test(b)&&(G[a.name]=b)}),p.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(F)&&(p.innerHTML=A(p.innerHTML,c)),this.update=function(a){a=v(a),g(),a&&typeof w===N&&(f(a),w=a),u(k,a),e(),k.trigger("update",a),m(z,k),k.trigger("updated")},this.mixin=function(){n(arguments,function(a){a=typeof a===M?I.mixin(a):a,n(Object.keys(a),function(b){"init"!=b&&(k[b]=o(a[b])?a[b].bind(k):a[b])}),a.init&&a.init.bind(k)()})},this.mount=function(){if(e(),E&&E.call(k,l),i(p,k,z),j(!0),(a.attrs||t)&&(x(a.attrs,function(a,b){C.setAttribute(a,b)}),i(k.root,k,z)),(!k.parent||r)&&k.update(w),k.trigger("premount"),r&&!t)k.root=C=p.firstChild;else{for(;p.firstChild;)C.appendChild(p.firstChild);C.stub&&(k.root=C=q.root)}!k.parent||k.parent.isMounted?(k.isMounted=!0,k.trigger("mount")):k.parent.one("mount",function(){y(k.root)||(k.parent.isMounted=k.isMounted=!0,k.trigger("mount"))})},this.unmount=function(a){var b,c=C,e=c.parentNode;if(e){if(q)b=s(q),T(b.tags[F])?n(b.tags[F],function(a,c){a._id==k._id&&b.tags[F].splice(c,1)}):b.tags[F]=d;else for(;c.firstChild;)c.removeChild(c.firstChild);a?e.removeAttribute("riot-tag"):e.removeChild(c)}k.trigger("unmount"),j(),k.off("*"),C._tag=null},h(p,this,B)}function k(b,c,d,e){d[b]=function(b){var f,g=e._item,h=e.parent;if(!g)for(;h&&!g;)g=h._item,h=h.parent;b=b||a.event;try{b.currentTarget=d,b.target||(b.target=b.srcElement),b.which||(b.which=b.charCode||b.keyCode)}catch(i){}b.item=g,c.call(e,b)===!0||/radio|check/.test(d.type)||(b.preventDefault&&b.preventDefault(),b.returnValue=!1),b.preventUpdate||(f=g?s(h):e,f.update())}}function l(a,b,c){a&&(a.insertBefore(c,b),a.removeChild(b))}function m(a,b){n(a,function(a,c){var d=a.dom,e=a.attr,f=W(a.expr,b),g=a.dom.parentNode;if(a.bool?f=f?e:!1:null==f&&(f=""),g&&"TEXTAREA"==g.tagName&&(f=(""+f).replace(/riot-/g,"")),a.value!==f){if(a.value=f,!e)return void(d.nodeValue=""+f);if(p(d,e),o(f))k(e,f,d,b);else if("if"==e){var h=a.stub,i=function(){l(h.parentNode,h,d)},j=function(){l(d.parentNode,d,h)};f?h&&(i(),d.inStub=!1,y(d)||w(d,function(a){a._tag&&!a._tag.isMounted&&(a._tag.isMounted=!!a._tag.trigger("mount"))})):(h=a.stub=h||document.createTextNode(""),d.parentNode?j():(b.parent||b).one("updated",j),d.inStub=!0)}else if(/^(show|hide)$/.test(e))"hide"==e&&(f=!f),d.style.display=f?"":"none";else if("value"==e)d.value=f;else if(F(e,K)&&e!=L)f&&d.setAttribute(e.slice(K.length),f);else{if(a.bool&&(d[e]=f,!f))return;typeof f!==N&&d.setAttribute(e,f)}}})}function n(a,b){for(var c,d=0,e=(a||[]).length;e>d;d++)c=a[d],null!=c&&b(c,d)===!1&&d--;return a}function o(a){return typeof a===P||!1}function p(a,b){a.removeAttribute(b)}function q(a){return a.tagName&&Z[a.getAttribute(L)||a.tagName.toLowerCase()]}function r(a,b,c){var d,e=new j(a,{root:b,parent:c},b.innerHTML),f=t(b),g=s(c);return e.parent=g,d=g.tags[f],d?(T(d)||(g.tags[f]=[d]),~g.tags[f].indexOf(e)||g.tags[f].push(e)):g.tags[f]=e,b.innerHTML="",e}function s(a){for(var b=a;!q(b.root)&&b.parent;)b=b.parent;return b}function t(a){var b=q(a),c=a.getAttribute("name"),d=c&&c.indexOf(V(0))<0?c:b?b.name:a.tagName.toLowerCase();return d}function u(a){for(var b,c=arguments,d=1;d<c.length;++d)if(b=c[d])for(var e in b)a[e]=b[e];return a}function v(a){if(!(a instanceof j||a&&typeof a.trigger==P))return a;var b={};for(var c in a)~R.indexOf(c)||(b[c]=a[c]);return b}function w(a,b){if(a){if(b(a)===!1)return;for(a=a.firstChild;a;)w(a,b),a=a.nextSibling}}function x(a,b){for(var c,d=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;c=d.exec(a);)b(c[1].toLowerCase(),c[2]||c[3]||c[4])}function y(a){for(;a;){if(a.inStub)return!0;a=a.parentNode}return!1}function z(a){return document.createElement(a)}function A(a,b){return a.replace(/<(yield)\/?>(<\/\1>)?/gi,b||"")}function B(a,b){return(b||document).querySelectorAll(a)}function C(a,b){return(b||document).querySelector(a)}function D(a){function b(){}return b.prototype=a,new b}function E(a,b,c){if(!a._visited){var d,e=a.getAttribute("id")||a.getAttribute("name");e&&(c.indexOf(e)<0&&(d=b[e],d?T(d)?d.push(a):b[e]=[d,a]:b[e]=a),a._visited=!0)}}function F(a,b){return a.slice(0,b.length)===b}function G(a){if(!I.render){U||(U=z("style"),U.setAttribute("type","text/css"));var b=document.head||document.getElementsByTagName("head")[0];if(U.styleSheet?U.styleSheet.cssText+=a:U.innerHTML+=a,!U._rendered)if(U.styleSheet)document.body.appendChild(U);else{var c=C("style[type=riot]");c?(c.parentNode.insertBefore(U,c),c.parentNode.removeChild(c)):b.appendChild(U)}U._rendered=!0}}function H(a,b,c){var d=Z[b],e=a._innerHTML=a._innerHTML||a.innerHTML;return a.innerHTML="",d&&a&&(d=new j(d,{root:a,opts:c},e)),d&&d.mount?(d.mount(),Y.push(d),d.on("unmount",function(){Y.splice(Y.indexOf(d),1)})):void 0}var I={version:"v2.2.4",settings:{}},J=0,K="riot-",L=K+"tag",M="string",N="object",O="undefined",P="function",Q=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,R=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],S=0|(a&&a.document||{}).documentMode,T=Array.isArray;I.observable=function(a){a=a||{};var b={},c=0;return a.on=function(d,e){return o(e)&&(typeof e.id===O&&(e._id=c++),d.replace(/\S+/g,function(a,c){(b[a]=b[a]||[]).push(e),e.typed=c>0})),a},a.off=function(c,d){return"*"==c?b={}:c.replace(/\S+/g,function(a){if(d)for(var c,e=b[a],f=0;c=e&&e[f];++f)c._id==d._id&&e.splice(f--,1);else b[a]=[]}),a},a.one=function(b,c){function d(){a.off(b,d),c.apply(a,arguments)}return a.on(b,d)},a.trigger=function(c){for(var d,e=[].slice.call(arguments,1),f=b[c]||[],g=0;d=f[g];++g)d.busy||(d.busy=1,d.apply(a,d.typed?[c].concat(e):e),f[g]!==d&&g--,d.busy=0);return b.all&&"all"!=c&&a.trigger.apply(a,["all",c].concat(e)),a},a},I.mixin=function(){var a={};return function(b,c){return c?void(a[b]=c):a[b]}}(),function(a,b,c){function d(){return h.href.split("#")[1]||""}function e(a){return a.split("/")}function f(a){a.type&&(a=d()),a!=g&&(i.trigger.apply(null,["H"].concat(e(a))),g=a)}if(c){var g,h=c.location,i=a.observable(),j=!1,k=a.route=function(a){a[0]?(h.hash=a,f(a)):i.on("H",a)};k.exec=function(a){a.apply(null,e(d()))},k.parser=function(a){e=a},k.stop=function(){j&&(c.removeEventListener?c.removeEventListener(b,f,!1):c.detachEvent("on"+b,f),i.off("*"),j=!1)},k.start=function(){j||(c.addEventListener?c.addEventListener(b,f,!1):c.attachEvent("on"+b,f),j=!0)},k.start()}}(I,"hashchange",a);var U,V=function(a){var b,c,d,e=/[{}]/g;return function(f){var g=I.settings.brackets||a;return b!==g&&(b=g,d=g.split(" "),c=d.map(function(a){return a.replace(/(?=.)/g,"\\")})),f instanceof RegExp?g===a?f:new RegExp(f.source.replace(e,function(a){return c[~~("}"===a)]}),f.global?"g":""):d[f]}}("{ }"),W=function(){function b(a,b){return a.indexOf(V(0))<0?(a=a.replace(/\n|\r\n?/g,"\n"),function(){return a}):(a=a.replace(V(/\\{/g),"￰").replace(V(/\\}/g),"￱"),b=e(a,f(a,V(/{/),V(/}/))),a=2!==b.length||b[0]?"["+b.map(function(a,b){return b%2?c(a,!0):'"'+a.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':c(b[1]),new Function("d","return "+a.replace(/\uFFF0/g,V(0)).replace(/\uFFF1/g,V(1))+";"))}function c(a,b){return a=a.replace(/\n|\r\n?/g," ").replace(V(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(a)?"["+f(a,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(a){return a.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(a,b,c){return c.replace(/[^&|=!><]+/g,d)+'?"'+b+'":"",'})}).join("")+'].join(" ").trim()':d(a,b)}function d(a,b){return a=a.trim(),a?"(function(v){try{v="+a.replace(i,function(a,b,c){return c?'(("'+c+h+c+")":a})+"}catch(e){}return "+(b===!0?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function e(a,b){var c=[];return b.map(function(b,d){d=a.indexOf(b),c.push(a.slice(0,d),b),a=a.slice(d+b.length)}),a&&c.push(a),c}function f(a,b,c){var d,e=0,f=[],g=new RegExp("("+b.source+")|("+c.source+")","g");return a.replace(g,function(b,c,g,h){!e&&c&&(d=h),e+=c?1:-1,e||null==g||f.push(a.slice(d,h+g.length))}),f}var g={},h='"in d?d:'+(a?"window).":"global)."),i=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g;return function(a,c){return a&&(g[a]||(g[a]=b(a)))(c)}}(),X=function(a){function b(b){var f=b&&b.match(/^\s*<([-\w]+)/),g=f&&f[1].toLowerCase(),h=d[g]||e,i=z(h);return i.stub=!0,a&&g&&(f=g.match(Q))?c(i,b,g,!!f[1]):i.innerHTML=b,i}function c(a,b,c,d){var f,g=z(e),h=d?"select>":"table>";g.innerHTML="<"+h+b+"</"+h,f=g.getElementsByTagName(c)[0],f&&a.appendChild(f)}var d={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},e="div";return a=a&&10>a,b}(S),Y=[],Z={};I.tag=function(a,b,c,d,e){return o(d)&&(e=d,/^[\w\-]+\s?=/.test(c)?(d=c,c=""):d=""),c&&(o(c)?e=c:G(c)),Z[a]={name:a,tmpl:b,attrs:d,fn:e},a},I.mount=function(a,b,c){function d(a){var b="";return n(a,function(a){b+=", *["+L+'="'+a.trim()+'"]'}),b}function e(){var a=Object.keys(Z);return a+d(a)}function f(a){var d;if(a.tagName){!b||(d=a.getAttribute(L))&&d==b||a.setAttribute(L,b);var e=H(a,b||a.getAttribute(L)||a.tagName.toLowerCase(),c);e&&i.push(e)}else a.length&&n(a,f)}var g,h,i=[];if(typeof b===N&&(c=b,b=0),typeof a===M?("*"===a?a=h=e():a+=d(a.split(",")),g=B(a)):g=a,"*"===b){if(b=h||e(),g.tagName)g=B(b,g);else{var j=[];n(g,function(a){j.push(B(b,a))}),g=j}b=0}return g.tagName?f(g):n(g,f),i},I.update=function(){return n(Y,function(a){a.update()})},I.mountTo=I.mount,I.util={brackets:V,tmpl:W},typeof c===N?b.exports=I:"function"==typeof define&&define.amd?define(function(){return a.riot=I}):a.riot=I}("undefined"!=typeof window?window:void 0)},{}],2:[function(a,b,c){b.exports="html{box-sizing:border-box}html *,*:before,*:after{box-sizing:inherit}body{margin:0}.app,.ad{display:block;width:100%;height:100%}.ad{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ad *,.ad *:before,.ad *:after{-webkit-user-select:inherit;-moz-user-select:inherit;-ms-user-select:inherit;user-select:inherit}.ad,.ad *{z-index:1}.ad>div{position:absolute;width:100%;height:100%;overflow:hidden}graphic>.graphic{opacity:inherit}.graphic>img{position:absolute;top:0;left:0}.graphic>.ad-hover,.graphic>.hover{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.app:hover .graphic>.ad-hover,.graphic:hover>.hover{opacity:1}.countdown-number-text{text-align:center}.slider-rotator>.slide-offset{position:relative}.slider-rotator>.slide-offset>.slide{position:relative;display:inline-block;width:100%;height:100%;overflow:hidden}.th-gallery-parent .th-gallery-arrow{cursor:pointer}.th-gallery-parent>.th-gallery-image{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.th-gallery-parent>.active{opacity:1}.minimal-video>video{width:100%;height:auto}"},{}],3:[function(a,b,c){function d(a,b){this.eventEmitter=a,this.actionRequirements=b}a("riot");d.prototype={off:function(a){this.eventEmitter.off(a)},on:function(a,b){this.eventEmitter.on(a,b)},one:function(a,b){this.eventEmitter.one(a,b)},trigger:function(a){if(a.requirements&&!this.canFire(a))return!1;if(a.isGlobal)return void window.Tarnhelm.triggerGlobalAction(a);if(null!=a.adName)return void window.Tarnhelm.triggerTandemAction(a);var b=Math.abs(window.parseInt(a.delay,10)||0);if(b){var c=this;window.setTimeout(function(){c.eventEmitter.trigger(a.actionName,a)},b)}else this.eventEmitter.trigger(a.actionName,a)},triggerMany:function(a){for(var b=0;b<a.length;b++){var c=a[b];this.trigger(c)}},canFire:function(a){return this.actionRequirements.areMet(a)?!0:(window.Tarnhelm.log("An action's requirements were not met ::",a.requirements,a),!1)}},b.exports=d},{riot:1}],4:[function(a,b,c){var d=a("../renderer/stores/ad.js"),e=a("./actionHandler.js"),f=a("./eventEmitter.js"),g=a("./externalTriggerHandler.js"),h=a("./linkHandler.js"),i=a("./trackingHandler.js"),j=a("./scrollActionHandler"),k=a("./externalFunctionHandler.js"),l=a("./logHandler.js"),m=a("./videoActionHandler.js"),n=a("./backwardsCompatibilityProcessor.js"),o=a("./checkAdParentCompliance.js"),p=a("./rectProcessor.js"),q=(a("../renderer/stores/retrievers/scale.js"),a("./events/adEvent.js")),r=function(a){function b(){var a=w.adStore.getState();c(a.frameProperties)}function c(a){if(w.containerFrame){var b=p.process(a);p.setElRectStyle(w.containerFrame,b)}}function r(){return window.ad_utils&&window.ad_utils.fp?window.ad_utils.fp:void 0}function s(){if(w.adStore.requiresAutoplay()){var a=r();if(a&&a.should_autoplay(w.id)){var b=w.adStore.getFrequencyCappedInitActions();w.actionHandler.triggerMany(b),a.log_autoplay(w.id)}}}function t(){var a=w.adStore.getState();this.initted||(this.initted=!0,b(),o.check(this),a.actions&&a.actions.init&&a.actions.init.length&&w.actionHandler.triggerMany(a.actions.init),s(),w.actionHandler.trigger({actionName:q.DISPLAYED}))}function u(){w.actionHandler.trigger({actionName:"minimize-ad"})}function v(){w.actionHandler.trigger({actionName:"maximize-ad"})}var w={};if(a.adData=n.process(a.adData),a.adData.rect&&delete a.adData.rect,w.id=a.adData.id,w.name=a.adData.name,w.domNode=a.domNode,w.containerFrame=a.containerFrame,w.requirementsTester=window.Tarnhelm.getRequirementsTester(),w.actionHandler=new e(new f,w.requirementsTester),a.eventSinks)for(var x=0;x<a.eventSinks.length;x++)a.eventSinks[x].registerAdActionHandler(w.name,w.actionHandler);w.actionHandler.on("resize-ad-container",function(a){a&&a.data&&a.data.rect&&c(a.data.rect)});var y={adHeight:w.domNode.offsetHeight,adWidth:w.domNode.offsetWidth};return a.adData.isScalable&&150===y.adHeight&&300===y.adWidth&&window.Tarnhelm.log("Warning: Ad is set to `isScalable`, but its iframe does not have a width dimension set. Ad will be 300px wide on init."),w.adStore=new d(a.adData,w.actionHandler,y),w.linkHandler=new h(a.adData.defaultLink,w.actionHandler),a.adData.externalTriggerActions&&(w.externalTriggerHandler=new g(a.adData.externalTriggerActions,w.actionHandler)),l.listen(w.actionHandler),k.listen(w.actionHandler,w.containerFrame),m.listen(w.actionHandler,w.adStore),w.trackingHandler=new i(w.adStore.getTrackingHash(),w.actionHandler),w.scrollActionHandler=new j(w.actionHandler),{getId:function(){return w.id},getName:function(){return w.name},getDomNode:function(){return w.domNode},getContainerFrame:function(){return w.containerFrame},getActionHandler:function(){return w.actionHandler},getAdStore:function(){return w.adStore},resizeAdContainer:c,minimize:u,maximize:v,initAfterMount:t}};b.exports=r},{"../renderer/stores/ad.js":65,"../renderer/stores/retrievers/scale.js":76,"./actionHandler.js":3,"./backwardsCompatibilityProcessor.js":5,"./checkAdParentCompliance.js":6,"./eventEmitter.js":9,"./events/adEvent.js":10,"./externalFunctionHandler.js":13,"./externalTriggerHandler.js":14,"./linkHandler.js":17,"./logHandler.js":18,"./rectProcessor.js":22,"./scrollActionHandler":24,"./trackingHandler.js":26,"./videoActionHandler.js":29}],5:[function(a,b,c){b.exports={process:function(a){var b="Ad schema not up to date! ["+a.name+"] :: ",c=!!a.rect,d=!!a.frameProperties,e=d&&!!a.frameProperties.rect,f=!1;if(c&&!d){f=!0;var g={width:a.rect.width,height:a.rect.height};a.frameProperties=g}else if(!c)if(d&&e){f=!0;var g={width:a.frameProperties.rect.width,height:a.frameProperties.rect.height};a.frameProperties=g}else d||e||(window.Tarnhelm.log(b+"Bad dimensions config, please update immediately."),a.frameProperties={width:0,height:0});return f&&window.Tarnhelm.log(b+"Please update ad's frameProperties and ad.rect schema."),a}}},{}],6:[function(a,b,c){b.exports={check:function(a){var b=a.getAdStore().getState().name,c="Ad ["+b+"] may not render properly! ";if(this.hasAdContainerParent(a)){var d=this.getAdContainerParent(a),e=window.getComputedStyle(d),f=new RegExp(/relative|absolute/),g=new RegExp(/(inline\-|)block/);f.test(e.position)||window.Tarnhelm.log(c+' iframe.parentNode must be set to  position "relative" or "absolute".'),"visible"!==e.overflow&&window.Tarnhelm.log(c+"iframe.parentNode is not set to overflow: visible;"),"relative"!==e.position||g.test(e.display)||window.Tarnhelm.log(c+'iframe.parentNode is set to position "relative", so it must also be set to display "block" or "inline-block".'),""===e.width&&window.Tarnhelm.log(c+"iframe.parentNode requires an explicit width."),""===e.height&&window.Tarnhelm.log(c+"iframe.parentNode requires an explicit height.")}else window.Tarnhelm.log(c+"Incorrect context for Tarnhelm iframe: Ad iframe does not have an iframeNode.parentNode");var h=a.getContainerFrame(),i=window.getComputedStyle(h);""===i.top&&""===i.bottom&&""===i.left&&""===i.right&&window.Tarnhelm.log(c+"iframe has no positioning values.")},hasAdContainerParent:function(a){return a.getContainerFrame()&&a.getContainerFrame().parentNode},getAdContainerParent:function(a){var b=a.getContainerFrame().parentNode;return b}}},{}],7:[function(a,b,c){var d=a("riot");a("../tarnhelm.js");var e=1e3,f=60*e,g=60*f,h=24*g,i=e,j=function(a){var b;b="number"==typeof a?new Date(a):Date.parse(a),isNaN(b)?(window.Tarnhelm.log('Bad date string "'+a+'", setting CountdownTimer to NOW to avoid errors'),this.targetDate=new Date):this.targetDate=new Date(a),d.observable(this),this.tick(),this.start()};j.prototype={getMillisecondsRemaining:function(){var a=this.targetDate.valueOf()-window.Tarnhelm.getNowTime();return a>0?a:0},start:function(){window.clearInterval(this.interval),this.boundTick=this.tick.bind(this),this.interval=window.setInterval(this.boundTick,i)},stop:function(){window.clearInterval(this.interval),delete this.boundTick},tick:function(){var a=this.getRemainingValues(this.getMillisecondsRemaining());
this.trigger("tick",a),a.totalMs||(this.stop(),this.trigger("end"))},getRemainingValues:function(a){var b={days:0,hours:0,minutes:0,seconds:0,totalMs:0},c=a;return 0===c?b:(b.totalMs=c,b.days=Math.floor(c/h),c-=b.days*h,b.hours=Math.floor(c/g),c-=b.hours*g,b.minutes=Math.floor(c/f),c-=b.minutes*f,b.seconds=Math.floor(c/e),b)}},b.exports=j},{"../tarnhelm.js":79,riot:1}],8:[function(a,b,c){function d(a,b){this.userAgentString=b,this.url=a,this._calculate()}var e=/^http(s)?\:\/\/m\.(.*\.)?imdb\.com/,f=/(Android|OS|Windows Phone) (\d+)[\._](\d+)[\._]?(\d+)?/,g=/Android (\d{2,})/,h=/iP(hone|ad|od)/,i="IMDb-flg",j="Windows Phone",k="Android",l="ontouchstart",m="Chrome/",n=/(Chrome|Safari|MSIE|Firefox)/,o=/(SamsungBrowser|Galaxy Nexus Build|iPhone OS 8|iPhone OS 7)/;d.prototype={getInfo:function(){return this.deviceInfo},_calculate:function(){var a=this._isWindowsDevice(this.userAgentString),b=this._isIOSDevice(this.userAgentString),c=this._isAndroidDevice(this.userAgentString),d=a||b||c,e=this._isIMDbApp(this.userAgentString),f=this._getMobilePlatformVersion(this.userAgentString,e,c),g=!d,h=g||this._hasMobileTransitionTransformSupport(this.userAgentString,e,c,f);this.deviceInfo={isWindowsDevice:a,isIOSDevice:!a&&b,isAndroidDevice:!a&&c,isMobileDevice:d,isMobileSite:this._isMobileSite(this.url),isIMDbApp:e,hasTouch:this._hasTouch(document),canAutoplay:this._canAutoplay(f,e,c,b,d),mobilePlatformVersion:f,canTransitionTransforms:h}},_isWindowsDevice:function(a){return a.indexOf(j)>-1},_isIOSDevice:function(a){return a.search(h)>-1},_isAndroidDevice:function(a){return a.indexOf(k)>-1},_isMobileSite:function(a){return a.search(e)>-1},_isIMDbApp:function(a){return a.indexOf(i)>-1},_hasTouch:function(a){return l in a},_getChromeVersion:function(a){return-1!==a.indexOf(m)?parseInt(a.substr(a.indexOf(m)+m.length,2),10):void window.Tarnhelm.log("Attempted to get chrome version string of non chrome userAgentString")},_getMobilePlatformVersion:function(a,b,c){var d={},e=a.match(f);if(e&&e.length>0&&(d.major=parseInt(e[2],10)||0,d.minor=parseInt(e[3],10)||0,d.patch=parseInt(e[4],10)||0),b&&c){var e=a.match(g);e&&e.length>0?d.androidAPI=parseInt(e[1],10)||0:d.androidAPI=0}return d},_canAutoplay:function(a,b,c,d,e){return b?c?a.androidAPI>=17?!0:a.major>=4?4===a.major&&a.minor<2?!1:!0:!1:d&&a.major>=4?!0:!1:e?!1:!0},_hasMobileTransitionTransformSupport:function(a,b,c,d){var e=!c&&d.major<9;if(b)return e?!1:!0;if(o.test(a))return!1;if(n.test(a)){if(-1!==a.indexOf(m)){var f=this._getChromeVersion(a);if(!Number.isNaN(f)&&46>f)return!1}return!0}return!1}},b.exports=d},{}],9:[function(a,b,c){function d(){e.observable(this)}var e=a("riot");b.exports=d},{riot:1}],10:[function(a,b,c){var d={DISPLAYED:"ad:displayed",ASSET_PRELOAD_START:"ad:asset-preload-start",ASSET_PRELOAD_FINISH:"ad:asset-preload-finish",ASSET_PRELOAD_TIMEOUT:"ad:asset-preload-timeout",VIDEO_FAILURE:"ad:video-failure",VIDEO_LOADED:"ad:video-loaded"};b.exports=d},{}],11:[function(a,b,c){function d(){return window.IMDbTimer?Date.now()-window.IMDbTimer.starttime:-1}function e(a){m.push({fired:!1,fn:a})}function f(a,b){window.premiumAdMetrics&&window.premiumAdMetrics.initCounter?(window.Tarnhelm.log("initializing counter for "+a+"_"+b,Date.now()),window.premiumAdMetrics.initCounter(a,b)):(window.Tarnhelm.log("deferring counter initialization for "+a+"_"+b,Date.now()),e(function(){window.premiumAdMetrics.initCounter(a,b)}))}function g(a,b){window.premiumAdMetrics&&window.premiumAdMetrics.recordCounter?(window.Tarnhelm.log("logging counter for "+a+"_"+b,Date.now()),window.premiumAdMetrics.recordCounter(a,b)):(window.Tarnhelm.log("deferring counter for "+a+"_"+b,Date.now()),e(function(){window.premiumAdMetrics.recordCounter(a,b)}))}function h(a,b){var c=d();return-1===c?void window.Tarnhelm.log("no timer baseline present to log timed event for "+a+"_"+b,Date.now()):void(window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging timed event for "+a+"_"+b,Date.now()),window.premiumAdMetrics.recordLatency(a,b,c)):(window.Tarnhelm.log("deferring timed event for "+a+"_"+b,Date.now()),e(function(){window.premiumAdMetrics.recordLatency(a,b,c)})))}function i(a,b,c){window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging pre-calculated latency for "+a+"_"+b,Date.now()),window.premiumAdMetrics.recordLatency(a,b,c)):(window.Tarnhelm.log("deferring pre-calculated latency for "+a+"_"+b,Date.now()),e(function(){window.premiumAdMetrics.recordLatency(a,b,c)}))}var j=a("./tarnhelmEvent.js"),k=a("./adEvent.js"),l=function(a){this.topActionHandler=a,this.registerTopActionHandler();var b=this;this.topActionHandler.on("fireDeferredMetrics",function(){b.fireDeferredMetrics()})},m=[];l.prototype={registerTopActionHandler:function(){this.topActionHandler.on(j.READY,function(){h("tarnhelm","start")}),this.topActionHandler.on(j.INIT_FAILURE,function(){h("tarnhelm","initFailure")}),f("creative","abort"),this.topActionHandler.on(j.MPTP_ABORT,function(){g("creative","abort")}),f("tarnhelm","error"),this.topActionHandler.on(j.ERROR,function(){g("tarnhelm","error")}),f("creative","transitionSuccess"),this.topActionHandler.on(j.MPTP_TRANSITION,function(){g("creative","transitionSuccess")}),f("creative","transitionFailure"),this.topActionHandler.on(j.MPTP_TRANSITION_FAILURE,function(){g("creative","transitionFailure")})},registerAdActionHandler:function(a,b){b.on(k.ASSET_PRELOAD_START,function(){h("tarnhelm","preloadStart")}),b.on(k.ASSET_PRELOAD_FINISH,function(){h("tarnhelm","preloadFinish")}),b.on(k.ASSET_PRELOAD_TIMEOUT,function(){h("tarnhelm","preloadTimeout")}),b.on(k.DISPLAYED,function(){h("tarnhelm","creativeDisplayed")}),f("tarnhelm","videoFailure"),b.on(k.VIDEO_FAILURE,function(){g("tarnhelm","videoFailure")}),b.on(j.RECORD_LATENCY,function(a){i("tarnhelm",a.metricName,a.milliseconds)})},fireDeferredMetrics:function(){m.forEach(function(a){a.fired||(a.fn(),a.fired=!0)})}},b.exports=l},{"./adEvent.js":10,"./tarnhelmEvent.js":12}],12:[function(a,b,c){var d={READY:"tarnhelm:system-init",ERROR:"tarnhelm:error",INIT_FAILURE:"tarnhelm:init-failure",MPTP_ABORT:"tarnhelm:mptp-abort",MPTP_TRANSITION:"tarnhelm:mptp-transition",MPTP_TRANSITION_FAILURE:"tarnhelm:mptp-transition-failure",RECORD_LATENCY:"tarnhelm:record-latency"};b.exports=d},{}],13:[function(a,b,c){var d={listen:function(a,b){var c=this,d=b.contentWindow;a.on("call-external-function",function(a){c.callExternalFunction(d,a)})},callExternalFunction:function(a,b){var c,d,e=b.data.functionName,f=b.data.arguments||[],g=this.getFunctionContext(a,b);return this.isNested(e)?(c=this.getFunctionThisArg(b,g),d=this.getNestedFunction(e,g)):(c=g,d=g[e]),"function"!=typeof d?void this.logErrorMessage(d,b):"object"!=typeof c?void this.logThisArgErrorMessage(c,b):void d.apply(c,f)},getFunctionThisArg:function(a,b){var c=a.data.functionName,d=a.data.thisArgName;return d||(d=c.substr(0,c.lastIndexOf("."))),this.nestReduce(d.split("."),b)},getFunctionContext:function(a,b){return"top"===b.data.context?window.top:a},isNested:function(a){return-1!==a.indexOf(".")},getNestedFunction:function(a,b){return this.nestReduce(a.split("."),b)},nestReduce:function(a,b){return a.reduce(function(a,b,c,d){return a?a[b]:void 0},b)},logErrorMessage:function(a,b){var c="";c+=null==a?"Function does not exist":b.data.functionName+" is not a function",this.logError(c,b)},logThisArgErrorMessage:function(a,b){var c="";c+=null==a?"Provided thisArg does not exist":b.data.thisArgName+" is not an object",this.logError(c,b)},logError:function(a,b){a+=' in "'+b.data.context+'" context. ',window.Tarnhelm.log('Failed to call external function "'+b.data.functionName+'".',a)}};b.exports=d},{}],14:[function(a,b,c){function d(a,b){var c=this;c.actionMap=a,b.on("handle-external-trigger",function(a){a.data.triggerName&&c.actionMap[a.data.triggerName]&&b.triggerMany(c.actionMap[a.data.triggerName])})}b.exports=d},{}],15:[function(a,b,c){var d={throttle:function(a,b){var c,d,e,f=0,g=null,h=function(){f=Date.now(),g=null,e=a.apply(c,d)};return function(){var i=Date.now(),j=b-(i-f);c=this,d=arguments,0>=j||j>b?(g&&(clearTimeout(g),g=null),f=i,e=a.apply(c,d)):g||(g=setTimeout(h,j))}},debounce:function(a,b){function c(){var i=Date.now()-g;b>i?h=setTimeout(c,b-i):(h=null,f=a.apply(d,e))}var d,e,f,g=0,h=null;return function(){return d=this,e=arguments,g=Date.now(),h||(h=setTimeout(c,b)),f}}};b.exports=d},{}],16:[function(a,b,c){b.exports={beforeNode:function(a,b){var c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a)),b.parentNode.insertBefore(c,b)}}},{}],17:[function(a,b,c){function d(a,b){var c=this;this.defaultLink=a,this.actionHandler=b,b.on("open-link",function(a){c.handleLinkAction(a)}),b.on("open-default-link",function(a){return c.defaultLink?void c.handleLinkAction(a):void window.Tarnhelm.log('No defaultLink for the "open-default-link" action.')})}d.prototype={pauseVideos:function(){this.actionHandler.trigger({actionName:"video:pause-all"})},handleLinkAction:function(a){var b=this.defaultLink,c=!1;a.data&&(b=a.data.url||b,c=!!a.data.sameWindow),c?window.top.location.href=b:(this.pauseVideos(),window.open(b))}},b.exports=d},{}],18:[function(a,b,c){b.exports={listen:function(a){a.on("log",function(a){window.Tarnhelm.log(a.message)})}}},{}],19:[function(a,b,c){var d=function(a){this.injectEl=a,this.init(),this.minimize()};d.prototype={dimensions:{minimize:40,logHeight:150},init:function(){this.containerEl=this.getContainerEl(),this.logEl=this.getLogEl(),this.containerEl.appendChild(this.logEl),this.minimizeButton=this.getMinimizeButton(),this.containerEl.appendChild(this.minimizeButton),this.injectEl.appendChild(this.containerEl),this.log(" = Tarnhelm - Mobile Debug Mode = ")},log:function(a){Array.isArray(a)||(a=[a]);var b=this.makeLine(a);this.logEl.appendChild(b),this.logEl.scrollTop=this.logEl.scrollHeight},makeLine:function(a){var b=document.createElement("p");b.style.cssText="margin:0 0 0.25em 0; border-bottom: thin solid rgba(255,255,255,0.25);",b.textContent="";for(var c=0;c<a.length;c++){var d=a[c],e="";d?"string"==typeof d?e=d:"function"==typeof d.toString&&(e=d.toString()):e="undefined",c<a.length-1&&(e+=", "),b.textContent+=e}return b},getContainerEl:function(){return this._makeEl("mobile-log-container",["position: fixed","bottom:0","left:0","display: block","width: 100%","overflow: visible","height: "+this.dimensions.logHeight+"px","z-index: 1986",""].join(";"))},getLogEl:function(){return this._makeEl("mobile-log",["position: absolute","top:0","display: block","width: 100%","height: 150px","z-index: 1986","color: rgb(0, 255, 0)","font-family: courier","background-color: rgba(0,0,0,0.8)","overflow: scroll",""].join(";"))},getMinimizeButton:function(){var a=this.dimensions.minimize+"px",b=this._makeEl("mobile-log-minimize-button",["position:absolute","right: 0","top: -"+a,"display: block","background: rgba(0,0,0,0.8)","color: rgb(0, 255, 0)","width:"+a,"height:"+a,"font-size: 24px","line-height: 20px","cursor:pointer","text-align:center"].join(";"));return b.textContent="_",b.onclick=this.minimizeButtonClick.bind(this),b},_makeEl:function(a,b){var c=document.createElement("div");return c.id=a,c.style.cssText=b,c},minimizeButtonClick:function(){this.isMinimized?this.unminimize():this.minimize()},minimize:function(){this.isMinimized=!0,this.containerEl.style.height=0,this.minimizeButton.textContent="^"},unminimize:function(){this.isMinimized=!1,this.containerEl.style.height=this.dimensions.logHeight+"px",this.minimizeButton.textContent="_"}},b.exports=d},{}],20:[function(a,b,c){var d={sameSign:function(a,b){return a>=0&&b>=0||0>=a&&0>=b},avg:function(a){if(0===a.length)return 0;var b=a.reduce(function(a,b){return a+b});return b/a.length},clamp:function(a,b,c){return Math.max(b,Math.min(c,a))},getEllipseFalloff:function(a,b){var c=this.clamp(a,0,b),d=Math.sqrt(1-Math.pow(c,2)/Math.pow(b,2));return this.clamp(d,0,1)}};b.exports=d},{}],21:[function(a,b,c){b.exports={clone:function(a){return JSON.parse(JSON.stringify(a))},shallowMerge:function(a,b){this._doMerge(a,b,!0)},shallowMergeMany:function(a,b){for(var c=Object.keys(b),d=0;d<c.length;d++){var e=c[d];a[e]||(a[e]={}),this.shallowMerge(a[e],b[e])}},_doMerge:function(a,b,c){if(!this.isObject(a)||!this.isObject(b))return window.Tarnhelm.log("Object merge operation failed, both params must be objects:"),window.Tarnhelm.log(a),void window.Tarnhelm.log(b);for(var d=Object.keys(b),e=0;e<d.length;e++){var f=d[e],g=c||null==a[f];if(g){var h="object"===b[f]?this.clone(b[f]):b[f];a[f]=h}}},mergeDefaults:function(a,b){var c=this.clone(b);this._doMerge(a,c,!1)},isObject:function(a){return"object"==typeof a&&!Array.isArray(a)&&null!==a},getProperty:function(a,b){if(!a||!b)return void 0;for(var c=b.split("."),d=a,e=0;e<c.length;e++){if("undefined"==typeof d[c[e]])return void 0;d=d[c[e]]}return d}}},{}],22:[function(a,b,c){var d=a("../renderer/stores/retrievers/scale.js"),e={defaults:{position:"absolute",anchorX:"left",offsetX:0,anchorY:"top",offsetY:0,width:"auto",height:"auto"},setElRectStyle:function(a,b){var c=a.style;["top","right","bottom","left"].forEach(function(a){c.removeProperty(a)}),c.position=b.position,c[b.anchorX]=b.offsetX,c[b.anchorY]=b.offsetY,c.height=b.height,c.width=b.width},process:function(a){var b=a||{},c={position:this.determinePositioning(b.position),anchorX:this.determineAnchorX(b.anchorX),offsetX:this.getDimensionWithUnit(b.offsetX,this.defaults.offsetX),anchorY:this.determineAnchorY(b.anchorY),offsetY:this.getDimensionWithUnit(b.offsetY,this.defaults.offsetY),width:this.getDimensionWithUnit(b.width,this.defaults.width),height:this.getDimensionWithUnit(b.height,this.defaults.height)};return c},determinePositioning:function(a){return null!=a&&a.match(/absolute|relative|fixed|static|inherit/)?a:this.defaults.position},determineAnchorX:function(a){switch(a){case"right":return"right";case"left":return"left";default:return null!=a&&window.Tarnhelm.log("Bad anchorX position configured."),this.defaults.anchorX}},determineAnchorY:function(a){switch(a){case"bottom":return"bottom";case"top":return"top";default:return null!=a&&window.Tarnhelm.log("Bad anchorY position configured."),this.defaults.anchorY}},getDimensionWithUnit:function(a,b){return null==a?b:d.getDimensionWithUnit(a)}};b.exports=e},{"../renderer/stores/retrievers/scale.js":76}],23:[function(a,b,c){var d=1,e={canAutoplay:d,hasTouch:d},f=function(a){this.requirementFlags=this.buildFlags(a)};f.prototype={areMet:function(a){var b=a.requirements||{},c=Object.keys(b);if(0===c.length)return!0;var d=this.areValidRequirements(c);return d?this.testRequirements(b):(window.Tarnhelm.log("Invalid requirement(s) found on an item ::",a.requirements," :: Full item :: ",a),!1)},testRequirements:function(a){for(var b=Object.keys(a),c=0;c<b.length;c++){var d=b[c],e=a[d],f=this.requirementFlags[d];if(f!==e)return!1}return!0},buildFlags:function(a){return{canAutoplay:a.canAutoplay,hasTouch:a.hasTouch}},areValidRequirements:function(a){for(var b=0;b<a.length;b++)if(!this.isValidRequirement(a[b]))return!1;return!0},isValidRequirement:function(a){return!!e[a]}},b.exports=f},{}],24:[function(a,b,c){function d(a){function b(){0===window.scrollY?(window.cancelAnimationFrame(c),c=null):(window.scrollBy(0,d),c=window.requestAnimationFrame(b))}a.on("jump-to-top",function(a){window.scrollY>0&&(window.scroll(0,0),window.Tarnhelm.log("window jump-to-top requested."))});var c,d;a.on("scroll-to-top",function(a){if(window.scrollY>0){window.Tarnhelm.log("window scroll-to-top requested.");var e=a.duration||100;d=-window.scrollY/(e/17),c=window.requestAnimationFrame(b)}})}b.exports=d},{}],25:[function(a,b,c){var d=a("./numberUtils.js"),e=(a("./objectUtils.js"),a("./functionUtils.js")),f=10,g=7.5,h=5,i=50,j=function(a){this.firstPos=this.getPosFromEvent(a),this.handledFirstMove=!1,this.currPos=this.getPosFromEvent(a),this.prevPos=this.getPosFromEvent(a),this.velocity={x:0,y:0},this.totalDistance={x:0,y:0},this.currMoveDistance={x:0,y:0},this.debouncedVelocityDecay=e.debounce(this.velocityDecay.bind(this),i),this.transitionLengthFactor=1,this.touchEnded=!1,this.isTouchTypeDetermined=!1,this.isHorizontalMove=!1,this.isVerticalMove=!1,this.isSwipe=!1};j.prototype={addTouchMoveData:function(a){this.prevPos=this.currPos,this.currPos=this.getPosFromEvent(a),this.currMoveDistance=this.getTouchMoveDifference(this.prevPos,this.currPos),this.totalDistance=this.getNewTotalDistance(this.totalDistance,this.currMoveDistance),this.velocity=this.getNewVelocity(this.velocity,this.currMoveDistance),this.debouncedVelocityDecay(),this.determineTouchType(this.totalDistance,this.velocity)},finalizeTouchDataOnEnd:function(a){this.touchEnded=!0,this.isSwipe=this.touchTestSwipe(this.velocity),this.transitionLengthFactor=this.getTransitionLengthFactor(this.velocity.x)},getPosFromEvent:function(a){return{x:a.touches[0].clientX,y:a.touches[0].clientY}},getTouchMoveDifference:function(a,b){return{x:b.x-a.x,y:b.y-a.y}},getNewTotalDistance:function(a,b){return{x:a.x+b.x,y:a.y+b.y}},getNewVelocity:function(a,b){return{x:this._adjustVelocity(a.x,b.x),y:this._adjustVelocity(a.y,b.y)}},getTransitionLengthFactor:function(a){var b=d.getEllipseFalloff(Math.abs(a),100);return d.clamp(b,.2,1)},velocityDecay:function(){this.touchEnded||(this.velocity.x=0,this.velocity.y=0,this.currMoveDistance.x=0,this.currMoveDistance.y=0,this.isSwipe=!1)},_adjustVelocity:function(a,b){var c;return c=d.sameSign(a,b)?a:0,d.avg([c,b])},determineTouchType:function(a,b){if(this.isSwipe||(this.isSwipe=this.touchTestSwipe(b)),!this.isVerticalMove&&!this.isHorizontalMove){if(this.isVerticalMove=this.touchTestVertical(a),this.isVerticalMove)return void(this.isTouchTypeDetermined=!0);this.isHorizontalMove=this.touchTestHorizontal(a),this.isHorizontalMove&&(this.isTouchTypeDetermined=!0)}},touchTestHorizontal:function(a){return Math.abs(a.x)>=f},touchTestVertical:function(a){return Math.abs(a.y)>=g},touchTestSwipe:function(a){return Math.abs(a.x)>h}},b.exports=j},{"./functionUtils.js":15,"./numberUtils.js":20,"./objectUtils.js":21}],26:[function(a,b,c){function d(a,b){this.trackingHash=a||{};var c=this;this.fireTracker=function(a){var b=this.trackingHash[a];return b?((new Image).src=b,void window.Tarnhelm.log('Tracking event fired for: "'+a+'"')):void window.Tarnhelm.log('Tracking hash URL not found for event name "'+a+'", ignoring this tracking event')},b.on("track",function(a){var b=a.data.trackingEventName;c.fireTracker(b)})}b.exports=d},{}],27:[function(a,b,c){var d={opacity:"opacity",translate:"transform",translateX:"transform",translateY:"transform",rotate:"transform",scale:"transform",scaleX:"transform",scaleY:"transform",blur:"filter",brightness:"filter",contrast:"filter",grayscale:"filter",saturate:"filter"},e={filter:["-webkit-filter","-moz-filter","-o-filter"]};b.exports={isValidTransitionType:function(a){return"string"!=typeof a?!1:!!d[a]},getTransitionSegment:function(a){return this.getTransitionSegmentForProperty(a,d[a.type])},getPrefixedTransitionSegments:function(a){var b=[];b.push(this.getTransitionSegment(a));for(var c=e[d[a.type]],f=0;f<c.length;f++)b.push(this.getTransitionSegmentForProperty(a,c[f]));return b},getTransitionSegmentForProperty:function(a,b){var c=[];return b&&c.push(b),a.duration&&c.push(a.duration),a.easing&&c.push(a.easing),a.delay&&c.push(a.delay),c.join(" ")},getCSSFunctionSegment:function(a,b){return a+"("+b+")"},calculateTransitionStyles:function(a){for(var b={start:{},end:{}},c=[],e=[],f=[],g=[],h=[],i=0;i<a.length;i++){var j=a[i];if(this.isValidTransitionType(j.type)){var k=d[j.type];switch(k){case"transform":e.length||c.push(this.getTransitionSegment(j)),e.push(this.getCSSFunctionSegment(j.type,j.startValue)),f.push(this.getCSSFunctionSegment(j.type,j.endValue));break;case"opacity":b.start[j.type]=j.startValue,b.end[j.type]=j.endValue,c.push(this.getTransitionSegment(j));break;case"filter":if(!g.length){var l=this.getPrefixedTransitionSegments(j);c=c.concat(l)}g.push(this.getCSSFunctionSegment(j.type,j.startValue)),h.push(this.getCSSFunctionSegment(j.type,j.endValue))}}}return c.length&&(b.start.transition=c.join(",")),e.length&&(b.start.transform=e.join(" ")),f.length&&(b.end.transform=f.join(" ")),g.length&&(b.start.filter=g.join(" ")),h.length&&(b.end.filter=h.join(" ")),b},getTransitionTime:function(a){var b=parseFloat(a.duration)||0,c=parseFloat(a.delay)||0,d=Math.floor(1e3*(b+c));return d},getMaxTransitionTime:function(a){for(var b=0,c=0;c<a.length;c++){var d=this.getTransitionTime(a[c]);d>b&&(b=d)}return b}}},{}],28:[function(a,b,c){var d=3e3;b.exports={getQueryParam:function(a,b){var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(b);return d?d[1]:""},preloadUrl:function(a,b){var c=new Image;"function"==typeof b&&(c.onload=b),c.src=a},preloadUrls:function(a){if(a&&a.length)for(var b=0;b<a.length;b++)this.preloadUrl(a[b])},preloadUrlsWithCallback:function(a,b){function c(a){h||(h=!0,b(a))}function e(){g++,g===a.length&&(window.Tarnhelm.log(g+" of "+a.length+" images have preloaded"),window.clearTimeout(f),c(!1))}var f,g=0,h=!1;if(!a||!a.length)return void b(!1);f=window.setTimeout(function(){window.Tarnhelm.log("Only "+g+" of "+a.length+" preloaded before timeout. Preload assets failed to load before the timeout, triggering callback."),c(!0)},d);for(var i=0;i<a.length;i++)this.preloadUrl(a[i],e)}}},{}],29:[function(a,b,c){var d=a("../renderer/stores/retrievers/component.js");b.exports={videoActions:["video:play","video:pause","video:reset","video:mute","video:unmute"],listen:function(a,b){var c=this;a.on(this.videoActions.join(" "),function(b,d){c.triggerVideoAction(a,d.actionName,d.componentName)});var d=b.getComponentLibrary(),e=b.getComponentNamesByCategory("video"),f=this.videoActions.map(function(a){return a+"-all:under-ancestor"});a.on(f.join(" "),function(b,f){var g=b.split(":")[1].split("-")[0],h="video:"+g;c.triggerVideoActionUnderAncestor(a,h,f.ancestorName,d,e)})},triggerVideoAction:function(a,b,c){var d=b+":"+c;a.trigger({actionName:d})},triggerVideoActionUnderAncestor:function(a,b,c,e,f){if(!c)return void window.Tarnhelm.log(b+"-all:under-ancestor actions require ancestorName property.");for(var g=0;g<f.length;g++){var h=f[g];d.hasAncestorOfName(h,c,e)&&this.triggerVideoAction(a,b,h)}}}},{"../renderer/stores/retrievers/component.js":72}],30:[function(a,b,c){var d=function(a,b){function c(a){var b="";return a.source&&(b+="url("+a.source+") ",b+=a.position?a.position+" ":"center top ",b+=a.repeat?a.repeat+" ":"no-repeat ",b+=a.attachment?a.attachment+" ":"scroll "),b+=a.color}function d(){var b=document.getElementById(a);return b||window.Tarnhelm.log("Invalid element id set on wrapSwapper."),b}var e,a=a,f=this;this.setWrap=function(a){e||(e=d());var b=c(a);e.style.background=b},b.on("set-wrap-background",function(a){f.setWrap(a.data)})};b.exports=d},{}],31:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){a("./mixins/action.js"),a("./mixins/action-user.js"),a("./mixins/action-touch.js"),a("./mixins/action-swipe.js"),a("./mixins/action-transitions.js"),a("./mixins/action-cuepoint.js"),a("./mixins/background.js"),a("./mixins/base.js"),a("./mixins/rect.js"),a("./mixins/resize.js"),a("./mixins/rotator.js"),a("./mixins/styles.js"),a("./mixins/teardown.js"),a("./mixins/transitions.js"),a("./mixins/video.js"),a("./mixins/zoolander.js"),a("./components/ad.tag"),b.tag("app",'<ad data="{adData}"></ad>','class="app"',function(a){this._adInstance=this.opts.adInstance,this.adData=this._adInstance.getAdStore().getState();var b=this;this._adInstance.getActionHandler().on("ad-state-updated",function(){b.adData=b._adInstance.getAdStore().getState(),b.update()})})})},{"./components/ad.tag":32,"./mixins/action-cuepoint.js":48,"./mixins/action-swipe.js":49,"./mixins/action-touch.js":50,"./mixins/action-transitions.js":51,"./mixins/action-user.js":52,"./mixins/action.js":53,"./mixins/background.js":54,"./mixins/base.js":55,"./mixins/rect.js":56,"./mixins/resize.js":57,"./mixins/rotator.js":58,"./mixins/styles.js":59,"./mixins/teardown.js":60,"./mixins/transitions.js":61,"./mixins/video.js":62,"./mixins/zoolander.js":63,riot:1}],32:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){a("./child.tag"),b.tag("ad",'<div riot-style="{getTagStyleString()}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>','class="ad"',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("background")})})},{"./child.tag":35,riot:1}],33:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("alphalfa",'<div class="alphalfa" riot-style="{getTagStyleString()}"><video __autoplay="{this.shouldItAutoplay()}" webkit-playsinline style="display:none;" muted="true"><source riot-src="{this.opts.data.video.fileName + \'.webm\'}"><source riot-src="{this.opts.data.video.fileName + \'.mp4\'}"></video><canvas class="alphalfa-buffer" style="display:none;" height="{this.opts.data.rect.height * 2}px" width="{this.opts.data.rect.width}px"></canvas><canvas class="alphalfa-output" height="{this.opts.data.rect.height}px" width="{this.opts.data.rect.width}px"></canvas></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var b=this;this.addLoopConfig=function(a){var b=this.opts.data.video,c=b.loop;return c===!0&&(a.loop=c,null!=b.maxLoops&&(a.maxLoops=b.maxLoops)),a},this.addStillFrame=function(a){var b=this.opts.data.video;return null!=b.stillFrameMS?a.stillFrameMS=b.stillFrameMS:b.loop===!0&&0!==b.maxLoops&&window.Tarnhelm.log("Warning: No stillFrameMS set on a non-infinitely looping Alphalfa. It will disappear after its last loop."),a},this.addMaskUrl=function(a){var b=this.opts.data.video;return null!=b.maskUrl&&(a.maskUrl=b.maskUrl),a},this.initAlphalfa=function(){this.opts.data.isInvisible&&(this.getVideoEl().autoplay=""),this.bufferEl=this.root.getElementsByTagName("canvas")[0],this.outputEl=this.root.getElementsByTagName("canvas")[1];var a={video:this.getVideoEl(),buffer:this.bufferEl,output:this.outputEl,colorCorrect:!!this.opts.data.video.colorCorrect,forceCanvas:!!this.opts.data.video.forceCanvas};a=this.addLoopConfig(a),a=this.addStillFrame(a),a=this.addMaskUrl(a),this.alphalfaPlayer=new ad_design.AlphalfaPlayer(a),this.alphalfaPlayer.listen()},this.play=function(){b.getVideoEl().play()},this.pause=function(){b.getVideoEl().pause()},this.mute=function(){window.Tarnhelm.log("Alphalfa does not support mute and unmute actions.")},this.unmute=this.mute,this.reset=function(){b.getVideoEl().currentTime=0},this.on("mount",function(){this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.initAlphalfa()}),this.on("unmount",function(){this.alphalfaPlayer.teardown()})})})},{riot:1}],34:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){b.tag("animaniac",'<div class="animaniac" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"></div>',function(b){var c=a("../../modules/objectUtils.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.initted=!1,this.createAnimation=function(){var a=c.clone(this.opts.data.animaniacOptions);a.injectEl=this.root.getElementsByClassName("animaniac")[0],a.url=this.opts.data.source,a.spriteHeight=this.opts.data.rect.height,a.spriteWidth=this.opts.data.rect.width,a.sheetHeight=this.opts.data.spriteSheetDimensions.height,a.sheetWidth=this.opts.data.spriteSheetDimensions.width,this.animaniac=new ad_design.Animaniac(a),this.initted=!0},this.addActionListeners=function(){var a=this,b=this.getAdInstance().getActionHandler();b.on("animaniac:play",function(b){a.canTriggerAction(b.componentName)&&a.animaniac.play()}),b.on("animaniac:pause",function(b){a.canTriggerAction(b.componentName)&&a.animaniac.pause()}),b.on("animaniac:play-animation",function(b){a.canTriggerAction(b.componentName)&&a.animaniac.playAnimation(b.data.animationName)})},this.destroyAnimation=function(){this.animaniac.pause(),this.animaniac=null},this.canTriggerAction=function(a){return this.initted&&a===this.opts.data.name},this.on("mount",function(){this.createAnimation(),this.addActionListeners()}),this.on("unmount",function(){this.destroyAnimation()})})})},{"../../modules/objectUtils.js":21,riot:1}],35:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){a("./alphalfa.tag"),a("./animaniac.tag"),a("./countdown.tag"),a("./countdown-number-text.tag"),a("./countdowner.tag"),a("./gallery.tag"),a("./graphic.tag"),a("./panel.tag"),a("./minimal-video.tag"),a("./reely.tag"),a("./rotator.tag"),a("./rotatorbutton.tag"),a("./slider-rotator.tag"),a("./youtube.tag"),b.tag("child",'<alphalfa each="{this.getType(\'alphalfa\')}" data="{data}"></alphalfa><animaniac each="{this.getType(\'animaniac\')}" data="{data}"></animaniac><countdown each="{this.getType(\'countdown\')}" data="{data}"></countdown><countdown-number-text each="{this.getType(\'countdown-number-text\')}" data="{data}"></countdown-number-text><countdowner each="{this.getType(\'countdowner\')}" data="{data}"></countdowner><gallery each="{this.getType(\'gallery\')}" data="{data}"></gallery><graphic each="{this.getType(\'graphic\')}" data="{data}"></graphic><panel each="{this.getType(\'panel\')}" data="{data}"></panel><reely each="{this.getType(\'reely\')}" data="{data}"></reely><minimal-video each="{this.getType(\'minimal-video\')}" data="{data}"></minimal-video><rotator each="{this.getType(\'rotator\')}" data="{data}"></rotator><rotatorbutton each="{this.getType(\'rotatorbutton\')}" data="{data}"></rotatorbutton><slider-rotator each="{this.getType(\'slider-rotator\')}" data="{data}"></slider-rotator><youtube each="{this.getType(\'youtube\')}" data="{data}"></youtube>','data-comp-name="{ this.opts.name }"',function(a){this.mixin("base");var b=this;if(this.opts.name){var c=this.getAdInstance(),d=c.getAdStore();this.componentData=d.getComponentState(this.opts.name),this.on("update",function(){this.componentData=d.getComponentState(b.opts.name)})}this.getType=function(a){var b=[];return this.componentData&&this.componentData.type===a&&!this.componentData.isHidden&&b.push({data:this.componentData}),b}})})},{"./alphalfa.tag":33,"./animaniac.tag":34,"./countdown-number-text.tag":36,"./countdown.tag":37,"./countdowner.tag":38,"./gallery.tag":39,"./graphic.tag":40,"./minimal-video.tag":41,"./panel.tag":42,"./reely.tag":43,"./rotator.tag":44,"./rotatorbutton.tag":45,"./slider-rotator.tag":46,"./youtube.tag":47,riot:1}],36:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("countdown-number-text",'<div class="countdown-number-text countdown-number-text-{this.opts.data.timeUnit}" riot-style="{getTagStyleString()}"> {getDisplayValue()} </div>',function(a){this.mixin("base"),
this.mixin("styles"),this.mixin("rect"),this.updateTextStyle=function(){this.addStyleRule("font-size",this.determinedRect.height)},this.pad=function(a){return a>9?a:"0"+a},this.getDisplayValue=function(){var a=this.opts.data.remaining[this.opts.data.timeUnit];return this.opts.data.padZeros&&(a=this.pad(a)),a},this.on("update",this.updateTextStyle)})})},{riot:1}],37:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("countdown",'<div class="countdown" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div if="{this.opts.data.remaining.totalMs || this.opts.data.showAfterEnd}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.triggerBackgroundState=function(){this.opts.data.remaining.totalMs||this.opts.data.useAlternateBackground||!this.opts.data.alternateBackground||this.getAdInstance().getActionHandler().trigger({actionName:"set-alternate-background",componentName:this.opts.data.name})},this.on("update",function(){this.triggerBackgroundState(),this.setBackground()})})})},{riot:1}],38:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("countdowner",'<div id="{this.opts.data.name}" class="countdowner th-countdown" riot-style="{getTagStyleString()}"><div class="th-countdown-inject" id="{\'th-countdown-\' + this.opts.data.name}"></div></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("zoolander"),this.initCountdowner=function(){for(var a=this.root.getElementsByClassName("th-countdown-inject")[0],b=this.getAdIframeZoolander(),c={el:a,targetDate:new Date(this.opts.data.targetDate),zoolander:b},d=["splitChar","hideAfterRelease","periodContainerCss","periodCountCss","doPad","printLabels","labelsBelow","labels","labelsCss"],e=0;e<d.length;e++)null!=this.opts.data[d[e]]&&(c[d[e]]=this.opts.data[d[e]]);new window.ad_design.Countdowner(c)},this.on("mount",function(){this.initCountdowner(),window.Tarnhelm.log('Warning: The "countdowner" component is deprecated and does not support scaling for MobilePTP, please migrate to the "countdown" component.')})})})},{riot:1}],39:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){a("./graphic.tag"),b.tag("gallery",'<div class="gallery th-gallery-parent" riot-style="{getTagStyleString()}"><graphic each="{name, i in this.opts.data.imageUrls}" data="{parent.getPhotoData(i)}" class="th-gallery-image {currentIndex === i ? \'active\' : \'\'}"></graphic><graphic class="th-gallery-arrow prev" data="{this.opts.data.arrowGraphics.previous}"></graphic><graphic class="th-gallery-arrow next" data="{this.opts.data.arrowGraphics.next}"></graphic></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("background"),this.mixin("rect"),this.mixin("action"),this.mixin("action-swipe"),this.mixin("action-transitions");var b=this;this.currentIndex=0,this.maxIndex=this.opts.data.imageUrls.length-1,this.prevButton=null,this.nextButton=null,this.getPhotoData=function(a){var b={name:this.opts.data.name+a,source:this.opts.data.imageUrls[a],rect:{anchorX:"right",anchorY:"top",offsetX:0,offsetY:0,height:this.opts.data.rect.height,width:this.opts.data.rect.width}};return b},this.on("swipeleft",function(){this.incrementIndex()}),this.on("swiperight",function(){this.decrementIndex()}),this.incrementIndex=function(){b.currentIndex++,b.currentIndex>b.maxIndex&&(b.currentIndex=0),b.update()},this.decrementIndex=function(){b.currentIndex--,b.currentIndex<0&&(b.currentIndex=b.maxIndex),b.update()},this.on("mount",function(){this.attachTouchActions(),this.prevButton=b.root.getElementsByClassName("prev")[0],this.nextButton=b.root.getElementsByClassName("next")[0],this.prevButton.addEventListener("click",b.decrementIndex),this.nextButton.addEventListener("click",b.incrementIndex)}),this.on("unmount",function(){this.detachTouchActions(),this.prevButton.removeEventListener("click",b.decrementIndex),this.nextButton.removeEventListener("click",b.incrementIndex)})})})},{"./graphic.tag":40,riot:1}],40:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("graphic",'<div if="{!this.isDisabledNavigationComponent()}" class="graphic" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><img if="{this.opts.data.source}" riot-src="{this.opts.data.source}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"><img if="{this.opts.data.fullAdHoverSource}" riot-src="{this.opts.data.fullAdHoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="ad-hover"><img if="{this.opts.data.hoverSource}" riot-src="{this.opts.data.hoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="hover"></div><div if="{this.isDisabledNavigationComponent()}" class="graphic disabled" riot-style="{getTagStyleString()}"><img if="{this.opts.data.disabledSource}" riot-src="{this.opts.data.disabledSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})})},{riot:1}],41:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("minimal-video",'<div riot-style="{getTagStyleString()}" class="minimal-video"><video webkit-playsinline __autoplay="{this.shouldItAutoplay()}" muted="true"><source riot-src="{this.opts.data.video.fileName + \'.webm\'}"><source riot-src="{this.opts.data.video.fileName + \'.mp4\'}"></video></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var b=this;this.setupVideoAttributes=function(){var a=this.opts.data.video;a.autoplay!==!1&&(this.getVideoEl().autoplay=!0),a.loop&&(this.getVideoEl().loop=!0)},this.play=function(){b.getVideoEl().play()},this.pause=function(){b.getVideoEl().pause()},this.mute=function(){b.getVideoEl().muted=!0},this.unmute=function(){b.getVideoEl().muted=!1},this.reset=function(){b.getVideoEl().currentTime=0},this.minimalVideoListen=function(){this.getVideoEl().addEventListener("play",this.makeVisible)},this.minimalVideoTeardown=function(){this.getVideoEl().removeEventListener("play",this.makeVisible)},this.on("mount",function(){this.makeInvisible(),this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.setupVideoAttributes(),this.minimalVideoListen()}),this.on("unmount",function(){this.minimalVideoTeardown()})})})},{riot:1}],42:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("panel",'<div class="panel" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})})},{riot:1}],43:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("reely",'<div id="{this.opts.data.name}" riot-style="{getTagStyleString()}" class="reely-inject-el"></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("zoolander"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var b=this,c=20,d=40,e=window.Tarnhelm.getDeviceInfo().isMobileDevice?d:c;this.determineControlBarConfig=function(a){if(!a)return{};for(var b=Object.keys(a),c={},d=0;d<b.length;d++){var e=b[d];c[e]=a[e]}return c},this.getButtonSize=function(a){return a&&a.buttonSize?a.buttonSize:e},this.determineSpritesheetsConfig=function(a){var b={buttonSize:this.getButtonSize(a)};return a&&a.png&&(b.png=a.png),b},this.initReely=function(){var a=this.opts.data,b=this.root.getElementsByClassName("reely-inject-el")[0],c=this.getAdIframeZoolander(),d=this.determineControlBarConfig(a.controls),e=this.determineSpritesheetsConfig(a.spritesheets),f=this.determineSpritesheetsConfig(a.overlaySpritesheets);this.reelyPlayer=new ad_design.Reely({injectEl:b,src:this.opts.data.video.fileName,zoolander:c,slate:this.opts.data.video.slate||"",autoplay:this.opts.data.video.autoplay||!1,autosound:this.opts.data.video.autosound||!1,controlBar:d,spritesheets:e,overlaySpritesheets:f})},this.play=function(){b.reelyPlayer.play()},this.pause=function(){b.reelyPlayer.pause()},this.mute=function(){b.reelyPlayer.mute()},this.unmute=function(){b.reelyPlayer.unmute()},this.reset=function(){b.reelyPlayer.reset()},this.on("mount",function(){this.initReely(),this.setVideoEl(this.reelyPlayer.videoEl)}),this.on("unmount",function(){this.reelyPlayer.teardown()})})})},{riot:1}],44:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){b.tag("rotator",'<div class="rotator" riot-style="{getTagStyleString()}"><child name="{activeChildName}"></child></div>',function(b){var c=a("../stores/delegators/wrap.js"),d=a("../stores/retrievers/rotator.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("rotator"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-transitions");var e=this.getAdInstance().getAdStore();this.activeChildName=this.opts.data.childNames[this.opts.data.activeIndex],this.setActiveChildName=function(){var a=this.opts.data.childNames[this.opts.data.activeIndex];if(a!==this.activeChildName){var b=this;this.activeChildName=void 0,window.setTimeout(function(){b.activeChildName=a,b.update()},1)}},this.on("update",this.setActiveChildName),this.hasWrapConfig=function(){return!(!this.opts.data.wrapConfig||!this.opts.data.wrapConfig.enabled)},this.updateWrap=function(){this.hasWrapConfig()&&c.triggerRotatorWrapSwap(this.opts.data,e.getState())},this.resizeAdContainer=function(){if("expander"===this.opts.data.name){var a=window.Tarnhelm.getAd(e.getAdId()),b=d.getActiveChildComponent(this.opts.data,e.getComponentLibrary());a.resizeAdContainer(b.rect)}},this.on("update",this.updateWrap),this.on("update",this.resizeAdContainer)})})},{"../stores/delegators/wrap.js":69,"../stores/retrievers/rotator.js":75,riot:1}],45:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){a("./graphic.tag"),b.tag("rotatorbutton",'<div class="rotatorbutton" riot-style="{getTagStyleString()}" onclick="{handleClickAndRotatorbuttonClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><graphic data="{graphicData}"></graphic></div>',function(a){var b=this;this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.handleRotatorbuttonClick=function(a){if(!this.isActive()){var c=b.opts.data;if(c.rotatorName){var d={actionName:"route",data:{rotatorConfigs:[{name:c.rotatorName,index:c.rotatorIndex}]}};c.rotatorConfigs&&c.rotatorConfigs.length&&(d.data.rotatorConfigs=d.data.rotatorConfigs.concat(c.rotatorConfigs)),d.data.showComponents=c.showComponents,d.data.hideComponents=c.hideComponents,this.getAdInstance().getActionHandler().trigger(d)}}},this.handleClickAndRotatorbuttonClick=function(a){this.handleClick(a),this.handleRotatorbuttonClick(a)},this.getGraphicData=function(){var a=this.opts.data,b={description:a.description,source:a.source,hoverSource:a.hoverSource,fullAdHoverSource:a.fullAdHoverSource,disabledSource:a.disabledSource,rect:{anchorX:"left",anchorY:"top",offsetX:0,offsetY:0,height:a.rect.height,width:a.rect.width}};return this.isActive()&&(b.source=a.activeSource),b},this.isActive=function(){var a=this.getAdInstance().getAdStore(),b=a.getComponentState(this.opts.data.rotatorName);return b&&this.opts.data.rotatorIndex===b.activeIndex},this.setCursor=function(){this.isActive()?this.removeStyleRule("cursor"):this.addStyleRule("cursor","pointer")},this.setState=function(){this.graphicData=this.getGraphicData(),this.setCursor()},this.setState(),this.on("update",function(){this.setState()})})})},{"./graphic.tag":40,riot:1}],46:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(b){b.tag("slider-rotator",'<div class="slider-rotator" riot-style="{getTagStyleString()}"><div class="slide-offset js-offset" riot-style="{getSlideOffsetInitialStyle()}"><div each="{name, i in opts.data.childNames}" class="slide"><child name="{name}"></child></div></div><graphic class="th-slider-arrow prev" if="{this.shouldShowArrowPrev()}" data="{this.opts.data.arrowGraphics.previous}" onclick="{this.decrementIndex}"></graphic> /><graphic class="th-slider-arrow next" if="{this.shouldShowArrowNext()}" data="{this.opts.data.arrowGraphics.next}" onclick="{this.incrementIndex}"></graphic></div>',function(b){var c=a("../../modules/numberUtils.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("rotator"),this.mixin("action"),this.mixin("action-transitions"),this.mixin("action-touch"),this.on("indexChanged",function(){this.handleIndexChanged()}),this.handleIndexChanged=function(){var a={actionName:"video:pause-all:under-ancestor",ancestorName:this.opts.data.name};this.triggerActions([a])};var d=window.Tarnhelm.getDeviceInfo().canTransitionTransforms;d||window.Tarnhelm.log("Slider NOT supporting touch actions; We've determined that we cannot transition transforms."),this.addStyleRule("overflow","hidden"),this.addStyleRule("white-space","nowrap");var e=.85,f=.4,g=15,h=.35;this.getRestingStateOffset=function(){return-1*this.opts.data.activeIndex*this.opts.data.rect.width},this.getSliderStateData=function(){return{activeIndex:this.opts.data.activeIndex,slideWidth:this.opts.data.rect.width,restingOffset:this.getRestingStateOffset()}},this.getTransitionString=function(a){return"transform "+a+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getOffsetString=function(a){var b=a+"px";return"translate3d("+b+",0,0)"},this.getMaxOffset=function(a,b){return this.isAtBeginning()?a+b*h:a+b},this.getMinOffset=function(a,b){return this.isAtEnd()?a-b*h:a-b},this.isAtBeginning=function(){return 0===this.opts.data.activeIndex},this.isAtEnd=function(){var a=this.opts.data.childNames.length-1;return this.opts.data.activeIndex===a},this.setOffsetDivStyle=function(a,b){var c=this.root.getElementsByClassName("js-offset")[0];this.setOffsetDivTransition(b,c),c.style.transform=this.getOffsetString(a)},this.setOffsetDivTransition=function(a,b){var c=b||this.root.getElementsByClassName("js-offset")[0];null==a?c.style.transition="none":c.style.transition=this.getTransitionString(a)},this.currAnimProps=null,this.sliderHandleTouchStart=function(a){clearTimeout(this.slideCompleteTimeout),this.setOffsetDivTransition(null);var b=this.getSliderStateData();this.currAnimProps={hasMovedOffset:!1,currTouchStartOffset:this.parseCurrentOffset(),maxPan:this.getMaxOffset(b.restingOffset,b.slideWidth),minPan:this.getMinOffset(b.restingOffset,b.slideWidth)}},this.sliderHandleTouchMove=function(a){var b=this.currAnimProps;if(!a||a.isVerticalMove)return void(b&&b.hasMovedOffset&&(this.returnToResting(),this.currAnimProps=null));b.hasMovedOffset=!0;var d=(this.getSliderStateData(),a.totalDistance.x),e=b.currTouchStartOffset+d;e=c.clamp(e,b.minPan,b.maxPan);var f=null;this.setOffsetDivStyle(e,f)},this.sliderHandleTouchEnd=function(a){if(this.currAnimProps=null,a&&!a.isVerticalMove){var b=this.getSliderStateData(),c=this.parseCurrentOffset(),d=this.getOffsetFromResting(b,c),e=0!==a.velocity.x,f=0>d,g=a.velocity.x<0,h=e&&f!==g;if(h)return void this.returnToResting();var i=f,j=this.testNeedsIndexChange(b,a),k=i&&this.isAtEnd()||!i&&this.isAtBeginning();return j&&!k?void this.doSlideChange(a,b,i):void this.returnToResting()}},this.doSlideChange=function(a,b,c){var d=c?-1*b.slideWidth:b.slideWidth,f=b.restingOffset+d,g=e*a.transitionLengthFactor,h=this.determineTransitionLength(f,g);this.setOffsetDivStyle(f,h);var i=c?this.incrementIndex:this.decrementIndex;this.callIndexChangeAfterTransition(i.bind(this),h)},this.callIndexChangeAfterTransition=function(a,b){clearTimeout(this.slideCompleteTimeout),this.slideCompleteTimeout=setTimeout(a,1e3*b),a=null},this.testNeedsIndexChange=function(a,b){var c=!1;if(c=Math.abs(b.velocity.x)>g)return c;var d=this.parseCurrentOffset(),e=f*a.slideWidth,h=Math.abs(this.getOffsetFromResting(a,d)),c=h>e;return c},this.getOffsetFromResting=function(a,b){return b-a.restingOffset},this.returnToResting=function(){var a=this.getRestingStateOffset(),b=this.determineTransitionLength(a,1.5);this.setOffsetDivStyle(a,b)},this.parseCurrentOffset=function(){var a=this.root.getElementsByClassName("js-offset")[0];if(!a||!a.style||!a.style.transform)return this.getRestingStateOffset();var b=0,c=a.style.transform,d=c.split("translate3d(")[1].split(",")[0];return b=parseInt(d,10)},this.determineTransitionLength=function(a,b){var c=this.getSliderStateData(),d=this.parseCurrentOffset(),f=b||e,g=Math.abs(d-a)/c.slideWidth;return 1>g&&(f*=g),f},this.getSlideOffsetInitialStyle=function(){var a=this.getSliderStateData(),b=a.restingOffset,c=this.determineTransitionLength(b),f={height:this.opts.data.rect.height+"px"};d?(f.transition=this.getTransitionString(c),f.transform=this.getOffsetString(b)):(f.transition=this.getNonTranslateTransitionString(e),f.left=this.getNonTranslateOffsetString(b));var g=this.cssStringFromCSSObject(f);return g},d&&(this.addTouchStartHandler(this.sliderHandleTouchStart),this.addTouchMoveHandler(this.sliderHandleTouchMove),this.addTouchEndHandler(this.sliderHandleTouchEnd)),this.shouldShowArrowPrev=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.previous&&!this.isAtBeginning()},this.shouldShowArrowNext=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.next&&!this.isAtEnd()},this.manualUpdateNonTranslateOffsetDiv=function(a,b){b.style.left=this.getNonTranslateOffsetString(a)},this.getNonTranslateTransitionString=function(a){return"left "+a+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getNonTranslateOffsetString=function(a){return a+"px"},this.on("update",function(){if(!d){var a=this.root.getElementsByClassName("js-offset")[0];if(!a)return;this.manualUpdateNonTranslateOffsetDiv(this.getRestingStateOffset(),a)}})})})},{"../../modules/numberUtils.js":20,riot:1}],47:[function(a,b,c){!function(c,d){if("function"==typeof define&&define.amd)define(["riot"],function(a){d(a)});else if("undefined"!=typeof b&&"undefined"!=typeof b.exports){var e=a("riot");d(e)}else d(c.riot)}(this,function(a){a.tag("youtube",'<div class="youtube" riot-style="{getTagStyleString()}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div class="youtube_injection"></div></div>',function(a){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("video"),this.mixin("resize"),this.firstStart=!0,this.actionHandler=this.getAdInstance().getActionHandler();var b=this;this.loadYoutubeAPI=function(){window.onYouTubeIframeAPIReady=function(){var a={actionName:"api-ready:youtube"};window.Tarnhelm.triggerGlobalAction(a)};var a="tarnhelm_yt_script",b="https://www.youtube.com/iframe_api",c=document.getElementById(a);if(!c){c=document.createElement("script"),c.id=a,c.src=b;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}},this.getAutoplayValue=function(){return b.opts.data.video.autoplay?1:0},this.initYoutubePlayer=function(){b.player=new YT.Player(b.root.firstChild.firstChild,{height:b.opts.data.rect.height,width:b.opts.data.rect.width,videoId:b.opts.data.video.id,playerVars:{autohide:1,autoplay:b.getAutoplayValue(),rel:0,showinfo:0,wmode:"transparent"},events:{onStateChange:function(a){a.data===YT.PlayerState.PLAYING&&b.firstStart&&(b.firstStart=!1,b.handleEvent(a,"videoStart")),a.data===YT.PlayerState.ENDED&&b.handleEvent(a,"videoComplete")}}})},this.play=function(){b.player.playVideo()},this.pause=function(){b.player.pauseVideo()},this.mute=function(){b.player.mute()},this.unmute=function(){b.player.unMute()},this.reset=function(){b.player.stopVideo()},this.on("mount",function(){this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers),window.YT?this.initYoutubePlayer():(this.actionHandler.one("api-ready:youtube",this.initYoutubePlayer),"function"!=typeof window.onYouTubeIframeAPIReady&&this.loadYoutubeAPI())}),this.on("unmount",function(){b.player.destroy()}),this.on("resize",function(){b.player.getIframe().style.width=b.determinedRect.width,b.player.getIframe().style.height=b.determinedRect.height})})})},{riot:1}],48:[function(a,b,c){var d=a("riot"),e={init:function(){this.hasCuePointActions()&&(this.cuePointActionsArray=this.collateCuePointActions())},hasCuePointActions:function(){return this.getConfiguredCuePoints().length>0},initCuePointHandlers:function(){this.boundOnTimeUpdate=this.onTimeUpdate.bind(this),this.getVideoEl().addEventListener("timeupdate",this.boundOnTimeUpdate)},teardownCuePointHandlers:function(){this.getVideoEl().removeEventListener("timeupdate",this.boundOnTimeUpdate)},getConfiguredCuePoints:function(){var a=this.opts.data.actions||{};return a&&a.cuePoints?a.cuePoints:[]},collateCuePointActions:function(){for(var a,b,c,d,e=this.getConfiguredCuePoints(),f=[],g=0;g<e.length;g++)a=e[g],b=a.timeString,c=a.actions,d=this.determineCueMS(b),f.push({ms:d,actions:c});return f.sort(function(a,b){return a.ms>b.ms}),f},onTimeUpdate:function(a){null==this.cueIndex&&(this.cueIndex=0),null!=this.cuePointActionsArray[this.cueIndex]&&this.cuePointEventHandler(a)},cuePointEventHandler:function(a){var b=a.target,c=1e3*b.currentTime,d=this.cuePointActionsArray[this.cueIndex],e=d.ms;c>=e&&(this.cueIndex++,this.triggerActions(d.actions))},determineCueMS:function(a){var b=this.determineTimeObj(a),c={m:6e4,s:1e3,ms:1},d=Object.keys(b).reduce(function(a,d){return a+b[d]*c[d]},0);return isNaN(d)?void console.warn("Error processing cuepoint TimeString :: ",a):d},determineTimeObj:function(a){for(var b={},c=a.replace(/(\D{1,})([\d])/g,"$1,$2").split(","),d=0;d<c.length;d++){var e=c[d].split(/(\D{1,})/);b[e[1]]=parseInt(e[0],10)}return b}};d.mixin("action-cuepoint",e)},{riot:1}],49:[function(a,b,c){var d=a("riot"),e={init:function(){this.attachTouchActions||this.mixin("action-touch"),this.hasTouch&&this.addTouchEndHandler(this.handleSwipeEnd)},handleSwipeEnd:function(a){if(!a.isMoveY&&a.isSwipe){var b=a.totalDistance.x,c=0>b;c?this.handleSwipeActions("swipeleft"):this.handleSwipeActions("swiperight")}},handleSwipeActions:function(a){this.trigger("swipe"),this.trigger(a),this.hasAction("swipe")&&this.triggerActions(this.opts.data.actions.swipe),this.hasAction(a)&&this.triggerActions(this.opts.data.actions[a])}};d.mixin("action-swipe",e)},{riot:1}],50:[function(a,b,c){var d=a("riot"),e=(a("../../modules/functionUtils.js"),a("../../modules/touchData.js")),f=null,g={init:function(){this.touchStartHandlers=[],this.touchMoveHandlers=[],this.touchEndHandlers=[],this.touchMoveRAF=null,this.hasTouch=window.Tarnhelm.getDeviceInfo().hasTouch,this.hasTouch&&(this.registerTeardownFunction||this.mixin("teardown"),this.registerTeardownFunction(this.detachTouchActions),this.resetTouchData(),this.on("mount",function(){this.attachTouchActions()}),window.Tarnhelm.getIsDebug()&&null!=this.setupTouchDebugVisual&&this.setupTouchDebugVisual())},setupTouchDebugVisual:f,attachTouchActions:function(){this.boundTouchMoveAnimationFrame=this.handleTouchMoveAnimationFrame.bind(this),this.root.addEventListener("touchstart",this.handleTouchStart),this.root.addEventListener("touchmove",this.handleTouchMove),this.root.addEventListener("touchend",this.handleTouchEnd)},detachTouchActions:function(){this.root.removeEventListener("touchstart",this.handleTouchStart),this.root.removeEventListener("touchmove",this.handleTouchMove),this.root.removeEventListener("touchend",this.handleTouchEnd),this.boundTouchMoveAnimationFrame=null,this.throttledHandleTouchMove=null},resetTouchData:function(){this.touchData=null,this.isTouched=!1},stopEvent:function(a){var b=!!this.touchData,c=b?!!this.touchData.isTouchTypeDetermined:!1,d=b?!!this.touchData.isVerticalMove:!1;b&&c&&!d&&a&&(a.stopPropagation(),a.preventDefault())},addTouchStartHandler:function(a,b){this._addTouchEventHandler(this.touchStartHandlers,a,b)},addTouchEndHandler:function(a,b){this._addTouchEventHandler(this.touchEndHandlers,a,b)},addTouchMoveHandler:function(a,b){this._addTouchEventHandler(this.touchMoveHandlers,a,b)},_addTouchEventHandler:function(a,b,c){var d=c||this;a.push({callback:b,thisArg:d})},handleTouchStart:function(a){this.isTouched=!0,this.touchData=new e(a),this.callHandlers(this.touchStartHandlers,this.touchData,a),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame)},handleTouchMove:function(a){this.stopEvent(a),this.touchData&&this.touchData.addTouchMoveData(a)},handleTouchMoveAnimationFrame:function(){this.touchData&&(this.callHandlers(this.touchMoveHandlers,this.touchData),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame))},handleTouchEnd:function(a){window.cancelAnimationFrame(this.touchMoveRAF),this.touchData&&(this.touchData.finalizeTouchDataOnEnd(a),this.callHandlers(this.touchEndHandlers,this.touchData)),this.resetTouchData()},callHandlers:function(a,b,c){if(a.length){var d=[b,c];if(a.length)for(var e=0;e<a.length;e++)this.callHandler(a[e],d)}},callHandler:function(a,b){a.callback.apply(a.thisArg,b)}};d.mixin("action-touch",g)},{"../../modules/functionUtils.js":15,"../../modules/touchData.js":25,riot:1}],51:[function(a,b,c){var d=a("riot"),e={init:function(){var a=this,b=this.getAdInstance().getActionHandler();this.hasAction("transitionsOutStart")&&b.on("transition-component-out:"+a.opts.data.name,function(){b.triggerMany(a.opts.data.actions.transitionsOutStart)}),this.hasAction("transitionsOutComplete")&&b.on("transition-component-out:"+a.opts.data.name+":complete",function(){b.triggerMany(a.opts.data.actions.transitionsOutComplete)})}};d.mixin("action-transitions",e)},{riot:1}],52:[function(a,b,c){var d=a("riot"),e={init:function(){this.hasAction("click")&&this.addStyleRule("cursor","pointer")},handleClick:function(a){this.handleEvent(a,"click")},handleHoverIn:function(a){this.handleEvent(a,"hoverIn")},handleHoverOut:function(a){this.handleEvent(a,"hoverOut")}};d.mixin("action-user",e)},{riot:1}],53:[function(a,b,c){var d=a("riot"),e={init:function(){if(this.hasAction("init")){var a=this.opts.data.actions.init;this.triggerActions(a)}},handleEvent:function(a,b){if(a.preventUpdate=!0,!this.hasAction(b))return!0;var c=this.opts.data.actions[b];return this.triggerActions(c),!0},triggerActions:function(a){if(this.isDisabledNavigationComponent())return void window.Tarnhelm.log('Suppressing actions for navigation component "'+this.opts.data.name+'", navigation is currently disabled.');var b=this.getAdInstance().getActionHandler();b.triggerMany(a)},hasAction:function(a){return this.opts.data.actions&&this.opts.data.actions[a]&&this.opts.data.actions[a].length}};d.mixin("action",e)},{riot:1}],54:[function(a,b,c){var d=a("riot"),e=["background-attachment","background-image","background-position","background-repeat","background-size"],f={init:function(){this.setBackground(),this.on("update",this.setBackground)},setBackground:function(){var a,b=this.opts.data||{};a=b.useAlternateBackground?b.alternateBackground||{}:b.background||{},a.color?this.addStyleRule("background-color",a.color):this.removeStyleRule("background-color"),a.source?(this.addStyleRule("background-image","url("+a.source+")"),a.attachment?this.addStyleRule("background-attachment",a.attachment):this.removeStyleRule("background-attachment"),a.position?this.addStyleRule("background-position",a.position):this.removeStyleRule("background-position"),a.repeat?this.addStyleRule("background-repeat",a.repeat):this.addStyleRule("background-repeat","no-repeat"),a.size?this.addStyleRule("background-size",a.size):this.addStyleRule("background-size",this.getBackgroundSize())):this.removeStyleRules(e)},getBackgroundSize:function(){return this.determinedRect.width+" "+this.determinedRect.height}};d.mixin("background",f)},{riot:1}],55:[function(a,b,c){var d=a("riot"),e={getAdInstance:function(){if(this._adInstance)return this._adInstance;for(var a,b=this;!a;)b=b.parent,a=b._adInstance;return this._adInstance=a,a},getAdStore:function(){return this.getAdInstance().getAdStore()},getComponentLibrary:function(){return this.getAdStore().getComponentLibrary()},isDisabledNavigationComponent:function(){if(this.opts.data.isNavigationComponent){var a=this.getAdInstance().getAdStore();return a.getNavigationComponentsDisabledFlag()}return!1}};d.mixin("base",e)},{riot:1}],56:[function(a,b,c){var d=a("riot"),e=a("../../modules/rectProcessor.js"),f={init:function(){this.setRect(),this.on("update",this.setRect)},setRect:function(){var a=this.opts.data||{},b=a.rect||{};this.removeStyleRules(["top","right","bottom","left"]),this.determinedRect=e.process(b),this.addStyleRule("position",this.determinedRect.position),this.addStyleRule(this.determinedRect.anchorX,this.determinedRect.offsetX),this.addStyleRule(this.determinedRect.anchorY,this.determinedRect.offsetY),this.addStyleRule("height",this.determinedRect.height),this.addStyleRule("width",this.determinedRect.width)}};d.mixin("rect",f)},{"../../modules/rectProcessor.js":22,riot:1}],57:[function(a,b,c){var d=a("riot"),e={init:function(){this._isMounted=!1,this._currentWidth=this.opts.data.rect.width,this.on("mount",function(){this._isMounted=!0}),this.on("update",this._checkForResize)},_checkForResize:function(){this._isMounted&&this.opts.data.rect.width!==this._currentWidth&&(this._currentWidth=this.opts.data.rect.width,this.trigger("resize"))}};d.mixin("resize",e)},{riot:1}],58:[function(a,b,c){var d=a("riot"),e={init:function(){
this.registerTeardownFunction||this.mixin("teardown"),this.initRotatorEventHandlers(),this.registerTeardownFunction(this.teardownRotatorEventHandlers)},initRotatorEventHandlers:function(){this.prevActiveIndex=this.activeIndex,this.on("update",this.handleRotatorUpdate)},teardownRotatorEventHandlers:function(){this.off("update",this.handleRotatorUpdate)},incrementIndex:function(){var a={actionName:"rotator:increment-index",componentName:this.opts.data.name};this.triggerActions([a])},decrementIndex:function(){var a={actionName:"rotator:decrement-index",componentName:this.opts.data.name};this.triggerActions([a])},handleRotatorUpdate:function(){var a=this.opts.data.activeIndex,b=this.prevActiveIndex;null!=b&&b!==a&&(this.trigger("indexChanged"),this.hasAction("indexChanged")&&this.triggerActions(this.opts.data.actions.indexChanged)),this.prevActiveIndex=a}};d.mixin("rotator",e)},{riot:1}],59:[function(a,b,c){var d=a("riot"),e={transform:["-webkit-transform","-ms-transform"],"transform-origin":["-webkit-transform-origin","-moz-transform-origin","-ms-transform-origin","-o-transform-origin"],transition:["-webkit-transition","-moz-transition","-o-transition"],filter:["-webkit-filter","-moz-filter","-o-filter"]},f={init:function(){this.initTagStyles(),this.addCustomCSSTagStyles(),this.on("update",this.setTagStyleString)},initTagStyles:function(){this.tagStyles={},this.tagStyleString=""},addCustomCSSTagStyles:function(){var a=this.opts.data.css;a&&this.addStyleRules(a)},addStyleRule:function(a,b){this.tagStyles[a]=b;var c=e[a];if(c)for(var d=0;d<c.length;d++)this.tagStyles[c[d]]=b},addStyleRules:function(a){for(var b in a)a.hasOwnProperty(b)&&this.addStyleRule(b,a[b])},removeStyleRule:function(a){delete this.tagStyles[a]},removeStyleRules:function(a){if(a&&a.length)for(var b=0;b<a.length;b++)this.removeStyleRule(a[b])},setVisibilityStyle:function(){null!=this.opts.data.isInvisible&&(this.opts.data.isInvisible?this.addStyleRule("visibility","hidden"):this.addStyleRule("visibility","visible"))},makeInvisible:function(){var a=this.tagStyles.visibility;(a||"hidden"!==a)&&(this.addStyleRule("visibility","hidden"),this.update())},makeVisible:function(){var a=this.tagStyles.visibility;a&&"visible"!==a&&(this.addStyleRule("visibility","visible"),this.update())},getTagStyleString:function(){var a="";return this.setVisibilityStyle(),a+=this.cssStringFromCSSObject(this.tagStyles)},cssStringFromCSSObject:function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b},setTagStyleString:function(){this.tagStyleString=this.getTagStyleString()}};d.mixin("styles",f)},{riot:1}],60:[function(a,b,c){var d=a("riot"),e={init:function(){var a=this;this.teardownQueue=[],this.on("unmount",function(){a.unmountTeardown()})},registerTeardownFunction:function(a,b){var c=this;this.teardownQueue.push({callback:a,thisArg:b||c})},unmountTeardown:function(){for(var a=0;a<this.teardownQueue.length;a++){var b=this.teardownQueue[a];b.callback.call(b.thisArg)}}};d.mixin("teardown",e)},{riot:1}],61:[function(a,b,c){var d=a("riot"),e=a("../../modules/transitionStyleGenerator.js"),f={init:function(){if(this.transitionStyles=this.getAllTransitionStyles(),this.hasTransitionsIn()&&this.hasTransitionsIn()&&(this.setTransitionsStartState(this.transitionStyles["in"]),this.on("mount",function(){this.setTransitionsEndState(this.transitionStyles["in"])})),this.hasTransitionsOut()){var a=this,b=this.getAdInstance().getActionHandler(),c="transition-component-out:"+this.opts.data.name;b.on(c,function(){a.setTransitionsStartState(a.transitionStyles.out),a.setTransitionsEndState(a.transitionStyles.out)})}},getAllTransitionStyles:function(){var a=this.opts.data,b={"in":{},out:{}};return this.hasTransitionsIn()&&(b["in"]=e.calculateTransitionStyles(a.transitionsIn)),this.hasTransitionsOut()&&(b.out=e.calculateTransitionStyles(a.transitionsOut)),b},setTransitionsStartState:function(a){this.addStyleRules(a.start)},setTransitionsEndState:function(a){if(window.requestAnimationFrame){var b=this;window.requestAnimationFrame(function(){window.setTimeout(function(){b.addStyleRules(a.end),b.update()},1)})}else this.addStyleRules(a.end),this.update()},hasTransitionsIn:function(){return this.opts.data.transitionsIn&&this.opts.data.transitionsIn.length},hasTransitionsOut:function(){return this.opts.data.transitionsOut&&this.opts.data.transitionsOut.length}};d.mixin("transitions",f)},{"../../modules/transitionStyleGenerator.js":27,riot:1}],62:[function(a,b,c){var d=a("riot"),e=["play","pause","mute","unmute","reset"],f={init:function(){this.registerTeardownFunction||this.mixin("teardown")},enforceVideoInterface:function(){for(var a=0;a<e.length;a++)"function"!=typeof this[e[a]]&&window.Tarnhelm.log(this.root.tagName+" failed to implement "+e[a]+"()")},setVideoEl:function(a){this.videoEl=a,this.enforceVideoInterface(),this.initVideoElEventHandlers(),this.registerTeardownFunction(this.teardownVideoElEventHandlers),this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers)},getVideoEl:function(){return this.videoEl?this.videoEl:void window.Tarnhelm.log(this.root.tagName+" failed to call `setVideoEl` or passed a bad reference.")},initVideoActionReceivers:function(){this._setActionReceivers("on")},teardownVideoActionReceivers:function(){this._setActionReceivers("off")},_setActionReceivers:function(a){var b=this.getAdInstance().getActionHandler(),c=b[a].bind(b);c("video:pause-all",this.pause),c("video:mute-all",this.mute),c("video:unmute-all",this.unmute),c("video:reset-all",this.reset);for(var d=this.data.name,f=0;f<e.length;f++){var g=e[f],h="video:"+g,i=h+":"+d,j=this[g];c(i,j)}},initVideoElEventHandlers:function(){this.boundHandleVideoComplete=this.handleVideoComplete.bind(this),this.getVideoEl().addEventListener("ended",this.boundHandleVideoComplete),this.hasCuePointActions()&&this.initCuePointHandlers(),this.registerTeardownFunction(this.teardownVideoElEventHandlers)},teardownVideoElEventHandlers:function(){var a=this.getVideoEl();a&&(this.getVideoEl().removeEventListener("ended",this.boundHandleVideoComplete),this.hasCuePointActions()&&this.teardownCuePointHandlers())},handleVideoComplete:function(a){this.handleEvent(a,"videoComplete")},shouldItAutoplay:function(){var a=!0;return null!=this.opts.data.video.autoplay&&(a=this.opts.data.video.autoplay),a}};d.mixin("video",f)},{riot:1}],63:[function(a,b,c){var d=a("riot"),e={getAdIframeZoolander:function(){var a=this.getAdInstance().getContainerFrame().contentWindow.document,b=new ad_design.Zoolander({document:a,id:this.opts.data.name,prefixId:"#"+this.opts.data.name});return b}};d.mixin("zoolander",e)},{riot:1}],64:[function(a,b,c){function d(a){f.mount(a.getDomNode(),{adInstance:a}),a.initAfterMount()}function e(a,b,c){var e=a.getActionHandler();c?e.trigger({actionName:g.ASSET_PRELOAD_TIMEOUT}):b&&e.trigger({actionName:g.ASSET_PRELOAD_FINISH}),d(a),e.trigger({actionName:g.AD_DISPLAYED});var f=a.getAdStore().getSecondaryAssetUrls();i.preloadUrls(f)}/*!
  Riot v2.2.4, @license MIT, (c) 2015 Muut Inc. + contributors
*/
var f=a("riot"),g=a("../modules/events/adEvent.js"),h=a("../modules/injectCSS.js"),i=a("../modules/url.js");a("./app.tag"),b.exports={injectStyles:function(b){var c=a("../../css/ad.min.css.js");h.beforeNode(c,b)},mountAd:function(a){var b=a.getAdStore().getPrimaryAssetUrls();if(b&&b.length){a.getActionHandler().trigger({actionName:g.ASSET_PRELOAD_START});var c=e.bind(null,a,!0);i.preloadUrlsWithCallback(b,c)}else e(a)}}},{"../../css/ad.min.css.js":2,"../modules/events/adEvent.js":10,"../modules/injectCSS.js":16,"../modules/url.js":28,"./app.tag":31,riot:1}],65:[function(a,b,c){function d(a,b,c){var d=this;this._adJson=a,this._options=c,this.actionHandler=b,this.componentNameIterator=0,this.setInitialState(a),this.initComponentTree(this._adJson),this.scaleAdToWidth(c.adWidth),this.initCountdownTimers(),n.assignTrackingActions(this.state),b.on(p.join(" "),function(a,b){d.handleRoutingAction(b)}),b.on("set-wrap-background",function(a){var b=d.state.wrapLibrary[a.wrapName];o.triggerWrapSwap(b)}),b.on("make-invisible",function(a){var c=d.state.componentLibrary[a.componentName];c.isInvisible||(c.isInvisible=!0,b.trigger({actionName:"ad-state-updated"}))}),b.on("make-visible",function(a){var c=d.state.componentLibrary[a.componentName];null!=c.isInvisible&&c.isInvisible&&(c.isInvisible=!1,b.trigger({actionName:"ad-state-updated"}))}),b.on("set-alternate-background",function(a){var c=d.state.componentLibrary[a.componentName];c.useAlternateBackground=!0,b.trigger({actionName:"ad-state-updated"})}),b.on("unset-alternate-background",function(a){var c=d.state.componentLibrary[a.componentName];c.useAlternateBackground=!1,b.trigger({actionName:"ad-state-updated"})}),b.on("scale-ad-to-width",function(a){return a&&a.data&&a.data.width?void d.scaleAdToWidth(a.data.width):void window.Tarnhelm.log('Cannot scale ad, action "scale-ad-to-width" did not provide a valid width. Action:',a)}),b.on("enable-navigation-components",function(a){d.state.navigationComponentsDisabled&&(d.state.navigationComponentsDisabled=!1,b.trigger({actionName:"ad-state-updated"}))}),b.on("disable-navigation-components",function(a){d.state.navigationComponentsDisabled||(d.state.navigationComponentsDisabled=!0,b.trigger({actionName:"ad-state-updated"}))}),b.on("trigger-action-collection",function(a){if(!a.collectionName)return void window.Tarnhelm.log("Unable to trigger a collection of actions, missing collectionName");var c=d.state.actions.collections[a.collectionName];c&&c.length?b.triggerMany(c):window.Tarnhelm.log('Collection "'+a.collectionName+'" was not found in ad "'+d.state.name+'"')})}var e=(a("riot"),a("../../modules/countdownTimer.js")),f=a("../../modules/objectUtils.js"),g=a("./retrievers/asset.js"),h=a("./retrievers/background.js"),i=a("./retrievers/component.js"),j=a("./retrievers/dateRange.js"),k=a("./retrievers/rect.js"),l=(a("./retrievers/scale.js"),a("./retrievers/wrap.js")),m=a("./delegators/router.js"),n=a("./delegators/tracking.js"),o=(a("./delegators/transition.js"),a("./delegators/wrap.js")),p=["route","rotator:show-index","rotator:show-named-child","rotator:increment-index","rotator:decrement-index","minimize-ad","maximize-ad","hide-component","show-component"],q=["actions","background","css","defaultLink","frameProperties","frequencyCappedInit","id","isScalable","name","trackingConfigs","trackingHash"],r=["rect","frameProperties","spriteSheetDimensions"],s=["background","alternateBackground"],t="_orig",u={VIDEO:"video",ROTATOR:"rotator",GRAPHIC:"graphic",COUNTDOWN:"countdown"},v={countdown:u.COUNTDOWN,"countdown-number-text":u.COUNTDOWN,rotator:u.ROTATOR,"slider-rotator":u.ROTATOR,graphic:u.GRAPHIC,rotatorbutton:u.GRAPHIC,reely:u.VIDEO,alphalfa:u.VIDEO,"minimal-video":u.VIDEO};d.prototype={setInitialState:function(a){this.state=this.getStaticAdData(a),this.state.actions=this.state.actions||{},this.state.actions.collections=this.state.actions.collections||{},this.state.navigationComponentsDisabled=!1,this.state.scaleData={currentScale:1,currentWidth:this.state.frameProperties.width,pixelDensity:window.devicePixelRatio||1},this.state.countdownTimers={},this.state.componentLibrary={},this.state.componentNamesByType={},this.state.componentNamesByCategory={},this.state.activeSortedDateRanges=j.getActiveSortedDateRanges(window.Tarnhelm.getNowTime(),a.dateRanges),this.state.assetLibrary=this.buildAssetLibrary(),this.state.wrapLibrary=l.generateWrapLibrary(a.wraps,this.state.assetLibrary)},getStaticAdData:function(a){for(var b={},c=0;c<q.length;c++){var d=q[c];b[d]=a[d]}return f.clone(b)},buildAssetLibrary:function(){return g.generateAssetLibrary(this._adJson.assets,this.state.activeSortedDateRanges,this.state.scaleData.currentScale,this.state.scaleData.pixelDensity)},initComponentTree:function(a,b){var c,d,e=[];if(b&&b.length?d=b[b.length-1]:b=[],a.children&&a.children.length){b.push(a);for(var g=0;g<a.children.length;g++)e.push(a.children[g].name),this.initComponentTree(a.children[g],b);b.pop()}d?(c=f.clone(a),c.parentName=d.name):c=this.state,delete c.children,c.childNames=e,this.initComponent(c,b),d&&this.addToComponentLibrary(c)},initComponent:function(a,b){a.isHidden=!!a.isHidden,this.storeOriginalValues(a,r),this.storeOriginalValues(a,s),a.arrowGraphics&&(this.inheritDefaultArrowValues(a.arrowGraphics),this.storeOriginalValues(a.arrowGraphics.previous,r),this.storeOriginalValues(a.arrowGraphics.next,r));var c=this.componentTypeInitters[a.type];"function"==typeof c&&c.call(this,a,b);var d=v[a.type],e=this.componentCategoryInitters[d];"function"==typeof e&&e.call(this,a,b),this.setComponentAssets(a)},storeOriginalValues:function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=a[d];if(e){var f=d+t;a[f]=k.cloneRect(e)}}},componentTypeInitters:{"countdown-number-text":function(a,b){var c={};b&&b.length&&(c=b[b.length-1]),"undefined"==typeof a.targetDate&&(a.targetDate=c.targetDate),"undefined"==typeof a.padZeros&&(a.padZeros=c.padZeros)},reely:function(a,b){if(a.controls){var c=k.cloneRectAsPercentageValues(a.controls,a.rect);f.shallowMerge(a.controls,c)}},"slider-rotator":function(a,b){this.componentTypeInitters._initArrowGraphics(a,b)},gallery:function(a,b){this.componentTypeInitters._initArrowGraphics(a,b)},_initArrowGraphics:function(a,b){a.arrowGraphics&&a.arrowGraphics.next&&a.arrowGraphics.previous||(window.Tarnhelm.log("Requirements not met! "+a.type+" requires arrowGraphics properties!"),a.arrowGraphics={},a.arrowGraphics.previous={css:{background:"red"},rect:{anchorX:"left",offsetX:5,offsetY:5,width:40,height:40}},a.arrowGraphics.next={css:{background:"red"},rect:{anchorX:"right",offsetX:5,offsetY:5,width:40,height:40}})}},componentCategoryInitters:{countdown:function(a,b){this.addCountdownTimer(a.targetDate,a.name)},rotator:function(a,b){a.activeIndex=parseInt(a.activeIndex,10)||0},video:function(a,b){i.hasAncestorOfType(a,"slider-rotator",b)&&(a.video.autoplay=!1)}},inheritDefaultArrowValues:function(a){if(a&&a.previous&&a.next){var b=a.previous,c=a.next;if(a.defaultArrow){var d=a.defaultArrow;f.mergeDefaults(b.rect,d.rect),f.mergeDefaults(c.rect,d.rect),f.mergeDefaults(b,d),f.mergeDefaults(c,d),a.flippable&&(c.css=c.css||{},c.css.transform=c.css.transform||"",c.css.transform+=" scaleX(-1)")}}},addCountdownTimer:function(a,b){this.state.countdownTimers[a]||(this.state.countdownTimers[a]={countdownTimer:new e(a),listenerComponents:[]}),this.state.countdownTimers[a].listenerComponents.push(b)},initCountdownTimers:function(){for(var a=Object.keys(this.state.countdownTimers),b=0;b<a.length;b++){var c=this.state.countdownTimers[a[b]];this.initCountdownTimer(c)}},initCountdownTimer:function(a){var b=this,c=a.countdownTimer;c.on("tick",function(c){b.setComponentsTimerState(a.listenerComponents,c),b.actionHandler.trigger({actionName:"ad-state-updated"})});for(var d=0;d<a.listenerComponents.length;d++){var e=this.state.componentLibrary[a.listenerComponents[d]];e.remaining=c.getRemainingValues(c.getMillisecondsRemaining())}},setComponentsTimerState:function(a,b){for(var c=0;c<a.length;c++)this.state.componentLibrary[a[c]].remaining=b},setComponentAssets:function(a){switch(a.background&&a.background.asset&&f.shallowMerge(a.background,g.getGraphicAssetSources(a.background,this.state.assetLibrary)),a.alternateBackground&&a.alternateBackground.asset&&f.shallowMerge(a.alternateBackground,g.getGraphicAssetSources(a.alternateBackground,this.state.assetLibrary)),a.type){case"animaniac":case"graphic":case"rotatorbutton":f.shallowMerge(a,g.getGraphicAssetSources(a,this.state.assetLibrary));break;case"gallery":case"slider-rotator":a.arrowGraphics&&a.arrowGraphics.previous&&a.arrowGraphics.next&&(f.shallowMerge(a.arrowGraphics.previous,g.getGraphicAssetSources(a.arrowGraphics.previous,this.state.assetLibrary)),f.shallowMerge(a.arrowGraphics.next,g.getGraphicAssetSources(a.arrowGraphics.next,this.state.assetLibrary)));break;case"alphalfa":case"reely":case"minimal-video":f.shallowMerge(a.video,g.getVideoAssetSources(a.video,this.state.assetLibrary))}},addToComponentLibrary:function(a){var b=a.name;this.state.componentLibrary[b]&&(b+="__"+ ++this.componentNameIterator,window.Tarnhelm.log('More than one component exists with name"'+a.name+'", renaming to "'+b+'"')),a.name=b,this.state.componentLibrary[b]=a,this.addToNamesByType(a.type,a.name),this.addToNamesByCategory(a.type,a.name)},addToNamesByType:function(a,b){this._addToNames(this.state.componentNamesByType,a,b)},addToNamesByCategory:function(a,b){var c=v[a];c&&this._addToNames(this.state.componentNamesByCategory,c,b)},_addToNames:function(a,b,c){return a[b]||(a[b]=[]),a[b].push(c),a},handleRoutingAction:function(a){if(this.state.isTransitioning)return void window.Tarnhelm.log('Transition in progress, ignoring action "'+a.actionName+'"');switch(a.actionName){case"route":m.route(a.data,this.state.componentLibrary,this.state);break;case"rotator:show-index":m.routeRotatorToIndex(a.componentName,a.data.index,this.state.componentLibrary,this.state);break;case"rotator:show-named-child":m.routeRotatorToNamedChild(a.componentName,a.data.childName,this.state.componentLibrary,this.state);break;case"rotator:increment-index":m.routeRotatorToIncrementedIndex(a.componentName,this.state.componentLibrary,this.state);break;case"rotator:decrement-index":m.routeRotatorToDecrementedIndex(a.componentName,this.state.componentLibrary,this.state);break;case"minimize-ad":m.routeRotatorToNamedChild("expander","minimized",this.state.componentLibrary,this.state);break;case"maximize-ad":m.routeRotatorToNamedChild("expander","maximized",this.state.componentLibrary,this.state);break;case"hide-component":m.route({hideComponents:[a.componentName]},this.state.componentLibrary,this.state);break;case"show-component":m.route({showComponents:[a.componentName]},this.state.componentLibrary,this.state)}},scaleAdToWidth:function(a){if(this.state.isScalable&&a){if(a===this.state.frameProperties.width)return void window.Tarnhelm.log('Ad "'+this.state.name+'" is already '+a+"px wide, not rescaling");this.updateScaleData(a),this.state.assetLibrary=this.buildAssetLibrary(),f.shallowMerge(this.state.frameProperties,k.getScaledRect(this.state["frameProperties"+t],this.state.scaleData.currentScale));for(var b=Object.keys(this.state.componentLibrary),c=0;c<b.length;c++){var d=b[c],e=this.state.componentLibrary[d];this.scaleBasedOnOriginalValues(e,r,k.getScaledRect),this.scaleBasedOnOriginalValues(e,s,h.getScaledBackground),e.arrowGraphics&&(this.scaleBasedOnOriginalValues(e.arrowGraphics.previous,r,k.getScaledRect),this.scaleBasedOnOriginalValues(e.arrowGraphics.next,r,k.getScaledRect)),this.setComponentAssets(e)}this.actionHandler.trigger({actionName:"resize-ad-container",data:{rect:this.state.frameProperties}}),this.actionHandler.trigger({actionName:"ad-state-updated"})}},scaleBasedOnOriginalValues:function(a,b,c){for(var d=0;d<b.length;d++){var e=b[d],g=a[e];if(g){var h=e+t;f.shallowMerge(a[e],c(a[h],this.state.scaleData.currentScale))}}},updateScaleData:function(a){this.state.scaleData.currentScale=a/this.state["frameProperties"+t].width,this.state.scaleData.currentWidth=a},getState:function(){return this.state},getComponentState:function(a){return this.state.componentLibrary[a]},getComponentLibrary:function(){return this.state.componentLibrary},getComponentNamesByType:function(a){var b=this.state.componentNamesByType[a];return b||window.Tarnhelm.log("Requested names for a component type with nothing indexed: ",a),b||[]},getComponentNamesByCategory:function(a){var b=this.state.componentNamesByCategory[a];return b||window.Tarnhelm.log("Requested names for a component category with nothing indexed: ",a),b||[]},getAdId:function(){return this.state.id},getAdName:function(){return this.state.name},getTrackingHash:function(){return this.state.trackingHash},requiresAutoplay:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions&&this.state.frequencyCappedInit.actions.length},getFrequencyCappedInitActions:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions?this.state.frequencyCappedInit.actions:[]},getPrimaryAssetUrls:function(){return g.getPreloadAssetUrls("primary",this.state.assetLibrary)},getSecondaryAssetUrls:function(){return g.getPreloadAssetUrls("secondary",this.state.assetLibrary)},getNavigationComponentsDisabledFlag:function(){return this.state.navigationComponentsDisabled}},b.exports=d},{"../../modules/countdownTimer.js":7,"../../modules/objectUtils.js":21,"./delegators/router.js":66,"./delegators/tracking.js":67,"./delegators/transition.js":68,"./delegators/wrap.js":69,"./retrievers/asset.js":70,"./retrievers/background.js":71,"./retrievers/component.js":72,"./retrievers/dateRange.js":73,"./retrievers/rect.js":74,"./retrievers/scale.js":76,"./retrievers/wrap.js":78,riot:1}],66:[function(a,b,c){var d=a("../retrievers/component.js"),e=a("./transition.js"),f=a("../retrievers/rect.js"),g=a("../retrievers/rotator.js"),h=a("../../../modules/objectUtils.js"),i={route:function(a,b,c){for(var i=a.rotatorConfigs||[],j=a.hideComponents||[],k=a.showComponents||[],l=window.Tarnhelm.getAd(c.id),m=l.getActionHandler(),n=[],o=!1,p=[],q=0;q<i.length;q++){var r=i[q],s=b[r.name];s&&r.childName&&null!=r.index&&(r.index=g.findNamedChildIndex(r.name,r.childName,b)),s&&s.activeIndex!==r.index&&(p.push(r),"expander"===s.name&&(o=!0),s.isHidden||n.push(g.getActiveChildName(s)))}var t=d.getHiddenComponentNames(k,b),u=d.getUnhiddenComponentNames(j,b);if(n=n.concat(u),p.length||u.length||t.length){for(var v=[],q=0;q<n.length;q++)v=v.concat(d.buildTransitionsOutComponentList(n[q],b));if(v.length){var w=this;c.isTransitioning=!0,e.triggerTransitionsOut(v,b,m,function(){var a=g.mapRotatorConfigsToComponentName(p);if(h.shallowMergeMany(b,a),o){var d=c.componentLibrary.expander,e=g.getActiveChildComponent(d,c.componentLibrary),i=f.getDimensions(e.rect);h.shallowMerge(c.frameProperties,i),h.shallowMerge(d.rect,i)}w.setComponentHiddenStates(u,b,!0),w.setComponentHiddenStates(t,b,!1),c.isTransitioning=!1,m.trigger({actionName:"ad-state-updated"})})}else{var x=g.mapRotatorConfigsToComponentName(p);if(h.shallowMergeMany(b,x),o){var y=c.componentLibrary.expander,z=g.getActiveChildComponent(y,c.componentLibrary),A=f.getDimensions(z.rect);h.shallowMerge(c.frameProperties,A),h.shallowMerge(y.rect,A)}this.setComponentHiddenStates(u,b,!0),this.setComponentHiddenStates(t,b,!1),m.trigger({actionName:"ad-state-updated"})}}},routeRotatorToIndex:function(a,b,c,d){var e=[{name:a,index:b}];this.route({rotatorConfigs:e},c,d)},routeRotatorToIncrementedIndex:function(a,b,c){var d=g.getIncrementedIndex(b[a]);this.routeRotatorToIndex(a,d,b,c)},routeRotatorToDecrementedIndex:function(a,b,c){var d=g.getDecrementedIndex(b[a]);this.routeRotatorToIndex(a,d,b,c)},routeRotatorToNamedChild:function(a,b,c,d){var e=g.findNamedChildIndex(a,b,c);this.routeRotatorToIndex(a,e,c,d)},setComponentHiddenStates:function(a,b,c){for(var d=0;d<a.length;d++){var e=b[a[d]];e.isHidden=!!c}}};b.exports=i},{"../../../modules/objectUtils.js":21,"../retrievers/component.js":72,"../retrievers/rect.js":74,"../retrievers/rotator.js":75,"./transition.js":68}],67:[function(a,b,c){b.exports={assignTrackingActions:function(a){if(a.trackingConfigs&&a.trackingConfigs.length)for(var b=a.trackingConfigs,c=0;c<b.length;c++){var d=b[c],e=a.componentLibrary[d.componentName];if(!e)return void window.Tarnhelm.log('Attempted to add tracking to non existent component: "'+d.componentName+'"');this.assignTrackingActionsToComponent(e,d)}},assignTrackingActionsToComponent:function(a,b){var c=parseInt(b.data.trackingNumber,10);isNaN(c)&&(window.Tarnhelm.log('Missing tracking number for component "'+a.name+'"'),c=999);var d=1===c?"":c;switch(b.trackingType){case"video":this.assignVideoTrackingToComponent(a,b,d);break;case"tab":this.appendTrackAction(a,"click","tabClick"+d);break;default:window.Tarnhelm.log('Unsupported tracking type for component "'+a.name+'"')}},assignVideoTrackingToComponent:function(a,b,c){var d=["videoStart","videoComplete"];a.actions=a.actions||{},a.actions.cuePoints=a.actions.cuePoints||[];for(var e=0;e<d.length;e++){var f=d[e];switch(f){case"videoStart":"youtube"===a.type?this.appendTrackAction(a,"videoStart","videoStart"+c):this.appendCuePointTrackAction(a,"10ms","videoStart"+c);break;case"videoComplete":this.appendTrackAction(a,"videoComplete","videoComplete"+c)}}},appendTrackAction:function(a,b,c){a.actions=a.actions||{},a.actions[b]=a.actions[b]||[],a.actions[b].push({actionName:"track",data:{trackingEventName:c}})},appendCuePointTrackAction:function(a,b,c){var d=this.findOrCreateCuePoint(a,b);d.actions.push({actionName:"track",data:{trackingEventName:c}})},findOrCreateCuePoint:function(a,b){for(var c=a.actions.cuePoints,d=0;d<c.length;d++)if(c[d].timeString===b)return c[d];var e={timeString:b,actions:[]};return c.push(e),e}}},{}],68:[function(a,b,c){var d=(a("../../../modules/transitionStyleGenerator.js"),a("../retrievers/transition.js")),e={triggerTransitionsOut:function(a,b,c,e){for(var f=d.getMaxTransitionOutTime(a,b),g=0;g<a.length;g++){var h="transition-component-out:"+a[g];c.trigger({actionName:h})}window.setTimeout(function(){"function"==typeof e&&e();for(var b=0;b<a.length;b++){var d="transition-component-out:"+a[b]+":complete";c.trigger({actionName:d})}},f)}};b.exports=e},{"../../../modules/transitionStyleGenerator.js":27,"../retrievers/transition.js":77}],69:[function(a,b,c){var d=a("../retrievers/wrap.js"),e=(a("../retrievers/rotator.js"),{triggerRotatorWrapSwap:function(a,b){var c=d.getWrapNameFromRotator(a,b.componentLibrary);if(!c)return void window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+a.name+'", could not get the wrap name');var e=d.getWrapData(c,b.wrapLibrary);return e?void this.triggerWrapSwap(e):void window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+a.name+'" and wrapName "'+c+'", could not find a matching wrap config')},triggerWrapSwap:function(a){var b=d.generateWrapAction(a);window.Tarnhelm.triggerTopAction(b)}});b.exports=e},{"../retrievers/rotator.js":75,"../retrievers/wrap.js":78}],70:[function(a,b,c){var d=(a("../../../modules/objectUtils.js"),{image:!0,video:!0}),e={image:"url",video:"fileName"},f={video:"fileNameSource",image:"source"},g={graphic:[{src:"asset",dest:"source"},{src:"activeAsset",dest:"activeSource"},{src:"hoverAsset",dest:"hoverSource"},{src:"fullAdHoverAsset",dest:"fullAdHoverSource"},{src:"disabledAsset",dest:"disabledSource"}],video:[{src:"asset",dest:"fileName"}]},h={video:!0},i={primary:!0,secondary:!0},j={generateAsset:function(a,b,c){var d=this.getCurrentDatedAsset(a,b),e=this.generateScaledAsset(d,a.type,c);return e?e.preload=a.preload:window.Tarnhelm.log('Asset "'+a.name+'" is not configured correctly'),e},generateAssetLibrary:function(a,b,c,d){for(var e={},f=Object.keys(a),g=this.getAssetScale(c,d),h=0;h<f.length;h++){var i=f[h],j=a[i],k=this.generateAsset(j,b,g);k?e[i]=k:window.Tarnhelm.log('There was a problem with asset "'+i+'", Tarnhelm was unable to initialize it')}return e},generateScaledAsset:function(a,b,c){for(var d={},g=this.getValidatedAssetType(b),h=e[g],i=c;i>0;i--){var j=this.getScaledAssetUrlKey(h,i);if(a[j])return d[f[g]]=a[j],d.type=g,d}},getCurrentDatedAsset:function(a,b){if(!b||!b.length||!a.dateOverrides)return a;for(var c=b.length-1;c>-1;c--){var d=b[c].name;if(a.dateOverrides[d])return a.dateOverrides[d]}return a},getValidatedAssetType:function(a){return d[a]?a:"image"},getScaledAssetUrlKey:function(a,b){return"number"==typeof b&&b>1?a+parseInt(b,10)+"x":a},getAssetScale:function(a,b){return Math.ceil(Math.abs(a*b))},getAssetSource:function(a,b){var c=b[a];if(!c)return void window.Tarnhelm.log('Error, asset named "'+c+'" does not exist');var d=this.getAssetSourceKey(c.type),e=c[d];return e?e:void window.Tarnhelm.log('Error, asset "'+c+'" is missing its source, prop "'+d+'"')},getAssetSourceKey:function(a){var b=this.getValidatedAssetType(a);return f[b]},getMappedAssetSources:function(a,b,c){var d={};if(!a)return window.Tarnhelm.log("Cannot get assets, component was not provided"),d;if(!b)return window.Tarnhelm.log("Cannot get assets, assetLibrary was not provided"),d;if(!c||!g[c])return window.Tarnhelm.log('Cannot get assets, componentType "'+c+'" is not supported'),d;for(var e=g[c],f=0;f<e.length;f++){var h=e[f];if(a[h.src]){var i=this.getAssetSource(a[h.src],b);i&&(d[h.dest]=i)}}return d},getGraphicAssetSources:function(a,b){return this.getMappedAssetSources(a,b,"graphic")},getVideoAssetSources:function(a,b){return this.getMappedAssetSources(a,b,"video")},getPreloadAssetUrls:function(a,b){var c=[];if("string"!=typeof a||!i[a])return window.Tarnhelm.log('Problem preloading assets, "'+a+'" should be "primary" or "secondary"'),c;for(var d=Object.keys(b),e=0;e<d.length;e++){var f=d[e],g=b[f];if(g.preload===a&&!h[g.type]){var j=this.getAssetSource(f,b);j&&c.push(g.source)}}return c}};b.exports=j},{"../../../modules/objectUtils.js":21}],71:[function(a,b,c){var d=a("./scale.js"),e=["position","size"],f=/\s+/,g={getScaledBackground:function(a,b){if("object"!=typeof a)return void window.Tarnhelm.log('Cannot scale, "background" is not an object:',a);for(var c={},g=0;g<e.length;g++){var h=e[g],i=a[h];if(i){for(var j=i.split(f),k=0;k<j.length;k++){var l=j[k],m=d.getRawDimension(l);"number"==typeof m&&(j[k]=d.getDimensionWithUnit(d.getScaledDimension(d.getRawDimension(l),b)))}c[h]=j.join(" ")}}return c},cloneBackground:function(a){for(var b={},c=0;c<e.length;c++){var d=e[c];a[d]&&(b[d]=a[d])}return b}};b.exports=g},{"./scale.js":76}],72:[function(a,b,c){var d=a("./rotator.js"),e={buildTransitionsOutComponentList:function(a,b){var c=[],e=b[a];if(!e||e.isHidden)return c;if(e.transitionsOut&&e.transitionsOut.length&&c.push(e.name),e.childNames&&e.childNames.length)if("rotator"===e.type){var f=d.getActiveChildComponent(e,b);c=c.concat(this.buildTransitionsOutComponentList(f.name,b))}else for(var g=0;g<e.childNames.length;g++){var h=b[e.childNames[g]];h.isHidden||(c=c.concat(this.buildTransitionsOutComponentList(h.name,b)))}return c},filterComponentsByPropertyValue:function(a,b,c,d){for(var e=[],f=0;f<a.length;f++){var g=a[f],h=b[g];h&&h[c]===d&&e.push(g)}return e},filterComponentsByParentNode:function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d]]=1;for(var e=[],d=0;d<a.length;d++){var f=!1,g=b[a[d]];if(g){for(;g.parentName&&!f;)g=b[g.parentName],c[g.name]&&(f=!0);f||e.push(a[d])}}return e},isDescendantOfType:function(a,b,c){for(var d=c[a];d&&d.parentName;)if(d=c[d.parentName],d&&d.type===b)return!0;return!1},hasAncestorOfType:function(a,b,c){if(!c||!c.length)return!1;for(var d=c.length-1;d>=0;d--)if(c[d].type===b)return!0;return!1},hasAncestorOfName:function(a,b,c){var d=c[a].parentName;return this._hasAncestorOfNameRecursive(b,d,c)},_hasAncestorOfNameRecursive:function(a,b,c){var d=c[b];return d?d.name===a?!0:this._hasAncestorOfNameRecursive(a,d.parentName,c):!1},getHiddenComponentNames:function(a,b){return this.filterComponentsByPropertyValue(a,b,"isHidden",!0)},getUnhiddenComponentNames:function(a,b){return this.filterComponentsByPropertyValue(a,b,"isHidden",!1)}};b.exports=e},{"./rotator.js":75}],73:[function(a,b,c){b.exports={compareDateRanges:function(a,b){var c=new Date(a.start),d=new Date(b.start),e=c.getTime(),f=d.getTime();return f>e?-1:e>f?1:0},getActiveSortedDateRanges:function(a,b){var c=[];if(!b||!b.length)return c;for(var d=0;d<b.length;d++){var e=new Date(b[d].start);a>=e.getTime()&&c.push(b[d])}return c.sort(this.compareDateRanges)}}},{}],74:[function(a,b,c){var d=a("./scale.js"),e=["offsetX","offsetY","width","height"],f={offsetX:"width",offsetY:"height",width:"width",height:"height"},g={getDimensions:function(a){return{height:a.height,width:a.width}},getScaledRect:function(a,b){if("object"!=typeof a)return void window.Tarnhelm.log('Cannot scale, "rect" is not an object:',a);for(var c={},f=0;f<e.length;f++){var g=e[f],h=a[g];if(h){var i=d.getRawDimension(h);"number"==typeof i&&(c[g]=d.getScaledDimension(d.getRawDimension(h),b))}}return c},cloneRect:function(a){for(var b={},c=0;c<e.length;c++){var d=e[c];a[d]&&(b[d]=a[d])}return b},cloneRectAsPercentageValues:function(a,b){for(var c=(b.width,b.height,{}),e=Object.keys(f),g=0;g<e.length;g++){var h=e[g],i=f[h],j=d.getRawDimension(a[h]);if(j){var k=d.getRawDimension(b[i]);k||window.Tarnhelm.log('Could not scale rect value for "'+h+'", parent rect value for "'+i+'" is missing'),"number"==typeof j&&("number"==typeof k?j=Math.round(j/k*100)+"%":window.Tarnhelm.log('Could not scale rect value for "'+h+'", parent rect value for "'+i+'" is not a pixel value')),c[h]=j}}return c}};b.exports=g},{"./scale.js":76}],75:[function(a,b,c){function d(a){return a.childNames&&a.childNames.length>0}function e(a){return a.activeIndex>=0&&a.activeIndex<a.childNames.length}var f={isValidRotator:function(a){return a&&d(a)&&e(a)},getActiveChildName:function(a){var b;return this.isValidRotator(a)&&(b=a.childNames[a.activeIndex]),b||window.Tarnhelm.log('Unable to find active child name for rotator "'+a.name+'"'),b},getActiveChildComponent:function(a,b){var c,d=this.getActiveChildName(a);return d&&(c=b[d]),c},mapRotatorConfigsToComponentName:function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.name]={activeIndex:d.index}}return b},findNamedChildIndex:function(a,b,c){var d=c[a];if(!d)return void window.Tarnhelm.log("Requested rotator:show-named-child for a non existent rotator . rotator:",a);if(d&&d.childNames&&d.childNames.length)for(var e=0;e<d.childNames.length;e++)if(d.childNames[e]===b)return e;return window.Tarnhelm.log("Requested rotator:show-named-child for a non existent childName. rotatorName:",a," childName: ",b),d.activeIndex},getIncrementedIndex:function(a){if(this.isValidRotator(a)){var b=a.activeIndex,c=a.childNames.length-1;if(c>=b+1)return b+1}return 0},getDecrementedIndex:function(a){if(this.isValidRotator(a)){var b=a.activeIndex,c=a.childNames.length-1;return b-1>=0?b-1:c}return 0}};b.exports=f},{}],76:[function(a,b,c){var d=new RegExp(/^\-?\d*(\.\d*)?(px)?$/),e={getScaledDimension:function(a,b){return"number"!=typeof a||"number"!=typeof b?void window.Tarnhelm.log("getScaledDimension() failed, both args were not numbers:",a,b):Math.ceil(a*b)},getRawDimension:function(a){if("string"!=typeof a&&"number"!=typeof a)return window.Tarnhelm.log("Cannot get raw dimension from invalid value: ",a),a;var b=a.toString();return d.test(b)?parseFloat(b):b},getDimensionWithUnit:function(a){var b=this.getRawDimension(a);return 0===b?"0":"number"==typeof b?b+"px":b}};b.exports=e},{}],77:[function(a,b,c){var d=a("../../../modules/transitionStyleGenerator.js"),e={getMaxTransitionOutTime:function(a,b){for(var c=[],e=0;e<a.length;e++){var f=b[a[e]];c.push(d.getMaxTransitionTime(f.transitionsOut))}return Math.max.apply(null,c)}};b.exports=e},{"../../../modules/transitionStyleGenerator.js":27}],78:[function(a,b,c){var d=a("./asset.js"),e=a("./rotator.js"),f=a("../../../modules/objectUtils.js"),g={generateWrapLibrary:function(a,b){a=a||{};for(var c={},e=Object.keys(a),g=0;g<e.length;g++){var h=e[g],i=(a[h].asset,f.clone(a[h])),j=d.getGraphicAssetSources(i,b);f.shallowMerge(i,j),c[h]=i}return c},getWrapNameFromRotator:function(a,b){var c=e.getActiveChildComponent(a,b);return c&&c.wrap?c.wrap:a&&a.wrapConfig&&a.wrapConfig["default"]?a.wrapConfig["default"]:void window.Tarnhelm.log('Cannot find wrap for rotator "'+a.name+'"')},getWrapData:function(a,b){return b[a]},generateWrapAction:function(a){return{actionName:"set-wrap-background",data:f.clone(a)}}};b.exports=g},{"../../../modules/objectUtils.js":21,"./asset.js":70,"./rotator.js":75}],79:[function(a,b,c){function d(a){var b=p.clone(a);return delete b.adName,delete b.isGlobal,b}function e(){var a=q.getQueryParam("tarnhelmDebug",window.location.href);("1"===a||"true"===a)&&(A=!0,window.Tarnhelm.log("Tarnhelm is in DEBUG mode."));var b=q.getQueryParam("tarnhelmMobileDebug",window.location.href);("1"===b||"true"===b)&&(B=!0,A=!0,window.Tarnhelm.log("Tarnhelm is in MOBILE DEBUG mode."))}function f(){var a=q.getQueryParam("simulatedDate",window.location.href),b=new Date(a);a&&"Invalid Date"!==b.toString()&&(C=b.getTime()-Date.now())}function g(a){var b=new l(F,a);return b}function h(){var a=new m(new n,E);return a}function i(){w=h(),e(),f(),x=g(w),y=new t(w),w.trigger({actionName:v.READY})}var j="1.0.1",k=a("./modules/adInstance.js"),l=a("./modules/wrapSwapper.js"),m=a("./modules/actionHandler.js"),n=a("./modules/eventEmitter.js"),o=a("./modules/requirementsTester.js"),p=a("./modules/objectUtils.js"),q=a("./modules/url.js"),r=a("./renderer/renderer.js"),s=a("./modules/deviceInfo.js"),t=a("./modules/events/metricEventSink.js"),u=a("./modules/mobileLog.js"),v=a("./modules/events/tarnhelmEvent.js");a("../../../vendor/IMDbAdvertisingJsModules/src/js/imdb-ad-design.js");var w,x,y,z={},A=!1,B=!1,C=0,D=new s(window.location.href,window.navigator.userAgent),E=new o(D.getInfo()),F="wrapper",G={getAd:function(a){return z[a]},getAdByName:function(a){for(var b,c=Object.keys(z),d=0;d<c.length;d++)if(z[c[d]].getName()===a){b=z[c[d]];break}return b},initAdInstance:function(a,b,c){this.getAd(c.id)&&this.log('Ad with id "'+c.id+'" already exists. OVERWRITING!'),c.name&&this.getAdByName(c.name)&&this.log('Ad with name "'+c.name+'" already exists. OVERWRITING!'),r.injectStyles(a);var d=new k({domNode:a,containerFrame:b,eventSinks:[y],adData:c});return z[c.id]=d,r.mountAd(d),d},triggerTopAction:function(a){w.trigger(a)},triggerGlobalAction:function(a){for(var b=Object.keys(z),c=d(a),e=0;e<b.length;e++)this.getAd(b[e]).getActionHandler().trigger(c)},triggerTandemAction:function(a){if(!a.adName)return void this.log("Tarnhelm.triggerTandemAction failed, adName was not provided");var b=this.getAdByName(a.adName);if(!b)return void this.log('Tarnhelm.triggerTandemAction failed, adInstance for "'+a.adName+'" was not found');var c=d(a);b.getActionHandler().trigger(c)},getNowTime:function(){return Date.now()+C},getIsDebug:function(){return A},setIsDebug:function(a){A=!!a},getIsMobileDebug:function(){return B},setIsMobileDebug:function(a){B=!!a},log:function(){if(A&&window.console&&window.console.log){var a=Array.prototype.slice.call(arguments);console.log.apply(console,a),B&&this.getDeviceInfo().isMobileDevice&&window.top.document.body&&(window.top.document.body.style.position="relative",window.top.mobileLog=window.top.mobileLog||new u(window.top.document.body),window.top.mobileLog.log(a))}},getVersion:function(){return j},getDeviceInfo:function(){return D.getInfo()},getRequirementsTester:function(){return E}};b.exports=window.Tarnhelm=G,i()},{"../../../vendor/IMDbAdvertisingJsModules/src/js/imdb-ad-design.js":89,"./modules/actionHandler.js":3,"./modules/adInstance.js":4,"./modules/deviceInfo.js":8,"./modules/eventEmitter.js":9,"./modules/events/metricEventSink.js":11,"./modules/events/tarnhelmEvent.js":12,"./modules/mobileLog.js":19,"./modules/objectUtils.js":21,"./modules/requirementsTester.js":23,"./modules/url.js":28,"./modules/wrapSwapper.js":30,"./renderer/renderer.js":64
}],80:[function(a,b,c){var d={makeBufferCanvas:function(){var a=document.createElement("canvas");return a.width=this.output.width,a.height=2*this.output.height,a},isIE:function(){return/msie|trident/.test(navigator.userAgent.toLowerCase())},clear2DCanvas:function(a,b,c){a.clearRect(0,0,b,c)}};b.exports=d},{}],81:[function(a,b,c){var d=a("./renderers/alphalfa-renderer-webgl.js"),e=a("./renderers/alphalfa-renderer-canvas.js"),f=a("./renderers/alphalfa-renderer-mask.js"),g=a("./renderers/alphalfa-renderer-color-correct.js"),h=a("./alphalfa-utils.js");a("../polyfills/request-animation-frame.js");var i=function(a){this.doDebug=!1,this.video=a.video,this.output=a.output,this.buffer=a.buffer||void 0,this.dismissalTimeout=a.dismissalTimeout,this.originalOutputDisplay=this.output.style.display||"inline-block",this.outputHeight=this.output.height,this.outputWidth=this.output.width,a.loop&&(this.loop=a.loop,this.setLoopConfig(a)),null!=a.stillFrameMS&&(this.stillFrameInS=a.stillFrameMS/1e3),this.isSupported=!0,this.renderMode=this.determineRenderMode({colorCorrect:a.colorCorrect,maskUrl:a.maskUrl,forceCanvas:a.forceCanvas}),(this.renderMode===this.RENDER_MODES.CANVAS||this.renderMode===this.RENDER_MODES.GL)&&this.runTaintedContentCheck(this.video),this.setupRenderer()};i.prototype={listen:function(){this.isSupported&&(this.boundFrameHandler=this.boundFrameHandler||this.frameHandler.bind(this),this.video.addEventListener("play",this.boundFrameHandler,!1),this.boundEndHandler=this.boundEndHandler||this.videoEndedHandler.bind(this),this.video.addEventListener("ended",this.boundEndHandler,!1),this.video.loop=this.loop)},teardown:function(){this.video.removeEventListener("play",this.boundFrameHandler),this.video.removeEventListener("ended",this.boundEndHandler),this.video.removeEventListener("seeked",this.boundLoopCountOnSeeked),this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.video=void 0,this.renderer.teardown(),this.output.width=1,this.output.height=1,this.output.parentNode.removeChild(this.output),this.output=void 0},RENDER_MODES:{GL:"gl",CANVAS:"canvas",MASK:"mask",COLOR_CORRECT:"color-correct"},determineRenderMode:function(a){var b;return a.colorCorrect?b=this.RENDER_MODES.COLOR_CORRECT:a.maskUrl?(this.maskUrl=a.maskUrl,b=this.RENDER_MODES.MASK):b=a.forceCanvas?this.RENDER_MODES.CANVAS:this._determineRenderMode(),this.doDebug&&console.log("Alphalfa determined renderMode :: ",b),b},_determineRenderMode:function(){var a=!0;this.gl=void 0;try{this.gl=this.output.getContext("webgl")||this.output.getContext("experimental-webgl")}catch(b){a=!1}this.gl||(a=!1);var c=a?this.RENDER_MODES.GL:this.RENDER_MODES.CANVAS;return c},setupRenderer:function(){var a={doDebug:this.doDebug,video:this.video,buffer:this.buffer,output:this.output,dieBecauseUnsupported:this.dieBecauseUnsupported};switch(this.renderMode){case this.RENDER_MODES.CANVAS:case this.RENDER_MODES.MASK:case this.RENDER_MODES.COLOR_CORRECT:try{a.outputCtx=this.output.getContext("2d")}catch(b){return this.doDebug&&console.log("Error executing `getContext`, canvas not supported."),void this.dieBecauseUnsupported()}a.outputHeight=this.outputHeight,a.outputWidth=this.outputWidth}switch(this.renderMode){case this.RENDER_MODES.GL:a.gl=this.gl,this.renderer=new d(a);break;case this.RENDER_MODES.CANVAS:this.renderer=new e(a);break;case this.RENDER_MODES.MASK:a.maskUrl=this.maskUrl,this.renderer=new f(a);break;case this.RENDER_MODES.COLOR_CORRECT:this.renderer=new g(a)}this.setupRendererContext()},setupRendererContext:function(){this.renderer.setupRendererContext(),this.doDebug||(this.video.style.display="none",this.buffer&&(this.buffer.style.display="none")),this.processFrame=this.determineProcessFrame()},determineProcessFrame:function(){return this.renderMode===this.RENDER_MODES.CANVAS&&h.isIE()&&!this.hasBindSupport()?(this.doDebug&&console.log("Error: IE <9 does not support Function.bind. Aborting."),void this.dieBecauseUnsupported()):this.renderer.getProcessFrameFunc()},hasBindSupport:function(){return"bind"in Function},runTaintedContentCheck:function(a){var b=document.createElement("canvas");b.width=b.height=1,this.boundTestTainted=this.testTainted.bind(this,a,b),a.addEventListener("canplay",this.boundTestTainted)},testTainted:function(a,b){var c=b.getContext("2d");c.drawImage(a,0,0,1,1);try{c.getImageData(0,0,1,1)}catch(d){this.dieBecauseTainted()}a.removeEventListener("canplay",this.boundTestTainted),c=null,b=null},frameHandler:function(){return this.video?this.video.paused||this.video.ended?(this.video.paused&&this.freezeOrClear(),!1):(this.processFrame(),void(this.requestAnimationFrameRequest=window.requestAnimationFrame(this.boundFrameHandler))):!1},videoEndedHandler:function(){this.freezeOrClear(),"undefined"!=typeof this.dismissalTimeout&&(this.boundHideOutputCanvas=this.boundHideOutputCanvas||this.hideOutputCanvas.bind(this),setTimeout(this.boundHideOutputCanvas,this.dismissalTimeout))},setLoopConfig:function(a){this.loopedNum=0;var b=5,c=null!=a.maxLoops?a.maxLoops:b;0!==c&&this.setMaxLoops(c)},setMaxLoops:function(a){this.maxLoops=a,this.boundLoopCountOnSeeked=this.loopCountOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundLoopCountOnSeeked)},loopCountOnSeeked:function(a){return this.video.paused?void(this.loopedNum=0):(this.video.currentTime<.1&&this.loopedNum++,void(this.loopedNum>=this.maxLoops&&(this.video.pause(),this.loopedNum=0)))},freezeOrClear:function(){this.stillFrameInS?this.freezeOnStill(this.stillFrameInS):this.clearOnEnd()},freezeOnStill:function(a){this.video.pause(),this.boundFreezeFrameOnSeeked=this._freezeFrameOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundFreezeFrameOnSeeked),this.video.currentTime=a},_freezeFrameOnSeeked:function(){this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.processFrame()},clearOnEnd:function(){this.video.pause(),this._clearCanvas()},showOutputCanvas:function(){this.output.style.display=this.originalOutputDisplay},hideOutputCanvas:function(){this.output.style.display="none"},dieBecauseTainted:function(){this.doDebug&&window.console&&window.console.log&&console.log("Tainted canvas content. Killing Alphalfa playback."),this.dieBecauseUnsupported(!0)},dieBecauseUnsupported:function(a){this.doDebug&&!a&&window.console&&window.console.log&&console.log("Alphalfa has seen things. Attack ships on fire off the shoulder of Orion... Time. to die."),window.cancelAnimationFrame(this.requestAnimationFrameRequest),this.isSupported=!1,this.boundFrameHandler&&this.boundEndHandler&&(this.video.removeEventListener("play",this.boundFrameHandler,!1),this.video.removeEventListener("ended",this.boundEndHandler,!1)),this.video.pause(),this.video.style.display="none",this.output.style.display="none",this.buffer&&(this.buffer.style.display="none")},_clearCanvas:function(){this.renderer.clearCanvas()}},b.exports=i},{"../polyfills/request-animation-frame.js":90,"./alphalfa-utils.js":80,"./renderers/alphalfa-renderer-canvas.js":82,"./renderers/alphalfa-renderer-color-correct.js":83,"./renderers/alphalfa-renderer-mask.js":84,"./renderers/alphalfa-renderer-webgl.js":85}],82:[function(a,b,c){var d=a("../alphalfa-utils.js"),e=function(a){this.doDebug=a.doDebug,this.output=a.output,this.outputCtx=a.outputCtx,this.outputHeight=a.outputHeight,this.outputWidth=a.outputWidth,this.buffer=a.buffer,this.video=a.video,this.dieBecauseUnsupported=a.dieBecauseUnsupported};e.prototype={PIXEL_DATA_SIZE:4,setupRendererContext:function(){this._setupCanvasContext()},getProcessFrameFunc:function(){return this.processCanvasFrame.bind(this,this.buffer,this.bufferCtx,this.output,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){d.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0,this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0},processCanvasFrame:function(a,b,c,d,e,f){b.drawImage(this.video,0,0);for(var g=this.bufferCtx.getImageData(0,f,e,f),h=g.data,i=3,j=h.length;j>i;i+=this.PIXEL_DATA_SIZE)h[i]=h[i-2];d.putImageData(g,0,0,0,0,e,f),d.drawImage(a,0,0,e,2*f)},_setupCanvasContext:function(){this.buffer=this.buffer||d.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d"),this.outputCtx.globalCompositeOperation="source-in"}},b.exports=e},{"../alphalfa-utils.js":80}],83:[function(a,b,c){var d=a("../alphalfa-utils.js"),e=function(a){this.doDebug=a.doDebug,this.output=a.output,this.outputCtx=a.outputCtx,this.outputWidth=a.outputWidth,this.outputHeight=a.outputHeight,this.video=a.video,this.dieBecauseUnsupported=a.dieBecauseUnsupported};e.prototype={setupRendererContext:function(){},getProcessFrameFunc:function(){return this.processColorCorrectFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){d.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processColorCorrectFrame:function(a,b,c,d){b.drawImage(a,0,0,c,d)}},b.exports=e},{"../alphalfa-utils.js":80}],84:[function(a,b,c){var d=a("../alphalfa-utils.js"),e=function(a){this.doDebug=a.doDebug,this.output=a.output,this.outputCtx=a.outputCtx,this.outputHeight=a.outputHeight,this.outputWidth=a.outputWidth,this.video=a.video,this.maskUrl=a.maskUrl,this.dieBecauseUnsupported=a.dieBecauseUnsupported};e.prototype={setupRendererContext:function(){this._setupMaskContext()},getProcessFrameFunc:function(){return this.processMaskFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){d.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processMaskFrame:function(a,b,c,d){b.drawImage(a,0,0,c,d)},_setupMaskContext:function(){this.loadMask(this.maskUrl)},loadMask:function(a){var b=this,c=this.mask=new Image;c.addEventListener("load",function(a){b.putImageMask.call(b,c)}),c.src=a},putImageMask:function(a){this.outputCtx.globalCompositeOperation="source-over",this.outputCtx.drawImage(a,0,0,this.outputWidth,this.outputHeight),this.outputCtx.globalCompositeOperation="source-in"}},b.exports=e},{"../alphalfa-utils.js":80}],85:[function(a,b,c){var d=a("../alphalfa-utils.js"),e=function(a){this.doDebug=a.doDebug,this.gl=a.gl,this.output=a.output,this.buffer=a.buffer,this.video=a.video,this.dieBecauseUnsupported=a.dieBecauseUnsupported};e.prototype={setupRendererContext:function(){this._setupGlContext(this.gl)},getProcessFrameFunc:function(){return this.determineGlRenderFunc()},clearCanvas:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},teardown:function(){var a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,this.vbuffer),a.bufferData(a.ARRAY_BUFFER,1,a.STATIC_DRAW),a.deleteBuffer(this.vbuffer),a.bindBuffer(a.ARRAY_BUFFER,this.texCoordBuffer),a.bufferData(a.ARRAY_BUFFER,1,a.STATIC_DRAW),a.deleteBuffer(this.texCoordBuffer),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(this.stackTexture),this.gl=void 0,this.buffer&&(this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0)},determineGlRenderFunc:function(){return d.isIE()?this.ieProcessGlFrame.bind(this,this.gl,this.output,this.output.width,this.output.height):this.processGlFrame.bind(this,this.gl,this.output)},processGlFrame:function(a,b){this._updateTextureFromVideo(a),a.drawArrays(a.TRIANGLE_STRIP,0,4)},_updateTextureFromVideo:function(a){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.video)},ieProcessGlFrame:function(a,b,c,d){this._ieUpdateTextureFromVideo(a,c,d),a.drawArrays(a.TRIANGLE_STRIP,0,4)},_ieUpdateTextureFromVideo:function(a,b,c){this.bufferCtx.drawImage(this.video,0,0,b,2*c),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.buffer)},_setupGlContext:function(a){d.isIE()&&(this.doDebug&&console.log("Using alternate IE render mode."),this._ieGlSetup()),a.enableVertexAttribArray(0),a.viewport(0,0,this.output.width,this.output.height),this.doDebug?a.clearColor(0,0,0,.1):a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),this.program=this._compileProgram(a,this.SHADER_VERTEX,this.SHADER_FRAGMENT),a.useProgram(this.program),this._getGlDataLocations(a),this._createAndBindTexCoordData(a),this._createAndBindTexture(a),this._createAndBindVertexData(a)},_ieGlSetup:function(){this.buffer=this.buffer||d.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d")},_getGlDataLocations:function(a){this.aTexCoord_loc=a.getAttribLocation(this.program,"aTexCoord"),this.aPosition_loc=a.getAttribLocation(this.program,"aPosition"),this.uImage_loc=a.getUniformLocation(this.program,"uImage")},_createAndBindVertexData:function(a){this.vbuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vbuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),a.STATIC_DRAW),a.enableVertexAttribArray(this.aPosition_loc),a.vertexAttribPointer(this.aPosition_loc,2,a.FLOAT,!1,0,0)},_createAndBindTexCoordData:function(a){this.texCoordBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.texCoordBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,.5,1,.5]),a.STATIC_DRAW),a.enableVertexAttribArray(this.aTexCoord_loc),a.vertexAttribPointer(this.aTexCoord_loc,2,a.FLOAT,!1,0,0),a.uniform2f(a.getUniformLocation(this.program,"uHalfTexOffset"),0,.5)},_createAndBindTexture:function(a){this.stackTexture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.stackTexture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)},_compileProgram:function(a,b,c){var d,e,f;return d=a.createShader(a.VERTEX_SHADER),a.shaderSource(d,b),a.compileShader(d),e=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(e,c),a.compileShader(e),f=a.createProgram(),a.attachShader(f,d),a.attachShader(f,e),a.linkProgram(f),a.getShaderParameter(d,a.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(vs) :: ",a.getShaderInfoLog(d)),a.getShaderParameter(e,a.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(fs) :: ",a.getShaderInfoLog(e)),a.getProgramParameter(f,a.LINK_STATUS)||console.log("gl.getProgramInfoLog(program) :: ",a.getProgramInfoLog(f)),f},SHADER_VERTEX:["","  attribute vec2 aPosition;","  attribute vec2 aTexCoord;","  varying vec2 vTexCoord;","  void main() {","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vTexCoord = aTexCoord;","  }",""].join("\n"),SHADER_FRAGMENT:["","  precision highp float;","  uniform sampler2D uImage;","  uniform vec2 uHalfTexOffset;","  varying vec2 vTexCoord;","  void main() {","    vec4 color = texture2D( uImage, vTexCoord );","    vec4 alpha = texture2D( uImage, vTexCoord + uHalfTexOffset );","    color[3] = alpha[0]; // avg alpha","    gl_FragColor = color;","  }",""].join("\n")},b.exports=e},{"../alphalfa-utils.js":80}],86:[function(a,b,c){var d=function(a){this.name=a.name,this.frames=a.frames,this.frameSpeed=a.frameSpeed,this.loop=!!a.loop,this.maxLoops=null!=a.maxLoops?a.maxLoops:0,this.onComplete=a.onComplete,this.onCompleteCallback=a.onCompleteCallback,this.currentFrame=0,this.loopCount=0};d.prototype={getClone:function(){return new d({name:this.name,frames:this.frames,frameSpeed:this.frameSpeed,loop:this.loop,maxLoops:this.maxLoops,onComplete:this.onComplete,onCompleteCallback:this.onCompleteCallback})},incrementLoopCount:function(){this.loopCount++},overMaxLoops:function(){return 0===this.maxLoops?!1:this.loopCount>=this.maxLoops}},b.exports=d},{}],87:[function(a,b,c){var d=a("./animaniac-animation.js");a("../polyfills/request-animation-frame.js");var e=function(a){this.injectEl=a.injectEl,this.animations={},this.animationConfigs=a.animations,this.autoplayAnimationName=a.autoplay,this.pauseFrame=a.pauseFrame||0,this.sprites={width:a.spriteWidth,height:a.spriteHeight},this.sheet={width:a.sheetWidth,height:a.sheetHeight},this.url=a.url,this.ready=!1,this.init()};e.prototype={doDebug:!1,log:function(){if(this.doDebug){var a=["Animaniac: "].concat(arguments);window.console.log.apply(window.console,a)}},init:function(){this.el=document.createElement("div"),this.el.className="animaniac",this.setInitialStyle(),this.prepareCoords()},setInitialStyle:function(){for(var a={display:"block",width:this.sprites.width+"px",height:this.sprites.height+"px",backgroundColor:"transparent",backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundSize:this.sheet.width+"px "+this.sheet.height+"px"},b=Object.keys(a),c=0;c<b.length;c++)this.el.style[b[c]]=a[b[c]]},prepareCoords:function(){this.cellCoords=this.determineCellCoords(),this.pauseCell=this.cellCoords[this.pauseFrame],this.animations=this.processAnimationConfigs(this.animationConfigs),this.applySpritesheet(),this.autoplayAnimationName?this.playAnimation(this.autoplayAnimationName):this.showCoords(this.pauseCell)},determineCellCoords:function(){var a=[];this.sheet.cols=Math.round(this.sheet.width/this.sprites.width),this.sheet.rows=Math.round(this.sheet.height/this.sprites.height);for(var b=1,c=1,d=(this.sprites.width,this.sprites.height,this.sheet.width,this.sheet.height,this.sheet.cols<=1?0:100/(this.sheet.cols-1)),e=this.sheet.rows<=1?0:100/(this.sheet.rows-1);b<=this.sheet.cols&&c<=this.sheet.rows;)if(a.push({x:((b-1)*d).toFixed(5),y:((c-1)*e).toFixed(5)}),b<this.sheet.cols)b++;else{if(!(c<this.sheet.rows))break;b=1,c++}return a},applySpritesheet:function(){this.el.style.backgroundImage="url("+this.url+")",this.injectEl.appendChild(this.el),this.ready=!0},play:function(){this.unpause(),this.playAnimation(this.currentAnimation.name)},pause:function(){this.paused=!0},unpause:function(){this.paused=!1},isPaused:function(){return this.paused},playAnimation:function(a){return this.ready||this.log("Not ready! TODO, add Queuer."),this.currentAnimation=this.animations[a].getClone(),this.currentAnimation?(this.unpause(),void this.startAnimation()):void this.log("Non-existent animation name passed to Animaniac.play()")},startAnimation:function(){this.boundHandleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this),this.timeSince=0,this.lastTS=Date.now(),this.nextFrame(),window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},handleRequestAnimationFrame:function(){var a=Date.now();this.timeSince>this.currentAnimation.frameSpeed?(this.nextFrame(),this.timeSince=0):(this.timeSince+=a-this.lastTS,this.lastTS=a),this.isPaused()?this.showCoords(this.pauseCell):window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},nextFrame:function(){var a=this.currentAnimation,b=a.currentFrame,c=a.frames[b];if(this.showCoords(c),this.hasNextFrame(a,b))a.currentFrame++;else{if(!a.loop||a.overMaxLoops()){var d=a.onCompleteCallback;if(this.isValidCallback(d)){var e=d.args?d.args:[];d.callback.apply(d.thisArg,e)}return void("string"==typeof a.onComplete?this.playAnimation(a.onComplete):this.pause())}a.incrementLoopCount(),a.currentFrame=0}},isValidCallback:function(a){return!!a&&a.callback&&a.thisArg},hasNextFrame:function(a,b){return!!a.frames[b+1]},showCoords:function(a){var b=a;(null==a||null==a.x||null==a.y)&&(this.log('Bad coords object passed to "showCoords".'),b=this.pauseCell),this.el.style.backgroundPosition=""+b.x+"% "+b.y+"%"},setAnimationCoords:function(a){for(var b=0;b<this.animations.length;b++)for(var c=this.animations[b],d=0;d<c.frames.length;d++)c.frames[d]=a[c.frames[d]]},processAnimationConfigs:function(a){null==a&&this.log("Must configure animations!");for(var b={},c=0;c<a.length;c++){for(var e=a[c],f=e.name,g=this.processFrameSeq(e.frames),h=[],i=0;i<g.length;i++){var j=g[i];h.push(this.cellCoords[j])}b[f]=new d({name:f,frames:h,frameSpeed:this.getFrameSpeed(e.fps||24),loop:!!e.loop,maxLoops:e.maxLoops,onComplete:e.onComplete,onCompleteCallback:e.onCompleteCallback})}return b},processFrameSeq:function(a){return Array.isArray(a)?this.processFrameSeqArray(a):"string"==typeof a?this.processFrameSeqString(a):(this.log("Warning, unsupported frame sequence format."),[0])},processFrameSeqArray:function(a){for(var b=a,c=(b.length,0);c<b.length;)if("string"==typeof b[c]){var d=this.processFrameSeqString(b[c]),e=c,f=1,g=d,h=[e,f].concat(g);b.splice.apply(b,h),c+=g.length}else c++;return b},processFrameSeqString:function(a){var b=[],c=a.split("-");if(2!==c.length)return[parseInt(c[0],10)];for(var d=0;d<c.length-1;d++){var e=c[d],f=c[d+1];b=b.concat(this.framesBetween(e,f))}return b},framesBetween:function(a,b){var c=parseInt(a,10),d=parseInt(b,10),e=d>c;return e?this._framesBetweenIncremental(c,d):this._framesBetweenDecremental(c,d)},_framesBetweenIncremental:function(a,b){var c=[],d=a;for(c.push(d);++d<=b;)c.push(d);return c},_framesBetweenDecremental:function(a,b){var c=[],d=a;for(c.push(d);--d>=b;)c.push(d);return c},getFrameSpeed:function(a){return 1e3/a}},b.exports=e},{"../polyfills/request-animation-frame.js":90,"./animaniac-animation.js":86}],88:[function(a,b,c){var d=a("./zoolander.js"),e=function(a){a.targetDate||console.warn("Countdowner :: Required argument not provided."),this.el=a.el||document.createElement("div"),this.id="countdowner-"+Date.now()+Math.floor(1e4*Math.random()),this.init(a)};e.prototype={defaults:{splitChar:"",doPad:!1,hideAfterRelease:!1,periods:["days","hours","minutes","seconds"],periodContainerCss:{display:"inline-block"},periodCountCss:{display:"inline-block"},labels:["Days","Hrs","Mins","Secs"],printLabels:!1,labelsBelow:!0,labelsCss:{display:"inline-block"}},classPrefix:"cd-",init:function(a){this.targetDate=this.determineTargetDate(a.targetDate),this.setConfig(a),a.hideAfterRelease&&this.timeRemaining()<=0||(this.zoo=a.zoolander||new d,this.injectCss(),this.initializeHtml(),this.printLabels&&this.initializeLabels(),this._render(),this.renderBind=this._render.bind(this),clearInterval(this.renderInterval),this.renderInterval=setInterval(this.renderBind,1e3))},setConfig:function(a){var b=this.addDefaults(a);delete b.targetDate;for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},addDefaults:function(a){var b=a;for(var c in this.defaults)this.defaults.hasOwnProperty(c)&&(this.isDefined(a[c])||(b[c]=this.defaults[c]));return b},determineTargetDate:function(a){var b;if("object"==typeof a&&this.isDefined(a.month)){var c=a.date||a.day;b=new Date(a.year,a.month-1,c)}else"object"==typeof a&&a instanceof Date?b=a:"string"==typeof a?b=new Date(a):console.warn("No date or invalid date provided. Aborting Countdowner.");return b},makeEl:function(a,b){var c=this.isDefined(b)?b:"div",d=document.createElement(c);if("string"==typeof a)d.classList.add(this.classPrefix+a);else for(var e=0;e<a.length;e++)d.classList.add(this.classPrefix+a[e]);return d},initializeHtml:function(){this.container=this.makeEl("container"),this.container.id=this.id;var a=this.periods;this.periodEls=[];for(var b=a[a.length-1],c=0;c<a.length;c++){var d=this.makePeriodContainer(a[c]);this.container.appendChild(d),this.periodEls[a[c]]=d,this.splitChar&&""!==this.splitChar&&a[c]!==b&&this.container.appendChild(this.makeSplitContainer())}this.el.innerHTML="",this.el.appendChild(this.container)},appendCountChildren:function(a){var b=this.makeEl("count","div");a.appendChild(b)},makePeriodContainer:function(a){var b=this.makeEl([a,"period-container"]);return this.appendCountChildren(b),b},makeSplitContainer:function(){var a=this.makeEl("split-el","span");return a.innerHTML=" "+this.splitChar+" ",a},initializeLabels:function(){for(var a=0;a<this.labels.length;a++){var b=this.makeLabel(this.labels[a],this.periods[a]),c=this.periodEls[this.periods[a]];this.labelsBelow?c.appendChild(b):c.insertBefore(b,c.children[0])}},makeLabel:function(a,b){var c=this.makeEl(["label","label-"+b],"span");return c.innerHTML=a,c},msSec:1e3,msMin:6e4,msHour:36e5,msDay:864e5,timeRemaining:function(){var a=Date.now(),b=this.targetDate.valueOf()-a;return b>0?b:0},calcRemaining:function(){var a={days:0,hours:0,minutes:0,seconds:0},b=this.timeRemaining();if(0===b)return a;var c=b;if(a.days=Math.floor(c/this.msDay),c-=a.days*this.msDay,a.hours=Math.floor(c/this.msHour),c-=a.hours*this.msHour,a.minutes=Math.floor(c/this.msMin),c-=a.minutes*this.msMin,a.seconds=Math.floor(c/this.msSec),this.doPad)for(var d in a)a.hasOwnProperty(d)&&(a[d]=this.pad(a[d]));return a},pad:function(a){return a>=10?a:"0"+a},container:function(){return this.el.children[0]},el:function(a){return arguments.length?(this.el=a,this):this.el},_render:function(){var a=this.calcRemaining();this.periodEls.days.children[0].innerHTML=a.days,this.periodEls.hours.children[0].innerHTML=a.hours,this.periodEls.minutes.children[0].innerHTML=a.minutes,this.periodEls.seconds.children[0].innerHTML=a.seconds},injectCss:function(){var a="#"+this.id,b=a+" ."+this.classPrefix,c=[[a,{"box-sizing":"border-box"}],[a+" *",{"box-sizing":"inherit"}],[b+"period-container",this.periodContainerCss],[b+"count",this.periodCountCss],[b+"label",this.labelsCss]];this.zoo.insertRules(c)},isDefined:function(a){return"undefined"!=typeof a}},b.exports=e},{"./zoolander.js":103}],89:[function(a,b,c){var d=a("./alphalfa/alphalfa.js"),e=a("./animaniac/animaniac.js"),f=a("./countdowner.js"),g=a("./reely/reely.js"),h=a("./zoolander.js"),i={AlphalfaPlayer:d,Animaniac:e,Countdowner:f,Reely:g,Zoolander:h};window.ad_design=i,b.exports=i},{"./alphalfa/alphalfa.js":81,"./animaniac/animaniac.js":87,"./countdowner.js":88,"./reely/reely.js":101,"./zoolander.js":103}],90:[function(a,b,c){/*!
 requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel

 MIT license
*/
!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}()},{}],91:[function(a,b,c){var d={DEFAULT_SPRITESHEET:"http://g-ec2.images-amazon.com/images/G/01/IMDb/ads/ReelySprites/reely_sprites-v0.7._V300293070_.png",DEFAULT_OVERLAY_SPRITESHEET:"http://g-ec2.images-amazon.com/images/G/01/IMDb/ads/ReelySprites/reely_sprites_overlay-v0.2._V300292855_.png"};b.exports=d},{}],92:[function(a,b,c){var d=a("./reely-scrubber.js"),e=a("./reely-css-classes.js"),f=a("./reely-el-maker.js"),g=a("./reely-events.js"),h=function(a){this.eventBus=a.eventBus,this.spriteDimensions=a.spriteDimensions,this.controlBarConfig=a.controlBarConfig,this.spritesheet=a.spritesheet,this.zoo=a.zoo,this.init()};h.prototype={FADE_DELAY_SECS:2,init:function(){this.el=f.make("div",e.CONTROL_BAR_CONTAINER),this.el.style.display="none",this.controlBar=f.make("div",[e.CONTROL_BAR,e.REPEAT_X_SPRITE+"-controlsBG"]),this.appendTableLayoutDivs(this.controlBar),this.injectControlsStyles(),this.populateControls(),this.el.appendChild(this.controlBar),this.controlBarConfig.autohide&&(this.fadeOutBind=this.fadeOut.bind(this),this.resetFadeOutDelay(),this.autohideListen()),this.broadcastInteraction(),this.listen()},populateControls:function(){this.createControlButtons(),this.scrubber=new d({eventBus:this.eventBus,spritesheet:this.spritesheet,spriteDimensions:this.spriteDimensions,zoo:this.zoo}),this.midCell.appendChild(this.scrubber.getEl())},clearFadeOutDelay:function(){clearTimeout(this.fadeOutDelay)},resetFadeOutDelay:function(){this.clearFadeOutDelay(),this.fadeOutDelay=setTimeout(this.fadeOutBind,1e3*this.FADE_DELAY_SECS)},fadeIn:function(){e.remove(this.el,e.TRANSPARENT),this.eventBus.trigger(g.FADE_IN_START)},fadeOut:function(){e.add(this.el,e.TRANSPARENT),this.eventBus.trigger(g.FADE_OUT_START)},broadcastInteraction:function(){this.el.addEventListener("mousemove",this.eventBus.triggers[g.MOUSE_MOVE])},listen:function(){this.eventBus.addEventListener(g.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(g.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.addEventListener(g.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.addEventListener(g.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.addEventListener(g.UNMUTED,this.toggleMuteUnmute,this,"muted")},autohideListen:function(){this.eventBus.addEventListener(g.MOUSE_IN,this.onMouseIn,this),this.eventBus.addEventListener(g.MOUSE_OUT,this.onMouseOut,this),this.eventBus.addEventListener(g.MOUSE_MOVE,this.onMouseMove,this)},teardown:function(){this.clearFadeOutDelay(),this.scrubber.teardown(),this.el.removeEventListener("mousemove",this.eventBus.triggers[g.MOUSE_MOVE]),this.eventBus.removeEventListener(g.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(g.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.removeEventListener(g.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.removeEventListener(g.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.removeEventListener(g.UNMUTED,this.toggleMuteUnmute,this,"muted"),this.eventBus.removeEventListener(g.MOUSE_IN,this.onMouseIn,this),this.eventBus.removeEventListener(g.MOUSE_OUT,this.onMouseOut,this),this.eventBus.removeEventListener(g.MOUSE_MOVE,this.onMouseMove,this)},onLoadedData:function(a){this.el.style.display=""},togglePlayPause:function(a){var b=this.isToggled(this.playPause),c=!b&&"play"===a||b&&"pause"===a;c&&this.toggleTwoState(this.playPause)},toggleMuteUnmute:function(a){var b=this.isToggled(this.muteUnmute),c=!b&&"muted"===a||b&&"unmuted"===a;c&&this.toggleTwoState(this.muteUnmute)},isToggled:function(a){return e.contains(a,e.TOGGLED)},toggleTwoState:function(a){this.isToggled(a)?e.remove(a,e.TOGGLED):e.add(a,e.TOGGLED)},onMouseIn:function(a){this.fadeIn()},onMouseMove:function(a){this.fadeIn(),this.resetFadeOutDelay()},onMouseOut:function(a){this.resetFadeOutDelay()},appendTableLayoutDivs:function(a){this.midCell=f.make("div",e.CONTROL_BAR_MID),this.leftCell=f.make("div",e.CONTROL_BAR_LEFT),this.rightCell=f.make("div",e.CONTROL_BAR_RIGHT),a.appendChild(this.midCell),a.appendChild(this.leftCell),a.appendChild(this.rightCell)},createControlButtons:function(){this.playPause=f.createTwoStateButton("play-pause",[{defaultIconName:"play",hoverIconName:"play-hover"},{defaultIconName:"pause",hoverIconName:"pause-hover"}]),this.muteUnmute=f.createTwoStateButton("mute-unmute",[{defaultIconName:"sound-off",hoverIconName:"sound-off-hover"},{defaultIconName:"sound-on",hoverIconName:"sound-on-hover"}]),this.playPause.addEventListener("click",this.eventBus.triggerBind(g.PLAY_PAUSE_TOGGLE)),this.leftCell.appendChild(this.playPause),this.muteUnmute.addEventListener("click",this.eventBus.triggerBind(g.MUTE_UNMUTE_TOGGLE)),this.rightCell.appendChild(this.muteUnmute)},injectControlsStyles:function(){var a=[];a=a.concat(this.getButtonStyles()),a=a.concat(this.getControlBarStyles()),this.zoo.insertRules(a)},determineButtonVisualWidth:function(){return this.spriteDimensions.spriteWidth+2*this.spriteDimensions.buttonPadding},determineContainerStyles:function(){var a=this.controlBarConfig,b={position:"absolute",display:"inline-block",height:a.height+"px",width:"100%",transition:"opacity 1s ease"};return"center"===a.anchorX&&(b.margin="0 auto",b.textAlign="center"),b[a.anchorY]=a.offsetY,b},determineBarElStyles:function(){var a=this.controlBarConfig,b={position:"relative",display:"block",height:"inherit",width:a.width,"background-color":"transparent","background-position":"0 0","background-repeat":"repeat-x"};return this.controlBarConfig.hideBG||(b["background-image"]='url("'+this.spritesheet.getSrc()+'")'),"center"===a.anchorX?b.margin="0 auto":b[a.anchorX]=a.offsetX,b},getButtonStyles:function(){return[["."+e.BUTTON_ICON,{height:this.spriteDimensions.spriteHeight+"px",width:this.spriteDimensions.spriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getControlBarStyles:function(){var a=this.determineButtonVisualWidth(),b=this.determineContainerStyles(),c=this.determineBarElStyles(),d=[["."+e.CONTROL_BAR_CONTAINER,b],["."+e.CONTROL_BAR,c],[["."+e.CONTROL_BAR_LEFT,"."+e.CONTROL_BAR_RIGHT],{display:"inline-block",height:"100%",width:a+"px"}],["."+e.CONTROL_BAR_LEFT,{"float":"left"}],["."+e.CONTROL_BAR_RIGHT,{"float":"right"}],["."+e.CONTROL_BAR_MID,{position:"absolute",left:"0",display:"block",height:"100%",width:"100%","box-sizing":"border-box","padding-left":a+"px","padding-right":a+"px"}]];return d}},b.exports=h},{"./reely-css-classes.js":93,"./reely-el-maker.js":94,"./reely-events.js":96,"./reely-scrubber.js":99}],93:[function(a,b,c){var d={CONTAINER:"reely-container",VIDEO:"reely-video",OVERLAY_CONTAINER:"reely-overlay-container",OVERLAY_SLATE:"reely-overlay-slate",CONTROL_BAR_CONTAINER:"reely-control-bar-container",CONTROL_BAR:"reely-control-bar",CONTROL_BAR_LEFT:"reely-control-bar-left",CONTROL_BAR_RIGHT:"reely-control-bar-right",CONTROL_BAR_MID:"reely-control-bar-mid",BUTTON:"reely-button",BUTTON_ICON:"reely-button-icon",BUTTON_ICON_LARGE:"reely-button-icon-large",TWO_STATE_BUTTON:"reely-two-state",TWO_STATE_DEFAULT:"reely-two-state-default",TWO_STATE_ALT:"reely-two-state-toggled",REPEAT_X_SPRITE:"reely-repeat-x-sprite",ICON_LARGE:"reely-icon-large",ICON:"reely-icon",ICON_DEFAULT:"reely-default-icon",ICON_HOVER:"reely-hover-icon",ICON_ACTIVE:"reely-toggle-active",ICON_DOWN:"reely-toggle-down",LOADING_SPINNER:"reely-loading-spinner",SCRUBBER_CONTAINER:"reely-scrubber-container",TOGGLED:"reely-toggled",UNSELECTABLE:"reely-unselectable",HIDDEN:"reely-hidden",INVISIBLE:"reely-invisible",TRANSPARENT:"reely-transparent",add:function(a,b){switch("undefined"==typeof b&&console.warn("Attempted to add() an undefined class."),this.mode()){case"modern":return a.classList.add(b);case"oldIE":return a.className+=" "+b}},contains:function(a,b){switch("undefined"==typeof b&&console.warn("Attempted to check contains() an undefined class."),this.mode()){case"modern":return a.classList.contains(b);case"oldIE":return-1!==a.className.split(" ").indexOf(b)}},remove:function(a,b){"undefined"==typeof b&&console.warn("Attempted to remove() an undefined class."),this._removeClass||(this._removeClass=this.removeModes[this.mode()]),this._removeClass(a,b)},removeModes:{modern:function(a,b){a.classList.remove(b)},oldIE:function(a,b){var c=a.className.split(" "),d=c.indexOf(b);-1!==d&&c.splice(d,1),a.className=c.join(" ")}},mode:function(){if(!this._mode){var a=document.createElement("div");this._mode="classList"in a?"modern":"oldIE",a=void 0}return this._mode}};b.exports=d},{}],94:[function(a,b,c){var d=a("./reely-css-classes.js"),e={make:function(a,b,c){var d=document.createElement(a);return d.setAttribute("class",this.arrayWrap(b).join(" ")),c&&(d.id=c),d},createIcon:function(a,b){return this._createIcon(d.ICON,a,b)},createLargeIcon:function(a,b){return this._createIcon(d.ICON_LARGE,a,b)},_createIcon:function(a,b,c){var d=this.concatClasses([a,a+"-"+b],c);return this.make("div",d)},createRepeatXSprite:function(a,b){var c=this.concatClasses([d.REPEAT_X_SPRITE,d.REPEAT_X_SPRITE+"-"+a],b);return this.make("div",c)},createSpriteEl:function(a,b){var c=a;return b&&(c=this.concatClasses(c,b)),this.make("div",c)},concatClasses:function(a,b){return b?"string"==typeof b?(a.push(b),a):a.concat(b):a},createTwoStateButton:function(a,b){var c=this.createIcon,e=d.BUTTON_ICON;return this._createTwoStateButton(a,b,e,c)},createLargeTwoStateButton:function(a,b){var c=this.createLargeIcon,e=d.BUTTON_ICON_LARGE;return this._createTwoStateButton(a,b,e,c)},_createTwoStateButton:function(a,b,c,e){var f=this.make("div",[d.TWO_STATE_BUTTON,d.TWO_STATE_BUTTON+"-"+a]),g=this.createButtonState(b[0],d.TWO_STATE_DEFAULT,c,e),h=this.createButtonState(b[1],d.TWO_STATE_ALT,c,e);return f.appendChild(g),f.appendChild(h),f},createButtonState:function(a,b,c,e){return e||(e=this.createIcon),c||(c=d.BUTTON_ICON),this._createButtonState(a,b,c,e)},_createButtonState:function(a,b,c,e){var f=[d.BUTTON,d.UNSELECTABLE];f.push(c),b&&(f=f.concat(this.arrayWrap(b)));var g=this.make("div",f),h=e.call(this,a.defaultIconName,d.ICON_DEFAULT),i=e.call(this,a.hoverIconName,d.ICON_HOVER);return g.appendChild(h),g.appendChild(i),g},arrayWrap:function(a){return"undefined"==typeof a?[]:"[object Array]"!==Object.prototype.toString.call(a)?[a]:a}};b.exports=e},{"./reely-css-classes.js":93}],95:[function(a,b,c){var d=a("./reely-events.js"),e=function(){this.init()};e.prototype={reelyEvents:[],init:function(){this.triggers={},this.listeners={},this.reelyEvents=this.getReelyEventsArray();for(var a=0;a<this.reelyEvents.length;a++){var b=this.reelyEvents[a];this.triggers[b]=this.triggerBind(b),this.listeners[b]=[]}},getReelyEventsArray:function(){var a=[];for(var b in d)d.hasOwnProperty(b)&&a.push(d[b]);return a},addEventListener:function(a,b,c){this.listeners[a]||console.warn("Attempted to addEventListener with unsupported event :: ",a);var d=Array.prototype.slice.call(arguments);d.splice(0,3);var e={callback:b,context:c,args:d};this.listeners[a].push(e)},removeEventListener:function(a,b,c){this.listeners[a]||console.warn("Attempted to removeEventListener with unsupported event :: ",a);for(var d,e=this.listeners[a].slice(),f=0;f<e.length;f++)if(d=e[f],d.callback===b&&d.context===c){e.splice(f,1);break}this.listeners[a]=e},triggerBind:function(a,b){return this.trigger.bind(this,a)},trigger:function(a){this.listeners[a]||console.warn("Attempted to trigger an unsupported event :: ",a);var b=Array.prototype.slice.call(arguments);b.splice(0,1);for(var c,d=this.listeners[a],e=[],f=0;f<d.length;f++)c=d[f],e=c.args.concat(b),c.callback.apply(c.context,e)}},b.exports=e},{"./reely-events.js":96}],96:[function(a,b,c){var d={STARTED:"started",PLAY_PAUSE_TOGGLE:"playPauseToggle",MUTE_UNMUTE_TOGGLE:"muteUnmuteToggle",SCRUBBER_BAR_CLICK:"scrubberBarClick",MOUSE_IN:"mouseIn",MOUSE_OUT:"mouseOut",MOUSE_MOVE:"mouseMove",MUTED:"muted",UNMUTED:"unmuted",VID_LOADSTART:"video:loadstart",VID_LOADEDMETADATA:"video:loadedmetadata",VID_LOADEDDATA:"video:loadeddata",VID_CANPLAY:"video:canplay",VID_CANPLAYTHROUGH:"video:canplaythrough",VID_WAITING:"video:waiting",VID_PROGRESS:"video:progress",VID_SUSPEND:"video:suspend",VID_PLAY:"video:play",VID_PLAYING:"video:playing",VID_PAUSE:"video:pause",VID_TIMEUPDATE:"video:timeupdate",VID_ENDED:"video:ended",FADE_OUT_START:"reely:fadeoutstart",FADE_IN_START:"reely:fadeinstart"};b.exports=d},{}],97:[function(a,b,c){var d=a("./reely-css-classes.js"),e=a("./reely-el-maker.js"),f=a("./reely-events.js"),g=function(a){this.eventBus=a.eventBus,this.zoo=a.zoo,this.init()};g.prototype={PROGRESS_TICKS_TO_SHOW:5,init:function(){this.el=e.make("div",d.LOADING_SPINNER+"-outer-container"),this.innerContainer=e.make("div",d.LOADING_SPINNER+"-inner-container"),this.spinner=e.make("div",d.LOADING_SPINNER),this.innerContainer.appendChild(this.spinner),this.el.appendChild(this.innerContainer),this.injectLoadingSpinnerCSS(),this.progressTicks=0,this.listen()},listen:function(){this.eventBus.addEventListener(f.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(f.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(f.VID_PROGRESS,this.onProgress,this),this.eventBus.addEventListener(f.VID_SUSPEND,this.onSuspend,this),this.eventBus.addEventListener(f.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(f.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(f.VID_PAUSE,this.onPause,this)},teardown:function(){this.eventBus.removeEventListener(f.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(f.VID_CANPLAY,this.onCanPlay,this),this.eventBus.removeEventListener(f.VID_PROGRESS,this.onProgress,this),this.eventBus.removeEventListener(f.VID_SUSPEND,this.onSuspend,this),this.eventBus.removeEventListener(f.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(f.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(f.VID_PAUSE,this.onPause,this)},onPlay:function(){this.isPlaying=!0,this.progressTicks=0},onPause:function(){this.isPlaying=!1,this.progressTicks=0},onLoadedMetadata:function(){this.show()},onCanPlay:function(){this.hide()},onSuspend:function(){this.progressTicks=0},onProgress:function(){this.isPlaying&&(this.progressTicks++,this.progressTicks>=this.PROGRESS_TICKS_TO_SHOW&&this.show())},onTimeUpdate:function(){this.progressTicks=0,this.hide()},hide:function(){this.isHidden||(this.isHidden=!0,d.add(this.el,d.HIDDEN),d.remove(this.spinner,d.TRANSPARENT))},show:function(){this.isHidden&&(this.isHidden=!1,d.remove(this.el,d.HIDDEN),d.remove(this.spinner,d.TRANSPARENT))},injectLoadingSpinnerCSS:function(){var a="loading-spinner-spin";this.zoo.insertKeyframes(a,this.getSpinnerKeyframes());var b=[];b=b.concat(this.getSpinnerStyles()),this.zoo.insertRules(b),this.zoo.insertAnimation("."+d.LOADING_SPINNER,"animation",a+" 1.6s linear infinite")},getSpinnerKeyframes:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(359deg)"}}},getSpinnerStyles:function(){return[["."+d.LOADING_SPINNER+"-outer-container",{position:"absolute",top:"50%",left:"50%",height:0,width:0}],["."+d.LOADING_SPINNER+"-inner-container",{display:"block",height:"64px",width:"64px",transform:"translate(-50%, -50%)"}],["."+d.LOADING_SPINNER,{display:"block","box-sizing":"border-box",height:"64px",width:"64px",background:"transparent","border-radius":"50%","border-top":"7px solid rgba(255, 255, 255, 1)","border-right":"7px solid rgba(255, 255, 255, 0.5)","border-bottom":"7px solid rgba(255, 255, 255, 0.5)","border-left":"7px solid rgba(255, 255, 255, 0.5)",transition:"opacity 1s ease-out"}]]}},b.exports=g},{"./reely-css-classes.js":93,"./reely-el-maker.js":94,"./reely-events.js":96}],98:[function(a,b,c){var d=a("./reely-css-classes.js"),e=a("./reely-el-maker.js"),f=a("./reely-events.js"),g=a("./reely-loading-spinner.js"),h=function(a){this.eventBus=a.eventBus,this.spritesheet=a.spritesheet,this.spriteDimensions=a.spriteDimensions,this.slate=a.slate,this.zoo=a.zoo,this.loadingSpinner=new g(a),this.init()};h.prototype={init:function(){this.el=e.make("div",d.OVERLAY_CONTAINER),this.isPlaying(!1),this.isEnded(!1),this.showSlate(),this.playReplay=e.createLargeTwoStateButton("overlay-play-pause",[{defaultIconName:"overlay-play",hoverIconName:"overlay-play-hover"},{defaultIconName:"overlay-replay",hoverIconName:"overlay-replay-hover"}]),this.el.appendChild(this.playReplay),this.el.appendChild(this.loadingSpinner.el),this.hide(),this.broadcastInteraction(),this.injectOverlayStyles(),this.listen()},hide:function(){d.add(this.playReplay,d.TRANSPARENT)},show:function(){d.remove(this.playReplay,d.TRANSPARENT)},hideSlate:function(){d.remove(this.el,d.OVERLAY_SLATE)},showSlate:function(){d.add(this.el,d.OVERLAY_SLATE)},listen:function(){this.eventBus.addEventListener(f.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(f.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.addEventListener(f.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(f.VID_PAUSE,this.onPause,this),this.eventBus.addEventListener(f.VID_ENDED,this.onVideoEnded,this)},teardown:function(){this.loadingSpinner.teardown(),this.el.removeEventListener("click",this.eventBus.triggers[f.PLAY_PAUSE_TOGGLE]),this.el.removeEventListener("mouseenter",this.eventBus.triggers[f.MOUSE_IN]),this.el.removeEventListener("mouseleave",this.eventBus.triggers[f.MOUSE_OUT]),this.el.removeEventListener("mousemove",this.eventBus.triggers[f.MOUSE_MOVE]),this.eventBus.removeEventListener(f.VID_CANPLAY,this.onLoadedMetadata,this),this.eventBus.removeEventListener(f.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.removeEventListener(f.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(f.VID_PAUSE,this.onPause,this),this.eventBus.removeEventListener(f.VID_ENDED,this.onVideoEnded,this)},broadcastInteraction:function(){this.el.addEventListener("click",this.eventBus.triggers[f.PLAY_PAUSE_TOGGLE]),this.el.addEventListener("mouseenter",this.eventBus.triggers[f.MOUSE_IN]),this.el.addEventListener("mouseleave",this.eventBus.triggers[f.MOUSE_OUT]),this.el.addEventListener("mousemove",this.eventBus.triggers[f.MOUSE_MOVE])},onCanPlay:function(){this.isPlaying()||this.show()},onScrubberBarClick:function(){this.setToPlayIcon(),this.hideSlate()},onPlay:function(){this.setToPlayIcon(),this.isEnded(!1),this.isPlaying(!0),this.hide(),this.hideSlate()},onPause:function(){this.isPlaying(!1),this.show()},onVideoEnded:function(){this.setToReplayIcon(),this.isEnded(!0),this.show(),this.showSlate()},setToPlayIcon:function(){d.remove(this.playReplay,d.TOGGLED)},setToReplayIcon:function(){d.add(this.playReplay,d.TOGGLED)},isPlaying:function(a){return null!=a&&(this._isPlaying=a),this._isPlaying},isEnded:function(a){return null!=a&&(this._isEnded=a),this._isEnded},injectOverlayStyles:function(){var a=[];a=a.concat(this.getContainerStyles()),a=a.concat(this.getSlateStyles()),a=a.concat(this.getButtonStyles()),a=a.concat(this.getHoverOverrideStyles()),this.zoo.insertRules(a)},getContainerStyles:function(){return[["."+d.OVERLAY_CONTAINER,{position:"absolute",top:0,left:0,display:"block",height:"100%",width:"100%",cursor:"pointer","text-align":"center"}],["."+d.OVERLAY_CONTAINER+" *",{visibility:"inherit"}]]},getSlateStyles:function(){return this.slate?[["."+d.OVERLAY_SLATE,{background:"url("+this.slate+") no-repeat center center transparent","background-size":"contain"}]]:[]},getButtonStyles:function(){return[["."+d.OVERLAY_CONTAINER+" ."+d.TWO_STATE_BUTTON,{top:"50%",left:"50%"}],["."+d.OVERLAY_CONTAINER+" ."+d.BUTTON_ICON_LARGE,{transform:"translate(-50%, -50%)"}],["."+d.BUTTON_ICON_LARGE,{height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getHoverOverrideStyles:function(){var a=d;return[[["."+a.OVERLAY_CONTAINER+" ."+a.TWO_STATE_BUTTON+" ."+a.TWO_STATE_DEFAULT,"."+a.OVERLAY_CONTAINER+" ."+a.TWO_STATE_BUTTON+" ."+a.TWO_STATE_DEFAULT],{visibility:"inherit"}],[["."+a.OVERLAY_CONTAINER+" ."+a.BUTTON+" ."+a.ICON_DEFAULT,"."+a.OVERLAY_CONTAINER+":hover ."+a.BUTTON+" ."+a.ICON_HOVER],{opacity:1}],[["."+a.OVERLAY_CONTAINER+":hover ."+a.BUTTON+" ."+a.ICON_DEFAULT,"."+a.OVERLAY_CONTAINER+" ."+a.BUTTON+" ."+a.ICON_HOVER],{opacity:0}],[["."+a.OVERLAY_CONTAINER+":hover ."+a.BUTTON+" ."+a.ICON_DEFAULT,"."+a.OVERLAY_CONTAINER+" ."+a.BUTTON+" ."+a.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+a.OVERLAY_CONTAINER+":hover ."+a.BUTTON+" ."+a.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]}},b.exports=h},{"./reely-css-classes.js":93,"./reely-el-maker.js":94,"./reely-events.js":96,"./reely-loading-spinner.js":97}],99:[function(a,b,c){var d=a("./reely-css-classes.js"),e=a("./reely-el-maker.js"),f=a("./reely-events.js"),g=function(a){this.eventBus=a.eventBus,this.spritesheet=a.spritesheet,this.spriteDimensions=a.spriteDimensions,this.zoo=a.zoo,this.init()};g.prototype={init:function(){this.el=e.make("div",d.SCRUBBER_CONTAINER),this.el.addEventListener("click",this.onScrubberClick.bind(this)),this.els=this.createScrubberBarEls(),this.appendEls(),this.injectScrubberStyles(),this.listen()},getEl:function(){return this.el},appendEls:function(){this.el.appendChild(this.els.bg),this.el.appendChild(this.els.buffered),this.el.appendChild(this.els.played),this.el.appendChild(this.els.thumb)},createScrubberBarEls:function(){var a={};return a.bg=e.createRepeatXSprite("scrubber-bg"),a.played=e.createRepeatXSprite("scrubber-played-bg"),a.played.style.width=0,a.buffered=e.createRepeatXSprite("scrubber-buffered-bg"),a.buffered.style.width=0,a.thumb=e.createButtonState({defaultIconName:"scrubber-tab",hoverIconName:"scrubber-tab-hover"},d.BUTTON+"-scrubber-tab"),a},listen:function(){this.eventBus.addEventListener(f.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(f.VID_PLAY,this.onPlay,this)},teardown:function(){this.eventBus.removeEventListener(f.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(f.VID_PLAY,this.onPlay,this)},onPlay:function(a){this.lastUpdateMs=Date.now()},onTimeUpdate:function(a){var b,c=Date.now();this.lastUpdateMs&&(b=(c-this.lastUpdateMs)/1e3);var d=a.target,e=d.currentTime/d.duration;this.setScrubberBar(e,b);var f=this.determineBufferedFraction(d.buffered,d.duration);this.setBufferBar(f),this.lastUpdateMs=c},setScrubberTransition:function(a){a?(this.els.played.style.transition="width "+a+"s linear",this.els.thumb.style.transition="left "+a+"s linear"):(this.els.played.style.transition="",this.els.thumb.style.transition="")},onScrubberClick:function(a){if(!d.contains(a.target,"reely-icon")){var b="undefined"!=typeof a.offsetX?a.offsetX:a.layerX,c=b/this.el.clientWidth;this.eventBus.trigger(f.SCRUBBER_BAR_CLICK,{clickedFraction:c})}},setScrubberBar:function(a,b){this.setScrubberTransition(b||void 0);var c=100*a,d=this.el.clientWidth,e=d*a-this.els.thumb.clientWidth/2;this.els.played.style.width=c+"%",this.els.thumb.style.left=e+"px"},setBufferBar:function(a){var b=100*a;this.els.buffered.style.width=b+"%"},determineBufferedFraction:function(a,b){for(var c=0,d=0,e=0;e<a.length;e++){var f=a.end(0)-a.start(0);d+=f}return d>0&&(c=d/b),c},injectScrubberStyles:function(){var a=[];a=a.concat(this.getScrubberBarStyles()),a=a.concat(this.getScrubberThumbOverrideStyles()),this.zoo.insertRules(a)},getScrubberBarStyles:function(){return[["."+d.SCRUBBER_CONTAINER,{position:"relative",height:"100%",width:"100%","box-sizing":"border-box",overflow:"hidden","padding-top":this.spriteDimensions.buttonPadding+"px","padding-bottom":this.spriteDimensions.buttonPadding+"px"}],["."+d.BUTTON+"-scrubber-tab",{position:"absolute",top:0,left:"-"+this.spriteDimensions.spriteWidth/2+"px","padding-left":0,"padding-right":0,"pointer-events":"none"}]]},getScrubberThumbOverrideStyles:function(){return[["."+d.SCRUBBER_CONTAINER+" ."+d.ICON_HOVER,{left:0}]]}},b.exports=g},{"./reely-css-classes.js":93,"./reely-el-maker.js":94,"./reely-events.js":96}],100:[function(a,b,c){var d=a("./reely-css-classes.js"),e=a("./reely-config.js"),f=function(a){this.spriteDimensions=a.spriteDimensions,this.controlBarConfig=a.controlBarConfig,this.zoo=a.zoo,this.spritesheetUrls=this.determineSpritesheetUrls(a.spritesheetUrls),this.overlaySpritesheetUrls=this.determineOverlaySpritesheetUrls(a.overlaySpritesheetUrls),this.init()};f.prototype={TEMP_FORCE_PNG_SPRITESHEET:!0,init:function(){this.doesSupportSVG=this.supportsSVG(),this.spritesheetSrc=this.determineSpritesheetMode(this.spritesheetUrls),this.overlaySpritesheetSrc=this.determineSpritesheetMode(this.overlaySpritesheetUrls),this.spritesData=this.initSpritesData(),this.injectSpritesheetCSS()},getSrc:function(){return this.spritesheetSrc},getOverlaySrc:function(){return this.overlaySpritesheetSrc},supportsSVG:function(){return"undefined"!=typeof SVGRect},determineSpritesheetMode:function(a){return!this.TEMP_FORCE_PNG_SPRITESHEET&&this.doesSupportSVG&&a.svg?a.svg:a.png},initSpritesData:function(){var a={},b=0;return b=this.addControlsBGData(a,b),b=this.addRepeatXData(a,b),b=this.addIconData(a,b),this.addLargeIconData(a),a},addControlsBGData:function(a,b){var c=this.controlBarConfig.height;return a.controlsBG={type:"repeat-x",h:c,x:0,y:b},b+c},addRepeatXData:function(a,b){for(var c,d=b,e=this.spriteDimensions.spriteHeight,f=["scrubber-bg","scrubber-played-bg","scrubber-buffered-bg"],g=0;g<f.length;g++)c=f[g],a[c]={type:"repeat-x",h:e,x:0,y:d},d+=e;return d},addIconData:function(a,b){for(var c,d,e,f=this.spriteDimensions.spriteHeight,g=this.spriteDimensions.spriteWidth,h=["scrubber-tab","scrubber-tab-hover","scrubber-tabDown","","play","play-hover","pause","pause-hover","sound-off","sound-off-hover","sound-on","sound-on-hover"],i=b,j=0;j<h.length;j++)c=h[j],d=j%2,e=d?g:0,""!==c&&(a[c]={type:"icon",w:g,h:f,x:e,y:i}),i=d?i+f:i;return i},addLargeIconData:function(a,b){for(var c,d=this.spriteDimensions.overlaySpriteWidth,e=this.spriteDimensions.overlaySpriteHeight,f=["overlay-play","overlay-play-hover","overlay-replay","overlay-replay-hover"],g=0,h=0;h<f.length;h++)c=f[h],a[c]={type:"icon-large",w:d,h:e,x:0,y:g},g+=e;return g},determineSpritesheetUrls:function(a){var b={png:e.DEFAULT_SPRITESHEET};return this._determineSpritesheetUrls(a,b)},determineOverlaySpritesheetUrls:function(a){var b={png:e.DEFAULT_OVERLAY_SPRITESHEET};return this._determineSpritesheetUrls(a,b)},_determineSpritesheetUrls:function(a,b){var c={},d=a&&Object.keys(a).length&&a.png;return d?c.png=a.png:c=b,c},injectSpritesheetCSS:function(){var a=[];a=a.concat(this.getSpriteStyles()),a=a.concat(this.getOverlaySpriteStyles()),a=a.concat(this.getIndividualSpriteStyles()),this.zoo.insertRules(a)},getSpriteStyles:function(){return[[["."+d.ICON,"."+d.REPEAT_X_SPRITE],{height:this.spriteDimensions.spriteHeight+"px",display:"inline-block","background-image":"url("+this.getSrc()+")","background-color":"transparent"}]]},getOverlaySpriteStyles:function(){return[["."+d.ICON_LARGE,{display:"inline-block",height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px","background-image":"url("+this.getOverlaySrc()+")","background-color":"transparent"}]]},getIndividualSpriteStyles:function(){var a,b,c,d=[],e={icon:this.getIconCSS,"repeat-x":this.getRepeatXSpriteCSS,"icon-large":this.getIconLargeCSS};for(var f in this.spritesData)this.spritesData.hasOwnProperty(f)&&(a=this.spritesData[f],b=e[a.type],c=b.call(this,f,a),d.push(c));return d},getIconCSS:function(a,b){var c=this.spriteDimensions;return["."+d.ICON+"-"+a,{width:this.spriteDimensions.spriteWidth+"px","background-position":"-"+b.x+"px -"+b.y+"px","background-repeat":"no-repeat","background-size":2*c.spriteWidth+"px "+10.5*c.spriteHeight+"px"}]},getRepeatXSpriteCSS:function(a,b){var c=this.spriteDimensions;return["."+d.REPEAT_X_SPRITE+"-"+a,{position:"absolute",width:"100%","background-position":"0 -"+b.y+"px","background-repeat":"repeat-x","background-size":2*c.spriteWidth+"px "+10.5*c.spriteHeight+"px"}]},getIconLargeCSS:function(a,b){return["."+d.ICON_LARGE+"-"+a,{"background-position":"0 -"+b.y+"px","background-repeat":"no-repeat"}]}},b.exports=f},{"./reely-config.js":91,"./reely-css-classes.js":93}],101:[function(a,b,c){var d=a("./reely-event-bus.js"),e=a("./reely-controls.js"),f=a("./reely-overlay.js"),g=a("./reely-spritesheet.js"),h=a("../zoolander.js"),i=a("./reely-css-classes.js"),j=a("./reely-el-maker.js"),k=a("./reely-events.js"),l=function(a){this.injectEl=a.injectEl,this.src=a.src,this.slate=a.slate||"",this.autoplay=a.autoplay||!1,this.autosound=a.autosound||!1,this.playsInline=a.playsInline||!0,this.spritesheetUrls=a.spritesheets||{},this.overlaySpritesheetUrls=a.overlaySpritesheets||{},this.spriteDimensions=this.determineSpriteDimensionsConfig(a.spritesheets);var b=a.controlBar||{};this.controlBarConfig=this.determineControlBarConfig(b),a.zoolander&&(this.zoo=a.zoolander),this.init()};l.prototype={doDebug:!1,init:function(){this.el=j.make("div",i.CONTAINER),this.initZoolander(),this.injectPlayerStyles(),this.hide(),this.initChildren(),this.videoStarted=!1,this.videoEl=this.createVideoEl(),this.broadcast(),this.listen(),this.el.appendChild(this.videoEl),this.el.appendChild(this.overlay.el),this.el.appendChild(this.controls.el),this.injectEl.appendChild(this.el)},initZoolander:function(){if(!this.zoo){var a=this.injectEl.id;if(!a){var b=Date.now()+1e3*Math.floor(Math.random());this.injectEl.id=a="reely-container-parent-"+b}this.zoo=new h({id:a,prefixId:a})}},initChildren:function(){this.eventBus=new d,this.spritesheet=new g({spritesheetUrls:this.spritesheetUrls,overlaySpritesheetUrls:this.overlaySpritesheetUrls,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo});var a={eventBus:this.eventBus,spritesheet:this.spritesheet,slate:this.slate,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo};this.overlay=new f(a),this.controls=new e(a)},play:function(){this.isPlaying()||this.eventBus.trigger(k.PLAY_PAUSE_TOGGLE)},pause:function(){this.isPlaying()&&this.eventBus.trigger(k.PLAY_PAUSE_TOGGLE)},isPlaying:function(){return!this.videoEl.paused},reset:function(){this.videoEl.currentTime=0,this.pause()},unmute:function(){this.isMuted()&&(this.videoEl.muted=!1,this.eventBus.trigger(k.UNMUTED))},mute:function(){this.isMuted()||(this.videoEl.muted=!0,this.eventBus.trigger(k.MUTED))},isMuted:function(){return this.videoEl.muted},hide:function(){i.add(this.el,i.HIDDEN)},show:function(){i.remove(this.el,i.HIDDEN)},getEventBus:function(){return this.eventBus},broadcast:function(){this.passVideoEvents()},passVideoEvents:function(){this.doDebug&&this.passDebugEventLog(),this.videoEl.addEventListener("loadstart",this.eventBus.triggers[k.VID_LOADSTART]),this.videoEl.addEventListener("loadedmetadata",this.eventBus.triggers[k.VID_LOADEDMETADATA]),this.videoEl.addEventListener("loadeddata",this.eventBus.triggers[k.VID_LOADEDDATA]),this.videoEl.addEventListener("canplay",this.eventBus.triggers[k.VID_CANPLAY]),this.videoEl.addEventListener("canplaythrough",this.eventBus.triggers[k.VID_CANPLAYTHROUGH]),this.videoEl.addEventListener("waiting",this.eventBus.triggers[k.VID_WAITING]),this.videoEl.addEventListener("progress",this.eventBus.triggers[k.VID_PROGRESS]),this.videoEl.addEventListener("suspend",this.eventBus.triggers[k.VID_SUSPEND]),this.videoEl.addEventListener("play",this.eventBus.triggers[k.VID_PLAY]),this.videoEl.addEventListener("pause",this.eventBus.triggers[k.VID_PAUSE]),
this.videoEl.addEventListener("timeupdate",this.eventBus.triggers[k.VID_TIMEUPDATE]),this.videoEl.addEventListener("ended",this.eventBus.triggers[k.VID_ENDED])},passDebugEventLog:function(){for(var a=[],b=0;b<a.length;b++)this.videoEl.addEventListener(a[b],this.debugLog)},debugLog:function(a){window&&window.console&&window.console.log&&window.console.log("Media Event :: type :: ",a.type)},listen:function(){this.eventBus.addEventListener(k.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(k.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(k.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(k.VID_ENDED,this.onVideoEnded,this),this.eventBus.addEventListener(k.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.addEventListener(k.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.addEventListener(k.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this)},teardown:function(){this.pause(),this.mute(),this.videoEl.removeEventListener("loadstart",this.eventBus.triggers[k.VID_LOADSTART]),this.videoEl.removeEventListener("loadedmetadata",this.eventBus.triggers[k.VID_LOADEDMETADATA]),this.videoEl.removeEventListener("loadeddata",this.eventBus.triggers[k.VID_LOADEDDATA]),this.videoEl.removeEventListener("canplay",this.eventBus.triggers[k.VID_CANPLAY]),this.videoEl.removeEventListener("canplaythrough",this.eventBus.triggers[k.VID_CANPLAYTHROUGH]),this.videoEl.removeEventListener("waiting",this.eventBus.triggers[k.VID_WAITING]),this.videoEl.removeEventListener("progress",this.eventBus.triggers[k.VID_PROGRESS]),this.videoEl.removeEventListener("suspend",this.eventBus.triggers[k.VID_SUSPEND]),this.videoEl.removeEventListener("play",this.eventBus.triggers[k.VID_PLAY]),this.videoEl.removeEventListener("pause",this.eventBus.triggers[k.VID_PAUSE]),this.videoEl.removeEventListener("timeupdate",this.eventBus.triggers[k.VID_TIMEUPDATE]),this.videoEl.removeEventListener("ended",this.eventBus.triggers[k.VID_ENDED]),this.videoEl.removeEventListener("click",this.eventBus.triggers[k.PLAY_PAUSE_TOGGLE]),this.eventBus.removeEventListener(k.STARTED,this.onPlay,this),this.eventBus.removeEventListener(k.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(k.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(k.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.removeEventListener(k.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.removeEventListener(k.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.zoo.teardown(),this.overlay.teardown(),this.controls.teardown(),this.removeNodes()},removeNodes:function(){this.injectEl.removeChild(this.el),this.videoEl=null,this.overlay.el=null,this.controls.el=null,this.el=null},onPlay:function(){this.videoStarted||(this.videoStarted=!0,this.eventBus.triggers[k.STARTED](),this.eventBus.removeEventListener(k.STARTED,this.onPlay,this))},onVideoEnded:function(){this.pause()},onPlayPauseClick:function(a){this.videoEl.paused?this.videoEl.play():this.videoEl.pause()},onMuteUnmuteClick:function(a){this.isMuted()?this.unmute():this.mute()},onScrubberBarClick:function(a){var b=a.clickedFraction;this.videoEl.currentTime=this.videoEl.duration*b},onLoadedMetadata:function(a){this.needsAspectInjection()&&this.injectAspectStyles()},onLoadedData:function(a){this.show(),this.autoplay&&this.videoEl.play()},createVideoEl:function(){var a=j.make("video",i.VIDEO);a.volume=1,a.preload=!0,a.poster=this.slate,this.playsInline&&a.setAttribute("webkit-playsinline","");var b=this.autosound;return a.muted=!b,b&&this.eventBus.trigger(k.UNMUTED),this.addSources(a),a},addSources:function(a){var b=this.createSource(this.src,"mp4"),c=this.createSource(this.src,"webm"),d=document.createElement("p");d.innerHTML="Sorry, your browser does not support HTML5 video.",a.appendChild(b),a.appendChild(c),a.appendChild(d)},createSource:function(a,b){var c=document.createElement("source");return c.src=a+"."+b,c.type="video/"+b,c},determineControlBarConfig:function(a){var b=this.controlBarDefaults(),c=a;if(!c)return b;var d=b;null==c.autohide&&null!=c.autoHide&&(c.autohide=c.autoHide,delete c.autoHide);for(var e,f=["width","autohide","anchorX","offsetX","anchorY","offsetY","hideBG"],g=0;g<f.length;g++)e=f[g],null!=c[e]&&(d[e]=this.addPxIfNumber(c[e]));return d},controlBarDefaults:function(){return{height:1.5*this.spriteDimensions.spriteHeight,autohide:!0,anchorX:"center",offsetX:0,anchorY:"bottom",offsetY:0,width:"100%",hideBG:!1}},addPxIfNumber:function(a){return"number"==typeof a?a+"px":a},determineSpriteDimensionsConfig:function(a){var b=this.spriteDimensionsDefaults();if(!a||!a.buttonSize)return b;var c=a.buttonSize,d={buttonPadding:.25*c,spriteHeight:c,spriteWidth:c,overlaySpriteHeight:100,overlaySpriteWidth:100};return d},spriteDimensionsDefaults:function(){return{buttonPadding:5,spriteHeight:20,spriteWidth:20,overlaySpriteHeight:100,overlaySpriteWidth:100}},injectPlayerStyles:function(){var a=[];a=a.concat(this.getUtilityStyles()),a=a.concat(this.getPlayerStyles()),a=a.concat(this.getIconStyles()),a=a.concat(this.getButtonStyles()),a=a.concat(this.getTwoStateStyles()),this.zoo.insertRules(a)},getUtilityStyles:function(){return[["."+i.UNSELECTABLE,{"user-select":"none"}],["."+i.HIDDEN,{display:"none"}],["."+i.INVISIBLE,{visibility:"hidden"}],["."+i.TRANSPARENT,{opacity:0}]]},getPlayerStyles:function(){var a={position:"relative","z-index":1,display:"block",width:"100%",height:"100%",margin:"0 auto","background-color":"black",overflow:"visible"},b={position:"absolute","z-index":-1,top:0,left:0,height:"100%",width:"100%",cursor:"pointer"};return[["."+i.CONTAINER,a],["."+i.VIDEO,b]]},getIconStyles:function(){return[[["."+i.ICON,"."+i.ICON_HOVER],{position:"absolute"}],["."+i.ICON_HOVER,{top:this.spriteDimensions.buttonPadding+"px",left:this.spriteDimensions.buttonPadding+"px"}]]},getButtonStyles:function(){return[["."+i.BUTTON,{cursor:"pointer"}],[["."+i.BUTTON+" ."+i.ICON_DEFAULT,"."+i.BUTTON+":hover ."+i.ICON_HOVER],{opacity:1}],[["."+i.BUTTON+":hover ."+i.ICON_DEFAULT,"."+i.BUTTON+" ."+i.ICON_HOVER],{opacity:0}],[["."+i.BUTTON+":hover ."+i.ICON_DEFAULT,"."+i.BUTTON+" ."+i.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+i.BUTTON+":hover ."+i.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]},getTwoStateStyles:function(){return[[["."+i.TWO_STATE_BUTTON,"."+i.TWO_STATE_BUTTON+" ."+i.TWO_STATE_DEFAULT,"."+i.TWO_STATE_BUTTON+" ."+i.TWO_STATE_ALT],{position:"absolute"}],["."+i.TWO_STATE_BUTTON,{display:"inline-block"}],[["."+i.TWO_STATE_BUTTON+" ."+i.TWO_STATE_DEFAULT,"."+i.TWO_STATE_BUTTON+"."+i.TOGGLED+" ."+i.TWO_STATE_ALT],{opacity:1,visibility:"visible"}],[["."+i.TWO_STATE_BUTTON+"."+i.TOGGLED+" ."+i.TWO_STATE_DEFAULT,"."+i.TWO_STATE_BUTTON+" ."+i.TWO_STATE_ALT],{opacity:0,visibility:"hidden"}]]},needsAspectInjection:function(){return 0===this.el.parentNode.clientHeight},injectAspectStyles:function(){var a=this.determineLoadedVideoDimensions(),b=(a.height/a.width*100).toFixed(4);this.aspectRule=this.zoo.insertRule("."+i.CONTAINER,{"padding-top":b+"%"})},determineLoadedVideoDimensions:function(){var a={width:this.videoEl.videoWidth,height:this.videoEl.videoHeight};return a}},b.exports=l},{"../zoolander.js":103,"./reely-controls.js":92,"./reely-css-classes.js":93,"./reely-el-maker.js":94,"./reely-event-bus.js":95,"./reely-events.js":96,"./reely-overlay.js":98,"./reely-spritesheet.js":100}],102:[function(a,b,c){var d=function(){var a="-webkit",b="-moz",c="-ms",d="-o",e={"box-shadow":[a],transform:[a,c,b,d],perspective:[a,c],"box-sizing":[a,c,b],"background-size":[a],"user-select":[a,b,c],animation:[a,b,d],transition:[a,b,d],filter:[a,b,c,d]},f=[];for(var g in e)e.hasOwnProperty(g)&&f.push(g);return{needsFixer:function(a){return-1!==f.indexOf(a)},prefixedProps:function(a){var b=[a];if(!this.needsFixer(a))return b;for(var c,d=e[a],f=0;f<d.length;f++)c=d[f]+"-"+a,b.push(c);return b}}}();b.exports=d},{}],103:[function(a,b,c){var d=a("./zoofixer.js"),e=function(a,b,c){this.index=a,this.selector=b,this.styleText=c},f=function(a){this.doc=this._determineDocument(a),this.styleElId=this._determineStyleElId(a),this.styleEl=this._createStyleEl(this.styleElId),this.prefixId=this._determinePrefixId(a),this.doc.head.appendChild(this.styleEl),this.ss=this.styleEl.sheet,this.isFrozen=!1,this._useInsertRule="insertRule"in this.ss,this._rulesKey=this._determineRulesKey(),this._animPrefix=this._determineAnimationPrefix(),this.NULLSELECTOR=".NULLRULE"+this.styleElId};f.prototype={rules:function(){return this.ss[this._rulesKey]},teardown:function(){this.doc=null,this.ss=null,this.styleEl=null},freeze:function(){this.isFrozen=!0},unfreeze:function(){this.isFrozen=!1},insertRule:function(a,b){if(!this.isFrozen){if(!a||!b)return void console.warn("Bad selectors and/or stylesObj provided to Zoolander.");var c=this._determineSelectors(a),d=this._determineStylesText(b);return this._insertRule(c,d)}},insertRules:function(a){if(!this.isFrozen){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d[0],f=d[1],g=this.insertRule(e,f);b.push(g)}return b}},deleteRule:function(a){"undefined"==typeof a||this.isFrozen||(this.ss.deleteRule(a.index),this._attemptInsert(this.NULLSELECTOR,"",a.index))},insertKeyframes:function(a,b){var c="@"+this._animPrefix+"keyframes "+a,d=this._determineKeyframesStyleText(b);return this._insertRule(c,d,!0)},insertAnimation:function(a,b,c){var d=this._determineSelectors(a),e=this._animPrefix+b+": "+c;return this._insertRule(d,e)},_insertRule:function(a,b,c){var d=this.rules().length;try{this._attemptInsert(a,b,d,c)}catch(f){return void console.warn("Zoolander failed to insertRule :: "+f,a,"{",b,"}")}var g=new e(d,a,b);return g},_attemptInsert:function(a,b,c,d){this._useInsertRule?this.ss.insertRule(a+" {"+b+"}",c):this.ss.addRule(a,b,c)},_createStyleEl:function(a){var b="imdb_ad_design_injected_"+a,c=this.doc.getElementById(b);return c?c:(c=this.doc.createElement("style"),c.type="text/css",c.id=b,c.appendChild(this.doc.createTextNode("")),c)},_determineStyleElId:function(a){if(a&&a.id)return a.id;var b=Date.now()+Math.floor(10*Math.random());return b},_determineDocument:function(a){return a&&a.document?a.document:document},_determinePrefixId:function(a){var b=a&&a.prefixId?a.prefixId:"";if(b){var c="#"===b.charAt(0)?b:"#"+b;return c=" "===c.charAt(c.length-1)?c:c+" "}return""},_isArr:function(a){return"[object Array]"===Object.prototype.toString.call(a)},_determineSelectors:function(a){var b,c,d="",e=this.prefixId,f="string"==typeof a&&-1!==a.indexOf(",");return f?b=a.split(","):this._isArr(a)?b=a:c=a,d=b?this._concatSelectors(b,e):e+" "+c},_concatSelectors:function(a,b){for(var c="",d=0;d<a.length;d++){var e=d===a.length-1;c+=b+" "+a[d],e||(c+=", ")}return c},_determineAnimationPrefix:function(){for(var a=["webkit","Moz","ms"],b=this.doc.createElement("div"),c="",d=0;d<a.length;d++)if(void 0!==b.style[a[d]+"AnimationName"]){c="-"+a[d].toLowerCase()+"-";break}return c},_determineStylesText:function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=this._buildStyleDeclaration(c,a[c]));return b},_buildStyleDeclaration:function(a,b){var c=d.needsFixer(a);if(c){for(var e="",f=d.prefixedProps(a),g=0;g<f.length;g++)e+=f[g]+": "+b+"; ";return e}return a+": "+b+"; "},_determineKeyframesStyleText:function(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){var d=this._determineStylesText(a[c]);b+=this._buildKeyframeStylesText(c,d)}return b},_buildKeyframeStylesText:function(a,b){return a+" { "+b+" } "},_determineRulesKey:function(){return"cssRules"in this.ss?"cssRules":"rules"}},f.prototype.constructor=f,b.exports=f},{"./zoofixer.js":102}]},{},[79])},{}]},{},[9]);