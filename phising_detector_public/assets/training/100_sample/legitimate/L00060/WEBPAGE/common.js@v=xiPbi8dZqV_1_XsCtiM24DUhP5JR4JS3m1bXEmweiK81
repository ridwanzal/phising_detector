function VisitorId(){this.createWithParams=function(n){var t=n.split(".");this.domainHash=t[0];this.visitorHash=t[1];this.initial=t[2];this.previousSession=t[3];this.currentSession=t[4];this.sessionCounter=t[5];this.updateIdString()};this.create=function(){this.domainHash=1;this.visitorHash=murmurhash3_32_gc(navigator.userAgent+generateUUID());this.initial=Math.round(Date.now()/1e3);this.previousSession=this.initial;this.currentSession=this.initial;this.sessionCounter=1;this.updateIdString()};this.checkVisit=function(){var n=Math.round(Date.now()/1e3);return n-this.currentSession>1800?(this.previousSession=this.currentSession,this.currentSession=n,this.sessionCounter++,this.updateIdString(),!0):(this.currentSession=n,this.updateIdString(),!1)};this.updateIdString=function(){this.idString=this.domainHash+"."+this.visitorHash+"."+this.initial+"."+this.previousSession+"."+this.currentSession+"."+this.sessionCounter}}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u+"; path=/"}function setUpdateVisitor(n,t,i){var e=getCookie("_gveuid"),r,u=getCookie("userLang"),f="en",o;u?(u=decodeURIComponent(u),u=JSON.parse(u),f=u.lang):(o=navigator.language||navigator.userLanguage,f=o.split("-")[0]);EventHub.init(t,i);e===""?(r=new VisitorId,r.create(),setCookie("_gveuid",r.idString,730),EventHub.send({platformId:r.domainHash,visitor:r.visitorHash,initial:r.initial,previous:r.previousSession,current:r.currentSession,visits:r.sessionCounter,language:f,type:"UniqueVisitor"})):(r=new VisitorId,r.createWithParams(e),r.checkVisit()&&EventHub.send({platformId:r.domainHash,visitor:r.visitorHash,initial:r.initial,previous:r.previousSession,current:r.currentSession,visits:r.sessionCounter,language:f,type:"Visitor"}),setCookie("_gveuid",r.idString,730))}function murmurhash3_32_gc(n,t){var o,h,r,s,f,e,i,u;for(o=n.length&3,h=n.length-o,r=t,f=3432918353,e=461845907,u=0;u<h;)i=n.charCodeAt(u)&255|(n.charCodeAt(++u)&255)<<8|(n.charCodeAt(++u)&255)<<16|(n.charCodeAt(++u)&255)<<24,++u,i=(i&65535)*f+(((i>>>16)*f&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(i&65535)*e+(((i>>>16)*e&65535)<<16)&4294967295,r^=i,r=r<<13|r>>>19,s=(r&65535)*5+(((r>>>16)*5&65535)<<16)&4294967295,r=(s&65535)+27492+(((s>>>16)+58964&65535)<<16);i=0;switch(o){case 3:i^=(n.charCodeAt(u+2)&255)<<16;case 2:i^=(n.charCodeAt(u+1)&255)<<8;case 1:i^=n.charCodeAt(u)&255;i=(i&65535)*f+(((i>>>16)*f&65535)<<16)&4294967295;i=i<<15|i>>>17;i=(i&65535)*e+(((i>>>16)*e&65535)<<16)&4294967295;r^=i}return r^=n.length,r^=r>>>16,r=(r&65535)*2246822507+(((r>>>16)*2246822507&65535)<<16)&4294967295,r^=r>>>13,r=(r&65535)*3266489909+(((r>>>16)*3266489909&65535)<<16)&4294967295,r^=r>>>16,r>>>0}function generateUUID(){var n=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(t=="x"?i:i&3|8).toString(16)})}function rectifyFooter(){var n=document.getElementById("footer-master").getBoundingClientRect().left;$("#footer-slave").css({position:"relative",left:n-3+"px"})}angular.module("app.i18n",["pascalprecht.translate","ngCookies","ngSanitize"]).config(["$translateProvider",function(n){n.useStaticFilesLoader({prefix:"/content/i18n/",suffix:".json"});n.useSanitizeValueStrategy("sanitizeParameters")}]).service("languageService",["$cookieStore",function(n){return{currentLanguage:function(){if(n.get("userLang"))return n.get("userLang").lang;var i=navigator.language||navigator.userLanguage,t=i.split("-")[0];return n.put("userLang",{lang:t}),t}}}]).directive("languagePicker",function(){return{restrict:"AE",templateUrl:"/content/static/diply-new-angular/src/app/i18n/lang-dropdown.html",controller:["$scope","$translate","$cookieStore","$rootScope","languageService",function(n,t,i,r,u){n.lang=u.currentLanguage();t.use(n.lang);r.$emit("language-changed",n.lang);n.setLang=function(u){t.use(u);i.put("userLang",{lang:u});n.lang=u;r.$emit("language-changed",u)};n.closeMenu=function(){$(".diply-nav-account-menu").toggleClass("closed")}}]}});var Utils={Date:{calcAge:function(n,t){var o=new Date(n),s=new Date,u=s.getTime()-o.getTime(),f=u/6e4,e=u/36e5,h=u/864e5,r="",i="";return u<6e4?i="Less than a minute ago":Math.floor(f)==1?(r=Math.floor(f)+" ",i="minute ago"):f<60?(r=Math.floor(f)+" ",i="minutes ago"):Math.floor(e)==1?(r=Math.floor(e)+" ",i="hour ago"):e<24?(r=Math.floor(e)+" ",i="hours ago"):(r=Math.floor(h)+" ",i="days ago"),r+t("translate")(i)}},Browser:function(){var i=navigator.userAgent,t,n=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(i)||[],{name:"IE ",version:t[1]||""}):n[1]==="Chrome"&&(t=i.match(/\bOPR\/(\d+)/),t!=null)?{name:"Opera",version:t[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=i.match(/version\/(\d+)/i))!=null&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})}},EventHub={};EventHub.init=function(n,t){this.serviceBusUri=n;this.serviceBusHubName=t;this.token=null;this.articleId=null;this.rootArticleId=null;this.publication=null;this.getLongToken()};EventHub.getLongToken=function(){$.ajax({type:"GET",url:"http://"+window.location.host+"/api/v1/hub/longSasToken",cache:!1,success:function(n){EventHub.token=n}})};EventHub.sendWithArticleDetails=function(n){this.articleId&&this.publication&&(n.articleId=this.articleId,n.publication=this.publication);this.rootArticleId&&(n.rootArticleId=this.rootArticleId);EventHub.send(n)};EventHub.send=function(n){EventHub.token?(EventHub.TmpUrl=EventHub.serviceBusUri+EventHub.serviceBusHubName+"/messages/?timeout=60",$.ajax({type:"POST",url:EventHub.serviceBusUri+EventHub.serviceBusHubName+"/messages/?timeout=60",data:JSON.stringify(n),cache:!1,contentType:"application/json",beforeSend:function(n){n.setRequestHeader("Authorization",EventHub.token.sasKey);n.setRequestHeader("Content-Type","application/json");n.setRequestHeader("Access-Control-Allow-Credentials","true");n.setRequestHeader("Access-Control-Allow-Origin","true")}})):$.ajax({type:"GET",url:"http://"+window.location.host+"/api/v1/hub/GetSasToken",cache:!1,success:function(t){$.ajax({type:"POST",url:EventHub.serviceBusUri+EventHub.serviceBusHubName+"/messages/?timeout=60",data:JSON.stringify(n),cache:!1,contentType:"application/json",beforeSend:function(n){n.setRequestHeader("Authorization",t.sasKey);n.setRequestHeader("Content-Type","application/json");n.setRequestHeader("Access-Control-Allow-Credentials","true");n.setRequestHeader("Access-Control-Allow-Origin","true")}})}})};$(document).ready(function(){$("#footer-master").length!=0&&rectifyFooter()});$(window).resize(function(){$("#footer-master").length!=0&&rectifyFooter()})