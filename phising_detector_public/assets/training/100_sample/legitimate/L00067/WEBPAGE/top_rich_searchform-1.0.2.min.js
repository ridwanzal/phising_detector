/*
 top_rich_searchform-1.0.2.js
 Copyright (c) 2015 Rakuten.Inc
 Date : 2015-10-19 17:51:01
*/
(function(){if(void 0!==window.jQuery){var b=jQuery.noConflict();if(!(void 0===b.RJS_Helpers||null!==navigator.userAgent.match(/MSIE\s6/))){null!==navigator.userAgent.match(/MSIE\s7/)&&b("#detailSearch").hide();var e=void 0!==window.ontouchstart,d=null!==navigator.userAgent.match(/MSIE\s7/),g=null!==navigator.userAgent.match(/MSIE\s[7-8]/),f=function(a){this.$searchHeader=b("#ritServiceHeader");this.$searchForm=a.find("#myForm");this.$genreSelectButton=a.find("#genreSelectButton");this.$genreSelect=
a.find(".ritSahSelect").eq(0);this.$selectedGenre=a.find("#selectedGenre");this.$detailSearchGenreSelect=a.find("#searchFormGenreSelect");this.$detailSearchButton=a.find("#detailSearchButton");this.$detailSearchForm=a.find("#detailSearchForm");this.$searchInput=a.find(".searchInput").eq(0);e||this.$searchInput.focus();this.$keywordInput=this.$detailSearchForm.find("#keywordInput");this.$keywordAnd=this.$detailSearchForm.find("#keywordAnd");this.$keywordOr=this.$detailSearchForm.find("#keywordOr");
this.$keywordProductName=this.$detailSearchForm.find("#keywordProductName");this.$excludeKeywordInput=this.$detailSearchForm.find("#excludeKeyword");this.$areaSelectAsuraku=this.$detailSearchForm.find("#areaSelectAsuraku");this.$asurakuOnlyTomorrow=this.$detailSearchForm.find("#asurakuOnlyTomorrow");this.$priceRangeMin=this.$detailSearchForm.find("#priceRangeMin");this.$priceRangeMax=this.$detailSearchForm.find("#priceRangeMax");this.$refineCheckBoxes=this.$detailSearchForm.find("#refineCheckBoxes").find("input[name=e]");
this.$orderButtons=this.$detailSearchForm.find("#orderButtons");this.$hiddenOrderButton=this.$detailSearchForm.find("#hiddenOrderButton");this.$searchButton=this.$detailSearchForm.find("#searchButton");this.$clearButton=this.$detailSearchForm.find("#clearSettingsButton");this.isWideScreen=this.isDetailSearchVisible=!1;this.detailSearchButtonOffsetTop=this.$detailSearchButton.offset().top;this.panelHidePointOffsetTop=this.detailSearchButtonOffsetTop+a.height()+22;this.genre=0;this.order="";this.setEvents()};
f.prototype={setEvents:function(){var a=this;this.$genreSelect.bind("change",function(){var c=b.RJS_Helpers.omitStr(b(this).find(":selected").html(),23,"¡Ä");a.$selectedGenre.html(c);a.$detailSearchGenreSelect.val(a.$genreSelect.val())});this.$keywordInput.bind("keypress",function(c){13===c.which&&(a.$searchInput.val(b(this).val()),a.$searchForm.submit(),c.preventDefault())}).bind("blur",function(){a.$searchInput.val(b(this).val())});this.$detailSearchGenreSelect.bind("change",function(){a.$genreSelect.val(a.$detailSearchGenreSelect.val());
var c=b.RJS_Helpers.omitStr(b(this).find(":selected").html(),23,"¡Ä");a.$selectedGenre.html(c)});this.$detailSearchButton.bind("click",function(){a.isDetailSearchVisible?(a.$detailSearchForm.hide(),a.$searchInput.val(a.$keywordInput.val()),e||a.$searchInput.focus(),a.isDetailSearchVisible=!1,b(this).removeClass("on"),d&&a.$searchHeader.css({position:"static"})):(a.$detailSearchForm.show(),a.$keywordInput.val(a.$searchInput.val()),e||a.$keywordInput.focus(),a.isDetailSearchVisible=!0,b(this).addClass("on"),
d&&a.$searchHeader.css({"z-index":"1",zoom:"1",position:"relative"}))}).bind("mousedown",function(a){a.stopPropagation()});this.$detailSearchForm.bind("mousedown",function(a){a.stopPropagation()});this.$areaSelectAsuraku.bind("change",function(){""!==b(this).val()?a.$asurakuOnlyTomorrow.attr("disabled",!1).parent().css("color","#000000"):a.$asurakuOnlyTomorrow.attr("disabled",!0).removeAttr("checked").parent().css("color","#cccccc")});this.$orderButtons.bind("click",function(c){var c=b(c.target),
d=c.attr("data-value");a.$hiddenOrderButton.val(d).attr("name","s");"1"===d&&a.$hiddenOrderButton.removeAttr("name");c.addClass("on").siblings().removeClass("on")});this.$searchButton.bind("click",function(){a.$searchForm.submit()});this.$clearButton.bind("click",function(){a.clearSearchForm()});b("html").bind("mousedown",function(){a.$detailSearchForm.hide();a.isDetailSearchVisible=!1;a.$detailSearchButton.removeClass("on");d&&a.$searchHeader.css({position:"static"})});b(window).bind("scroll",function(){if(b(this).scrollTop()>=
a.panelHidePointOffsetTop&&a.isDetailSearchVisible)a.$detailSearchForm.hide(),a.isDetailSearchVisible=!1,a.$detailSearchButton.removeClass("on"),d&&a.$searchHeader.css({position:"static"})});g&&b(window).bind("resize",function(){var b=document.documentElement.clientWidth;if(1200>b&&a.isWideScreen)a.$detailSearchForm.removeClass("wide"),a.isWideScreen=!1;else if(1200<=b&&!a.isWideScreen)a.$detailSearchForm.addClass("wide"),a.isWideScreen=!0});b(document).ready(function(){a.clearSearchForm()})},clearSearchForm:function(){this.$searchInput.val("");
this.$keywordInput.val("");this.$excludeKeywordInput.val("");this.$detailSearchGenreSelect.val(0).trigger("change");this.$keywordAnd.attr("checked","checked");this.$keywordOr.removeAttr("checked");this.$keywordProductName.removeAttr("checked");this.$areaSelectAsuraku.val("").trigger("change");this.$priceRangeMin.val("");this.$priceRangeMax.val("");this.$refineCheckBoxes.removeAttr("checked");this.$orderButtons.children().eq(0).trigger("click")},fireEvent:function(a,c,d){c=b.Event(c);c.customData=
d||{};a.trigger(c)}};var h=b("#RJSTopRichSearchForm");new f(h)}}})();
