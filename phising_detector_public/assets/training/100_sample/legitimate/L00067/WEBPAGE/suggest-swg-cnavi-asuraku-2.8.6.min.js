/*
 suggest.js 2.8.6
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-03-16 10:17:48
 suggest - swg.js 2.8.6
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-03-16 10:17:48
 suggest - cnavi.js 2.8.6
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-03-16 10:17:48
 suggest - asuraku.js 2.8.6
 Copyright (c) 2016 Rakuten.Inc
 Date : 2016-03-16 10:17:48
*/
(function(){if("undefined"!==typeof jQuery){var e=jQuery.noConflict(),g;window.searchplat||(searchplat={});searchplat.suggest||(searchplat.suggest={});g=searchplat.suggest;var a=function(){};a.prototype={pluginArray:[],add:function(d){this.pluginArray.push(d)},invokeFunction:function(d,a){for(var b=0,c=this.pluginArray.length;b<c;b++){var e=this.pluginArray[b];"function"===typeof e[a]&&e[a].call(e,d,a)}},init:function(d){for(var a=0,b=this.pluginArray.length;a<b;a++){var c=this.pluginArray[a];if("function"===
typeof c.init&&!c.init(d))return!1}return!0},createSuggestElems:function(d){for(var a="",b,c=0,e=this.pluginArray.length;c<e;c++)b=this.pluginArray[c],"function"===typeof b.createSuggestElems&&(a+=b.createSuggestElems(d));return a},getSelectedText:function(d,a){for(var b=0,c=this.pluginArray.length;b<c;b++){var i=this.pluginArray[b];if("function"===typeof i.getSelectedText&&(i=i.getSelectedText(d,a)))return i}return e(a).text()},addSubmitLog:function(d){for(var a="",b=0,c=this.pluginArray.length;b<
c;b++){var e=this.pluginArray[b];"function"===typeof e.addSubmitLog&&(a+=e.addSubmitLog(d))}return a}};var b=g.plugins=new a,c=function(){g.rsuggest=this};c.prototype={resultCache:{},backup:"",lastInput:"",respInput:null,formatType:"base",sggstSelectNum:-1,usingChar:"",mouseInput:null,mouseState:0,mouseMove:0,mouseOver:0,enterFlag:1,keyCode:null,currentFontSize:null,maxIndex:0,index:-1,clickEnableFlag:1,IeVersion:0,viewEvent:null,showTimer:null,waitTimeout:null,suggestDivPos:e("body"),onoff:1,onoffInitFlag:0,
onElem:null,offElem:null,decisionFlag:0,scVal:0,submitWay:0,spaceRegExp:RegExp("^[\\s"+unescape(String.fromCharCode("0x3000"))+unescape(String.fromCharCode("0x00A0"))+"]+"),whitespaceMatcher:RegExp("[\\s"+unescape(String.fromCharCode("0x3000"))+unescape(String.fromCharCode("0x00A0"))+"]+"),blackList:["iphone","ipod","ipad","android"],onOffBlackList:[],count:10,configCollection:"col",cssRow:"sggstRow",cssSelect:"sggstSelect",cssNoSelect:"sggstNoselect",cssKeyword:"sggstKeyword",cssOnoff:"sggstOnoff",
cssOffImage:"sggstHideimg",cssOnImage:"sggstOpenimg",cssRemarks:"sggstComment",cssRemarksBox:"sggstCommentbox",cssComment:"sggstBetabtn01",cssOff:"sggstBetabtn02",cssOn:"openSuggest",searchCommand:"suggest",submitLogCommand:"submit",cookieCommand:"conf",paramInput:"q",paramCollection:"cl",paramSuggestid:"sid",paramSuggestUse:"su",paramSelectNum:"sn",paramSuggestOnOff:"so",paramFormParam:"fp",paramReqid:"rid",sggstReqid:Math.floor(1E10*Math.random()),paramEncoding:"oe",paramSelect:"ss",paramGroupId:"gi",
paramCookieMethod:"mt",paramCookieCheck:"c",paramCookieAdd:"a",paramCookieDelete:"d",paramSubmitWay:"sw",paramCallback:"cb",paramExParam:"ex",ajaxSearchTimeout:1E4,ajaxSubmitLogTimeout:3E3,afterWaitingforEventTimeout:100,justAddedToQueueTimeout:10,pollingTime:10,retryCount:20,isTimeout:!1,readyState:0,browser:{},init:function(d){var a=this,d=a.config=e(d),h=g.hook;if(!a.validateConfig(d))return!1;a.form=e("#"+d.attr("form"));a.baseUrl=d.attr("baseUrl");a.button=e("#"+d.attr("button"));a.suggestId=
d.attr("suggestId");a.encoding=d.attr("encoding");a.exParam=d.attr("exParam")||"";a.groupId=d.attr("groupId");a.input=e("#"+d.attr("input"));a.input.attr("autocomplete","off");a.sendFormParam=a.checkBoolNum(d.attr("sendFormParam"))||1;a.onoffEnable=a.checkBoolNum(d.attr("onoff"))||1;a.hookRequired=a.checkBoolNum(d.attr("hookRequired"))||0;a.keywordReplaceOnMouseover=a.checkBoolNum(d.attr("keywordReplaceOnMouseover"))||0;a.addBlackList=d.attr("uaBlackList")||"";a.byteNumToHideOpenSggst=d.attr("byteNumToHideOpenSggst")||
36;a.nowFontSize=e("html").css("font-size");a.hideToolTips=d.attr("hideToolTips")||"";a.openToolTips=d.attr("openToolTips")||"";a.pollingTime=d.attr("pollingTime")||a.pollingTime;a.retryCount=d.attr("retryCount")||a.retryCount;if(!a.preInit()||-1==a.judge()||1!=a.input.parent(".sggstInputWrap").length||1==a.hookRequired&&"undefined"===typeof h){try{a.initFailure()}catch(f){}return!1}"undefined"!==typeof h&&void 0!=h.prototype&&e.extend(c.prototype,h.prototype);if(!b.init(a))return a.initFailure(),
!1;a.createSuggestDiv();a.onoffReady();a.resize();e(window).resize(function(){a.resize()});a.input.keydown(function(d){a.enterFlag=0;a.keyCode=d.keyCode;switch(d.keyCode){case 40:a.down();break;case 38:a.up();break;case 9:a.hide()}}).keypress(function(d){a.keyCode=d.keyCode;a.enterFlag=1;switch(d.keyCode){case 27:return 27==a.keyCode&&a.hide(!0),!1;case 13:return 13==a.keyCode&&(1==a.enterFlag&&1==a.clickEnableFlag)&&(a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=1,setTimeout(function(){a.button.click()},
10),a.eventStop()),!1}}).keyup(function(d){switch(d.keyCode){case 27:return 27==a.keyCode&&a.hide(!0),!1;case 13:return 13==a.keyCode&&(1==a.enterFlag&&1==a.clickEnableFlag)&&(a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=1,setTimeout(function(){a.button.click()},10),a.eventStop()),!1}}).focus(function(){a.lastInput=a.input.val();0==a.mouseOver&&(a.backup=a.input.val());a.eventStart()}).blur(function(){0==a.mouseState&&0==a.mouseOver?a.eventStop():(1==a.mouseState||1==a.mouseOver)&&a.input.focus();
a.mouseState=0}).mouseover(function(){1==a.keywordReplaceOnMouseover&&(a.suggest.is(":visible")&&-1!=a.index&&0!=a.backup.length&&a.lastInput==a.input.val())&&(a.input.val(a.backup),a.sggstSelectNum=-1,a.usingChar="")}).attr("maxlength",2048);document.activeElement.id==a.input.attr("id")&&(a.input.blur(),a.input.focus());b.invokeFunction(a,"postInit");a.postInit();return!0},preInit:function(){return!0},postInit:function(){return!0},validateConfig:function(a){if(void 0==a||!this.isMatch(a.attr("input"),
/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("form"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("baseUrl"),/^https?:\/\/.+$/)||!this.isMatch(a.attr("button"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("suggestId"),/^[a-zA-Z0-9_\-]+$/)||!this.isMatch(a.attr("encoding"),/^(utf-8|euc-jp)$/)||!this.isMatch(a.attr("col"),/^[a-z]+$/)||!this.isMatch(a.attr("groupId"),/^[a-zA-Z0-9_\-]+$/))return!1;var b=a.attr("byteNumToHideOpenSggst");return b&&!this.isInRange(b,1,99)||(b=a.attr("openToolTips"))&&!this.isMatch(b,
/^[^<>]+$/)||(b=a.attr("hideToolTips"))&&!this.isMatch(b,/^[^<>]+$/)||(b=a.attr("uaBlackList"))&&!this.isMatch(b,/^[a-zA-Z0-9 _\/\.;]+$/)||(b=a.attr("exParam"))&&!this.isMatch(b,/^[^<>]+$/)||(b=a.attr("pollingTime"))&&!this.isInRange(b,10,1E3)||(b=a.attr("retryCount"))&&!this.isInRange(b,1,100)||(b=a.attr("onoff"))&&!this.isInRange(b,0,1)||(b=a.attr("hookRequired"))&&!this.isInRange(b,0,1)||(b=a.attr("sendFormParam"))&&!this.isInRange(b,0,1)?!1:(a=a.attr("keywordReplaceOnMouseover"))&&!this.isInRange(a,
0,1)?!1:!0},checkBoolNum:function(a){return"undefined"!=typeof a&&0!=a.length&&(0==a||1==a)?a:""},escapeHtml:function(a){return e("<div/>").text(a).html()},initFailure:function(){this.input.attr("autocomplete","")},createSuggestDiv:function(){var a=this;a.suggest=e("<div>").attr({id:"suggest"}).show().hide().appendTo(a.suggestDivPos);var c=b.createSuggestElems(this);a.suggest.append(c);a.suggest.delegate("."+a.cssKeyword,"mouseup",function(c){var k=e(this),i=k.text();1!=c.which||(a.mouseInput!=i||
0==a.clickEnableFlag)||(a.mouseState=2,a.input.blur(),c=b.getSelectedText(a,k.parent("."+a.cssRow)),a.input.val(c),a.sggstSelectNum=a.index,a.usingChar=i,a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=2,setTimeout(function(){a.button.click()},10),a.eventStop())});a.suggest.delegate("."+a.cssKeyword,"mousedown",function(b){if(1!=b.which)a.input.blur();else return a.mouseInput=e(this).text(),a.mouseState=1,!1});a.suggest.delegate("."+a.cssKeyword,"mouseover",function(){a.over(e(this).text())});a.suggest.delegate("."+
a.cssKeyword,"mouseout",function(){e(this).parent().removeClass(a.cssSelect).addClass(a.cssNoSelect);a.mouseState=0});a.suggest.delegate("."+a.cssKeyword,"mousemove",function(){a.mouseMove=1});a.remarks=e('<div class="'+a.cssRemarks+'"><div class="'+a.cssRemarksBox+'"><div class="'+a.cssComment+'">')},preSearch:function(){return!0},search:function(){var a=this,c=a.input.val(),h;a.preSearch()&&0!=a.onoffInitFlag&&(!c||a.isMatch(c,a.spaceRegExp)?(a.usingChar="",a.sggstSelectNum=-1,a.hide()):c!=a.lastInput&&
(a.resize(),a.lastInput=c,a.backup=c,a.readyState=0,clearTimeout(a.waitTimeout),clearInterval(a.showTimer),clearTimeout(h),h=setTimeout(function(){a.index=-1;a.mouseMove=0;a.maxIndex=0;b.invokeFunction(a,"search");a.waitTimeout=setTimeout(function(){clearInterval(a.showTimer)},a.pollingTime*a.retryCount);clearInterval(a.showTimer);a.showTimer=setInterval(function(){2>a.readyState||(a.suggest.append(a.remarks),clearTimeout(a.waitTimeout),clearInterval(a.showTimer),3>a.readyState?setTimeout(function(){a.showInternal()},
a.pollingTime):a.showInternal())},a.pollingTime)},a.justAddedToQueueTimeout),a.postSearch()))},showInternal:function(){this.mouseMove=1;var a=this.suggest.children().not(this.remarks).filter(function(){return"none"!==e(this).css("display")});1==this.onoff&&0<a.size()?this.suggest.show():this.suggest.hide()},postSearch:function(){},read:function(a,b){var c=this,f=setTimeout(function(){c.isTimeout=!0},c.ajaxSearchTimeout);c.isTimeout=!1;try{e.ajax({url:a,cache:!0,timeout:c.ajaxSearchTimeout,dataType:"jsonp",
scriptCharset:c.encoding,jsonp:c.paramCallback,success:function(a){clearTimeout(f);if(!c.isTimeout){var d={query:c.getParsedUrlInfo(this.url,c)};a.qInfo=d;b(a)}}})}catch(i){clearTimeout(c.waitTimeout),clearInterval(c.showTimer)}},getParsedUrlInfo:function(a,b){if(!a)return null;var c={};try{var f=document.createElement("a");f.href=a;for(var e=f.search.replace("?","").split("&"),f=0,n=e.length;f<n;f++){var g=e[f].split("=");c[g[0]]=2==g.length?decodeURIComponent(g[1]):""}}catch(p){c={q:b.lastInput}}return c},
eventStart:function(){var a=this;clearInterval(a.viewEvent);a.clickEnableFlag=!0;a.decisionFlag=!1;a.viewEvent=setInterval(function(){a.nowFontSize=e("html").css("font-size");a.currentFontSize!=a.nowFontSize&&(a.currentFontSize=a.nowFontSize,a.resize());a.controlOnElem();a.search()},100)},eventStop:function(){var a=this;clearInterval(this.viewEvent);setTimeout(function(){a.hide()},200)},hide:function(a){a&&0!=this.lastInput.length&&(this.input.val(this.backup),this.sggstSelectNum=-1,this.usingChar=
"");this.lastInput=this.input.val();this.suggest.hide()},select:function(a){var c=this.suggest.children("."+this.cssSelect+", ."+this.cssNoSelect);c.filter("."+this.cssSelect).removeClass(this.cssSelect).addClass(this.cssNoSelect);c=c.filter(":visible").eq(this.index);-1!=this.index&&c.removeClass(this.cssNoSelect).addClass(this.cssSelect);a&&(a="",-1>=this.index||this.index>=this.maxIndex?(a=this.backup,this.usingChar="",this.sggstSelectNum=-1):(this.usingChar=a=b.getSelectedText(this,c),this.sggstSelectNum=
this.index),this.input.val(a),this.lastInput=a)},up:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||(-1>=this.index&&(this.index=this.maxIndex),this.suggest.is(":visible")?(this.index--,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},down:function(){0==this.maxIndex||(0==this.lastInput.length||0==this.config.attr(this.configCollection).length)||(this.index>=this.maxIndex&&(this.index=-1),
this.suggest.is(":visible")?(this.index++,this.select(1)):this.respInput==this.lastInput&&1==this.onoff&&(this.select(),this.suggest.show()))},over:function(a){var b=this,c=-1,f=b.suggest.children("."+b.cssSelect+", ."+b.cssNoSelect);f.filter("."+b.cssSelect).removeClass(b.cssSelect).addClass(b.cssNoSelect);f.filter(":visible").each(function(b,k){if(a==e(k).text())return c=b,!1});if(f=1==b.keywordReplaceOnMouseover&&1==b.mouseMove)b.mouseOver=1,b.input.blur(),b.input.focus();b.index=c;b.select(f);
setTimeout(function(){b.mouseOver=0},50)},preJump:function(){return!0},jump:function(a){this.preJump()&&(this.scVal=1==this.decisionFlag?a:0,this.sendSubmitLog(a))},sendSubmitLog:function(a){var c=this.config.attr(this.configCollection);if(0!=c.length){var h=this.input.val().replace(this.spaceRegExp,""),a=this.baseUrl+"/"+this.submitLogCommand+"?"+this.paramSuggestid+"="+this.suggestId+"&"+this.paramCollection+"="+c+"&"+this.paramReqid+"="+this.sggstReqid+"&"+this.paramSuggestOnOff+"="+this.onoff+
"&"+this.paramSelectNum+"="+this.sggstSelectNum+"&"+this.paramSelect+"="+encodeURIComponent(this.usingChar)+"&"+this.paramSuggestUse+"="+a+"&"+this.paramSubmitWay+"="+this.submitWay+"&"+this.paramInput+"="+encodeURIComponent(h),a=a+b.addSubmitLog(this);1==this.sendFormParam&&(a+="&"+this.paramFormParam+"="+encodeURIComponent(this.form.serialize()));0!=this.exParam.length&&(a+="&"+this.paramExParam+"="+encodeURIComponent(this.exParam));try{var f=this.encoding;this.config.attr(this.configCollection);
var i;i=e.browser.msie?"jsonp":"json";setTimeout(function(){return!0},this.ajaxSubmitLogTimeout);e.ajax({url:a,cache:!0,timeout:this.ajaxSubmitLogTimeout,async:!1,dataType:i,scriptCharset:f,jsonp:this.paramCallback,success:function(){}})}catch(g){}}},isUse:function(){return 0!=this.usingChar.length&&0==this.usingChar.indexOf(this.input.val())?1:0},judge:function(){for(var a=this,b=navigator.userAgent.toLowerCase(),c=0;c<a.blackList.length;c++){var f=a.blackList[c];if(0!=f.length&&(f=RegExp("("+f+
")"),null!=f.exec(b)))return-1}if(0!=a.addBlackList.length)for(var i=a.addBlackList.split(","),c=0;c<i.length;c++)if(f=i[c],0!=f.length&&-1!=b.indexOf(f))return-1;c=a.uaMatch(navigator.userAgent);f={};c.browser&&(f[c.browser]=!0,f.version=c.version);f.chrome&&"undefined"===typeof window.chrome?f.webkit=!0:f.chrome&&"undefined"!==typeof window.chrome?f.blink=!0:f.webkit&&(f.safari=!0);a.browser=f;e.browser.msie&&(a=this,c=e.browser.version,5<c&&7>c?a.IeVersion=6:6<c&&8>c&&(a.IeVersion=7));6==a.IeVersion&&
(a.onoffEnable=0);for(c=0;c<a.onOffBlackList.length;c++)if(f=a.onOffBlackList[c],0!=f.length&&(f=RegExp("("+f+")"),null!=f.exec(b))){a.onoffEnable=0;break}return a.IeVersion},uaMatch:function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||
"0"}},preResize:function(){return!0},resize:function(){if(this.preResize()){var a=this.getTextPos(),b;7==this.IeVersion&&(a=this.getIe7TextPos(a));b=a.top;var a=a.left,c=Math.ceil(this.input.outerHeight());this.suggest.css({top:b+c,left:a});this.changeSuggestWidth();this.postResize()}},postResize:function(){},getTextPos:function(){return this.input.position()},getIe7TextPos:function(a){var b=[],c=document.body,e=c.getBoundingClientRect(),i=(e.right-e.left)/c.offsetWidth;b.top=Math.ceil(a.top/((e.bottom-
e.top)/c.offsetHeight));b.left=Math.ceil(a.left/i);return b},changeSuggestWidth:function(){var a=this.input.outerWidth(),b=this.input.innerWidth(),c=0,e=c=0;try{c=parseInt(this.suggest.css("border-left-width")),e=parseInt(this.suggest.css("border-right-width"))}catch(i){}c+=e;e=this.suggest.outerWidth()-c;a!=e&&(this.suggest.css({width:a-c}),this.suggest.find("."+this.cssKeyword).css({width:b-c}))},onoffReady:function(){1==this.onoffEnable?(this.createOnElm(),this.createOffElm(),this.checkCookie()):
this.setInitOnoffNum(1)},checkCookie:function(){var a=this;e.ajax({type:"GET",url:a.baseUrl+"/"+a.cookieCommand+"?"+a.paramGroupId+"="+a.groupId+"&"+a.paramCookieMethod+"="+a.paramCookieCheck,dataType:"jsonp",timeout:500,jsonp:a.paramCallback,success:function(b){b=b.result;if("undefined"!=typeof b&&(0==b||1==b))a.setInitOnoffNum(0==b?1:0)}});setTimeout(function(){a.setInitOnoffNum(1)},1E3)},setInitOnoffNum:function(a){1!=this.onoffInitFlag&&(this.onoff=a,this.onoffInitFlag=1,this.displayOnoff())},
createOnElm:function(){var a=this;a.onElem=e("<div />").hide().attr({"class":a.cssOn,title:a.openToolTips}).click(function(){a.setOnoffNum(1);a.input.focus();setTimeout(function(){a.lastInput=""},120)});a.input.after(a.onElem)},createOffElm:function(){var a=this;a.offElem=e("<div />").attr({"class":a.cssOff,title:a.hideToolTips}).append(e("<span />").attr("class",a.cssOffImage));a.remarks.children().append(a.offElem);a.suggest.delegate("."+a.cssOff,"mousedown",function(b){if(1!=b.which)a.input.blur();
else return a.mouseState=1,a.setOnoffNum(0),a.input.blur(),!1});a.suggest.delegate("."+a.cssOff,"mouseout",function(){a.mouseState=0})},setOnoffNum:function(a){this.onoff=a;this.setCookie(a);this.displayOnoff()},setCookie:function(a){e.ajax({type:"GET",url:this.baseUrl+"/"+this.cookieCommand+"?"+this.paramGroupId+"="+this.groupId+"&"+this.paramCookieMethod+"="+(1==a?this.paramCookieDelete:this.paramCookieAdd),dataType:"jsonp",timeout:500,jsonp:this.paramCallback,success:function(){}})},displayOnoff:function(){1==
this.onoffEnable&&(1==this.onoff?(this.onElem.hide(),this.resize(),this.input.attr("autocomplete","off")):(this.resize(),this.input.attr("autocomplete",""),this.controlOnElem(),this.suggest.hide()))},controlOnElem:function(){1!=this.onoffEnable||(0!=this.onoff||0==this.byteNumToHideOpenSggst)||(1==this.isByteLengthOver(this.input.val(),this.byteNumToHideOpenSggst)?this.onElem.hide():this.onElem.is(":visible")||this.onElem.show())},isSuggestUse:function(){return"undefined"!=typeof this.scVal&&1==this.scVal},
isMatch:function(a,b){return a&&RegExp(b).test(a)?!0:!1},isInRange:function(a,b,c){a=parseInt(a);return!isNaN(a)&&a>=b&&a<=c},isNotEmptyArray:function(a){return"object"===typeof a&&"function"===typeof a.pop&&0<a.length},createWordLine:function(a){if(!a||this.isMatch(a,this.spaceRegExp))return"";for(var a=this.escapeHtml(a),b=this.respInput.toLowerCase().split(this.whitespaceMatcher),c,e=0,i=b.length;e<i;e++)c=this.escapeHtml(b[e]),a=a.replace(RegExp("(^|\\s)("+this.escapeRegExp(c)+")"),"$1<strong>$2</strong>");
return a},escapeRegExp:function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},isByteLengthOver:function(a,b){if(void 0===a)return 0;var c=0,e="",i=a.length,g;for(g=0;g<i;g++)if(e=escape(a.charAt(g)),c+=4>e.length&&!/%[0|1|8-9|A-F]\w|%7F/.test(e)?1:2,c>b)return 1;return 0}};e(function(){(new c).init("#sggstConfig")})}})();
(function(){if("undefined"!=typeof jQuery){var e=jQuery.noConflict();if(!("undefined"==typeof searchplat||"undefined"==typeof searchplat.suggest||"undefined"==typeof searchplat.suggest.plugins)){var g=function(){};g.prototype={cssRow:"swgRow",cssSwgTopRow:"swgTopRow",cssBorder:"sggstBorder",cssSwgRow:"swgWordRow",formatType:"swg",cssSwgTopWordRow:"swgTopWordRow",paramGenre:"ge",paramGenreUse:"gu",paramOutputFormat:"of",paramSortLogic:"sl",maxRows:10,maxAddGenreRows:1,maxEachGenreRows:3,noGenreId:"0",
swgQuery:"swg",swgOutput:"osgenre",gbQuery:"",gbOutput:"osgenre",genreBoostOutput:"osgenre",swgExistsCss:"sggstSwg",validateConfig:function(a){var b=a.config;if(void 0==b||!a.isMatch(b.attr("selectboxId"),/^[a-zA-Z0-9_\-]+$/))return!1;var c=b.attr("maxRows");return c&&!a.isInRange(c,1,30)||(c=b.attr("maxAddGenreRows"))&&!a.isInRange(c,0,1)||(c=b.attr("maxEachGenreRows"))&&!a.isInRange(c,0,10)||(c=b.attr("noGenreId"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("swgQuery"))&&!a.isMatch(c,/^[^<>]+$/)||
(c=b.attr("swgOutput"))&&!a.isMatch(c,/^[^<>]+$/)||(c=b.attr("genreBoostQuery"))&&!a.isMatch(c,/^[^<>]+$/)?!1:(b=b.attr("genreBoostOutput"))&&!a.isMatch(b,/^[^<>]+$/)?!1:!0},init:function(a){var b=this,c=a.config;b.genreSelectBox=e([{value:b.noGenreId,isDummy:!0}]);if(!b.validateConfig(a))return!1;a.maxRows=c.attr("maxRows")||b.maxRows;b.maxAddGenreRows=c.attr("maxAddGenreRows")||b.maxAddGenreRows;b.maxEachGenreRows=c.attr("maxEachGenreRows")||b.maxEachGenreRows;b.swgQuery=c.attr("swgQuery")||b.swgQuery;
b.swgOutput=c.attr("swgOutput")||b.swgOutput;b.gbQuery=c.attr("genreBoostQuery")||b.gbQuery;b.gbOutput=c.attr("genreBoostOutput")||b.genreBoostOutput;var d=c.attr("selectboxId");b.noGenreId=c.attr("noGenreId")||"0";"undefined"!=typeof d&&0<d.length&&(b.genreSelectBox=e("#"+d));if("undefined"==typeof b.genreSelectBox.val()||!b.genreSelectBox.attr("isDummy")&&0==b.genreSelectBox.find("option[value="+b.noGenreId+"]").length)return a.config=e(),!1;a.form.bind("reset",function(){setTimeout(function(){b.genreSelectBox.val(b.noGenreId)},
a.afterWaitingforEventTimeout)});a.formatType=b.formatType;b.genreSelectBox.getAddingQuery=function(){var a;this.val()==b.noGenreId?a=b.paramSortLogic+"="+b.swgQuery+"&"+b.paramOutputFormat+"="+b.swgOutput:(a=b.paramGenre+"="+this.val()+"&"+b.paramOutputFormat+"="+b.gbOutput,b.gbQuery&&(a+="&"+b.paramSortLogic+"="+b.gbQuery));return a};b.genreSelectBox.change(function(){a.respInput=""});var k=b.genreSelectBox.attr("name")||"g";b.genreSelectBox.setGenreId=function(a){var c=b.getGenreId(a),c=b.getSelectedSwg(a).genreId,
i=b.getSelectedSwg(a).swgIndex,g=d+"_hidden_for_suggest";a.form.children("#"+g).length&&a.form.children("#"+g).remove();a.swgIndex=0;this.val()==b.noGenreId&&0<c.length&&(b.genreHidden=e("<input />").attr("id",g).attr("name",k).attr("type","hidden").val(c),b.genreHidden.appendTo(a.form),a.swgIndex=i,this.isDummy||e(this).removeAttr("name"))};0==e("body[onunload]").length&&e(window).bind("unload",function(){});a.getTextPos=function(){return this.input.offset()};a.button.bind("click.swg",function(){try{b.genreSelectBox.setGenreId(a),
a.jump(a.isUse())}catch(c){}return!0});return!0},createSuggestElems:function(a){for(var b='<span class="'+a.cssKeyword+'"></span></div>',c='<div class="'+a.cssNoSelect+" "+a.cssRow+'">'+b,b='<div class="'+a.cssNoSelect+" "+this.cssRow+'">'+b,d="",e="",h=0,f=0,g=0,n=isNaN(this.maxAddGenreRows*this.maxEachGenreRows)?0:this.maxAddGenreRows*this.maxEachGenreRows,a=parseInt(a.maxRows),m=0,n=n+a;m<n;m++)f<this.maxAddGenreRows&&h<this.maxEachGenreRows?(e+=b,h==this.maxEachGenreRows?(h=0,f++):h++):(d+=c,
g++),m==a&&(d+='<hr class="lastSwgBorder">',d+=e);return d+='<hr class="'+this.cssBorder+'">'},postInit:function(a){var b=this;a.suggest.find("."+b.cssRow+" > ."+a.cssKeyword).bind("mouseup",function(c){c.stopPropagation();var d=e(this),k=d.text();1!=c.which||(a.mouseInput!=k||0==a.clickEnableFlag)||(a.over(d.text()),a.mouseState=2,a.input.blur(),a.input.val(b.getSelectText(d)),a.sggstSelectNum=a.index,a.usingChar=k,a.clickEnableFlag=0,a.decisionFlag=1,a.submitWay=2,setTimeout(function(){a.button.click()},
a.justAddedToQueueTimeout),a.eventStop())})},getValidIntValue:function(a,b,c,d){a=isNaN(a)||0==a.length?b:parseInt(a);return a<c?c:a>d?d:a},getSelectText:function(a){a=a.clone();a.children("span").remove();return a.text()},getGenreId:function(a){a.suggest.children(":not(hr)").filter(":visible").eq(a.sggstSelectNum).filter(":not(."+a.cssNoSelect+")").children("."+a.cssKeyword).children("span[key]");var b="";a.suggest.children(":visible").filter("."+this.cssRow).each(function(){if(!e(this).hasClass(a.cssNoSelect)){var c=
e(this).children("."+a.cssKeyword).children("span[key]");b=0===c.length?"":c.attr("key");return!1}});return b},getSelectedSwg:function(a){var b={genreId:"",swgIndex:0};a.suggest.children(":not(hr)").filter(":visible").eq(a.sggstSelectNum).filter(":not(."+a.cssNoSelect+")").children("."+a.cssKeyword).children("span[key]");a.suggest.children(":visible").filter("."+this.cssRow).each(function(c){if(!e(this).hasClass(a.cssNoSelect)){var c=c+1,d=e(this).children("."+a.cssKeyword).children("span[key]");
swgGenreId=0===d.length?"":d.attr("key");b.genreId=swgGenreId;b.swgIndex=c;return!1}});return b},search:function(a){var b=this,c=a.lastInput.replace(a.spaceRegExp,"");if(0==c.length)a.readyState+=2;else{var d=a.config.attr(a.configCollection),e=d+b.genreSelectBox.val();"undefined"==typeof a.resultCache[e]&&(a.resultCache[e]={});e=a.resultCache[e];if("undefined"==typeof e[c])try{var h=a.baseUrl+"/"+a.searchCommand+"?"+a.paramCollection+"="+d+"&"+a.paramReqid+"="+a.sggstReqid+"&"+a.paramSuggestid+"="+
a.suggestId+"&"+a.paramInput+"="+encodeURIComponent(c)+"&"+a.paramEncoding+"="+a.encoding+"&"+b.genreSelectBox.getAddingQuery();0!=a.exParam.length&&(h+="&"+a.exParam);a.read(h,function(c){b.show(a,c)})}catch(f){a.readyState+=2}else b.show(a,e[c])}},show:function(a,b){var c=this,d=e.extend(!0,[],b),k=d[1],h=d[2],f=a.suggest.find(".lastSwgBorder");a.suggest.children("."+a.cssRow+", ."+c.cssRow).hide();a.suggest.removeClass(c.swgExistsCss);a.suggest.find("."+c.cssBorder).hide();e(f).hide();if(a.isNotEmptyArray(k)&&
a.isNotEmptyArray(h)){var g=h[0],n=h[1];if(a.isNotEmptyArray(g)&&"object"==typeof n){h="";d&&(d.qInfo&&d.qInfo.query&&d.qInfo.query.q)&&(h=d.qInfo.query.q);d=h?h:a.lastInput;h=a.config.attr(a.configCollection)+c.genreSelectBox.val();"undefined"==typeof a.resultCache[h][d]&&(a.resultCache[h][d]=b);a.respInput=a.lastInput;var m=0,p=0,d=a.suggest.children("."+c.cssRow),l=0,r=!1;d.filter("."+a.cssSelect).removeClass(a.cssSelect).addClass(a.cssNoSelect);d.each(function(b,d){var f=e(d),h=a.createWordLine(k[m]),
j=g[m];if("undefined"!=typeof j){var j=j[p],v=n[j]||" ";a.isMatch(j,/^[^\s]+/)&&(r=!0,h+='<span key="'+j+'" class="'+c.cssSwgRow+'">'+v+"</span>",f.show().children("."+a.cssKeyword).html(h),l++)}r||f.hide();p++;p>=c.maxEachGenreRows&&(m++,p=0)});d.removeClass("swgLastRow");l&&e(d.get(l-1)).addClass("swgLastRow");var j=k.length,d=a.maxRows;r&&d++;j>d&&(j=d);d=a.suggest.children("."+a.cssRow);d.filter("."+a.cssSelect).removeClass(a.cssSelect).addClass(a.cssNoSelect);d.each(function(b,d){var f=e(d);
if(b<j){var h=a.createWordLine(k[b]);f.show().children("."+a.cssKeyword).html(h);l++}else f.hide(),a.suggest.removeClass(c.swgExistsCss)});r?e(f).show():e(f).hide();0<l&&(a.suggest.find("."+c.cssBorder).show(),a.suggest.addClass(c.swgExistsCss));a.maxIndex+=l}}a.readyState+=2},addSubmitLog:function(){var a,b="&"+this.paramGenre+"="+this.genreSelectBox.val();a="undefined"==typeof this.genreHidden?this.noGenreId:this.genreHidden.val();return b+="&"+this.paramGenreUse+"="+a},getSelectedText:function(a,
b){var c=e(b);return c.hasClass(this.cssRow)||c.hasClass(this.cssSwgTopRow)?(c=c.children("."+a.cssKeyword).clone(),c.children("span").remove(),c.text()):null}};g=new g;searchplat.suggest.plugins.add(g)}}})();
(function(){if("undefined"!=typeof jQuery){var e=jQuery.noConflict();if(!("undefined"===typeof searchplat||"undefined"===typeof searchplat.suggest||"undefined"===typeof searchplat.suggest.plugins)){var g=function(){};g.prototype={cnaviCache:null,destinationStartMark:"<em>",destinationEndMark:"</em>",destinationRegExp:/<em>(.*)<\/em>/,cssEmphasize:"cnaviEm",cssRow:"cnaviRow",cssImg:"cnaviImg",cssLink:"cnaviLink",cssHorizon:"cnaviBorder",rowCount:1,searchCount:2,searchCommand:"cnavi",paramCNaviUse:"cu",
paramSearchCount:"h",paramLanguage:"lr",cnaviCollectionKey:"cnavicol",lang:"ja",cnaviCollection:null,selectboxId:null,noGenreId:"0",genreSelectBox:null,ignoreUrls:[],partsname:"suggestcn1",channel:null,func:"Suggest",parts:null,cnaviExistsCss:"sggstCn",validateConfig:function(a){var b=a.config;if(void 0==b||!a.isMatch(b.attr("channel"),/^[a-zA-Z0-9_\-]+$/)||!a.isMatch(b.attr("parts"),/^[a-zA-Z0-9_\-]+$/))return!1;var c=b.attr("cnaviRowCount");return c&&!a.isInRange(c,0,1)||(c=b.attr("cnaviSearchCount"))&&
!a.isInRange(c,0,10)||(c=b.attr("lang"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("selectboxId"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("noGenreId"))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)||(c=b.attr("ignoreUrls"))&&!a.isMatch(c,/^https?:\/\/.+$/)||(c=b.attr(this.cnaviCollectionKey))&&!a.isMatch(c,/^[a-zA-Z0-9_\-]+$/)?!1:(b=b.attr("partsname"))&&!a.isMatch(b,/^[a-zA-Z0-9_\-]+$/)?!1:!0},init:function(a){var b=this,c=a.config,d=c.attr(a.configCollection);if(!b.validateConfig(a))return!1;b.rowCount=
c.attr("cnaviRowCount")||b.rowCount;b.searchCount=c.attr("cnaviSearchCount")||b.searchCount;b.channel=c.attr("channel");b.parts=c.attr("parts");b.partsname=c.attr("partsname")||b.partsname;b.lang=c.attr("lang")||b.lang;b.cnaviCollection=c.attr(b.cnaviCollectionKey)||d;b.cnaviCache=a.resultCache[b.cnaviCollection+b.searchCommand]={};b.selectboxId=c.attr("selectboxId")||b.selectboxId;b.selectboxId&&(b.genreSelectBox=e("#"+b.selectboxId));b.noGenreId=c.attr("noGenreId")||b.noGenreId;if(c=c.attr("ignoreUrls"))b.ignoreUrls=
c.split(",");a.input.bind("keydown.cnavi",function(c){if(13==c.keyCode&&1==a.clickEnableFlag){c=a.suggest.children("."+b.cssRow);if(!c.is("."+a.cssSelect+":visible"))return!0;a.clickEnableFlag=0;a.decisionFlag=1;b.cnaviSubmit(a,c,1);return!1}});return!0},createSuggestElems:function(a){for(var a='<div class="'+a.cssNoSelect+" "+this.cssRow+'"><a href="" class="'+this.cssLink+'"><hr class="'+this.cssHorizon+'" /><span class="'+a.cssKeyword+'"></span></a></div>',b="",c=0,d=this.rowCount;c<d;c++)b+=a;
return b},postInit:function(a){var b=this,c=a.suggest.find("."+b.cssRow).find("."+b.cssLink),d=c.find("."+a.cssKeyword);c.bind("click",function(c){c.preventDefault();c=e(this).parents("."+b.cssRow).first();b.cnaviSubmit(a,c,2)});d.bind("mouseup",function(a){a.stopPropagation()}).bind("mouseover",function(){a.over(a.lastInput)}).bind("mouseout",function(){e(this).parents("."+b.cssRow).first().removeClass(a.cssSelect).addClass(a.cssNoSelect)})},search:function(a){var b=this,c=a.lastInput;if(0==c.length)a.readyState+=
1;else{var d=b.cnaviCollection;a.suggest.children("."+b.cssRow).hide();a.suggest.removeClass(b.cnaviExistsCss);if("undefined"==typeof b.cnaviCache[c])try{var e=a.baseUrl+"/"+b.searchCommand+"?"+a.paramCollection+"="+d+"&"+a.paramReqid+"="+a.sggstReqid+"&"+a.paramSuggestid+"="+a.suggestId+"&"+a.paramInput+"="+encodeURIComponent(c)+"&"+a.paramEncoding+"="+a.encoding+"&"+b.paramSearchCount+"="+b.searchCount+"&"+b.paramLanguage+"="+b.lang;0!=a.exParam.length&&(e+="&"+a.exParam);a.read(e,function(c){b.show(a,
c)})}catch(h){a.readyState+=1}else b.show(a,b.cnaviCache[c])}},show:function(a,b){var c="";b&&(b.qInfo&&b.qInfo.query&&b.qInfo.query.q)&&(c=b.qInfo.query.q);var d=c?c:a.lastInput;if("object"!=typeof b[4])a.readyState+=1;else{var g=e.extend(!0,{},b[4]),h=g.destination,c=g.sentence,f=g.imageurl,g=g.queryurl;if(!a.isNotEmptyArray(h)||!a.isNotEmptyArray(c)||!a.isNotEmptyArray(f)||!a.isNotEmptyArray(g))a.readyState+=1,this.cnaviCache[d]=b;else{"undefined"==typeof this.cnaviCache[d]&&(this.cnaviCache[d]=
b);a.respInput=a.lastInput;var d=h.length,h=0,i=a.suggest.children("."+this.cssRow),n=[];i.removeClass(a.cssSelect).addClass(a.cssNoSelect);var m=0;a:for(;m<d&&!(h>=this.rowCount);m++){var p=i.eq(h),l=c[m],r=f[m],j=g[m],q="",s;if(a.isMatch(l,/^[^\s]+/)&&a.isMatch(j,/^https?:\/\/.+$/)&&(l.match(this.destinationRegExp),s=a.escapeHtml(RegExp.$1),-1==e.inArray(s,n)&&(n.push(s),l=l.replace(this.destinationStartMark,""),l=l.replace(this.destinationEndMark,""),!(-1<location.href.indexOf(j))))){if(this.genreSelectBox&&
this.genreSelectBox.val()!=this.noGenreId)for(var t=0,u=this.ignoreUrls.length;t<u;t++)if(-1<j.indexOf(this.ignoreUrls[t]))continue a;p.find("a."+this.cssLink).attr("href",j);a.isMatch(r,/^[a-zA-Z0-9\/:\._\-]+$/)&&(q+='<img src="'+r+'" class="'+this.cssImg+'" />');q+=a.escapeHtml(l);-1<q.indexOf(s)&&(q=q.replace(s,'<span class="'+this.cssEmphasize+'">'+s+"</span>"));p.show().find("."+a.cssKeyword).html(q);a.suggest.addClass(this.cnaviExistsCss);h++}}a.maxIndex+=h;a.readyState+=1}}},getSelectedText:function(a,
b){return e(b).hasClass(this.cssRow)?a.backup:null},cnaviSubmit:function(a,b,c){var d=b.find("."+this.cssLink).attr("href");this.isCNaviUsed=!0;a.submitWay=c;a.usingChar=b.find("."+this.cssEmphasize).text();"function"===typeof s_partsCounter&&s_partsCounter(this.partsname);"function"===typeof ontrackingidAjax&&(1==c?ontrackingidAjax(this.channel,this.func,this.parts,"Enter"):2==c&&ontrackingidAjax(this.channel,this.func,this.parts,"Click"));this.cnaviCollection&&(a.configCollection=this.cnaviCollectionKey);
a.jump(1);setTimeout(function(){window.location.href=d},a.afterWaitingforEventTimeout);a.eventStop()},addSubmitLog:function(){var a="";return a="&"+this.paramCNaviUse+"="+(this.isCNaviUsed?"1":"0")}};g=new g;searchplat.suggest.plugins.add(g)}}})();
(function(){if("undefined"!=typeof jQuery){var e=jQuery.noConflict();if(!("undefined"===typeof searchplat||"undefined"===typeof searchplat.suggest||"undefined"===typeof searchplat.suggest.plugins)){var g=function(){};g.prototype={genreSelectBox:null,linkUrl:"",collection:null,cssRow:"asurakuRow",cssLink:"asurakuLink",cssEmphasize:"asurakuEm",linkSuffix:"",isAsurakuUsed:0,asurakuExsistsCss:"sggstAr",partsname:"suggestasu",channel:null,func:"Suggest",parts:null,validateConfig:function(a){var b=a.config,
c=b.attr("selectboxid"),d=b.attr("asurakublacklist");this.linkSuffix=b.attr("asurakuphrase");this.linkUrl=b.attr("asurakuurl");this.genreSelectBox=e("#"+c);if(0===this.genreSelectBox.size())return!1;this.collection=b.attr(a.configCollection);if(0===this.collection.length)return!1;d&&0<d.length&&(this.blacklist=d.split(","));return(b=b.attr("asurakupartsname"))&&!a.isMatch(b,/^[a-zA-Z0-9_\-]+$/)?!1:!0},init:function(a){var b=this,c=a.config;if(!b.validateConfig(a))return!1;b.partsname=c.attr("asurakupartsname")||
b.partsname;b.parts=c.attr("parts");b.channel=c.attr("channel");a.input.bind("keydown.asuraku",function(c){if(13==c.keyCode&&1==a.clickEnableFlag){if(!a.suggest.find("."+b.cssRow).is("."+a.cssSelect+":visible"))return!0;a.clickEnableFlag=0;a.decisionFlag=1;b.asurakuSubmit(a,1);return!1}return!0});return!0},createSuggestElems:function(a){return'<div class="'+a.cssNoSelect+" "+this.cssRow+'"><a href="" class="'+this.cssLink+'"><span class="'+a.cssKeyword+'"><span class="'+this.cssEmphasize+'"></span>'+
this.linkSuffix+"</span></a></div>"},postInit:function(a){var b=this,c=a.suggest.find("."+b.cssRow),d=c.find("."+a.cssKeyword);c.bind("click",function(c){c.preventDefault();b.asurakuSubmit(a,2)});d.bind("mouseup",function(a){a.stopPropagation()}).bind("mouseover",function(){a.over(a.lastInput)}).bind("mouseout",function(){e(this).parents("."+b.cssRow).first().removeClass(a.cssSelect).addClass(a.cssNoSelect)})},search:function(a){var b=this,c;setTimeout(function(){clearInterval(c)},a.pollingTime*a.retryCount);
c=setInterval(function(){if(2<=a.readyState){var d=b.collection;"swg"===a.formatType&&(d+=b.genreSelectBox.val());b.show(a,a.resultCache[d][a.lastInput]);clearInterval(c)}},a.pollingTime)},show:function(a,b){var c=e.extend(!0,[],b),d=[],g=a.suggest.find("."+this.cssRow).hide(),d="base"===a.formatType?c.result:c[1];a.suggest.removeClass(this.asurakuExsistsCss);if(!(0===g.size()||!d||0===d.length))if(c="",(c="base"===a.formatType?d[0][0]:d[0])&&!this._contains(c)&&this.linkSuffix&&this.linkUrl)d=this.linkUrl.replace(/###keyphrase###/,
encodeURIComponent(c)),g.find("."+this.cssEmphasize).text(c),g.find("."+this.cssLink).attr("href",d),a.maxIndex+=1,g.show(),a.suggest.addClass(this.asurakuExsistsCss)},_contains:function(a){if(this.blacklist){for(var b=0;b<this.blacklist.length;b++)if(0===a.indexOf(this.blacklist[b]))return!0;return!1}},getSelectedText:function(a,b){if(e(b).hasClass(this.cssRow))return a.backup},asurakuSubmit:function(a,b){var c=a.suggest.find("."+this.cssRow).find("."+this.cssLink).attr("href");this.isAsurakuUsed=
!0;a.submitWay=b;a.usingChar=a.suggest.find("."+this.cssEmphasize).text();"function"===typeof s_partsCounter&&s_partsCounter(this.partsname);"function"===typeof ontrackingidAjax&&(1==b?ontrackingidAjax(this.channel,this.func,this.parts,"Enter"):2==b&&ontrackingidAjax(this.channel,this.func,this.parts,"Click"));a.jump(1);setTimeout(function(){window.location.href=c},a.afterWaitingforEventTimeout);a.eventStop()},addSubmitLog:function(){return"&au="+(this.isAsurakuUsed?"1":"0")}};g=new g;searchplat.suggest.plugins.add(g)}}})();
