document.createElement("template");if(typeof Object.create!="function"){(function(){var a=function(){};Object.create=function(b){if(arguments.length>1){throw Error("Second argument not supported");}if(b===null){throw Error("Cannot set a null [[Prototype]]");}if(typeof b!="object"){throw TypeError("Argument must be an object");}a.prototype=b;return new a();};})();}if(!Object.keys){Object.keys=(function(){var c=Object.prototype.hasOwnProperty,d=!({toString:null}).propertyIsEnumerable("toString"),b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=b.length;return function(g){if(typeof g!=="object"&&(typeof g!=="function"||g===null)){throw new TypeError("Object.keys called on non-object");}var e=[],h,f;for(h in g){if(c.call(g,h)){e.push(h);}}if(d){for(f=0;f<a;f++){if(c.call(g,b[f])){e.push(b[f]);}}}return e;};}());}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}if(!Date.now){Date.now=function now(){return new Date().getTime();};}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(a,b){if(this===undefined||this===null){throw new TypeError('"this" is null or not defined');}var c=this.length>>>0;b=+b||0;if(Math.abs(b)===Infinity){b=0;}if(b<0){b+=c;if(b<0){b=0;}}for(;b<c;b++){if(this[b]===a){return b;}}return -1;};}if(!Array.prototype.map){Array.prototype.map=function(c){if(this===void 0||this===null){throw new TypeError();}var f=Object(this);var a=f.length>>>0;if(typeof c!=="function"){throw new TypeError();}var e=new Array(a);var b=arguments.length>=2?arguments[1]:void 0;for(var d=0;d<a;d++){if(d in f){e[d]=c.call(b,f[d],d,f);}}return e;};}if(!Array.prototype.forEach){Array.prototype.forEach=function(g,b){var d,c;if(this==null){throw new TypeError(" this is null or not defined");}var f=Object(this);var a=f.length>>>0;if(typeof g!=="function"){throw new TypeError(g+" is not a function");}if(arguments.length>1){d=b;}c=0;while(c<a){var e;if(c in f){e=f[c];g.call(d,e,c,f);}c++;}};}if(!Array.prototype.filter){Array.prototype.filter=function(c){if(this===void 0||this===null){throw new TypeError();}var f=Object(this);var a=f.length>>>0;if(typeof c!=="function"){throw new TypeError();}var e=[];var b=arguments.length>=2?arguments[1]:void 0;for(var d=0;d<a;d++){if(d in f){var g=f[d];if(c.call(b,g,d,f)){e.push(g);}}}return e;};}if(!Array.isArray){Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]";};}(function(){var b=0,c=["webkit","o","ms"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"];}if(!window.requestAnimationFrame||!window.cancelAnimationFrame){window.requestAnimationFrame=function(h,e){var d=Date.now(),f=Math.max(0,16-(d-b)),g=window.setTimeout(function(){h(d+f);},f);b=d+f;return g;};window.cancelAnimationFrame=clearTimeout;}})();if(!Function.prototype.bind){Function.prototype.bind=function(a){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}var e=Array.prototype.slice.call(arguments,1),d=this,b=function(){},c=function(){return d.apply(this instanceof b&&a?this:a,e.concat(Array.prototype.slice.call(arguments)));};b.prototype=this.prototype;c.prototype=new b();return c;};}if("classList" in document.documentElement){(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h);}};};c("add");c("remove");}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e;}else{return a.call(this,d);}};}}());}else{(function(){var b=function(c){this.element=c;this.tokens=c.className.replace(/^\s+|\s+$/g,"").split(/\s+/);};b.prototype={contains:function(c){return this.tokens.indexOf(c)!==-1;},add:function(e){var d,c=arguments.length;for(d=0;d<c;d++){e=arguments[d];if(this.contains(e)){return;}this.tokens.push(e);}this.element.className=this.toString();},remove:function(g){var f,d=arguments.length;for(f=0;f<d;f++){g=arguments[f];if(!this.contains(g)){return;}for(var c=0,e=this.tokens.length;c<e;c++){if(this.tokens[c]===g){this.tokens.splice(c,1);}}}this.element.className=this.toString();},item:function(c){return this.tokens[c]||null;},toString:function(){return this.tokens.join(" ");},toggle:function(d,e){var c=this.contains(d),f=c?e!==true&&"remove":e!==false&&"add";if(f){this[f](d);}if(e===true||e===false){return e;}else{return !c;}}};var a=function(){return new b(this);};if(Object.defineProperty){Object.defineProperty(Element.prototype,"classList",{get:a});}else{Element.prototype.__defineGetter__("classList",a);}})();}if(!window.getBoundingClientRect){window.getBoundingClientRect=function(){return{top:0,left:0,bottom:window.innerHeight||window.clientHeight,right:window.innerWidth||window.clientWidth};};}if(!document.getElementsByClassName){Element.prototype.getElementsByClassName=document.getElementsByClassName=function(a){return this.querySelectorAll("."+a);};}(function(){if(!Event.prototype.preventDefault){Event.prototype.preventDefault=function(){this.returnValue=false;};}if(!Event.prototype.stopPropagation){Event.prototype.stopPropagation=function(){this.cancelBubble=true;};}if(!Element.prototype.addEventListener){var c=[];var b=function(f,h){var d=this;var k=function(l){l.target=l.srcElement;l.currentTarget=d;if(h.handleEvent){h.handleEvent(l);}else{h.call(d,l);}};if(f=="DOMContentLoaded"){var g=function(l){if(document.readyState=="complete"){k(l);}};document.attachEvent("onreadystatechange",g);c.push({object:this,type:f,listener:h,wrapper:g});if(document.readyState=="complete"){var j=new Event();j.srcElement=window;g(j);}}else{this.attachEvent("on"+f,k);c.push({object:this,type:f,listener:h,wrapper:k});}};var a=function(f,g){var d=0;while(d<c.length){var e=c[d];if(e.object==this&&e.type==f&&e.listener==g){if(f=="DOMContentLoaded"){this.detachEvent("onreadystatechange",e.wrapper);}else{this.detachEvent("on"+f,e.wrapper);}c.splice(d,1);break;}++d;}};Element.prototype.addEventListener=b;Element.prototype.removeEventListener=a;if(HTMLDocument){HTMLDocument.prototype.addEventListener=b;HTMLDocument.prototype.removeEventListener=a;}if(Window){Window.prototype.addEventListener=b;Window.prototype.removeEventListener=a;}}})();if(!("insertAdjacentHTML" in document.documentElement)){HTMLElement.prototype.insertAdjacentElement=function(a,b){switch(a){case"beforeBegin":this.parentNode.insertBefore(b,this);break;case"afterBegin":this.insertBefore(b,this.firstChild);break;case"beforeEnd":this.appendChild(b);break;case"afterEnd":if(this.nextSibling){this.parentNode.insertBefore(b,this.nextSibling);}else{this.parentNode.appendChild(b);}break;}};HTMLElement.prototype.insertAdjacentHTML=function(b,d){var c=this.ownerDocument.createRange();c.setStartBefore(this);var a=c.createContextualFragment(d);this.insertAdjacentElement(b,a);};HTMLElement.prototype.insertAdjacentText=function(b,c){var a=document.createTextNode(c);this.insertAdjacentElement(b,a);};}(function(d){var l=d.Promise;var b=l&&"resolve" in l&&"reject" in l&&"all" in l&&"race" in l&&(function(){var q;new l(function(s){q=s;});return typeof q==="function";})();if(!b){var a=setTimeout;function o(){}var c=(typeof setImmediate==="function"&&setImmediate)||function(q){a(q,1);};var f=Array.isArray||function(q){return Object.prototype.toString.call(q)==="[object Array]";};function k(q){if(typeof this!=="object"){throw new TypeError("Promises must be constructed via new");}if(typeof q!=="function"){throw new TypeError("not a function");}this._state=0;this._value=undefined;this._deferreds=[];n(q,this);}function g(r,q){while(r._state===3){r=r._value;}if(r._state===0){r._deferreds.push(q);return;}c(function(){var s=r._state===1?q.onFulfilled:q.onRejected;if(s===null){(r._state===1?m:p)(q.promise,r._value);return;}var t;try{t=s(r._value);}catch(u){p(q.promise,u);return;}m(q.promise,t);});}function m(q,s){try{if(s===q){throw new TypeError("A promise cannot be resolved with itself.");}if(s&&(typeof s==="object"||typeof s==="function")){var t=s.then;if(s instanceof k){q._state=3;q._value=s;h(q);return;}else{if(typeof t==="function"){n(t.bind(s),q);return;}}}q._state=1;q._value=s;h(q);}catch(r){p(q,r);}}function p(q,r){q._state=2;q._value=r;h(q);}function h(r){for(var s=0,q=r._deferreds.length;s<q;s++){g(r,r._deferreds[s]);}r._deferreds=null;}function j(s,q,r){this.onFulfilled=typeof s==="function"?s:null;this.onRejected=typeof q==="function"?q:null;this.promise=r;}function n(t,r){var q=false;try{t(function(u){if(q){return;}q=true;m(r,u);},function(u){if(q){return;}q=true;p(r,u);});}catch(s){if(q){return;}q=true;p(r,s);}}k.prototype["catch"]=function(q){return this.then(null,q);};k.prototype.then=function(s,r){var q=new k(o);g(this,new j(s,r,q));return q;};k.all=function(){var q=Array.prototype.slice.call(arguments.length===1&&f(arguments[0])?arguments[0]:arguments);return new k(function(v,u){if(q.length===0){return v([]);}var t=q.length;function s(x,z){try{if(z&&(typeof z==="object"||typeof z==="function")){var y=z.then;if(typeof y==="function"){y.call(z,function(A){s(x,A);},u);return;}}q[x]=z;if(--t===0){v(q);}}catch(w){u(w);}}for(var r=0;r<q.length;r++){s(r,q[r]);}});};k.resolve=function(q){if(q&&typeof q==="object"&&q.constructor===k){return q;}return new k(function(r){r(q);});};k.reject=function(q){return new k(function(s,r){r(q);});};k.race=function(q){return new k(function(u,t){for(var s=0,r=q.length;s<r;s++){q[s].then(u,t);}});};k._setImmediateFn=function e(q){c=q;};if(typeof module!=="undefined"&&module.exports){module.exports=k;}else{if(!d.Promise){d.Promise=k;}}}})(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);var OK=OK||{};OK.cnst={pageCtx:window.pageCtx,staticUrl:window.pageCtx.staticResourceUrl};OK.navigation={SPLITER:"<!--&-->",HEADER:"Rendered-Blocks",redirect:false};OK.fn=(function(){return{empty:function(){},isDebug:function(){return document.getElementById("__gwtd__m")!=null;},delegate:function(c,b,a){return function(){var d=Array.prototype.slice.call(arguments);var e=(b||[]).concat(d);return c.apply(a||this,e);};},deferred:function(b,c,a){var a=Array.prototype.slice.call(a);return function(){var d=b[c];return d.apply(b,a);};},logging:function(a,c){var b=c||OK.logging.currentLoggerFn||OK.fn.empty;return function(){try{return a.apply(this,arguments);}catch(d){b.call(window,d);}};}};})();OK.hookModel=OK.hookModel||{getHookById:OK.fn.empty,removeHookById:OK.fn.empty,getNearestBlockHookId:OK.fn.empty,setHookContent:function(a,c){var b=document.getElementById("hook_Block_"+a);if(b){b.innerHTML=c;require(["OK/capture"],function(d){d.activate(b);});}},captureBlockHook:OK.fn.empty};OK.clickLog=OK.clickLog||{getCounter:OK.fn.empty,incCounter:OK.fn.empty,decCounter:OK.fn.empty};OK.logging=(function(){return{isSeleniumBot:false,currentLoggerFn:OK.fn.empty,setUp:function(a){OK.logging.currentLoggerFn=a;},tearDown:function(){OK.logging.currentLoggerFn=OK.fn.empty;},alert:function(a){if(OK.fn.isDebug()){alert(a);}},info:function(b){if(OK.fn.isDebug()){try{console&&console.log(b);}catch(a){}}},logger:{queue:[],replayQueue:function(){var a,b=this.queue;for(a=0;a<b.length;a++){b[a].call();}this.queue=[];},error:function(b,a){this.queue.push(OK.fn.deferred(this,"error",arguments));},errorEx:function(b,a,c){var d="Fatal JavaScript Error, please see log:\nexception ='"+b+"'\nstacktrace="+b.stack;this.clob("error",d,a,c);},success:function(a,c,b){this.queue.push(OK.fn.deferred(this,"success",arguments));},force:function(a,c,b){this.queue.push(OK.fn.deferred(this,"force",arguments));},duration:function(a,c,d,b){this.queue.push(OK.fn.deferred(this,"duration",arguments));},clob:function(a,d,c,b){this.queue.push(OK.fn.deferred(this,"clob",arguments));},durationScalar:function(b,d,c){if(c!=null&&c<10000){var a=1000;if(c<1000){a=100;}c=Math.round(c/a)*a;}else{c=10000;}this.success(b,d,""+c);}},repository:(function(){var g={},j=[];function c(n){return n&&Object.prototype.toString.call(n)==="[object Array]";}function m(n){return n&&Object.prototype.toString.call(n)==="[object Object]";}function h(n){return n!==undefined;}function b(p){var o=[];while(p){o[--p]=0;}return o;}function e(n){var o=JSON.stringify(n);if(!o||o.length<=2){return null;}return encodeURIComponent(o);}function f(){var n=e(g);g={};return n;}function d(){var n=e(j);j=[];return n;}function a(n,t,r,q,p,u){var s={o:n};t&&(s.p1=t);r&&(s.p2=r);q&&(s.d=q);p&&(s.i=p);u&&(s.c=u);j.push(s);}function k(n){l(g,n);}function l(p,o){var q=o.pop(),n=p;if(typeof q==="string"){n=!n?{}:!m(n)?{"n/a":n}:n;n[q]=l(n[q],o);}else{if(m(n)){n["n/a"]=l(n["n/a"],[q]);}else{if(c(n)){n.push(q?q:0);}else{if(q){n=b(n);n.push(q);}else{n=1+(n||0);}}}}return n;}return{addLog:function(o,r,q,t,s,p){if(q||t){a(o,s,p,r,q,t);}else{var n=[];h(r)&&n.push(r);h(p)&&n.push(""+p);h(s)&&n.push(""+s);n.push(""+o);k(n);}},getRequestData:function(){var o=f(),q=d(),n=[];o&&n.push("a="+o);q&&n.push("p="+q);return n.length>0?n.join("&"):null;}};}())};})();OK.logger=OK.logging.logger;OK.logger.repository=OK.logging.repository;define("OK/logger",OK.logger);OK.logctx=(function(){var b=[];var a=0;return{reset:function(c){b=c||[];a=b.length;},push:function(){b.push("");a=b.length;},pop:function(){b.pop();a=b.length;},step:function(c){b[a-1]=c;},last:function(c){return b.join(c||"_");}};})();OK.onload=(function(e){var a=[],d=true,c=function(g,j){if(j!=null&&j.length>0){var f=g;g=OK.fn.delegate(OK.loader.use,[f,j]);}if(d){a.push(g);}else{try{g.call(e);}catch(h){OK.logging.alert("Onload callback error after immidiate execute: "+h.message);}}},b=function(){d=false;for(var f=0;f<a.length;f++){var h=a[f];try{h.call(e);}catch(g){OK.logging.alert("Onload callback error after startup execute: "+g.message);}}a.length=0;};return{addCallback:c,fire:b};})(window);OK.loader=(function(){var t=null,m=null,f=null,e=null,p=null,q=null,c=null,r=null,l={},s=null,g=null,u=false,v={},o=function(){if(u){return;}u=true;t="string";m=",";f="complete";e="loaded";p=OK.cnst;q=p.staticUrl;c=q+"res/default/js/";r=p.pageCtx;s=document;g=s.getElementsByTagName("head")[0];OK.util.extend(l,{nativeHooks:{src:q+h("nativeHooksSrc")},OKCustomJs:{src:q+h("bottomJsSrc")},EasyXDMJs:{src:q+h("easyXDMJs")},OKSuggest:{src:q+h("suggestJsSrc")},OKTextarea:{src:q+h("textareaJsSrc")},OKPhotos:{src:q+h("photosJsSrc")},OKPhotoLayer:{src:q+h("photoLayerJsSrc")},OKPhotoUploader:{src:h("photoUploaderJsSrc")},tinyscrollbar:{src:q+h("tinyscrollbarJsSrc")},OKRegJs:{src:q+h("regJsSrc")},iScroll:{src:c+"iscroll.js"},cdnNode:{src:h("cdnNodeSrc")},OKPromo:{src:q+h("promoAppJsSrc")},OKGifts:{src:q+h("giftsJsSrc")},OKAppEdit:{src:q+h("appEditJsSrc")}});},h=function(d){if(r!=null&&d in r){return r[d];}return"";},n=function(d,x){var w=s.createElement("script");d.waiting=true;w.onload=w.onreadystatechange=function(){var y=w.readyState;if((y&&y!=f&&y!=e)){return;}w.onload=w.onreadystatechange=null;d.ok=true;try{x.call(this);}catch(z){OK.logging.alert("Loader callback error after script loaded: "+z.message);}};w.async=1;w.src=d.src;g.appendChild(w);},j=function(d){if(!d.ok&&!d.waiting){n(d,function(){for(var z in v){for(var y=0;y<v[z].length;y++){var A=v[z][y];if(A==null){continue;}var C=A.srcArr;var x=1;for(var w=0;w<C.length;w++){if(!l[C[w]].ok){x=0;}}if(x){try{v[z][y].clbk.call();}catch(B){OK.logging.alert("Loader queue callback error after all script loaded ["+C.join()+"]: "+B.message+"\n"+B.stack);}v[z][y]=null;}}}});}},k=function(y,C){o();var B=1,w=1,A=null;if(typeof y==t){y=y.split(m);}var d=Array.prototype.indexOf.call(y,"jQuery"),z=[];if(d>=0){y.splice(d,1);z.push("jquery");}var x=function(){for(var E=0;E<y.length;E++){var G=y[E];A=l[G];if(!A){B=0;w=0;break;}if(!A.ok){w=0;}}if(!B){return;}if(w){try{C.apply();}catch(F){OK.logging.alert("Loader callback error after immediate execute ["+y.join()+"]: "+F.message+"\n"+F.stack);}return;}var D=y.join(m);if(!v[D]){v[D]=[];}v[D].push({srcArr:y,clbk:C});for(E=0;E<y.length;E++){A=l[y[E]];j(A);}};if(z.length===0){x();}else{if(z.length===1&&require.defined(z[0])){x(require(z[0]));}else{require(z,x);}}},a=function(d,x,w){if(require.defined(d)){x(require(d));}else{require([d],x,w);}},b=function(d){OK.util.extend(l,d);};return{use:k,execRequire:a,register:b};})();OK.flash=(function(){return{musicFlashReady:false,musicFlashExist:false};}());OK.util=(function(){var a=function(){if(window.pageYOffset>=0){return function(){return window.pageYOffset;};}else{return function(){return document.documentElement.scrollTop;};}};var b=document.documentElement.classList;return{isIE:function(){return b.contains("ie");},isGecko:function(){return b.contains("gecko");},isChrome:function(){return b.contains("chrome")||b.contains("mac-chrome");},isWebkit:function(){return b.contains("webkit");},isIEMetro:function(){var c=false;if(window.navigator.msPointerEnabled){try{new ActiveXObject("htmlfile");}catch(d){c=(window.screenY===0&&(window.innerHeight+1)!==window.outerHeight);}}return c;},getDocumentScrollYPos:a(),counterId:0,extend:function(e,d){e=e||{};for(var c in d){if(d.hasOwnProperty(c)){e[c]=d[c];}}return e;},define:function(g,f){var d=function(){};var c=f!=null?f.prototype:{};var e={};OK.util.extend(e,c);OK.util.extend(e,g);d.prototype=e;return d;},keys:function(e){var d=[];for(var c in e){if(e.hasOwnProperty(c)){d.push(c);}}return d;},getVpHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;},getVpWidth:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;},plurals:function(d){d=Math.abs(d)%100;if(d>10&&d<20){return 5;}var c=d%10;if(c>1&&c<5){return 2;}if(c==1){return 1;}return 5;},parseJSON:function(d){var f="<!--",c=f.length,e="-->".length;if(d){if(d.indexOf(f)===0){d=d.substring(c,d.length-e);}return JSON.parse(d);}},nextId:function(){return this.counterId++;},getOffset:function(c){var d={left:0,top:0};do{d.left+=c.offsetLeft;d.top+=c.offsetTop;}while(c=c.offsetParent);return d;}};}());OK.favicon=(function(){return{change:function(b){var a=document.getElementById("favicon");if(!a){return;}var c=a.cloneNode(true);c.setAttribute("href",b);a.parentNode.replaceChild(c,a);}};}());OK.css=(function(){var c=function(f,d){var e=(typeof f=="string")?document.getElementById(f):f;if(!e){return;}e.style.display=d?"block":"none";};var b=document.createElement("div"),a=b.classList!==undefined;return{display:function(e,d){c(e,d);},hasClass:function(e,d){if(a){return e.classList.contains(d);}else{if(e){return new RegExp("(\\s|^)"+d+"(\\s|$)").test(e.className);}return false;}},addClass:function(e,d){if(typeof e=="string"){e=document.getElementById(e);if(!e){return;}}if(a){e.classList.add(d);}else{if(e&&!OK.css.hasClass(e,d)){e.className+=" "+d;}}},removeClass:function(e,d){if(typeof e=="string"){e=document.getElementById(e);if(!e){return;}}if(a){e.classList.remove(d);}else{if(e){var f=new RegExp("(?:^|\\s)"+d+"(?!\\S)");e.className=e.className.replace(f,"");}}},toggleClass:function(e,d,f){if(typeof e=="string"){e=document.getElementById(e);if(!e){return;}}if(a){e.classList.toggle(d);}else{if(f){OK.css.addClass(e,d);}else{OK.css.removeClass(e,d);}}}};}());OK.form=(function(){var b="form",c=function(e){var f=e.parentNode;while(f&&f.tagName&&f.tagName.toLowerCase()!=b){f=f.parentNode;}if(f&&f.submit){f.submit();}return false;},a=function(h,f){var g=h.form.elements;var e=g.length;for(i=0;i<e;i++){if(g[i].name.substr(0,f.length)==f){g[i].checked=h.checked;}}},d="input__active";return{submit:function(e){return c(e);},selectCBxs:function(f,e){a(f,e);},placeholder:function(e,f){require(["jquery"],function(){var j=f.parent();var h=function(){var l=e.attr("contentEditable")==="true"?e.html():e.val();var k=e.data("val")||"";if(l!==k){if(l!=""){j.addClass(d);}else{j.removeClass(d);}e.data("val",l);clearInterval(g);}};var g=setInterval(h,10);e.bind("blur",function(){clearInterval(g);});});}};}());OK.photoUpload=(function(a,b){return{init:function(c){var d=OK.photoUpload.init;require(["jquery","FileAPI"],function(f,e){OK.loader.use(["OKPhotoUploader"],function(){if(d!==OK.photoUpload.init){OK.photoUpload.init(c);}});});},createOnFileSelect:function(d,c){return function(e,f){c=OK.util.extend(c,{attachExif:f&&f.attachExif});OK.logging.logger.success("photo.upload","batch_file_select_init_0");require(["jquery","FileAPI"],function(h,g){OK.logging.logger.success("photo.upload","batch_file_select_init_1");OK.loader.use(["OKPhotoUploader"],function(){OK.logging.logger.success("photo.upload","batch_file_select_init_3");OK.photoUpload.init();var l=g.getFiles(e);if(l&&l.length&&l.length>0){var k=OK.photoUpload.controllers["create"+d];var j=f.taskId!=null?f.taskId:d;OK.photoUpload.addBatchToQueue(j,l,k.call(OK.photoUpload.controllers,f),c);g.reset(e.target||e.srcElement||e.currentTarget);}});});};},createOnFileDrop:function(d,c){return function(e,f){c=OK.util.extend(c,{attachExif:f&&f.attachExif});OK.logging.logger.success("photo.upload","batch_file_drop_init_0");require(["jquery","FileAPI"],function(h,g){OK.logging.logger.success("photo.upload","batch_file_drop_init_1");OK.loader.use(["OKPhotoUploader"],function(){OK.logging.logger.success("photo.upload","batch_file_drop_init_3");if(e.preventDefault){e.preventDefault();}OK.photoUpload.init();var l=g.getFiles(e);if(l&&l.length&&l.length>0){var k=OK.photoUpload.controllers["create"+d];var j=f.taskId!=null?f.taskId:d;OK.photoUpload.addBatchToQueue(j,l,k.call(OK.photoUpload.controllers,f),c);g.reset(e.target||e.srcElement||e.currentTarget);}});});};},controllers:{}};})(window,document);OK.photoUploadFacade=OK.util.extend(OK.photoUploadFacade,{blocking:{onFileSelect:OK.photoUpload.createOnFileSelect("BlockingController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("BlockingController",{abortCurrentRequest:true})},posting_form:{onFileSelect:OK.photoUpload.createOnFileSelect("PostingFormController",{abortCurrentRequest:false}),onDrop:OK.photoUpload.createOnFileDrop("PostingFormController",{abortCurrentRequest:false})},group_poster:{onFileSelect:OK.photoUpload.createOnFileSelect("GroupPosterController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("GroupPosterController",{abortCurrentRequest:true})},avatar:{onFileSelect:OK.photoUpload.createOnFileSelect("AvatarUploadController",{abortCurrentRequest:true}),onDrop:OK.photoUpload.createOnFileDrop("AvatarUploadController",{abortCurrentRequest:true})},attach:{onFileSelect:function(a,b){require(["OK/AttachPhotoUpload"],function(){OK.attachPhotoUpload.previewOnFileSelect(a,b);});}},async:{onFileSelect:OK.photoUpload.createOnFileSelect("AsyncController",{abortCurrentRequest:false}),onDrop:OK.photoUpload.createOnFileDrop("AsyncController",{abortCurrentRequest:false})},asyncV2:{onFileSelect:OK.photoUpload.createOnFileSelect("AsyncControllerV2",{abortCurrentRequest:false}),onDrop:OK.photoUpload.createOnFileDrop("AsyncControllerV2",{abortCurrentRequest:false})}});OK.photoLayer=(function(a,f){var c="photoLayerWrapper",e,b=function(d,g){var k=a.OK.util.getVpHeight();if(g){g=parseInt(g,10);var j=e=Math.max(a.OK.photoLayer.minHeight,Math.min(Math.max(g,e||a.OK.photoLayer.minHeight),Math.min(k-(a.OK.photoLayer.commentsDelta||0),768)));if(d){d.style.height=j+"px";a.OK.logging.logger.durationScalar("photoLayer","availableSpace",parseInt(k-j,10));}return[Math.min(1024,OK.util.getVpWidth()),j];}};return{minHeight:480,loaderEnabled:true,hideElements:false,isFirst:true,isRotated:false,isGif:false,isLogTimeDiff:false,isLogPrematureClose:false,timeDiff:undefined,cancelPin:OK.fn.empty,cancelCrop:OK.fn.empty,isFullScreen:function(){return f.fullscreenElement||f.mozFullScreenElement||f.webkitFullscreenElement;},centerLayer:function(g,l,j,d){var n=OK.photoLayer.isGif,h=OK.photoLayer.isRotated,k=h?b(g,j):b(g,d);function m(){if(!h&&!n){l.style.maxWidth="";l.style.maxHeight="";l.style.marginTop="";return;}if(l.complete||n){var u=h?Math.min(j,k[1]):Math.min(d,k[1]),o=h?Math.min(d,k[0]):Math.min(j,k[0]),t=h?d/j:j/d,p=Math.min((1/t)*o,u),v=h?p:Math.round(p*t),w=h?Math.round(p*t):p,s=a.OK.photoLayer.isFullScreen(),x;var r,q;if(s){x=$(g).height();r=(h?Math.min(j,768):Math.min(j,1024));q=(h?Math.min(d,1024):Math.min(d,768));}else{r=v;q=w;}l.style.maxWidth=r+"px";l.style.maxHeight=q+"px";if(h&&w>v){if(s){l.style.marginTop="-"+((d-x)/2)+"px";}else{l.style.marginTop="-"+((w-k[1])/2)+"px";}}else{l.style.marginTop="";}if(n){require(["jquery","OK/Gif"],function(z,y){z(l).closest(".gif").each(function(){y.updateDimensions(this,r,q);});});}return[l.style.maxWidth,l.style.maxHeight];}else{if(!n){a.setTimeout(m,10);}}}if(l&&!isNaN(j)&&!isNaN(d)){m();}},isShown:function(){var d=f.getElementById(c);if(d){return !a.OK.css.hasClass(d,"invisible")&&!a.OK.css.hasClass(d,"layer__disabled");}return false;},open:function(g,h){var d=f.getElementById(c);if(d){if(h){e=undefined;}a.OK.photoLayer.showLoader(500);a.OK.photoLayer.centerLayer(f.getElementById("pl_cw"),undefined,undefined,undefined);a.OK.css.removeClass(d,"invisible");a.OK.css.removeClass(d,"layer__disabled");a.OK.css.addClass(d,"__active");a.OK.loader.use("jQuery",function(){$("#hook_Block_PhotoLayerFooterRB").show();a.OK.loader.use("OKPhotoLayer",function(){a.OK.photoLayer.init(d);});OK.loader.use(["OKCustomJs"],function(){if(h){OK.Layers.push(g);}else{OK.Layers.replace(g);}});});OK.VideoPlayer.pauseAll();}},close:function(){a.OK.photoLayer.isFirst=true;},showLoader:function(g,h){var d=f.getElementById(c);if(!this.loaderEnabled){return;}},hideLoader:function(d){if(d){a.OK.logger.error("photo.fs","load_error");}},toggleFullScreenButton:a.OK.fn.empty,hideFullScreenButton:a.OK.fn.empty,destroyFastNavigation:a.OK.fn.empty};}(window,document));OK.debug52329=(function(){return{debug:function(d){var c=document.getElementById("viewImageLinkId");if(c&&"naturalWidth" in c&&"naturalHeight" in c&&"width" in c&&"height" in c){var b=c.naturalWidth,f=c.naturalHeight,a=c.width,e=c.height;if(b>d||f>d||a>d||e>d){var g="OL-52329 log:\nimageNaturalWidth ='"+b+"'\nimageNaturalHeight='"+f+"'\nimageWidth ='"+a+"'\nimageHeight='"+e+"'\ndesiredSize='"+d+"\nimage url='"+c.src+"'\n";OK.logging.logger.clob("photo.OL-52329",g);}}}};}());OK.cookie=(function(){return{setCookie:function(c,d,a,e){var f="",b;if(a){a=a*1000*60*60*24;b=new Date();b.setTime(b.getTime()+(a));f=";expires="+b.toUTCString();}document.cookie=c+"="+encodeURIComponent(d)+f+((e)?";path="+e:"");},readCookie:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length);}if(f.indexOf(e)==0){return f.substring(e.length,f.length);}}return null;},clearCookie:function(a,b){this.setCookie(a,"",0,b);}};}());define("OK/cookie",OK.cookie);OK.tkn=(function(){var b="",c=function(d){this.token=d;},a=function(){return this.token;};return{set:c,get:a};}());OK.device=(function(){return{isTouch:("ontouchend" in window)};}());var flashVerForGWT=[0,0,0];var okFlashVersion=[0,0,0];var minimumFlashVersion=9;function displayFlashContainer(){var g=document;var l=g.getElementById("flashMainContainerDiv");if(l==null){return;}var k=l.style;var m=g.getElementById("flashOldFlashContainerDiv").style;var a=g.getElementById("flashNoFlashContainerDiv").style;c(k);c(m);c(a);try{var b=l.className.indexOf("apiNoFlashWarning")!=-1&&typeof window.postMessage!="undefined";if(!b&&okFlashVersion[0]<minimumFlashVersion){if(okFlashVersion[0]==0){h(a);}else{h(m);}}else{h(k);if(l.className.indexOf("apiNoHide")==-1){var j=document.getElementById("hook_PopLayer_popLayer");if(j!=null){k.visibility="hidden";}}}}catch(f){h(a);}function h(d){d.display="block";}function c(d){d.display="none";}}function from1x1(b,a){if("lcPlayerReady"===b){OK.flash.musicFlashReady=a;OK.flash.musicFlashExist=true;}}function fixFlashForOpera(b){var a=document.getElementById(b);if(a!=null){a.outerHTML=a.outerHTML;}}(function(k,b){try{var c=null,s="undefined",g="object",h="Shockwave Flash",a="ShockwaveFlash.ShockwaveFlash",o="application/x-shockwave-flash",q=[0,0,0],n=c,r=b.plugins,p=parseInt,f="$1";function j(){try{var v=a+".";for(var u=11;u>8;u--){try{var t=new ActiveXObject(v+u);var d=t.GetVariable("$version");return d;}catch(w){}}return c;}catch(w){return c;}}if(typeof r!=s&&typeof r[h]==g){n=r[h].description;var m=b.mimeTypes;if(n&&!(typeof m!=s&&m[o]&&!m[o].enabledPlugin)){n=n.replace(/^.*\s+(\S+\s+\S+$)/,f);q[0]=p(n.replace(/^(.*)\..*$/,f),10);q[1]=p(n.replace(/^.*\.(.*)\s.*$/,f),10);q[2]=/[a-zA-Z]/.test(n)?p(n.replace(/^.*[a-zA-Z]+(.*)$/,f),10):0;}}else{if(typeof k.ActiveXObject!=s){try{var n=j();if(n){n=n.split(" ")[1].split(",");q=[p(n[0],10),p(n[1],10),p(n[2],10)];}}catch(l){}}}k.okFlashVersion=q;k.flashVerForGWT=q;OK.cookie.setCookie("_flashVersion",q[0],30,"/");}catch(l){}})(window,navigator);OK.il={handlers:{},ah:function(a){if(a&&a.handle&&a.id){var b=a.id;if(this.handlers[b]==null){this.handlers[b]=[];}this.handlers[b][this.handlers[b].length]=a;}},f:function(f,g,a){if(g&&this.handlers[g]){var e=this.handlers[g].length,b=this.handlers[g];for(var c=0;c<e;c++){var d=b[c];d.handle(f,a);}}},rh:function(c){if(c&&c.id){var g=c.id;if(this.handlers[g]==null||c.handlerId==null){return;}var d=this.handlers[g].length,a=this.handlers[g],e=c.handlerId,f=-1;for(var b=0;b<d;b++){var c=a[b];if(c.handlerId==e){f=b;break;}}if(f>-1){this.handlers[g].splice(f,1);}}}};OK.perf={};OK.pf={};OK.toolbar={openMessaging:function(){OK.logging.logger.error("mt.e","openMessaging");},startVideoCall:function(){OK.logging.logger.success("mt.e","startVideoCall");}};(function(){var c,f,d,e,g,b;var a=function(h){if(f){f.removeClass("__selected");}d=h;f=$(c[d]);b=f.attr("id");f.addClass("__selected");};OK.ts={show:function(){f=null;d=null;c=$(".js-ts_it");if(b){prevIndex=c.index($("#"+b));if(prevIndex>=0){a(prevIndex);}}if(g){if(g.find(".layer_ovr").length==0){g.append('<div class="layer_ovr"></div>');}}},hide:function(){b=null;if(g){g.removeClass("__focus");g.find(".layer_ovr").remove();}},bind:function(h,k,j){OK.loader.use(["jQuery","OKCustomJs"],function(){var l=$("#field_query");var m=$("#toolbar_search_block");g=$("#toolbar_search");$("#topPanel").on("click.ts",function(n){if(!$.contains(m[0],n.target)){k();}});if(j){$(window).on("blur.ts",k);}l.keydown(function(o){switch(o.which){case 38:a(d==null?c.length-1:(d-1+c.length)%c.length);o.preventDefault();break;case 40:a(d==null?0:(d+1)%c.length);o.preventDefault();break;case 13:if(f){var n=f.find(".js-ts_link");if(n.length){n[0].click();o.preventDefault();OK.logging.logger.success("search.usage","ts_goto","result");}else{OK.logging.logger.success("search.usage","ts_goto","detailed");}}else{OK.logging.logger.success("search.usage","ts_goto","default");}break;}}).focus(function(n){g.addClass("__focus");g.append('<div class="layer_ovr"></div>');e=l.val().trim();if(OK.Layers.stack.length>0){OK.Layers.unregisterAll();}h(e);OK.logging.logger.success("search.usage","toolbarFocus",Math.min(e.length,4));}).keyup(function(o){var n=l.val().trim();if(e!=n){e=n;h(e);}o.stopPropagation();});m.delegate(".js-ts_it","mouseenter",function(o){var n=c.index($(o.currentTarget));if(n>=0){a(n);}}).delegate(".js-ts_it","mouseleave",function(n){if(f){f.removeClass("__selected");f=null;d=null;b="ts_def";}});});},unbind:function(){$("#topPanel").off(".ts");$(window).off(".ts");}};})();OK.scrollBar=function(){OK.scrollBar.width=document.getElementById("sc").offsetWidth-document.getElementById("sch").offsetWidth;};OK.setContentWidth=function(){var c=OK.scrollBar.width,d;if(window.innerWidth){d=window.innerWidth-c;}else{d=document.documentElement.clientWidth;document.body.style.width=d+c;}d=Math.max(1000,d);var b=document.getElementById("topPanel");var a=document.getElementById("hook_Block_BodySwitcher");var e=document.getElementById("online-fr");if(a){a.style.width=d+"px";}if(b){b.style.width=d+"px";}if(e){e.style.width=d+"px";}};OK.scrollOnLoad=function(a,b){OK.scrollOnLoadHintArray=b;if(b&&b.length){window.scroll(0,b[0]);}};OK.resize=function(){};OK.addEvent=function(c,b,a){if(c.attachEvent){c.attachEvent("on"+b,a);}else{c.addEventListener(b,a,false);}};OK.removeEvent=function(c,b,a){if(c.detachEvent){c.detachEvent("on"+b,a);}else{c.removeEventListener(b,a,false);}};OK.stop=function(a){a=a||window.event;if(a.type==="click"&&OK.clickLog.getCounter()>0){a["log-clicks"]=true;return false;}if(a.stopPropagation){a.stopPropagation();}else{a.cancelBubble=true;}return false;};OK.hardStopEvent=function(a){a=a||window.event;if(a.stopPropagation){a.stopPropagation();}else{a.cancelBubble=true;}return false;};OK.isStopped=function(a){a=a||window.event;return a&&a["log-clicks"];};OK.eventTarget=function(a){var a=a||window.event;var b;if(a.target){b=a.target;}else{if(a.srcElement){b=a.srcElement;}else{b=window.document;}}if(b.nodeType===3){b=b.parentNode;}return b;};OK.submit=function(b){var c=b;if(b.tagName.toLowerCase()!=="form"){c=b.parentNode;}if(document.createEvent){var a=document.createEvent("Event");a.initEvent("submit",true,true);c.dispatchEvent(a);}else{if(document.createEventObject){var a=document.createEventObject();c.fireEvent("onsubmit",a);}}};OK.userCache={_users:[],getFromUserCache:function(a){return this._users[a];},updateUserCache:function(b){for(var a in b){this._users[a]=b[a];}},getLinkOnUserAvatar:function(a){return"";}};OK.perf=(function(b){try{var d=[];var a=b.performance||b.msPerformance||b.webkitPerformance||b.mozPerformance;if(!a||!a.getEntriesByType){return{loggers:[],flush:OK.fn.empty};}function e(){var f=a.getEntriesByType("resource");for(var k=0;k<f.length;k++){var l=f[k];for(var g=0;g<d.length;g++){try{d[g](l);}catch(h){OK.logging.info(h);}}}(a.clearResourceTimings||a.webkitClearResourceTimings||OK.fn.empty).call(a);}if(a.clearResourceTimings||a.webkitClearResourceTimings){a.addEventListener&&a.addEventListener("webkitresourcetimingbufferfull",e);setInterval(e,5000);}setTimeout(e,1);return{loggers:d,flush:e};}catch(c){OK.onload(function(){OK.logging.logger.success("error.perf.bootstrap",typeof c,c.message);});}}(window));(function(c,e){try{var d=OK.logging.logger;var b=/http:\/\/([a-z0-9\.]+(?::\d+)?)\/getImage\?photoId=\d+&photoType=(\d+)/i;var a=/([a-zA-Z]+)\d*\.mycdn\.me/i;OK.perf.loggers.push(function(k){if(k.initiatorType==="img"&&k.name){var g=b.exec(k.name);if(g){var l=g[1];var h=g[2];var j=a.exec(l);if(j){l=j[1];}else{l="other";}d.duration("traceimg",k.domainLookupEnd-k.domainLookupStart,l,h+".dns");d.duration("traceimg",k.connectEnd-k.connectStart,l,h+".connect");d.duration("traceimg",k.responseStart-k.requestStart,l,h+".req");if(k.responseEnd>0){d.duration("traceimg",k.responseStart?(k.responseEnd-k.responseStart):0,l,h+".resp");d.duration("traceimg",k.responseEnd-k.startTime,l,h+".full");d.duration("traceimg",k.responseEnd-k.fetchStart,l,h+".fetch");}else{d.success("traceimg",l,h+".noresp");}}}});}catch(f){OK.onload(function(){OK.logging.logger.success("error.perf.traceimg-bootstrap",typeof f,f.message);});}}(window));(function(){try{var a={};OK.perf.loggers.push(function(c){if(c.initiatorType==="link"&&c.name&&~c.name.indexOf(".css")){a[c.name]=c;}});OK.perf.cssEntries=a;}catch(b){OK.onload(function(){OK.logging.logger.success("error.perf.css-bootstrap",typeof b,b.message);});}}(window));OK.showTopicInLayerOnClick=function(c,a,k,g,b,l,h,d){if(c){for(var j=OK.eventTarget(a);j&&j!=c;j=j.parentNode){if(j.tagName=="A"){return;}}}var f=document.getElementById("mtLayer");if(f){require(["OK/MediaLayer"],function(e){e.showTopicInLayer(k,g,b,false,"",null,null,false,l,h,false,d);});return OK.stop(a);}};OK.historyManager=OK.historyManager||{isHistorySupported:function(){return window.history&&window.history.pushState&&window.history.replaceState;},getState:function(){var a=location.pathname+location.search;if(!a){if(typeof __gwt_currentHistoryItem!="undefined"){a=__gwt_currentHistoryItem||"/";}else{a="/";}}return a;},replaceState:function(a){__gwt_currentHistoryItem=a;window.history.replaceState(a,document.title,a);},pushState:function(a){__gwt_currentHistoryItem=a;window.history.pushState(a,document.title,a);},_cache:{},putItemToCache:function(b,a){OK.historyManager._cache[b]=a;},back:function(){return window.history.back();}};function sum(d){var a=0,b=Array.prototype.slice.call(arguments,0);for(var c=0;c<arguments.length;c++){a+=b[c];}return function(){return sum;};}OK.ntf={close:OK.fn.empty,lock:OK.fn.empty};OK.VideoPlayer=OK.VideoPlayer||{};OK.VideoPlayer.likeVideoFromFlash=function(a){if(!window.navigateOnUrlFromJS){document.location.href="/";return;}require(["jquery"],function(c){var d=c(".controls-list .controls-list_lk[data-l-id="+a+"]:first"),b=c(".widget-list .controls-list_lk[data-id1="+a+"]:first");if(!b.length){b=c(".widget .controls-list_lk[data-id1="+a+"]:first");}b.length&&b.data("clickFromVideo",true);d.length&&d.click();b.length&&b.click();});};OK.VideoPlayer.toggleSubscriptionFromFlash=function(a,b){if(!window.navigateOnUrlFromJS){document.location.href="/";return;}navigateOnUrlFromJS("/dk?cmd=VideoVitrinaSubscriptions&st.vvs.action="+b+"&st.vvs.aid="+a+"&st.cmd=userMain");};OK.VideoPlayer.OKVideoOpenUserUpload=function(){window.navigateOnUrlFromJS?window.navigateOnUrlFromJS("/video/myVideo"):document.location.href="/video/myVideo";};OK.VideoPlayer.addWatched=function(a){a=parseInt(a,10);OK.VideoPlayer.storage.addWatched(a);require(["OK/VideoVitrina"],function(b){b.colorMovieCard(a);});};OK.VideoPlayer.storage=(function(){var o="_vp_",b=1000,c=500;var t=(function(){var y=new Date,v,x;try{(v=window.localStorage).setItem(y,y);x=v.getItem(y)==y;v.removeItem(y);return x&&v;}catch(w){}}());function j(v){try{return t&&JSON.parse(t.getItem(o+v));}catch(w){return null;}}function a(v,w){try{t&&t.setItem(o+v,JSON.stringify(w));}catch(x){}}function g(v){t&&t.removeItem(o+v);}function m(){return t&&t.length;}function e(x,v,w){x.push(w);while(x.length>v){x.shift();}return x;}var r=j("volume");var h=j("lastVideoQualityName");var l=j("cid");var f=j("lastSpeed");var s=j("lastVideoShowTime");var n=j("lastDayVideoShown");var k=j("lastDayAdvShown");var d=j("movielastPlayingTime")||[];var u=j("watchedMoviesCache")||[];var q=j("autoplayEnabled");var p=j("cinemaModeEnabled");return{getVolume:function(){return r;},setVolume:function(v){a("volume",r=v);},getLastVideoQualityName:function(){return h;},setLastVideoQualityName:function(v){a("lastVideoQualityName",h=v);},getCid:function(){return l;},setCid:function(v){a("cid",l=v);},getLastSpeed:function(){return f;},setLastSpeed:function(v){a("lastSpeed",f=v);},getLastVideoShowTime:function(){return s;},setLastVideoShowTime:function(v){a("lastVideoShowTime",s=v);},getLastDayVideoShown:function(){return n;},setLastDayVideoShown:function(v){a("lastDayVideoShown",n=v);},getLastDayAdvShown:function(){return k;},setLastDayAdvShown:function(v){a("lastDayAdvShown",k=v);},getMovieLastPlayingTime:function(w){d=Array.isArray(d)?d:[];w=parseInt(w,10);for(var x=0,v=d.length;x<v;x++){if(d[x].id===w){return d[x].time;}}return 0;},setMovieLastPlayingTime:function(w,z){d=Array.isArray(d)?d:[];w=parseInt(w,10);var y={id:w,time:z};for(var x=0,v=d.length;x<v;x++){if(d[x].id===w){d.splice(x,1);break;}}a("movielastPlayingTime",e(d,c,y));},isWatched:function(v){return u.indexOf(v)!=-1;},addWatched:function(v){a("watchedMoviesCache",e(u,b,v));},getAlreadySeenSimilar:function(v){return u.slice(-v);},isAutoplayEnabled:function(){return q!==false;},setAutoplayEnabled:function(v){a("autoplayEnabled",q=v);},isCinemaModeEnabled:function(){return !!p;},setCinemaModeEnabled:function(v){a("cinemaModeEnabled",p=v);}};})();function likeVideoFromFlash(f){if(typeof navigateOnUrlFromJS!="function"){document.location.href="/";return;}var e=$("#"+f),d,a,c,b;for(;;){d=e.find(".klass_w");if(d.length>0){break;}e=e.parent();if(e.length==0){return;}}c=d.find("a.controls-list_lk")[0];if(c!=null){a=c.href;}else{c=d.find("span.controls-list_lk")[0];if(c!=null){a=c.getAttribute("data-href");b=c.getAttribute("data-l-p");if(b){a+="&st.v.cl="+b;}}}if(a){navigateOnUrlFromJS(a+"&st.v.ff=on");}}function OKVideoOpenUserUpload(){OK.VideoPlayer.OKVideoOpenUserUpload();}function runLinkedVideoCallbackFromJS(a){likeCallbackFromJs("VideoPlayer_player_"+a.callbackId+"Object",a.liked,a.likeCount);likeCallbackFromJs(a.callbackId+"E",a.liked,a.likeCount);likeCallbackFromJs("VideoPopup_playerObject",a.liked,a.likeCount);likeCallbackFromJs("VideoAutoplayPlayerObject",a.liked,a.likeCount);}function runLinkedVideoCallback(a){var b=document.getElementById("mc"+a.blockId);b.parentNode.removeChild(b);disableKlassByPlayerId("VideoPlayer_player_"+a.callbackId+"Object")||disableKlassByPlayerId(a.callbackId+"E")||disableKlassByPlayerId("VideoPopup_playerObject");}function runLinkedVideoCallbackU(a){var b=document.getElementById("mc"+a.blockId);b.parentNode.removeChild(b);runLinkedVideoCallbackFromJS(a);require(["jquery"],function(d){var c=d(".js-like-marker[data-l-id="+a.resourceId+"]");c.each(function(){var f=OK.hookModel.getNearestBlockHookId(this),e=d("#hook_Block_"+f);if(e.length){likeCallbackFromJs(e.data("playerId")+"E",a.liked,a.likeCount);}});});}function disableKlassByPlayerId(a){try{document.getElementById(a).disableKlassFromJs();}catch(b){}}function likeCallbackFromJs(b,c,a){try{document.getElementById(b).likeCallbackFromJs(c,a);}catch(d){}}OK.OpenVideoVitrina=function(a){a=a||"/dk?cmd=VideoVitrina&st.vv_ft=myVideo&st.vv_aux_page=1&st.vv_page=1&st.vv_how=on&st.cmd=userMain&st._aid=VAT_section_myVideo";(function b(){try{OK.hideToolbarPanes();var c=document.getElementById("hook_Block_VideoVitrina"),f=document.getElementById("vv-fast-template");if(c&&f){c.innerHTML=f.innerHTML;}navigateOnUrlFromJS(a);}catch(d){setTimeout(b,300);}})();};OK.VideoToolbarClick=function(e,a,f,d){a.onclick=null;if(f){var b=document.getElementById("hook_Block_PopLayerVideo"),c=document.getElementById("hook_Block_AutoplayLayerMovieRBlock");if(!b||!c||OK.css.hasClass(b,"layer__disabled")){OK.restorePopLayerIfAny();}}else{a.className+=" toolbar_nav_a__video__active";OK.OpenVideoVitrina(d);}};OK.VVImageError=function(a){a.parentNode.removeChild(a);};OK.VVPromoImageError=function(a){var b=a.parentNode.parentNode;b.removeChild(a.parentNode);if(b.childNodes.length<3){b.parentNode.style.display="none";}};OK.VVImageOnLoad=function(b){var a=" vid-card__loading";for(var c=b;c&&typeof c.className!=="undefined";c=c.parentNode){if(c.className.indexOf(a)>=0){c.className=c.className.replace(a,"");break;}}};OK.VideoPlayer.playMovie=function(b,c,d,a){require(["OK/VideoAutoplayLayer"],function(e){e.playMovie(b,c,d,a);});};OK.VideoPlayer.openMovie=function(a,d,b,c){require(["OK/VideoAutoplayLayer"],function(f){var e={"st.vpl.id":a};if(d){e["st._aid"]=d;}if(b){e["st.vpl.vs"]="album";e["st.vpl.albumId"]=b;}if(c){e["st.vpl.bu"]=c;}f.navigateToMovie("/dk?cmd=PopLayerVideo",e,a,true);});};OK.VideoPlayer.openShare=function(a,b){require(["OK/VideoAutoplayLayer"],function(d){var c={"st.vpl.sid":a};if(b){c["st._aid"]=b;}d.navigateToMovie("/dk?cmd=PopLayerVideo",c,a,true);});};OK.VideoPlayer.playNextMovie=function(b,c,d,a,e){require(["OK/VideoAutoplayLayer"],function(f){f.playNextMovie(b,c,d,a,e);});};OK.VideoPlayer.getNextMetadata=function(b,c,d,a,e){require(["OK/VideoAutoplayLayer"],function(f){f.getNextMetadata(b,c,d,a,false,e);});};OK.VideoPlayer.getNextMetadataSmall=function(b,c,d,a,e){require(["OK/VideoAutoplayLayer"],function(f){f.getNextMetadata(b,c,d,a,true,e);});};OK.VideoPlayer.toggleCinemaMode=function(a,c){if(!c&&a){c=a.slice(a.lastIndexOf("/")+1).replace(/(\?|&).*/,"");}if(!c){require(["OK/VideoAutoplayLayer"],function(d){OK.VideoPlayer.storage.setCinemaModeEnabled(d.toggleCinemaMode(true));});}else{var b="Open_Layer_From_Player";if(/^[0-9]+$/.test(c)){OK.VideoPlayer.openMovie(c,b);}else{OK.VideoPlayer.openShare(c,b);}}OK.logger.success("video.cinema",a?"middlesize":"toggle");};OK.VideoPlayer.pauseAll=function(){if(require.defined("OK/OKVideo")){require("OK/OKVideo").callPlayer("pause");}};OK.VideoPlayer.restart=function(){if(require.defined("OK/OKVideo")){require("OK/OKVideo").retry();}};OK.VideoPlayer.stop=function(){if(require.defined("OK/OKVideo")){require("OK/OKVideo").stop();}};OK.VideoPlayer.onPlay=function(d,a,b){if(!d&&window.odklMusic&&window.__getMusicFlash&&!OK.VideoPlayer._musicTrackId){OK.VideoPlayer._musicTrackId=window.odklMusic.playingTrack();if(OK.VideoPlayer._musicTrackId){var c=window.__getMusicFlash();c.lcPause();if(OK.VideoPlayer._volumeUpTimeout){clearTimeout(OK.VideoPlayer._volumeUpTimeout);OK.VideoPlayer._volumeUpTimeout=null;c.lcNewVolumeLevel(Math.min(window.odklMusic.getVolume(),1));}}}};OK.VideoPlayer.onPause=function(a,g,f){if(!a&&window.odklMusic&&window.__getMusicFlash&&OK.VideoPlayer._musicTrackId&&!OK.VideoPlayer._volumeUpTimeout){var e=window.__getMusicFlash(),d=window.require("OK/music/player"),h=d?d.getVolume():0,j=24,b=40;function c(k){var l=Math.min(h*Math.pow(k/j,2),1);OK.VideoPlayer._volumeUpTimeout=setTimeout(function(){e.lcNewVolumeLevel(l);if(k<j){c(k+1);}else{OK.VideoPlayer._volumeUpTimeout=null;}},b);}OK.VideoPlayer._musicTrackId=null;e.lcNewVolumeLevel(0);e.lcResume();c(1);}};OK.VideoPlayer.onEvent=function(b,c){var a="__videoPlayerEvent";require(["jquery"],function(d){d(document).trigger(a,[b,c]);});};OK.VideoPlayer.attachPromoBadge=function(a){require(["OK/utils/utils"],function(b){b.ajax({url:"/dk",data:{cmd:"videoCommand",a:"attachPromoBadge",id:a}});});};OK.VideoPlayer.helpFeedback=function(a){require(["OK/utils/utils"],function(b){b.ajax({url:"/dk",data:{cmd:"PopLayer","st.layer.cmd":"PopLayerHelpFeedback","st.layer.categorynew":"SERVICE","st.layer.subcategory":"VIDEO","st.layer.categoryValue":"VIEW","st.layer.origin":"VIDEO_LAYER","st.layer.badVideoLink":a||window.location.href}}).done(b.updateBlockModelCallback);});};OK.VideoPlayer.getRelated=function(d,c,a,b){require(["OK/utils/utils"],function(e){e.ajax({url:"/dk",data:{cmd:"videoCommand",a:"related",id:d,count:36,provider:c}}).done(a).fail(b);});};OK.VideoPlayer.openLogin=function(){require(["OK/utils/utils"],function(a){a.ajax({type:"GET",url:"/dk",data:{cmd:"PopLayerLogin","st.cmd":"anonymMain","st.redirect":decodeURIComponent(OK.historyManager.getState())}}).done(a.updateBlockModelCallback);});};function OKVideoUploaderMainPageChangeHandler(a){OK.OpenVideoVitrina();require(["OK/VideoVitrinaUploader"],function(b){b.onChangeHandler(a,"front");});}